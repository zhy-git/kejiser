!function(){var a={},b={},c=[],d=null,e={},f={},g={},h=null;utils.extend(UM,{defaultWidth:500,defaultHeight:500,registerUI:function(b,c){utils.each(b.split(/\s+/),function(b){a[b]=c})},setEditor:function(a){!b[a.id]&&(b[a.id]=a)},registerWidget:function(a,b,c){e[a]=$.extend2(b,{$root:"",_preventDefault:!1,root:function(a){return this.$root||(this.$root=a)},preventDefault:function(){this._preventDefault=!0},clear:!1}),c&&(f[a]=c)},getWidgetData:function(a){return e[a]},setWidgetBody:function(a,b,c){c._widgetData||utils.extend(c,{_widgetData:{},getWidgetData:function(a){return this._widgetData[a]},getWidgetCallback:function(a){var c=this;return function(){return f[a].apply(c,[c,b].concat(Array.prototype.slice.call(arguments,0)))}}});var d=e[a];return d?(d=c._widgetData[a],d||(d=e[a],d=c._widgetData[a]="function"==$.type(d)?d:utils.clone(d)),d.root(b.edui().getBodyContainer()),d.initContent(c,b),d._preventDefault||d.initEvent(c,b),d.width&&b.width(d.width),void 0):null},setActiveWidget:function(a){d=a},getEditor:function(a,c){var d=b[a]||(b[a]=this.createEditor(a,c));return h=h?Math.max(d.getOpt("zIndex"),h):d.getOpt("zIndex"),d},setTopEditor:function(a){$.each(b,function(b,c){a==c?a.$container&&a.$container.css("zIndex",h+1):c.$container&&c.$container.css("zIndex",c.getOpt("zIndex"))})},clearCache:function(a){b[a]&&delete b[a]},delEditor:function(a){var c;(c=b[a])&&c.destroy()},ready:function(a){c.push(a)},createEditor:function(a,b){function f(){var e,b=this.createUI("#"+a,d);d.key=a,d.ready(function(){$.each(c,function(a,b){$.proxy(b,d)()})}),e=d.options,e.minFrameWidth=e.initialFrameWidth?e.initialFrameWidth:e.initialFrameWidth=d.$body.width()||UM.defaultWidth,b.css({width:e.initialFrameWidth,zIndex:d.getOpt("zIndex")}),UM.browser.ie&&6===UM.browser.version&&document.execCommand("BackgroundImageCache",!1,!0),d.render(a),$.eduitooltip&&$.eduitooltip("attachTo",$("[data-original-title]",b)).css("z-index",d.getOpt("zIndex")+1),b.find("a").click(function(a){a.preventDefault()}),d.fireEvent("afteruiready")}var d=new UM.Editor(b),e=this;return d.langIsReady?$.proxy(f,e)():d.addListener("langReady",$.proxy(f,e)),d},createUI:function(b,c){var f,d=$(b),e=$('<div class="edui-container"><div class="edui-editor-body"></div></div>').insertBefore(d);return c.$container=e,c.container=e[0],c.$body=d,browser.ie&&browser.ie9above&&(f=$('<span style="padding:0;margin:0;height:0;width:0"></span>'),f.insertAfter(e)),$.each(a,function(a,b){var d=b.call(c,a);d&&(g[a]=d)}),e.find(".edui-editor-body").append(d).before(this.createToolbar(c.options,c)),e.find(".edui-toolbar").append($('<div class="edui-dialog-container"></div>')),e},createToolbar:function(a){var e,c=$.eduitoolbar(),d=c.edui();return a.toolbar&&a.toolbar.length?(e=[],$.each(a.toolbar,function(a,b){$.each(b.split(/\s+/),function(a,b){if("|"==b)$.eduiseparator&&e.push($.eduiseparator());else{var c=g[b];"fullscreen"==b?c&&e.unshift(c):c&&e.push(c)}}),e.length&&d.appendToBtnmenu(e)})):c.find(".edui-btn-toolbar").remove(),c}})}();