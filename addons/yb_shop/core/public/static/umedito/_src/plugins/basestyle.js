UM.plugins["basestyle"]=function(){var a=["bold","underline","superscript","subscript","italic","strikethrough"],b=this;b.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+shift+85",strikeThrough:"ctrl+shift+83"}),b.addOutputRule(function(a){$.each(a.getNodesByTagName("b i u strike s"),function(a,b){switch(b.tagName){case"b":b.tagName="strong";break;case"i":b.tagName="em";break;case"u":b.tagName="span",b.setStyle("text-decoration","underline");break;case"s":case"strike":b.tagName="span",b.setStyle("text-decoration","line-through")}})}),$.each(a,function(a,c){b.commands[c]={execCommand:function(a){var c,b=this.selection.getRange();return b.collapsed&&1!=this.queryCommandState(a)?(c=this.document.createElement({bold:"strong",underline:"u",superscript:"sup",subscript:"sub",italic:"em",strikethrough:"strike"}[a]),b.insertNode(c).setStart(c,0).setCursor(!1),!0):this.document.execCommand(a)},queryCommandState:function(a){if(browser.gecko)return this.document.queryCommandState(a);var b=this.selection.getStartElementPath(),c=!1;return $.each(b,function(b,d){switch(a){case"bold":if("STRONG"==d.nodeName||"B"==d.nodeName)return c=1,!1;break;case"underline":if("U"==d.nodeName||"SPAN"==d.nodeName&&"underline"==$(d).css("text-decoration"))return c=1,!1;break;case"superscript":if("SUP"==d.nodeName)return c=1,!1;break;case"subscript":if("SUB"==d.nodeName)return c=1,!1;break;case"italic":if("EM"==d.nodeName||"I"==d.nodeName)return c=1,!1;break;case"strikethrough":if("S"==d.nodeName||"STRIKE"==d.nodeName||"SPAN"==d.nodeName&&"line-through"==$(d).css("text-decoration"))return c=1,!1}}),c}}})};