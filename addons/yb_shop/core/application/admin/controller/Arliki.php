<?php
 namespace app\admin\controller; use app\admin\service\ArlikiService; use think\Db; class Arliki extends Base { public function __construct() { parent::__construct(); } public function exp_load() { goto aEfSY; m69eo: $this->assign("\154\151\x73\164", $data); goto AN26I; ykS0x: $no = request()->param("\x6e\x6f", ''); goto q6VUh; G1wNM: jBn1_: goto RnFwy; aEfSY: $res = ["\143\x6f\144\145" => 0, "\155\x65\x73\163\141\147\x65" => "\350\257\267\346\261\x82\xe6\210\220\345\x8a\237", "\x69\156\146\x6f" => array()]; goto ykS0x; xuVMR: goto W1l10; goto o4VLx; ZYDpl: if (!empty($no)) { goto ibg87; } goto SQaoC; RoE08: $data = $ser->exp_load($no); goto H9C2U; AN26I: $this->assign("\x63\157\144\145", $data["\143\x6f\x64\x65"]); goto ZwMFK; RnFwy: $json && ($data = json_encode($data)); goto LpjSP; MZqkN: $ser = new ArlikiService($this->bus_id); goto RoE08; VpPbU: $data["\x6d\x65\163\163\x61\147\145"] = "\345\x8d\x95\xe5\217\xb7\345\xbc\202\xe5\xb8\270\x2c\350\xaf\267\xe6\240\xb8\345\xae\236"; goto xuVMR; o4VLx: ibg87: goto MZqkN; d12sK: $show = request()->param("\x73\x68\157\167", false); goto ZYDpl; ZwMFK: return view(); goto G1wNM; H9C2U: W1l10: goto Mjb1O; SQaoC: $res["\x63\x6f\x64\145"] = 0; goto VpPbU; LpjSP: return $data; goto bspDX; Mjb1O: if (!$show) { goto jBn1_; } goto m69eo; q6VUh: $json = request()->param("\112\123\x4f\116", false); goto d12sK; bspDX: } public function send_sms() { goto i0Xpq; QZjf1: $param["\143\157\144\x65"] = $date; goto Uic2l; i0Xpq: $date = request()->param("\x63\x6f\x6e\x74\145\156\164", ''); goto e1wWX; e1wWX: $phone = request()->param("\160\150\157\x6e\145", ''); goto QZjf1; g32z0: $res = $ser->send_sms($param, $phone); goto P2ERD; Uic2l: $ser = new ArlikiService($this->bus_id); goto g32z0; P2ERD: } public function get_barcode($data, $width = 200, $height = 200) { $str = "\x3c\144\x69\166\40\x69\144\75\42\142\141\162\x5f\143\x6f\144\145\x22\x3e\x3c\x2f\x64\151\x76\x3e\x3c\163\143\x72\x69\x70\164\76\44\50\x66\165\x6e\x63\x74\151\x6f\x6e\x28\51\x7b\44\x28\42\x23\x62\141\x72\x5f\x63\x6f\x64\145\x22\51\56\161\x72\143\x6f\x64\145\x28\x7b\167\151\x64\164\150\x3a" . $width . "\54\150\145\151\147\x68\164\72" . $height . "\x2c\164\145\x78\x74\72\x22" . $data . "\42\x7d\x29\x3b\175\51\x3b\x3c\x2f\x73\x63\x72\151\160\x74\x3e"; return $str; } public function get_qrcode($data, $width = 1, $height = 20, $font_size = 10, $bg = "\x23\146\146\146", $line_color = "\x23\60\60\60", $show_value = true, $margin = 0) { goto rCd_N; YOeTq: Z2QGi: goto giSyK; p6tDE: $show_value = "\146\141\x6c\163\x65"; goto YOeTq; rad4k: return $str; goto KklXe; rCd_N: if ($show_value) { goto Z2QGi; } goto p6tDE; giSyK: $str = "\74\151\155\147\40\163\162\x63\75\42\x22\40\x69\x64\x3d\x22\161\x72\x5f\x63\x6f\144\x65\42\x3e\x3c\163\143\162\151\160\164\x3e\x76\141\x72\x20\x6f\x70\x74\151\x6f\x6e\163\x20\x3d\40\173\x66\x6f\x72\x6d\141\164\x3a\x20\x22\x43\x4f\x44\x45\x31\x32\x38\x22\54\x77\x69\x64\x74\x68\x3a" . $width . "\54\x68\145\x69\147\150\164\x3a" . $height . "\x2c\144\x69\x73\x70\154\x61\x79\126\x61\x6c\165\x65\x3a" . $show_value . "\x2c\x74\x65\170\x74\72\x22\42\x2c\x66\x6f\x6e\x74\117\x70\164\151\x6f\156\x73\72\x22\42\54\x66\x6f\x6e\x74\x3a\42\345\xbe\xae\350\xbd\257\xe9\x9b\x85\xe9\xbb\x91\x22\54\164\x65\x78\164\x41\154\x69\147\156\72\42\x63\145\x6e\164\x65\162\x22\54\164\x65\170\x74\120\157\163\x69\164\x69\157\156\x3a\x22\142\157\164\164\157\x6d\x22\54\164\145\170\x74\x4d\141\162\147\x69\x6e\x3a\60\x2c\146\157\156\x74\x53\151\172\x65\x3a" . $font_size . "\x2c\142\x61\x63\153\x67\162\x6f\x75\x6e\144\x3a\42" . $bg . "\x22\54\154\x69\x6e\x65\x43\x6f\x6c\x6f\162\x3a\42" . $line_color . "\42\x2c\155\x61\x72\x67\x69\156\72" . $margin . "\40\175\73\x24\x28\x66\165\156\143\164\151\x6f\x6e\x28\51\173\x24\x28\42\43\x71\162\x5f\x63\157\144\x65\x22\51\56\x4a\x73\102\x61\162\x63\x6f\144\x65\50\x22" . $data . "\x22\54\x6f\x70\164\151\157\x6e\163\x29\x3b\175\51\x3b\74\57\x73\143\162\151\x70\x74\x3e"; goto rad4k; KklXe: } public function get_refund_info($id, $type) { goto BNPxv; ft1Kz: XMAJ3: goto NwZp5; OSv8C: xo7DX: goto IpYck; raD7E: if (!empty($ii)) { goto XMAJ3; } goto K3vuQ; BNPxv: $ii = Db::name("\171\142\163\143\137\x6f\x72\x64\145\162\137\162\145\146\x75\156\x64")->where(["\157\162\x64\145\162\x5f\x69\144" => $id, "\x74\x79\x70\x65" => $type])->order("\151\x64", "\x64\145\163\143")->find(); goto raD7E; NwZp5: if (empty($ii["\141\160\160\154\x79\137\x72\145\146\165\156\144"])) { goto xo7DX; } goto igTpE; K3vuQ: return ''; goto ft1Kz; igTpE: return $ii["\x61\x70\160\x6c\x79\137\162\x65\x66\165\156\x64"]; goto OSv8C; IpYck: return $ii["\162\x65\146\165\x6e\144\137\x72\x65\141\163\157\x6e"]; goto itgZR; itgZR: } }
