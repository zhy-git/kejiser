<?php
 namespace app\admin\controller; use app\admin\service\Images; use think\Controller; use think\Config; use think\Image; define("\125\x50\114\117\101\x44\x5f\126\111\x44\105\x4f", Config::get("\166\151\145\167\137\162\145\x70\154\141\143\145\137\x73\164\162\56\125\x50\114\x4f\x41\104\137\x56\111\104\105\117")); class UploadAttr extends Controller { private $return = array(); private $file_path = ''; private $file_name = ''; private $file_size = 0; private $file_type = ''; private $upload_type = 1; public function uploadFile() { goto y0gHt; y0gHt: $this->file_path = SITE_PATH; goto fKO8q; Ayo4v: dHiO8: goto ZZCCx; rmflC: goto QWv6I; goto rQNDK; R3VG3: $image_size = getimagesize($ok["\160\141\164\x68"]); goto EdVQu; lt8yH: if (!($this->file_size == 0)) { goto dtU22; } goto J8NI0; lJJ83: if (strstr(UPLOAD_VIDEO, $this->file_path)) { goto wXGfI; } goto BKlvC; GAe4f: $suffix = count($file_name_explode) - 1; goto ztFb1; Vycb7: return $this->ajaxFileReturn(); goto V9Uux; QNqzS: $this->return["\155\x65\x73\163\x61\147\x65"] = "\xe4\270\x8a\xe4\xbc\xa0\xe6\x88\x90\xe5\212\x9f"; goto AdQ74; EdVQu: if ($image_size) { goto kK8On; } goto c7xUs; Ha1Mg: $guid = time(); goto wt1Br; Fg3Vh: if ($ok["\143\157\x64\145"]) { goto ag260; } goto c3oH5; sEbYo: if ($this->validationFile()) { goto rmvF3; } goto qP4XR; j8A0W: $this->return["\x63\157\144\x65"] = 1; goto wAmSJ; zkzOb: $this->return["\x6d\x65\x73\x73\x61\147\145"] = "\xe4\xb8\x8a\xe4\xbc\240\345\xa4\xb1\xe8\264\xa5"; goto UE2vG; J8NI0: $this->return["\155\145\163\x73\141\x67\145"] = "\346\x96\x87\344\xbb\xb6\345\xa4\xa7\xe5\260\x8f\344\270\xba\60\115\x42"; goto Vycb7; AdQ74: goto viT0q; goto XIhy2; P3hRn: $newfile = "\146\141\166\x69\x63\x6f\156\x2e\151\x63\157"; goto TrRlj; Gu0_F: $this->file_size = $_FILES["\146\x69\154\x65\x5f\165\x70\x6c\x6f\x61\x64"]["\x73\151\172\145"]; goto Dk6XA; JjeqZ: rmvF3: goto Ha1Mg; wt1Br: $file_name_explode = explode("\56", $this->file_name); goto GAe4f; q9hqo: jLPYu: goto M40cJ; wAmSJ: $this->return["\x64\x61\164\141"] = $ok["\x70\x61\x74\150"]; goto QNqzS; tRbta: $retval = 1; goto Cwz4h; qOmBT: if ($this->file_path == "\x75\160\x6c\x6f\x61\144\x2f\x67\x6f\157\x64\163\x2f") { goto qnfXb; } goto j8A0W; qP4XR: return $this->ajaxFileReturn(); goto JjeqZ; Dk6XA: $this->file_type = $_FILES["\x66\x69\154\x65\137\x75\160\154\157\141\144"]["\164\171\x70\x65"]; goto lt8yH; zk3a_: goto jLPYu; goto bxKLa; M40cJ: return $this->ajaxFileReturn(); goto NSICQ; m4FmL: wXGfI: goto q9hqo; e1L7l: $this->return["\144\x61\x74\x61"] = $ok["\x70\x61\164\x68"]; goto Ayo4v; ZZCCx: viT0q: goto tY8f9; UE2vG: goto dHiO8; goto lsTwU; BKlvC: @unlink($_FILES["\146\x69\154\x65\137\165\x70\x6c\157\141\144"]); goto R3VG3; nW4hy: $this->return["\x6d\145\163\163\x61\x67\145"] = "\xe4\270\x8a\xe4\xbc\240\xe6\210\x90\xe5\212\x9f"; goto e1L7l; bxKLa: ag260: goto lJJ83; XIhy2: qnfXb: goto tRbta; tY8f9: QWv6I: goto m4FmL; c7xUs: $this->return["\x6d\x65\x73\163\141\147\x65"] = "\xe8\xaf\xb7\xe6\243\200\xe6\x9f\245\xe6\202\xa8\347\232\x84\344\xb8\x8a\344\274\240\345\217\x82\xe6\x95\xb0\351\x85\215\xe7\xbd\256\xe6\x88\x96\xe4\xb8\212\344\xbc\xa0\xe7\232\x84\xe6\226\207\344\273\266\346\x98\xaf\xe5\220\xa6\346\234\x89\xe8\257\257"; goto rmflC; Cwz4h: if ($retval > 0) { goto MqK7_; } goto zkzOb; e0kg4: $this->return["\143\157\x64\145"] = $retval; goto nW4hy; lsTwU: MqK7_: goto e0kg4; fKO8q: $this->file_name = $_FILES["\x66\x69\x6c\x65\137\165\160\154\x6f\141\x64"]["\x6e\141\x6d\145"]; goto Gu0_F; ztFb1: $ext = "\56" . $file_name_explode[$suffix]; goto P3hRn; c3oH5: $this->return["\155\145\x73\163\141\147\x65"] = "\350\257\267\xe6\xa3\200\xe6\x9f\245\xe6\x82\250\347\232\x84\344\xb8\212\344\274\240\xe5\x8f\x82\xe6\225\xb0\xe9\205\x8d\xe7\275\256\xe6\210\x96\xe4\xb8\212\xe4\274\240\347\232\x84\xe6\226\207\xe4\273\266\346\230\xaf\xe5\x90\246\346\x9c\x89\xe8\xaf\xaf"; goto zk3a_; rQNDK: kK8On: goto qOmBT; TrRlj: $ok = $this->moveUploadFile($_FILES["\146\151\x6c\145\137\x75\x70\154\x6f\141\144"]["\x74\155\160\137\156\x61\155\x65"], $this->file_path . $newfile); goto Fg3Vh; V9Uux: dtU22: goto sEbYo; NSICQ: } private function ajaxFileReturn() { goto XXYgf; Ox7Tr: $this->return["\155\145\x73\163\x61\x67\145"] = ''; goto kRbq8; QkBNr: $this->return["\x64\x61\164\141"] = ''; goto RNgop; vZo0E: lDkSk: goto n1WuN; XhoFk: $this->return["\143\157\144\145"] = 0; goto vZo0E; n1WuN: if (!(empty($this->return["\x6d\x65\x73\x73\x61\147\145"]) || null == $this->return["\155\145\163\x73\x61\147\145"] || '' == $this->return["\x6d\145\163\x73\x61\147\145"])) { goto XzhXB; } goto Ox7Tr; q0eIO: if (!(empty($this->return["\144\x61\164\141"]) || null == $this->return["\144\x61\164\141"] || '' == $this->return["\x64\141\x74\x61"])) { goto bw8oS; } goto QkBNr; XXYgf: if (!(empty($this->return["\143\x6f\144\x65"]) || null == $this->return["\x63\x6f\x64\x65"] || '' == $this->return["\143\157\144\145"])) { goto lDkSk; } goto XhoFk; kRbq8: XzhXB: goto q0eIO; WTBc7: return json_encode($this->return); goto GYyIt; RNgop: bw8oS: goto WTBc7; GYyIt: } private function validationFile() { goto OvSYB; dIUlx: return $flag; goto Xttft; Qo1hQ: if (!($this->file_type != "\151\155\141\x67\145\x2f\147\x69\146" && $this->file_type != "\151\x6d\x61\147\145\x2f\160\156\147" && $this->file_type != "\x69\x6d\x61\x67\145\x2f\x6a\160\145\147" && $this->file_size > 3000000)) { goto Bf0rE; } goto a1bsX; g0dm0: $flag = false; goto P1AxQ; a1bsX: $this->return["\x6d\145\x73\163\141\147\x65"] = "\xe6\x96\x87\xe4\xbb\266\344\xb8\x8a\xe4\274\240\345\244\261\350\264\245\x2c\xe8\xaf\267\346\243\x80\xe6\x9f\245\xe6\202\250\xe4\270\212\344\274\240\xe7\x9a\204\346\226\207\344\xbb\266\347\261\xbb\xe5\x9e\213\54\xe6\226\207\344\273\xb6\345\xa4\247\345\260\217\344\270\x8d\xe8\x83\xbd\350\xb6\x85\350\xbf\207\63\115\102"; goto g0dm0; OvSYB: $flag = true; goto Qo1hQ; P1AxQ: Bf0rE: goto dIUlx; Xttft: } public function moveUploadFile($file_path, $key) { goto ZGyex; G1v3i: $result = ["\x63\x6f\x64\x65" => $ok, "\x70\141\164\150" => $key, "\144\x6f\x6d\x61\x69\156" => '', "\x62\165\143\153\x65\x74" => '']; goto IUQJ6; o6lzV: $ok = @move_uploaded_file($file_path, $key); goto G1v3i; T42id: return $result; goto V7wO1; IUQJ6: SmuNH: goto T42id; ZGyex: if (!($this->upload_type == 1)) { goto SmuNH; } goto o6lzV; V7wO1: } }
