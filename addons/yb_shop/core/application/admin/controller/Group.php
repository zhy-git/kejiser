<?php
 namespace app\admin\controller; use think\Db; use think\Request; require EXTEND_PATH . "\x57\170\x70\141\171\57\x57\170\120\x61\171\x2e\x41\160\x69\56\160\x68\160"; class Group extends Base { public function index() { return view(); } public function type() { goto OTM8x; BXS4g: $search = "\45" . $soname . "\x25"; goto OBeqN; lGqBz: $this->assign("\x73\157\x6e\141\x6d\x65", $soname); goto D8bHl; OTM8x: $url = request()->query(); goto yvxSV; lW_04: zx2fH: goto BXS4g; D3C_u: LMMd_: goto xhynA; iL8GE: $list = Db::name("\x79\x62\163\143\137\160\164\x5f\143\x61\164\x65\x67\x6f\x72\x79")->where("\x6d\143\x68\x5f\x69\144", $this->bus_id)->order("\x73\x6f\162\x74\x20\x61\163\x63")->paginate(15, false, $config = ["\x71\x75\x65\x72\171" => ["\163" => $url]]); goto fE_fp; OBeqN: $list = Db::name("\171\x62\163\143\137\x70\164\137\143\141\164\x65\147\x6f\162\x79")->where("\156\x61\155\145", "\x6c\x69\153\x65", $search)->where("\155\143\150\137\x69\x64", $this->bus_id)->order("\163\157\162\164\x20\x61\x73\x63")->paginate(15, false, $config = ["\x71\165\x65\162\x79" => ["\163" => $url, "\x73\157\x6e\x61\x6d\145" => $soname]]); goto D3C_u; yvxSV: $url = explode("\x3d\57", $url); goto d3qom; d3qom: $url = explode("\46", $url[1]); goto jPnIP; lH9oV: if ($soname != '' && !empty($soname)) { goto zx2fH; } goto iL8GE; jPnIP: $url = "\x2f" . $url[0]; goto mxeuC; mxeuC: $soname = request()->param("\163\x6f\x6e\x61\155\145"); goto lH9oV; D8bHl: return view(); goto XKCHF; xhynA: $this->assign("\x6c\x69\x73\x74", $list); goto lGqBz; fE_fp: goto LMMd_; goto lW_04; XKCHF: } public function type_add() { goto PF__z; OAAto: kBQ2i: goto u_9X4; p0Y84: $data["\155\x63\x68\x5f\x69\x64"] = $this->bus_id; goto Qh72_; Qh72_: $result = Db::name("\x79\142\163\x63\137\160\164\137\x63\141\x74\145\147\x6f\162\x79")->insert($data); goto S2CgA; S2CgA: if ($result !== false) { goto Gja_d; } goto NdbGy; UP8af: goto Uw7U2; goto SqZBN; Bdvov: $data = request()->post(); goto p0Y84; eCUQR: return AjaxReturn(1); goto cYm92; PF__z: if (!(request()->isAjax() && request()->isPost())) { goto kBQ2i; } goto Bdvov; NdbGy: return AjaxReturn(0); goto UP8af; cYm92: Uw7U2: goto OAAto; SqZBN: Gja_d: goto eCUQR; u_9X4: return view(); goto YHbSX; YHbSX: } public function type_edit() { goto QBEm1; KFETK: $id = request()->get("\x69\x64"); goto y9nkQ; Yt8yf: if ($result !== false) { goto IzYup; } goto c_Xje; HtAIX: $data = request()->post(); goto tKklS; b2sLw: return view(); goto ltiIX; as3p4: return AjaxReturn(1); goto praQt; wDklY: $list = Db::name("\x79\x62\x73\x63\x5f\x70\164\137\x63\x61\164\x65\147\x6f\162\171")->where("\151\x64", $id)->where("\x6d\143\x68\x5f\x69\x64", $this->bus_id)->find(); goto m5mk4; y9nkQ: if (!($id != '' && !empty($id))) { goto JRdmz; } goto wDklY; XM5iI: goto w8VcU; goto b_AAk; ltiIX: JRdmz: goto HQBlm; QBEm1: if (!(request()->isAjax() && request()->isPost())) { goto v87Lt; } goto HtAIX; m5mk4: $this->assign("\154\x69\163\164", $list); goto b2sLw; b_AAk: IzYup: goto as3p4; tKklS: $result = Db::name("\171\142\x73\x63\137\160\x74\137\143\x61\164\145\147\157\162\171")->where("\x69\144", $data["\x69\x64"])->where("\155\x63\150\137\151\144", $this->bus_id)->update($data); goto Yt8yf; praQt: w8VcU: goto d1ikb; c_Xje: return AjaxReturn(0); goto XM5iI; d1ikb: v87Lt: goto KFETK; HQBlm: } public function type_del() { goto M9RWl; ipGfk: $res = Db::name("\x79\142\x73\x63\x5f\160\x74\137\143\141\x74\145\x67\x6f\162\171")->where("\151\144", $id)->delete(); goto Ghyb9; Ghyb9: return AjaxReturn($res); goto DkbNF; M9RWl: $id = input("\160\x61\162\141\155\56\x69\144"); goto ipGfk; DkbNF: } public function group_list() { goto biGTf; BWR8D: $data["\147\x72\157\165\160\137\156\x61\x6d\x65"] = empty($data["\147\x72\157\x75\160\137\x6e\141\155\x65"]) ? '' : $data["\147\162\x6f\165\160\137\156\x61\x6d\145"]; goto SW9Tk; TYIhR: $data = Request::instance()->param(); goto TZYAs; Va1Mq: $url = "\x2f" . $url[0]; goto TYIhR; TZYAs: $where = []; goto FQL0X; biGTf: $url = request()->query(); goto epnz_; qW5Vk: return view(); goto t2C_0; epnz_: $url = explode("\x3d\57", $url); goto cciyv; FQL0X: empty($data["\x67\162\157\x75\160\137\x6e\x61\x6d\x65"]) || ($where["\x6e\x61\155\145"] = ["\x6c\151\x6b\145", "\45" . $data["\x67\162\157\165\160\x5f\x6e\x61\155\145"] . "\45"]); goto BWR8D; CvgIh: $this->assign("\147\162\x6f\x75\160\x5f\156\141\155\145", $data["\x67\162\157\165\x70\x5f\156\141\x6d\145"]); goto qW5Vk; SW9Tk: $list = Db::name("\x79\x62\163\143\137\160\164\x5f\x67\x6f\157\x64\x73")->where("\x6d\x63\x68\x5f\x69\144", $this->bus_id)->where($where)->order("\151\x64\x20\144\145\x73\x63")->paginate(15, false, $config = ["\161\x75\145\x72\171" => ["\163" => $url, "\x67\x72\x6f\x75\160\137\x6e\x61\x6d\145" => $data["\x67\162\157\x75\x70\137\x6e\x61\155\145"]]]); goto ptmKG; ptmKG: $this->assign("\x6c\x69\163\x74", $list); goto CvgIh; cciyv: $url = explode("\46", $url[1]); goto Va1Mq; t2C_0: } public function group_add() { goto cO1t_; ne62V: $data["\x69\x6e\x74\x72\x6f"] = input("\x70\x61\x72\x61\x6d\56\x64\x65\164\141\151\154\x73"); goto oXJrc; Y2fsg: aHL6v: goto tr054; dgl8L: $res = Db::name("\x79\x62\x73\143\137\x70\164\x5f\147\x6f\x6f\144\x73")->insert($data); goto ZcBVp; bC866: $arr_str_img = ''; goto zQlcV; oXJrc: $data["\x67\160\162\x69\x63\x65"] = input("\x70\x61\162\141\x6d\x2e\x67\162\x6f\x75\x70\137\x6d\x6f\156\x65\x79"); goto FXcPw; y1SMp: $data["\163\x74\157\x63\x6b"] = input("\x70\141\x72\x61\x6d\x2e\163\x74\157\x63\x6b"); goto fRbWS; EFjLc: $data["\x67\162\157\165\160\116\x75\155"] = input("\160\141\x72\141\155\x2e\147\162\x6f\165\160\x5f\156\x75\x6d"); goto WhtVt; DpUnO: $data["\x6e\x61\155\145"] = input("\160\141\x72\x61\155\x2e\x67\162\157\x75\160\137\x6e\x61\155\x65"); goto qOvY4; WhtVt: $data["\154\151\155\151\x74\124\x69\x6d\x65"] = input("\x70\141\162\141\155\x2e\x67\x72\157\x75\160\137\164\151\x6d\145"); goto y1SMp; tr054: $arr_str_img = substr($arr_str_img, 0, strlen($arr_str_img) - 1); goto Euoat; cO1t_: if (!request()->isAjax()) { goto shjeh; } goto DpUnO; oPSlq: $data["\x75\x6e\x69\164"] = input("\160\x61\162\141\x6d\x2e\165\x6e\151\164"); goto ymhDD; Cnhen: $data["\x63\x69\x64"] = input("\x70\141\162\x61\x6d\56\164\171\x70\x65"); goto ne62V; yeOmZ: return view(); goto tivBJ; IY5u0: $data["\x73\141\x6c\145\116\165\x6d"] = input("\160\141\x72\141\155\56\x73\x61\154\145\x73"); goto VgaRW; JWpzM: shjeh: goto T1uK2; Euoat: $data["\x61\x6c\142\165\155"] = $arr_str_img; goto dgl8L; fRbWS: $data["\155\x63\150\x5f\151\144"] = $this->bus_id; goto IY5u0; ZcBVp: return AjaxReturn($res); goto JWpzM; FXcPw: $data["\x70\162\151\x63\x65"] = input("\x70\x61\162\141\155\56\x70\162\x69\x63\x65"); goto EFjLc; T1uK2: $group_type = Db::name("\171\x62\x73\143\137\x70\x74\137\143\141\164\x65\x67\157\x72\x79")->where("\x6d\143\150\x5f\x69\x64", $this->bus_id)->select(); goto sU1gN; sU1gN: $this->assign("\x67\162\x6f\165\x70\x5f\x74\171\160\145", $group_type); goto yeOmZ; Kzkzp: $data["\151\156\x64\x65\170\x49\155\147"] = $array_img[0]["\151\144"]; goto bC866; zQlcV: foreach ($array_img as $k => $v) { $arr_str_img .= $v["\x69\x64"] . "\54"; NvkLG: } goto Y2fsg; ymhDD: $array_img = json_decode(input("\160\x61\162\141\x6d\x2e\151\x6d\147\137\141\162\162", ''), true); goto Kzkzp; VgaRW: $data["\142\x72\151\x65\146"] = input("\x70\141\x72\x61\x6d\56\x62\x72\x69\x65\146"); goto oPSlq; qOvY4: $data["\x69\155\147"] = input("\160\141\x72\141\x6d\56\x69\x6d\147"); goto Cnhen; tivBJ: } public function group_edit() { goto xuCdS; oL2ST: $res = Db::name("\x79\x62\163\x63\137\160\x74\137\147\157\x6f\x64\x73")->where("\x69\x64", $id)->update($data); goto jePPY; xkvjw: f3suL: goto mS0xH; web9N: goto CZjjL; goto mr8z_; YbFBV: $list = Db::name("\x79\x62\163\x63\137\160\164\x5f\147\157\x6f\144\x73")->where("\151\x64", $id)->find(); goto P6d0G; c_Zo1: $data["\x73\164\157\143\x6b"] = input("\160\141\x72\x61\x6d\56\x73\x74\157\x63\x6b"); goto QVXAX; L8LKZ: $data["\x67\x70\x72\x69\x63\145"] = input("\160\141\162\x61\x6d\56\x67\x72\x6f\x75\160\137\x6d\157\x6e\x65\171"); goto xuUFu; jePPY: if ($res !== false) { goto CZWPY; } goto qCMJ0; foMe8: return AjaxReturn(1); goto RwkMZ; eie_Q: $data["\x69\155\147"] = input("\160\x61\x72\x61\155\56\x69\x6d\x67"); goto EqY53; mTC0b: $this->assign("\147\x72\x6f\x75\160\137\164\x79\x70\x65", $group_type); goto F1Y_1; lz1OC: $id = input("\x70\141\x72\x61\155\56\151\x64"); goto ndr6P; mCWSv: $array_img = json_decode(input("\x70\x61\162\x61\x6d\x2e\151\x6d\147\137\141\162\162", ''), true); goto h9vXA; P6d0G: $img_id = explode("\54", $list["\141\154\142\165\x6d"]); goto yFeoj; xuCdS: if (!request()->isAjax()) { goto z5kpZ; } goto lz1OC; ndr6P: $data["\156\141\x6d\145"] = input("\160\x61\x72\x61\x6d\56\147\x72\x6f\x75\x70\x5f\156\x61\155\145"); goto eie_Q; c1w_s: $data["\165\156\151\x74"] = input("\160\141\x72\x61\x6d\x2e\165\156\151\x74"); goto mCWSv; nOqa9: z5kpZ: goto GoINy; F1Y_1: return view(); goto fVqAT; EcXUZ: $arr_str_img = substr($arr_str_img, 0, strlen($arr_str_img) - 1); goto Gz0zj; GoINy: $id = input("\x70\141\162\x61\x6d\56\151\x64", ''); goto YbFBV; qV0a8: $list["\141\162\162\141\x79\x5f\151\x6d\x67"] = json_encode($arr); goto dU5cY; oczFU: JaQrp: goto EcXUZ; EqY53: $data["\x63\x69\x64"] = input("\160\141\162\x61\x6d\x2e\x74\171\160\x65"); goto TKfIW; ouO_f: DdkhU: goto xokm0; mS0xH: $a++; goto Gok_E; h9vXA: $data["\151\x6e\x64\145\170\x49\x6d\147"] = $array_img[0]["\151\x64"]; goto Mgreg; oinhu: $arr[$a]["\x75\162\154"] = $img_url["\151\x6d\x67\x5f\143\x6f\166\x65\162"]; goto xkvjw; hNbPl: $data["\x73\141\x6c\145\x4e\165\155"] = input("\x70\x61\x72\141\x6d\x2e\163\141\x6c\x65\163"); goto oYEpY; Gz0zj: $data["\x61\x6c\142\x75\155"] = $arr_str_img; goto oL2ST; raJ0V: xNcYM: goto qV0a8; RwkMZ: CZjjL: goto nOqa9; Mgreg: $arr_str_img = ''; goto ByBaV; QZOoo: $data["\x67\x72\x6f\x75\x70\x4e\165\x6d"] = input("\x70\141\x72\141\155\x2e\x67\x72\157\165\x70\x5f\x6e\x75\x6d"); goto l0ByW; JOkER: $group_type = Db::name("\x79\x62\x73\x63\137\160\164\x5f\x63\141\x74\x65\x67\157\x72\171")->where("\x6d\x63\x68\x5f\x69\144", $this->bus_id)->select(); goto mTC0b; TKfIW: $data["\151\156\x74\162\157"] = input("\x70\x61\162\x61\x6d\56\x64\x65\164\x61\x69\x6c\x73"); goto L8LKZ; qCMJ0: return AjaxReturn(0); goto web9N; yFeoj: $arr = []; goto DCXNy; dU5cY: $this->assign("\x6c\151\x73\x74", $list); goto JOkER; ByBaV: foreach ($array_img as $k => $v) { $arr_str_img .= $v["\x69\144"] . "\x2c"; kY3Wm: } goto oczFU; l0ByW: $data["\x6c\x69\155\151\x74\124\151\155\x65"] = input("\x70\141\162\x61\x6d\x2e\147\162\x6f\x75\x70\x5f\x74\x69\x6d\x65"); goto c_Zo1; xokm0: if (!($a < count($img_id))) { goto xNcYM; } goto HUIbf; mr8z_: CZWPY: goto foMe8; oYEpY: $data["\142\x72\151\x65\146"] = input("\x70\141\162\x61\155\56\142\162\151\x65\146"); goto c1w_s; HUIbf: $img_url = Db::name("\171\142\x73\143\137\151\155\141\x67\x65\163")->where("\x69\155\147\137\151\144", $img_id[$a])->find(); goto xnwjV; QVXAX: $data["\155\x63\150\137\x69\x64"] = $this->bus_id; goto hNbPl; xuUFu: $data["\x70\162\x69\x63\145"] = input("\160\141\162\x61\x6d\x2e\160\x72\151\143\145"); goto QZOoo; Gok_E: goto DdkhU; goto raJ0V; DCXNy: $a = 0; goto ouO_f; xnwjV: $arr[$a]["\151\144"] = $img_id[$a]; goto oinhu; fVqAT: } public function group_status() { goto g9guu; qsZaA: return AjaxReturn($res); goto acZv_; Luw8w: if ($key == "\x6f\146\x66") { goto oWUtQ; } goto X2WR_; mfn_f: Sobl0: goto qsZaA; mbJSy: $key = input("\x70\x61\x72\141\x6d\x2e\153\x65\171"); goto Luw8w; B76Ur: oWUtQ: goto Xs3To; X2WR_: $res = Db::name("\x79\x62\163\x63\x5f\160\164\x5f\x67\157\x6f\144\163")->where("\151\x64", $id)->update(["\151\x73\123\150\x6f\167" => 1]); goto nJejw; g9guu: $id = input("\x70\141\x72\141\x6d\56\151\x64"); goto mbJSy; nJejw: goto Sobl0; goto B76Ur; Xs3To: $res = Db::name("\x79\x62\x73\x63\137\160\164\137\x67\157\157\144\x73")->where("\151\x64", $id)->update(["\x69\163\x53\x68\157\167" => 2]); goto mfn_f; acZv_: } public function group_carousel() { goto p1arF; aYKEm: $url = explode("\x3d\57", $url); goto EIo77; bIh7i: $page = $list->render(); goto o1wdo; o1wdo: $this->assign("\154\x69\x73\x74", $list); goto joPj_; mlch6: return view(); goto Dp6Qf; p1arF: $url = request()->query(); goto aYKEm; dwl2d: $list = Db::name("\x79\x62\163\143\x5f\160\164\137\x61\144\166\x65\x72\x74")->where("\155\143\x68\137\151\144", $this->bus_id)->order("\163\157\x72\164")->paginate(15, false, $config = ["\x71\165\x65\162\171" => ["\163" => $url]]); goto bIh7i; joPj_: $this->assign("\x70\141\x67\145", $page); goto mlch6; EIo77: $url = explode("\46", $url[1]); goto UGjmW; UGjmW: $url = "\x2f" . $url[0]; goto dwl2d; Dp6Qf: } public function group_carousel_sort() { goto qBEQN; qBEQN: $id = input("\160\x61\x72\x61\155\x2e\x69\144"); goto BSKPq; BSKPq: $val = input("\x70\x61\162\141\x6d\x2e\x76\x61\x6c"); goto HA8I0; a2qjQ: return AjaxReturn($res); goto M1sBP; HA8I0: $res = Db::name("\x79\142\x73\x63\x5f\160\x74\x5f\x61\144\x76\145\x72\164")->where("\x69\x64", $id)->update(["\163\157\162\x74" => $val]); goto a2qjQ; M1sBP: } public function group_class_use() { goto CYxt7; t3NEX: O6r28: goto GIOM_; KuDdP: $res = Db::name("\x79\x62\x73\x63\137\160\x74\137\x61\x64\x76\145\x72\x74")->where("\151\x64", $id)->update(["\145\x6e\x61\142\154\145\144" => 1]); goto t3NEX; z7m8t: Rj3ZG: goto ML2Ty; ML2Ty: $res = Db::name("\x79\x62\163\143\x5f\160\164\x5f\141\x64\166\145\x72\x74")->where("\151\144", $id)->update(["\x65\156\141\142\x6c\x65\144" => 2]); goto P5UV8; bqO20: if ($key == "\x6f\156") { goto tMtMy; } goto Cps8h; TrGKo: goto O6r28; goto kiESs; Cps8h: $res = Db::name("\171\x62\163\143\x5f\x70\164\x5f\x61\144\166\145\x72\x74")->where("\x69\x64", $id)->delete(); goto TrGKo; P5UV8: AJ7dm: goto efFFs; GIOM_: goto AJ7dm; goto z7m8t; u3WCA: if ($key == "\157\x66\x66") { goto Rj3ZG; } goto bqO20; UzffO: $key = input("\x70\141\x72\141\x6d\56\153\x65\171"); goto u3WCA; efFFs: return AjaxReturn($res); goto Mf3Xa; kiESs: tMtMy: goto KuDdP; CYxt7: $id = input("\160\x61\x72\x61\155\56\151\144"); goto UzffO; Mf3Xa: } public function group_carousel_add() { goto uYsPC; RfZPH: $data["\163\x6f\x72\164"] = input("\x70\141\x72\x61\x6d\x2e\x73\157\162\x74", ''); goto s0faS; pCEwv: $data["\x69\155\x67"] = input("\160\x61\162\x61\x6d\x2e\154\157\147\157", ''); goto RfZPH; DytTh: $res = Db::name("\171\x62\163\143\x5f\160\x74\x5f\x61\x64\x76\145\162\164")->insert($data); goto nNcKH; FXX0n: $data = []; goto pCEwv; nNcKH: return AjaxReturn($res); goto pLlcx; uYsPC: if (!request()->isAjax()) { goto wL_IP; } goto FXX0n; lXf8t: return view(); goto xypNi; s0faS: $data["\155\143\x68\x5f\x69\144"] = $this->bus_id; goto DytTh; pLlcx: wL_IP: goto lXf8t; xypNi: } public function group_carousel_edit() { goto gAgBL; CSq1J: return AjaxReturn($res); goto O3rJD; e04ja: return view(); goto to49S; PNox8: $res = Db::name("\x79\142\163\x63\x5f\x70\164\137\x61\x64\x76\x65\162\x74")->where("\151\144", $id)->update($data); goto CSq1J; GZ8jQ: $id = input("\x70\141\162\x61\155\x2e\151\x64"); goto VqZQW; KfCeP: $data = []; goto GZ8jQ; W7aA6: $id = input("\160\x61\162\141\x6d\x2e\x69\144"); goto Wu74q; gdu_Y: $data["\x73\157\162\164"] = input("\160\141\x72\141\x6d\56\163\157\162\164", ''); goto YgUQZ; O3rJD: TXi6X: goto W7aA6; VqZQW: $data["\151\x6d\147"] = input("\160\x61\162\x61\155\56\x6c\x6f\x67\157", ''); goto gdu_Y; Wu74q: $info = Db::name("\171\142\163\x63\137\160\x74\137\x61\x64\166\x65\162\164")->where("\x69\x64", $id)->find(); goto C1Y1a; gAgBL: if (!request()->isAjax()) { goto TXi6X; } goto KfCeP; C1Y1a: $this->assign("\151\156\x66\x6f", $info); goto e04ja; YgUQZ: $data["\155\x63\x68\x5f\x69\x64"] = $this->bus_id; goto PNox8; to49S: } public function group_order() { goto ebcHC; FnQxy: $setting = uni_setting_load("\x70\141\x79\x6d\145\x6e\164", $_W["\165\x6e\x69\141\143\151\144"]); goto uFXPJ; GrHBl: $i = 0; goto c0SXz; mly_a: $where = []; goto Av6Nj; cAKWu: $ea = array(); goto rhIm0; t1jO8: $this->assign("\x6c\x69\x73\x74", $ea); goto gZ23m; Av6Nj: empty($data["\x6f\x72\x64\x65\162\137\x6e\165\155"]) || ($where["\157\x2e\x6f\162\144\x65\162\x4e\x75\x6d"] = ["\154\151\x6b\145", "\x25" . $data["\x6f\162\x64\145\162\137\156\x75\x6d"] . "\x25"]); goto QsuS_; QsuS_: if (!($status != -2)) { goto Jkdeg; } goto WQgVx; DRxHu: goto ByVyC; goto LKt9Q; mthOv: $i++; goto h87zW; R_3CD: $url = explode("\75\x2f", $url); goto gD4a1; uzTj_: Jkdeg: goto WvHfk; WQgVx: $where["\x6f\x2e\x6f\162\x64\x65\x72\x5f\x73\x74\x61\x74\x75\x73"] = $status; goto uzTj_; RgUN1: $this->assign("\x72\145\146\x75\x6e\144\137\164\x79\x70\145", 0); goto faRHu; Y8IWJ: $ea[$i] = $list[$i]; goto C3bc_; c0SXz: njhI4: goto GZjl7; LKt9Q: dZdBQ: goto RgUN1; GZjl7: if (!($i < count($list))) { goto ftGrB; } goto Y8IWJ; hxr8P: RO9nG: goto mthOv; ebcHC: try { goto JIUAr; JIUAr: $ttime = time(); goto eTw6c; dG6VX: P7fD4: goto xUC_t; rqdst: foreach ($outtimes as $out) { goto tAA8O; c6iUK: $this->orderTakeRefund_two($order_id); goto g57EM; tAA8O: $order_id = $out["\x69\x64"]; goto c6iUK; g57EM: q6uWA: goto eOgEX; eOgEX: } goto dG6VX; eTw6c: $outtimes = Db::name("\x79\142\x73\x63\x5f\160\x74\x5f\x6f\162\x64\x65\162\163")->where("\151\x73\x50\141\x79", 1)->where("\157\x72\x64\x65\x72\137\x73\164\141\x74\165\163", 2)->where("\x67\162\x6f\165\x70\124\151\x6d\x65", 0)->where("\x65\x6e\144\x54\151\x6d\145", "\x3c", $ttime)->where("\155\143\x68\137\x69\144", $this->bus_id)->select(); goto rqdst; xUC_t: } catch (\Exception $e) { } goto t_UZw; ca9Rs: return view(); goto TDSoa; WvHfk: $where["\157\x2e\x6d\x61\x69\x6c\x69\x6e\147\137\x74\171\160\x65"] = 1; goto Xk0Sd; Xk0Sd: $data["\x6f\x72\x64\x65\162\137\x6e\165\155"] = empty($data["\157\x72\x64\145\162\137\156\165\155"]) ? '' : $data["\157\x72\x64\x65\162\x5f\x6e\x75\155"]; goto vMp42; DKMSd: $this->assign("\x72\x65\x66\x75\x6e\144\x5f\164\171\x70\x65", 1); goto DRxHu; QxTPn: global $_W; goto FnQxy; gZ23m: $this->assign("\x70\x61\147\x65", $page); goto ca9Rs; GZJXV: $this->assign("\x73\x74\141\x74\x75\163", $status); goto mbYl4; f7EX0: if ($refund_setting["\163\167\151\x74\x63\x68"] != 1 || empty($refund_setting["\x6b\145\171"]) || empty($refund_setting["\143\145\x72\164"])) { goto dZdBQ; } goto DKMSd; r9atC: $url = "\57" . $url[0]; goto rt9rI; faRHu: ByVyC: goto cAKWu; rt9rI: $status = Request::instance()->param("\163\164\x61\x74\165\163", -2); goto GZJXV; gD4a1: $url = explode("\46", $url[1]); goto r9atC; lvhiE: $page = $list->render(); goto QxTPn; t_UZw: $url = request()->query(); goto R_3CD; vMp42: $list = Db::name("\x79\142\163\143\137\160\164\137\157\162\144\145\162\x73")->alias("\157")->join("\171\x62\163\143\x5f\x70\164\x5f\x67\x6f\157\144\x73\40\x67", "\x6f\x2e\x67\x69\x64\75\147\x2e\151\x64")->where("\157\56\155\x63\x68\x5f\151\x64", $this->bus_id)->field("\x6f\56\x2a\x2c\x67\x2e\x6e\141\155\x65\x2c\147\56\x69\x6d\147")->order("\x6f\x2e\x63\x72\x65\x61\164\x65\x54\x69\155\x65\40\144\145\163\x63")->where($where)->paginate(15, false, $config = ["\x71\165\145\x72\171" => ["\x73" => $url]]); goto lvhiE; uFXPJ: $refund_setting = $setting["\160\x61\171\x6d\x65\x6e\164"]["\167\145\143\150\141\164\x5f\162\x65\x66\x75\x6e\144"]; goto f7EX0; C3bc_: $ea[$i]["\162\145\146\x75\x6e\x64\137\x69\156\146\x6f"] = $ser->get_refund_info($ea[$i]["\x69\144"], 3); goto hxr8P; rhIm0: $ser = new Arliki(); goto GrHBl; YfwCj: $this->assign("\157\x72\x64\x65\x72\x5f\156\x75\155", $data["\x6f\162\144\x65\x72\x5f\x6e\165\x6d"]); goto t1jO8; Q06o0: ftGrB: goto YfwCj; h87zW: goto njhI4; goto Q06o0; mbYl4: $data = Request::instance()->param(); goto mly_a; TDSoa: } public function group_order_two() { goto vsIWb; pTn2i: $ea = array(); goto mX7G0; Af0zK: goto FBWT9; goto iZ9Xd; AD88O: $status = Request::instance()->param("\x73\x74\141\164\165\x73", -2); goto sNX6Z; Fec8E: $data["\157\x72\x64\145\x72\x5f\156\x75\x6d"] = empty($data["\x6f\x72\144\x65\x72\137\x6e\x75\x6d"]) ? '' : $data["\x6f\x72\144\145\x72\x5f\x6e\x75\x6d"]; goto tL8cL; wEirT: $url = "\57" . $url[0]; goto AD88O; WULR_: rYE5E: goto zR9XQ; y2eCq: goto OyDBR; goto aQfRE; etK8G: if (!($i < count($list))) { goto W2Dhm; } goto QsJ1K; mX7G0: $ser = new Arliki(); goto oAJ4y; fEEtf: $where = []; goto RFCq_; RFCq_: empty($data["\x6f\162\144\145\162\137\x6e\x75\155"]) || ($where["\157\x2e\x6f\x72\144\145\162\116\x75\x6d"] = ["\x6c\x69\x6b\x65", "\x25" . $data["\157\x72\144\x65\x72\137\x6e\x75\155"] . "\x25"]); goto lcoGw; zWbR5: $i++; goto y2eCq; Wz9v2: $ea[$i]["\162\x65\146\165\156\x64\x5f\x69\x6e\x66\x6f"] = $ser->get_refund_info($ea[$i]["\x69\144"], 3); goto VpC7D; y1AUG: return view(); goto coBXr; zWaEm: $page = $list->render(); goto lTvoE; idpji: $setting = uni_setting_load("\160\141\x79\x6d\x65\156\x74", $_W["\165\156\x69\x61\143\151\144"]); goto XXRO3; VpC7D: cbhEZ: goto zWbR5; vsIWb: try { goto NQP5q; v3U8F: foreach ($outtimes as $out) { goto redkG; sfLEL: mZzdP: goto IjIaQ; JSZcz: $this->orderTakeRefund_two($order_id); goto sfLEL; redkG: $order_id = $out["\151\x64"]; goto JSZcz; IjIaQ: } goto ID3T1; NQP5q: $ttime = time(); goto wqmOP; ID3T1: YCGEY: goto UPFne; wqmOP: $outtimes = Db::name("\x79\x62\x73\143\x5f\160\x74\x5f\x6f\162\x64\145\x72\x73")->where("\x69\x73\x50\x61\171", 1)->where("\x6f\x72\x64\x65\162\137\163\164\141\164\x75\x73", 2)->where("\147\x72\157\x75\160\x54\x69\155\145", 0)->where("\145\156\x64\x54\151\155\145", "\x3c", $ttime)->where("\x6d\143\150\137\x69\144", $this->bus_id)->select(); goto v3U8F; UPFne: } catch (\Exception $e) { } goto Bz3oH; Z4eG3: $url = explode("\46", $url[1]); goto wEirT; zR9XQ: $where["\157\56\155\x61\x69\x6c\x69\x6e\147\x5f\x74\171\x70\x65"] = 2; goto Fec8E; pJhNd: $data = Request::instance()->param(); goto fEEtf; QsJ1K: $ea[$i] = $list[$i]; goto Wz9v2; tL8cL: $list = Db::name("\171\x62\163\143\x5f\160\164\x5f\x6f\x72\144\x65\162\163")->alias("\157")->join("\171\x62\x73\143\x5f\160\164\137\147\157\157\144\163\x20\x67", "\157\56\147\x69\144\x3d\x67\x2e\151\144")->where("\157\x2e\x6d\x63\x68\137\151\x64", $this->bus_id)->field("\157\x2e\52\x2c\147\56\x6e\x61\x6d\x65\x2c\147\56\x69\x6d\x67")->order("\157\56\x63\x72\145\141\164\145\124\151\x6d\x65\40\x64\145\163\x63")->where($where)->paginate(15, false, $config = ["\161\165\x65\x72\x79" => ["\x73" => $url]]); goto zWaEm; Bz3oH: $url = request()->query(); goto PdTNI; oAJ4y: $i = 0; goto Zg0nD; cEFRY: $where["\x6f\56\x6f\x72\144\145\162\x5f\163\x74\141\164\x75\163"] = $status; goto WULR_; QTc4L: $this->assign("\x6f\x72\144\x65\162\x5f\156\165\x6d", $data["\157\x72\144\145\x72\x5f\x6e\165\155"]); goto wRVeG; BV3ri: $this->assign("\162\145\146\x75\x6e\x64\x5f\164\x79\x70\145", 0); goto QUH0T; sNX6Z: $this->assign("\163\x74\x61\x74\165\x73", $status); goto pJhNd; lcoGw: if (!($status != -2)) { goto rYE5E; } goto cEFRY; JZUMk: $this->assign("\160\141\147\x65", $page); goto y1AUG; f44eJ: $this->assign("\162\x65\146\x75\156\x64\137\164\171\x70\x65", 1); goto Af0zK; iZ9Xd: WAl1g: goto BV3ri; QUH0T: FBWT9: goto pTn2i; sALg6: if ($refund_setting["\163\167\x69\x74\143\150"] != 1 || empty($refund_setting["\x6b\145\x79"]) || empty($refund_setting["\x63\x65\162\x74"])) { goto WAl1g; } goto f44eJ; Zg0nD: OyDBR: goto etK8G; PdTNI: $url = explode("\x3d\x2f", $url); goto Z4eG3; lTvoE: global $_W; goto idpji; aQfRE: W2Dhm: goto QTc4L; XXRO3: $refund_setting = $setting["\x70\x61\x79\155\x65\x6e\164"]["\x77\x65\x63\150\141\164\137\x72\x65\x66\x75\156\x64"]; goto sALg6; wRVeG: $this->assign("\x6c\151\x73\164", $ea); goto JZUMk; coBXr: } public function OrderDetail() { goto ph1ec; wOSTp: return view("\141\x72\154\151\153\151\x2f\x70\162\x69\x6e\x74\145\162\62"); goto VKImy; VKImy: ZNvHQ: goto Pu9f4; KElfL: $print = no_space("\x70\162\x69\156\164\145\x72", 2); goto q9_9f; IkD0w: $this->assign("\151\x6e\x66\157", $list); goto A5s9D; q9_9f: $list = Db::name("\171\x62\163\x63\137\x70\164\x5f\x6f\x72\144\145\x72\x73")->alias("\157")->join("\x79\x62\x73\143\137\x70\x74\x5f\147\157\157\x64\163\x20\147", "\157\x2e\147\151\144\x3d\x67\x2e\151\144")->where("\157\x2e\x6d\143\150\137\x69\x64", $this->bus_id)->where("\x6f\56\x69\x64", $id)->field("\x6f\56\x2a\x2c\147\x2e\x6e\141\x6d\145\x2c\x67\56\151\x6d\147")->find(); goto IkD0w; AHcBl: $this->assign("\x71\x72\x63\x6f\144\145", $this->get_barcode($list["\157\162\x64\145\162\116\165\x6d"] . "\137\x33")); goto wOSTp; A5s9D: if (!($print == 1)) { goto ZNvHQ; } goto AHcBl; ph1ec: $id = input("\160\141\162\x61\155\x2e\x6f\162\x64\145\162\x5f\151\x64"); goto KElfL; Pu9f4: return view("\147\162\157\165\x70\57\147\x72\157\x75\160\137\x6f\x72\144\145\x72\137\151\x6e\x66\x6f"); goto XJ2XX; XJ2XX: } public function get_barcode($data, $width = 200, $height = 200) { $str = "\74\x64\151\166\x20\x69\144\75\42\x62\141\x72\x5f\x63\157\144\x65\x22\x3e\x3c\x2f\144\151\x76\x3e\x3c\x73\x63\x72\x69\160\164\x3e\44\50\146\x75\x6e\x63\164\151\157\156\x28\x29\173\44\50\x22\x23\142\141\162\137\143\157\144\x65\x22\51\56\x71\x72\x63\x6f\x64\x65\x28\173\167\x69\x64\164\150\72" . $width . "\54\150\x65\151\147\150\164\72" . $height . "\54\x74\x65\x78\x74\72\42" . $data . "\x22\x7d\51\x3b\x7d\51\73\x3c\x2f\x73\x63\x72\151\x70\x74\x3e"; return $str; } public function collage() { goto uEYPf; r0HAt: $data = Request::instance()->param(); goto BjGEv; LkMHG: $this->assign("\x67\157\157\x64\163\x5f\x6e\141\x6d\x65", $data["\x67\157\157\144\163\137\156\141\x6d\145"]); goto xtwj8; Ziup8: $page = $list->render(); goto gmJux; uEYPf: $url = request()->query(); goto O7fcq; xtwj8: return view(); goto B_Wwn; O7fcq: $url = explode("\75\x2f", $url); goto V11fd; mmo5M: $this->assign("\x74\151\x6d\145", time()); goto LkMHG; Hrge8: $this->assign("\x70\141\147\145", $page); goto mmo5M; sBwjH: $data["\x67\157\x6f\x64\x73\x5f\156\141\155\x65"] = empty($data["\147\157\157\144\x73\137\156\141\155\145"]) ? '' : $data["\x67\x6f\157\144\163\137\156\141\155\x65"]; goto JBSSp; BnYwI: $url = "\57" . $url[0]; goto r0HAt; qB8MS: empty($data["\147\157\157\144\163\137\156\141\x6d\x65"]) || ($where["\147\x2e\x6e\x61\x6d\145"] = ["\154\x69\153\145", "\45" . $data["\147\x6f\157\144\163\137\x6e\141\155\145"] . "\x25"]); goto sBwjH; BjGEv: $where = []; goto qB8MS; V11fd: $url = explode("\x26", $url[1]); goto BnYwI; gmJux: $this->assign("\x6c\x69\163\x74", $list); goto Hrge8; JBSSp: $list = Db::name("\x79\142\163\143\x5f\160\x74\x5f\x6f\162\144\x65\x72\x73")->alias("\x6f")->join("\x79\x62\163\143\x5f\160\x74\137\147\x6f\157\x64\163\40\147", "\x6f\56\147\151\144\75\x67\x2e\151\144")->where("\157\56\x6d\x63\150\137\x69\x64", $this->bus_id)->where("\157\56\x70\151\x64\x3d\60")->where("\x6f\x2e\x69\163\x47\162\x6f\x75\160\75\61")->field("\x6f\56\x2a\54\147\x2e\x6e\141\155\145\54\147\56\x69\155\x67")->order("\157\56\143\162\x65\141\x74\145\124\151\x6d\145\x20\144\x65\x73\143")->where($where)->paginate(15, false, $config = ["\161\165\145\x72\x79" => ["\163" => $url]]); goto Ziup8; B_Wwn: } public function group_user_list() { goto PD7dc; PD7dc: $id = input("\x70\x61\x72\141\x6d\x2e\151\144"); goto Q7G9K; mFIEz: return view("\147\162\x6f\x75\x70\57\x63\x6f\154\x6c\x61\147\145\137\x6c\x69\x73\164"); goto Mofj4; jgsQJ: $this->assign("\x69\x6e\146\157", $list); goto mFIEz; Q7G9K: $list = Db::name("\171\142\163\143\x5f\x70\x74\x5f\x6f\162\144\145\162\x73")->alias("\157")->join("\171\x62\163\143\x5f\160\164\x5f\x67\x6f\157\x64\x73\x20\147", "\157\56\147\x69\144\x3d\x67\x2e\x69\x64")->where("\157\x2e\x6d\x63\x68\137\151\144", $this->bus_id)->where("\157\56\151\x64\x7c\x6f\56\160\151\144", $id)->field("\x6f\56\x2a\x2c\147\x2e\156\x61\x6d\x65\x2c\x67\56\x69\155\x67")->select(); goto jgsQJ; Mofj4: } public function deleteOrder() { goto k1AYV; gYh6q: return AjaxReturn($res); goto juvYa; jn9I2: $id = request()->post("\x69\x64", ''); goto o0K6E; juvYa: tEsyk: goto h7iL_; o0K6E: $res = Db::name("\x79\142\163\x63\x5f\x70\x74\137\157\x72\144\x65\162\163")->where(["\151\144" => $id, "\x6f\162\x64\x65\x72\x5f\163\x74\141\164\x75\163" => -1])->delete(); goto gYh6q; k1AYV: if (!request()->isAjax()) { goto tEsyk; } goto jn9I2; h7iL_: } public function group_order_send() { goto ReHSL; ReHSL: $id = input("\x70\141\162\141\155\x2e\x69\144"); goto lPQTG; lPQTG: $res = Db::name("\x79\x62\x73\x63\x5f\160\x74\x5f\157\x72\x64\x65\162\163")->where("\x69\144", $id)->update(["\157\162\x64\x65\162\x5f\163\164\x61\164\165\163" => 4]); goto DPHvo; DPHvo: return AjaxReturn($res); goto P245O; P245O: } public function group_order_send_two() { goto hNPRs; TsZrk: $res = Db::name("\x79\142\x73\x63\137\x70\x74\x5f\157\x72\144\x65\162\x73")->where("\151\144", $id)->update(["\x6f\162\x64\145\x72\137\x73\164\141\164\x75\163" => 6]); goto y1V3M; y1V3M: return AjaxReturn($res); goto AearM; hNPRs: $id = input("\160\x61\162\141\x6d\x2e\151\x64"); goto TsZrk; AearM: } public function orderTakeRefund() { goto a2mhr; B9omf: $bus_config = Db::name("\171\142\163\143\x5f\x63\x6f\156\x66\x69\147")->where("\155\143\150\x5f\x69\x64", $this->bus_id)->where("\x6b\x65\x79", "\127\130\120\101\x59")->find(); goto Zh3DZ; fPRYn: return AjaxReturnMsg(0, $errmsg); goto Md36Z; Hm7Kz: if ($refund_setting["\163\x77\x69\164\143\x68"] != 1 || empty($refund_setting["\153\145\x79"]) || empty($refund_setting["\x63\x65\x72\x74"])) { goto pS8e1; } goto qaZbJ; wic0c: Db::name("\x79\142\x73\x63\x5f\157\x72\144\x65\162\137\x72\145\x66\x75\156\144")->where("\151\x64", $ii["\151\144"])->update($data); goto Zjszy; VNM9i: file_put_contents($cert_path, $cert); goto Exi5j; vxyDn: $key = authcode($refund_setting["\x6b\x65\x79"], "\104\105\103\x4f\x44\x45"); goto QI1lZ; gW39R: $data["\162\x65\x66\165\x6e\x64\137\162\145\141\x73\x6f\x6e"] = ''; goto dnY_b; CF2Ge: $ct = Db::name("\171\142\x73\143\137\x70\x74\137\157\x72\144\x65\162\163")->where("\151\x64", $order_id)->value("\162\x65\x66\x75\x6e\x64\x5f\163\164\141\164\165\x73"); goto f1M3G; Y4XoT: $data["\165\151\x64"] = $uid; goto xBRvT; W8ZjH: iA_6L: goto pn4IS; bHCbD: $refund_setting = $setting["\x70\x61\x79\x6d\145\156\x74"]["\x77\x65\143\150\x61\x74\x5f\x72\x65\x66\x75\156\x64"]; goto Hm7Kz; Exi5j: file_put_contents($key_path, $key); goto QrYue; qaZbJ: $cert = authcode($refund_setting["\143\145\x72\164"], "\104\x45\x43\x4f\104\x45"); goto vxyDn; dnY_b: $data["\162\x65\146\x75\x6e\x64\137\163\164\x61\164\x75\x73"] = 2; goto vRryS; IhCKs: goto iA_6L; goto gq5Ia; a2mhr: $order_id = request()->post("\x6f\x72\x64\145\x72\x5f\x69\x64", ''); goto NtlyY; TAWVg: w3nSB: goto wic0c; xBRvT: $data["\155\143\x68\137\151\x64"] = $this->bus_id; goto mG3lJ; wk8H5: $cert_path = ATTACHMENT_ROOT . "\160\x75\142\154\x69\143\x2f" . $this->bus_id . "\137\x77\x65\x63\150\141\164\137\x72\145\x66\x75\156\144\137\143\145\162\164\56\x70\145\155"; goto E_HUc; n2aNg: if (!(!empty($order_info) && $order_info["\x74\x6f\x74\141\154\120\x72\151\x63\x65"] == 0)) { goto fbRr_; } goto dBmkB; IKKCH: $input->SetOp_user_id($temp["\101\x50\120\137\x4d\103\x48\x49\104"]); goto uRviV; qjSix: FS3JN: goto CF2Ge; QhKhR: $res = Db::name("\171\142\x73\x63\x5f\157\x72\x64\145\x72\x5f\162\x65\x66\x75\156\144")->where("\x69\x64", $ii["\x69\144"])->update($data); goto e8bh2; dBmkB: return AjaxReturnMsg(0, "\xe6\x94\257\xe4\xbb\230\xe9\x87\x91\351\xa2\235\344\270\xba\351\x9b\266\xe6\227\xa0\346\263\225\351\200\200\xe6\254\276"); goto pURev; uRviV: $input->SetAppid($temp["\x41\120\x50\137\x49\x44"]); goto kwdHB; Zjszy: OEWBU: goto TuF4p; a0aAz: YC4UH: goto QhKhR; NtlyY: $info = request()->param("\151\x6e\x66\x6f", ''); goto ul5BJ; vRryS: $data["\x63\x72\145\141\164\145\x5f\164\151\x6d\145"] = time(); goto BnCtY; QI1lZ: $order_info = Db::name("\171\x62\x73\143\137\160\164\x5f\157\x72\x64\145\x72\x73")->where("\x69\x64", $order_id)->find(); goto n2aNg; HnUJk: pS8e1: goto oCKux; GfrIw: Db::name("\171\142\163\143\x5f\x6f\162\144\145\162\137\x72\145\x66\x75\156\144")->insert($data); goto IhCKs; tFI2V: $input = new \WxPayRefund(); goto DGsY_; vHyxz: goto MrlkK; goto HnUJk; n5kcA: $key = $key; goto wk8H5; nWqgm: lpZv9: goto AhMjt; sX1vY: $input->SetRefund_fee($order_info["\164\157\164\141\x6c\x50\x72\151\x63\145"] * 100); goto ds0kV; DGsY_: $input->SetOut_trade_no($order_info["\157\162\144\x65\162\116\165\155"]); goto z913k; Md36Z: goto oQC6L; goto OHBc7; ds0kV: $input->SetOut_refund_no($res); goto IKKCH; iS8pr: if (!empty($info)) { goto FS3JN; } goto SFOJ_; z913k: $input->SetTotal_fee($order_info["\164\157\164\x61\154\x50\x72\x69\143\x65"] * 100); goto sX1vY; SV9KC: if (!($uid == 0)) { goto jict2; } goto aSTr5; fMmMk: o6xHu: goto M3Tid; M3Tid: global $_W; goto Rc1k5; OJR4z: if (!($ju == 1)) { goto o6xHu; } goto SV9KC; miXrO: Db::name("\171\x62\x73\x63\137\157\162\x64\x65\162\137\162\145\146\165\156\144")->where("\x69\x64", $ii["\x69\144"])->update($data); goto W8ZjH; REfJF: goto wffgV; goto a0aAz; ue_Lz: $data["\x72\x65\x66\x75\156\x64\137\x73\x74\141\x74\165\x73"] = 1; goto N4jBs; NOfGJ: if (!empty($ii)) { goto bdFH_; } goto GfrIw; e8bh2: wffgV: goto lrOQC; OtmJI: Db::name("\x79\142\163\x63\137\157\162\144\145\162\137\162\145\x66\165\156\144")->insert($data); goto iMGFi; Rc1k5: $setting = uni_setting_load("\x70\141\x79\x6d\x65\156\x74", $_W["\x75\x6e\x69\x61\143\151\144"]); goto bHCbD; aKAsB: MrlkK: goto x0b2j; oLq2W: $order_info = Db::name("\171\x62\x73\x63\x5f\160\x74\137\x6f\162\x64\x65\x72\163")->where("\151\x64", $order_id)->update(["\x6f\x72\x64\x65\162\137\163\164\x61\x74\165\163" => 7, "\x72\x65\146\165\x6e\x64\x5f\x74\x69\x6d\145" => time()]); goto bq96z; iMGFi: goto OEWBU; goto TAWVg; WGQJj: $uid = request()->param("\165\x69\x64", 0); goto Y4XoT; QrYue: $param = \WxPayApi::refund($input); goto xRLEh; gq5Ia: bdFH_: goto miXrO; OHBc7: HRc7R: goto oLq2W; Peefe: oQC6L: goto vHyxz; aSTr5: return 0; goto UskL3; BnCtY: $data["\164\171\160\x65"] = 3; goto BJfEF; UskL3: jict2: goto iS8pr; kwdHB: $cert = $cert; goto n5kcA; oCKux: $res = Db::name("\171\x62\163\143\137\160\164\137\157\x72\144\x65\x72\x73")->where("\x69\144", $order_id)->update(["\157\x72\144\x65\162\137\163\164\141\164\x75\163" => 7, "\162\145\146\165\156\144\137\x74\151\155\x65" => time()]); goto NOfGJ; GVW3c: Db::name("\x79\142\163\x63\137\160\164\137\157\x72\x64\145\162\163")->where("\151\144", $order_id)->update(["\157\162\x64\x65\x72\x5f\163\164\x61\x74\165\x73" => $status, "\x69\x73\122\145\x66\x75\156\144" => 0]); goto nWqgm; ZW1ur: $res = Db::name("\171\142\163\143\x5f\157\162\144\x65\162\137\162\x65\x66\x75\156\x64")->insert($data); goto REfJF; pn4IS: return AjaxReturn($res); goto aKAsB; BJfEF: $ii = Db::name("\x79\x62\x73\x63\x5f\157\162\144\145\162\137\x72\145\x66\x75\156\144")->where(["\x74\171\160\x65" => $data["\x74\171\160\x65"], "\x6f\162\x64\x65\162\137\x69\144" => $data["\x6f\162\144\145\x72\137\x69\144"]])->order("\x69\x64", "\144\145\x73\x63")->find(); goto OJR4z; bq96z: if (!empty($ii)) { goto w3nSB; } goto OtmJI; xRLEh: if ($param["\x72\145\x73\165\x6c\x74\x5f\x63\157\x64\x65"] == "\123\x55\x43\x43\105\x53\x53") { goto HRc7R; } goto jEgzM; N4jBs: if (!empty($ii)) { goto YC4UH; } goto ZW1ur; AhMjt: return $res; goto fMmMk; Zh3DZ: $temp = json_decode($bus_config["\166\x61\x6c\165\x65"], true); goto n4mY5; yWzxx: $data["\162\145\x66\165\x6e\x64\x5f\162\145\x61\x73\x6f\156"] = $info; goto ue_Lz; f1M3G: $status = intval($ct) == 0 ? 4 : intval($ct); goto yWzxx; SFOJ_: return 0; goto qjSix; mG3lJ: $data["\x6f\162\144\145\162\x5f\151\144"] = $order_id; goto gW39R; pURev: fbRr_: goto B9omf; n4mY5: $res = $temp["\x41\x50\120\x5f\x4d\103\x48\x49\x44"] . date("\x59\155\x64\110\x69\163") . rand(10000, 9999999); goto tFI2V; ul5BJ: $ju = request()->param("\x6a\165", 2); goto WGQJj; lrOQC: if (!$res) { goto lpZv9; } goto GVW3c; jEgzM: $errmsg = "\351\x80\x80\xe6\xac\276\xe5\xa4\xb1\xe8\264\245\72" . json_encode($param, JSON_UNESCAPED_UNICODE); goto fPRYn; TuF4p: return AjaxReturn($order_info); goto Peefe; E_HUc: $key_path = ATTACHMENT_ROOT . "\x70\165\x62\154\x69\x63\57" . $this->bus_id . "\x5f\x77\145\143\x68\x61\x74\x5f\x72\x65\146\x75\156\144\137\x6b\x65\x79\x2e\160\145\155"; goto VNM9i; x0b2j: } public function orderTakeRefund_two($order_id) { goto QHQSW; uF812: $input->SetOut_trade_no($order_info["\x6f\x72\144\145\162\116\x75\x6d"]); goto a808d; VACGs: ppMhk: goto zXn5K; VgLv0: Db::name("\x79\142\163\143\x5f\x6f\x72\x64\x65\162\137\162\x65\146\x75\x6e\x64")->insert($data); goto mC7R1; Z6d3b: $input->SetAppid($temp["\x41\x50\120\137\111\x44"]); goto Lp4Uj; zsD6O: $data["\x72\x65\x66\x75\156\144\x5f\163\x74\141\x74\x75\x73"] = 2; goto ep9oG; yvVe5: $errmsg = "\xe9\x80\x80\xe6\xac\xbe\345\xa4\xb1\xe8\xb4\245\72" . json_encode($param, JSON_UNESCAPED_UNICODE); goto y_1U7; Jcvjv: goto Uno4W; goto mI1Ft; EFUDA: $temp = json_decode($bus_config["\166\141\x6c\165\x65"], true); goto nVuCL; QOsUN: Db::name("\x79\142\x73\x63\x5f\160\x74\x5f\x6f\162\144\145\162\163")->where("\x69\x64", $order_id)->update(["\157\162\144\x65\162\x5f\163\x74\141\164\x75\x73" => 7, "\x72\x65\x66\x75\156\144\x5f\x74\151\x6d\145" => time()]); goto j3141; q9VCC: $key_path = ATTACHMENT_ROOT . "\160\x75\142\x6c\151\x63\57" . $this->bus_id . "\137\167\x65\x63\150\x61\164\x5f\162\x65\x66\x75\x6e\x64\137\x6b\x65\171\56\160\x65\155"; goto b0tu2; SJoTO: $input->SetOut_refund_no($res); goto QBHfu; dG6ws: EXorl: goto PlZ34; TZd3Q: $data["\x74\171\160\x65"] = 3; goto EegYA; kKsAk: eI6u7: goto kF_xZ; Em69g: $cert = authcode($refund_setting["\x63\x65\x72\164"], "\104\x45\x43\x4f\x44\105"); goto LzMwG; m13Mt: Iv37B: goto kKsAk; zXn5K: Db::name("\x79\x62\x73\143\x5f\157\162\144\x65\162\x5f\162\x65\x66\165\156\x64")->where("\x69\x64", $ii["\x69\144"])->update($data); goto KDKjg; QHQSW: $order_info = Db::name("\171\x62\163\143\x5f\160\164\x5f\x6f\162\x64\145\162\x73")->where("\151\144", $order_id)->find(); goto ijpgG; smj10: Uno4W: goto tBOnO; lR9ob: $setting = uni_setting_load("\160\141\171\x6d\145\156\x74", $_W["\165\x6e\x69\x61\143\151\x64"]); goto y414a; aY1RH: global $_W; goto lR9ob; UYBh6: $input = new \WxPayRefund(); goto uF812; a808d: $input->SetTotal_fee($order_info["\164\157\x74\x61\x6c\120\162\x69\x63\x65"] * 100); goto QIuj2; eVuxJ: SAiFp: goto uIthu; tBOnO: MVslC: goto renLR; FzgoA: if ($param["\162\145\x73\x75\154\x74\137\143\x6f\144\x65"] == "\123\x55\x43\103\105\123\x53") { goto xGb78; } goto yvVe5; Lp4Uj: $cert = $cert; goto f6yzJ; mI1Ft: iNnf6: goto YoE8m; ijpgG: if (empty($order_info)) { goto eI6u7; } goto kW0Sx; blojt: if (!empty($ii)) { goto ppMhk; } goto VgLv0; N6f0W: file_put_contents($key_path, $key); goto aZiFg; y_1U7: goto MVslC; goto Rxgpp; f6yzJ: $key = $key; goto U0Bmo; kW0Sx: $data["\x75\x69\144"] = $order_info["\165\x69\144"]; goto wtFEp; Rxgpp: xGb78: goto QOsUN; U0Bmo: $cert_path = ATTACHMENT_ROOT . "\x70\x75\x62\x6c\151\x63\x2f" . $this->bus_id . "\137\167\145\143\150\x61\164\x5f\162\145\x66\165\x6e\x64\137\x63\145\x72\164\x2e\x70\x65\x6d"; goto q9VCC; KDKjg: pyy8H: goto m13Mt; mC7R1: goto pyy8H; goto VACGs; VVdE2: if ($refund_setting["\x73\x77\151\164\143\x68"] != 1 || empty($refund_setting["\x6b\145\x79"]) || empty($refund_setting["\x63\145\162\164"])) { goto EXorl; } goto Em69g; nVuCL: $res = $temp["\x41\120\120\x5f\x4d\103\x48\111\x44"] . date("\131\155\144\110\x69\x73") . rand(10000, 9999999); goto UYBh6; nBRvP: return AjaxReturnMsg(0, "\346\x94\257\344\xbb\230\xe9\x87\221\351\242\x9d\xe4\270\272\xe9\233\266\xe6\x97\xa0\346\263\x95\xe9\x80\200\xe6\254\276"); goto eVuxJ; y414a: $refund_setting = $setting["\x70\x61\171\x6d\x65\x6e\164"]["\167\x65\143\x68\x61\164\x5f\162\x65\146\165\x6e\x64"]; goto VVdE2; j3141: if (!empty($ii)) { goto iNnf6; } goto XGTWK; SkRWB: $data["\x72\x65\146\165\156\x64\x5f\x72\145\141\163\157\156"] = ''; goto zsD6O; YoE8m: Db::name("\171\142\163\x63\137\157\x72\x64\x65\x72\x5f\162\x65\146\165\156\x64")->where("\151\x64", $ii["\x69\x64"])->update($data); goto smj10; EegYA: $ii = Db::name("\171\x62\163\143\x5f\x6f\162\144\145\x72\137\x72\x65\146\x75\156\x64")->where(["\x74\x79\160\145" => $data["\x74\x79\160\x65"], "\x6f\162\144\x65\162\x5f\151\x64" => $data["\157\162\144\x65\x72\137\151\144"]])->order("\x69\x64", "\x64\x65\163\143")->find(); goto aY1RH; uIthu: $bus_config = Db::name("\x79\142\x73\x63\x5f\143\157\156\146\x69\x67")->where("\x6d\143\x68\137\151\x64", $this->bus_id)->where("\153\x65\x79", "\127\x58\x50\101\x59")->find(); goto EFUDA; aZiFg: $param = \WxPayApi::refund($input); goto FzgoA; PlZ34: $res = Db::name("\171\142\163\143\x5f\x70\164\137\x6f\162\144\145\x72\163")->where("\151\x64", $order_id)->update(["\157\x72\x64\x65\162\x5f\163\164\141\x74\x75\163" => 7, "\x72\x65\146\165\x6e\x64\x5f\x74\151\x6d\145" => time()]); goto blojt; b0tu2: file_put_contents($cert_path, $cert); goto N6f0W; LzMwG: $key = authcode($refund_setting["\153\145\171"], "\x44\105\x43\x4f\x44\105"); goto BHUlW; wtFEp: $data["\155\x63\x68\137\151\x64"] = $this->bus_id; goto TwYGx; XGTWK: Db::name("\171\x62\163\143\137\157\162\144\145\162\x5f\162\145\x66\165\x6e\x64")->insert($data); goto Jcvjv; BHUlW: if (!(!empty($order_info) && $order_info["\164\157\164\x61\x6c\120\x72\x69\x63\x65"] == 0)) { goto SAiFp; } goto nBRvP; TwYGx: $data["\157\x72\144\145\162\x5f\x69\144"] = $order_id; goto SkRWB; QIuj2: $input->SetRefund_fee($order_info["\164\157\164\x61\154\x50\162\151\143\x65"] * 100); goto SJoTO; ep9oG: $data["\143\x72\145\x61\x74\145\137\x74\x69\x6d\x65"] = time(); goto TZd3Q; renLR: goto Iv37B; goto dG6ws; QBHfu: $input->SetOp_user_id($temp["\101\120\120\137\115\x43\x48\x49\x44"]); goto Z6d3b; kF_xZ: } public function group_delete() { goto gtCC6; YsWhx: $res["\x6d\145\x73\x73\141\x67\145"] = "\xe8\257\xa5\xe5\x95\x86\345\x93\201\xe4\xb8\213\346\x9c\211\xe8\256\xa2\xe5\x8d\x95\xe4\xb8\215\xe5\x8f\257\345\x88\xa0\xe9\231\244"; goto u_qcY; gtCC6: if (!(request()->isAjax() && request()->isPost())) { goto fplqs; } goto kZxm3; u_qcY: return AjaxReturn($res); goto la0Yo; la0Yo: fplqs: goto HnZuJ; CQAIp: $pt_order = Db::name("\x79\142\163\x63\137\160\164\x5f\157\162\x64\x65\x72\x73")->where(["\x67\151\144" => $id])->select(); goto t_ZtK; kbkSO: $res["\x63\157\x64\x65"] = 0; goto YsWhx; gK8Kx: BfWos: goto kbkSO; GVYXA: $res = Db::name("\171\142\x73\x63\x5f\x70\164\137\147\157\157\x64\163")->where(["\x69\144" => $id])->delete(); goto Kkdie; kZxm3: $id = request()->post("\x69\x64", ''); goto CQAIp; Kkdie: return AjaxReturn($res); goto gK8Kx; t_ZtK: if (!($pt_order == null)) { goto BfWos; } goto GVYXA; HnZuJ: } }
