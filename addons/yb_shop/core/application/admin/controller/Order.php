<?php
 namespace app\admin\controller; use app\admin\service\Area; use think\Db; use think\Request; use app\admin\service\OrderService; use think\log; use app\admin\controller\User; header("\143\x6f\156\x74\x65\x6e\164\x2d\164\x79\x70\x65\x3a\164\x65\170\x74\x2f\150\164\155\x6c\73\x63\150\141\x72\x73\x65\x74\x3d\x75\x74\x66\x2d\70\73"); require EXTEND_PATH . "\x57\170\x70\x61\171\57\x57\170\x50\141\x79\56\101\x70\x69\x2e\160\150\160"; class Order extends Base { public function OrderList() { goto MfL98; vfnWT: $i2 = 0; goto i3mw3; wXtuV: $tmp["\162"] = $list[$i]["\157\x72\144\x65\162\x5f\151\x74\x65\155\137\154\151\x73\164"][$i2]["\x73\x6b\x75\137\156\x61\155\145"]; goto yigx2; Mw6kM: $condition["\157\x72\x64\145\x72\x5f\163\164\x61\164\x75\x73"] = array("\x69\x6e", "\60\x2c\x31\54\62\54\x33\54\64\x2c\65\54\x2d\61"); goto VI_tO; WxNT_: rZJtO: goto PnNp3; zxnX6: fkQms: goto yItEm; UpzHE: $tmp["\x73"] = $list[$i]["\160\x61\x79\137\163\x74\x61\164\165\x73"] == 1 ? "\xe5\xb7\xb2\344\xbb\x98\346\254\xbe" : "\xe6\x9c\xaa\xe4\xbb\230\346\xac\xbe"; goto K5aGo; wH7eX: $tmp["\x65"] = $list[$i]["\x6f\162\x64\145\162\137\x69\164\x65\155\x5f\x6c\151\x73\164"][$i2]["\147\157\157\x64\x73\x5f\x6e\141\155\145"]; goto wXtuV; yQZ5Q: $ser = new User($this->bus_id); goto pkMef; z2R4B: $ttime = time(); goto DlhOR; Nw9nu: $i = 0; goto qU9MA; w4b60: $tmp["\x75"] = $list[$i]["\x72\x65\143\145\x69\x76\x65\x72\137\x70\162\157\166\x69\x6e\143\145\x5f\x6e\141\x6d\x65"] . $list[$i]["\162\145\x63\x65\151\166\x65\x72\137\143\151\164\171\x5f\x6e\x61\x6d\145"] . $list[$i]["\162\x65\143\145\151\166\145\162\137\143\157\x75\x6e\x74\171\x5f\x6e\x61\155\145"] . $list[$i]["\x72\145\143\x65\x69\x76\x65\162\137\x61\x64\144\x72\145\x73\x73"]; goto sgePx; IORP0: $star = strtotime($star_time); goto ByxxO; pWVMj: goto c32px; goto LigzD; M8LmJ: $tmp["\171"] = $list[$i]["\x72\145\143\x65\151\166\145\x72\137\x6d\x6f\142\x69\x6c\x65"]; goto w4b60; r7mPj: $child_menu_list[] = array("\x75\162\x6c" => "\141\144\155\151\156\x2f\x6f\162\x64\x65\x72\x2f\x6f\x72\144\x65\162\114\x69\163\164\46\163\x74\141\164\165\x73\75\55\x32", "\x6d\145\156\x75\x5f\x6e\141\155\x65" => "\345\233\236\346\224\266\347\253\231", "\x61\x63\164\151\166\x65" => $status == -2 ? 1 : 0); goto iQvEB; VI_tO: goto xJYKE; goto wdCOd; goZ7p: h3OKJ: goto r7mPj; LigzD: BnsDG: goto YX2fY; zntrA: $condition["\151\x73\137\144\x65\154\145\x74\x65\x64"] = array("\x3c\76", "\61"); goto djNes; gDduN: $tmp["\x73"] = $list[$i]["\160\141\x79\137\163\164\141\164\x75\x73"] == 1 ? "\345\267\262\344\273\230\xe6\254\xbe" : "\xe6\x9c\xaa\xe4\273\x98\346\254\xbe"; goto Q0vpu; u0Y3Y: xJYKE: goto X6axO; tdJpi: $order = new OrderService(); goto ItdIY; eJct0: $this->assign("\157\162\144\x65\x72\137\x6e\x6f", $search_text); goto ZRqUL; W7Piw: $tmp["\141"] = $list[$i]["\160\x61\x79\137\155\x6f\x6e\x65\x79"]; goto gDduN; pVRqK: $title = ["\350\256\242\345\215\225\xe5\217\267", "\xe7\224\250\346\x88\xb7", "\xe5\225\206\xe5\223\x81\345\x90\x8d", "\xe8\247\x84\xe6\240\xbc", "\xe6\225\260\xe9\x87\x8f", "\351\207\221\351\xa2\235", "\xe6\x94\266\xe4\273\266\xe4\272\272", "\xe7\224\xb5\xe8\257\x9d", "\xe5\234\xb0\345\235\x80", "\350\277\220\xe8\264\xb9", "\xe5\xbf\xab\xe9\x80\x92\xe5\x8d\225\345\x8f\xb7", "\345\277\xab\xe9\200\x92\345\x85\xac\345\x8f\270", "\345\xae\236\351\x99\x85\344\xbb\x98\346\xac\xbe", "\344\xbb\x98\346\xac\276\xe7\x8a\xb6\xe6\x80\201", "\xe8\xae\xa2\345\x8d\225\347\212\xb6\xe6\x80\x81", "\344\xb8\213\345\x8d\225\xe6\x97\266\351\227\xb4", "\345\xa4\x87\xe6\xb3\xa8"]; goto in3ZL; ByxxO: $end = strtotime($end_time); goto eAjrx; Sb9QF: $i++; goto lewGP; Id1aQ: $condition["\x63\162\x65\x61\164\x65\x5f\164\x69\x6d\145"] = ["\142\x65\164\x77\x65\x65\156", [$star, $star + 86400]]; goto HqbCT; ml8ER: $condition["\x6d\x63\x68\137\151\x64"] = array("\145\161", $mch_id); goto GE4rj; BQRbP: exit; goto exHBZ; NeUMU: $tmp["\x71"] = $list[$i]["\157\x72\144\145\162\x5f\156\x6f"]; goto uVgN_; ONTtP: goto B15tn; goto tmtEj; GOMQU: $tmp["\x65"] = $list[$i]["\157\x72\x64\x65\162\x5f\151\164\145\155\137\154\151\163\164"][0]["\147\157\x6f\144\163\x5f\x6e\x61\x6d\145"]; goto LClcy; m7y_k: $tmp["\157"] = $list[$i]["\145\x78\x70\162\x65\x73\x73\x5f\x6e\157"]; goto ZdZ2m; TjB_0: foreach ($all_status as $k => $v) { $child_menu_list[] = array("\x75\162\x6c" => "\141\144\155\x69\x6e\57\x6f\x72\x64\x65\x72\57\x6f\x72\x64\x65\162\114\151\x73\164\46\163\x74\x61\164\x75\163\x3d" . $v["\x73\164\141\x74\165\x73\x5f\151\144"], "\x6d\145\156\x75\x5f\x6e\141\x6d\x65" => $v["\163\164\x61\164\x75\x73\x5f\156\x61\x6d\145"], "\x61\143\x74\x69\x76\145" => $status == $v["\x73\164\x61\x74\165\163\137\151\x64"] ? 1 : 0); g9L4m: } goto goZ7p; ZdZ2m: $tmp["\x70"] = $list[$i]["\145\x78\x70\162\145\x73\x73\137\143\157\155\x70\141\156\171"]; goto puxtZ; I1Igw: $condition["\x6f\x72\144\145\x72\x5f\x73\164\x61\164\165\x73"] = array("\x69\x6e", "\60\54\61\x2c\62\x2c\63\x2c\x34\x2c\65\54\x2d\x31"); goto zA7os; eylk5: IkUAY: goto Sb9QF; PnNp3: $status = request()->param("\163\x74\x61\x74\x75\163", ''); goto T2Qvc; VpV7R: $setting = uni_setting_load("\x70\141\x79\x6d\x65\x6e\x74", $_W["\165\156\x69\x61\x63\x69\x64"]); goto wtcNc; JI_Z_: $tmp = array(); goto Nw9nu; Ku8IO: $exp = $_POST["\145\170\x70"]; goto Xxepf; cSj6q: if (!($i2 < count($list[$i]["\x6f\162\144\x65\162\137\151\164\145\x6d\x5f\154\151\x73\x74"]))) { goto fkQms; } goto NeUMU; qF9bT: $tmp["\x66"] = $list[$i]["\x63\162\145\141\x74\x65\137\164\x69\155\145"]; goto ihjPp; exHBZ: LgBUg: goto B4kK4; YX2fY: $this->assign("\162\145\146\x75\x6e\144\x5f\x74\171\x70\145", 0); goto AzTVK; nLXjR: if ($status == -2) { goto xQkG1; } goto zntrA; yigx2: $tmp["\162\x32"] = $list[$i]["\x6f\x72\144\x65\162\x5f\x69\x74\145\x6d\x5f\x6c\151\x73\164"][$i2]["\156\165\x6d"]; goto VfMkE; uVc6t: xQkG1: goto I1Igw; iQvEB: global $_W; goto VpV7R; xZ65i: $this->assign("\x70\141\x67\x65", $page); goto eJct0; K5aGo: $tmp["\x64"] = $list[$i]["\163\x74\141\x74\165\x73\137\x6e\141\155\x65"]; goto USJo5; SJ2ac: $tmp["\162\x32"] = $list[$i]["\157\x72\144\x65\x72\x5f\151\164\x65\x6d\x5f\154\x69\163\164"][0]["\156\165\x6d"]; goto K1209; lewGP: goto fl2Ea; goto WyhQY; pkMef: $ser->FormexportExcel1($title, $es, "\xe5\257\xbc\xe5\207\xba" . $this->bus_id . rand(100, 999)); goto BQRbP; WmE_2: $tmp["\x69"] = $list[$i]["\163\150\x69\160\160\x69\156\147\x5f\x6d\157\156\x65\x79"]; goto m7y_k; T2Qvc: $condition["\x6f\x72\x64\145\162\137\156\x6f"] = array("\x6c\x69\153\x65", "\45" . $search_text . "\x25"); goto ml8ER; QBERN: array_push($es, $tmp); goto k2uo5; GPr5c: $all_status = OrderService::getOrderStatus(); goto BsWy2; MRdH5: if (!($i < count($list))) { goto rbjB2; } goto kTDYh; Zxo3U: $tmp["\161"] = $list[$i]["\x6f\162\x64\x65\162\x5f\x6e\x6f"]; goto B1bO5; QXcG6: foreach ($outtimes as $out) { goto ljxud; WoBQB: $share_data["\155\x6f\156\145\171"] = $us["\164\150\151\162\144\x5f\x70\x72\x69\143\x65"]; goto Vn5j0; sXosm: Db::name("\x79\142\163\x63\x5f\x75\x73\x65\162")->where("\x75\x69\x64", $us["\x70\x61\162\145\x6e\x74\137\x69\x64\x5f\x33"])->setInc("\x74\157\164\x61\x6c\137\x70\x72\151\x63\x65", $us["\164\150\x69\x72\x64\137\160\162\x69\x63\x65"]); goto OBZ5E; hoQVD: ZUBAw: goto do8UA; do8UA: if (!($us["\160\141\162\145\156\x74\137\151\x64\137\63"] && $us["\160\x61\162\x65\156\x74\x5f\x69\x64\x5f\63"] != 0)) { goto bvYR9; } goto HUaQ8; Dw38l: bvYR9: goto s7uJQ; JQozN: LmDv2: goto Y2EwE; TF6Px: if (!$us) { goto krNoI; } goto wFGbf; ocWnN: $share_data["\163\157\x75\162\x63\145"] = 1; goto ZePzB; ljxud: $order_id = $out["\157\x72\x64\145\x72\137\x69\144"]; goto HVBQS; ZePzB: Db::name("\x79\x62\x73\x63\x5f\x75\x73\x65\162\137\163\x68\x61\162\x65\x5f\x6d\x6f\x6e\x65\171")->insert($share_data); goto HJ0XL; eUi44: if (!($us["\x70\141\x72\145\156\x74\x5f\151\x64\x5f\x32"] && $us["\160\x61\x72\x65\x6e\164\x5f\151\x64\x5f\62"] != 0)) { goto ZUBAw; } goto hy5hW; MeUT1: UFBYm: goto eUi44; HUaQ8: $share_data["\x75\163\x65\162\x5f\151\x64"] = $us["\x70\x61\162\x65\156\164\137\151\x64\137\x33"]; goto WoBQB; D4qb2: Db::name("\171\142\163\x63\137\x75\x73\x65\x72")->where("\x75\151\144", $us["\160\x61\x72\145\156\x74\x5f\x69\x64\137\x32"])->setInc("\x70\162\x69\143\145", $us["\163\145\143\x6f\156\144\137\x70\162\x69\x63\x65"]); goto hoQVD; s7uJQ: krNoI: goto LtJ9t; Eay9e: Db::name("\x79\x62\x73\x63\137\x75\x73\x65\x72\x5f\163\x68\141\162\x65\x5f\155\157\156\x65\171")->insert($share_data); goto sXosm; pQBiT: if (!$op) { goto ImgVw; } goto nsfgQ; hy5hW: $share_data["\x75\x73\145\x72\x5f\151\x64"] = $us["\x70\141\x72\145\x6e\164\x5f\x69\x64\137\x32"]; goto VjzCt; Dz0V6: Db::name("\x79\142\x73\x63\137\x75\163\145\x72")->where("\165\x69\144", $us["\x70\x61\x72\145\156\x74\137\151\144\137\61"])->setInc("\x70\162\x69\x63\145", $us["\x66\x69\162\163\x74\x5f\160\162\151\143\145"]); goto MeUT1; HVBQS: $op = Db::name("\x79\142\x73\x63\137\157\x72\x64\145\x72")->where(["\x6f\162\144\x65\162\137\151\x64" => $order_id, "\x6f\162\144\145\162\x5f\x73\x74\141\164\x75\x73" => 2])->update(["\146\151\x6e\x69\x73\x68\x5f\x74\151\155\145" => $ttime, "\x6f\162\x64\145\x72\137\x73\x74\x61\164\165\x73" => 3]); goto pQBiT; OL0_Q: if (!($us["\160\x61\162\145\156\164\137\x69\x64\137\61"] && $us["\160\x61\x72\x65\x6e\164\137\x69\144\137\x31"] != 0)) { goto UFBYm; } goto Unfsm; VjzCt: $share_data["\x6d\157\156\x65\x79"] = $us["\x73\x65\x63\x6f\156\x64\x5f\x70\x72\151\x63\x65"]; goto MWeCE; LtJ9t: ImgVw: goto JQozN; MWeCE: $share_data["\163\157\165\162\x63\145"] = 2; goto ZQ1nF; J2fkX: $share_data["\155\157\156\145\x79"] = $us["\146\151\162\163\x74\x5f\x70\162\x69\143\x65"]; goto ocWnN; Lirwg: $us = Db::name("\171\142\163\x63\137\x6f\x72\144\145\x72\x5f\x73\150\x61\162\145")->where(["\x75\163\x65\x72\x5f\x69\144" => $order_info["\x62\165\x79\145\162\137\x69\144"], "\x6f\x72\x64\x65\x72\137\151\144" => $order_id])->find(); goto TF6Px; Vn5j0: $share_data["\163\x6f\165\162\x63\145"] = 3; goto Eay9e; ZQ1nF: Db::name("\x79\x62\163\143\x5f\x75\x73\x65\162\137\x73\x68\x61\x72\145\137\155\157\x6e\x65\x79")->insert($share_data); goto TwSJi; Unfsm: $share_data["\x75\x73\x65\x72\x5f\151\144"] = $us["\160\x61\162\145\x6e\x74\137\151\x64\137\61"]; goto J2fkX; nsfgQ: $order_info = Db::name("\171\x62\x73\143\x5f\x6f\x72\144\x65\162")->where(["\x6f\x72\144\x65\162\x5f\x69\144" => $order_id])->find(); goto Lirwg; wFGbf: $share_data = ["\155\x63\x68\137\x69\144" => $this->bus_id, "\157\x72\x64\145\x72\137\x69\144" => $order_id, "\143\x72\145\141\x74\x65\137\164\x69\155\x65" => time(), "\151\x73\x5f\144\x65\x6c" => 1]; goto OL0_Q; OBZ5E: Db::name("\171\x62\163\x63\x5f\165\x73\x65\x72")->where("\165\151\x64", $us["\x70\x61\162\145\x6e\x74\137\151\144\137\x33"])->setInc("\x70\162\151\x63\145", $us["\x74\150\x69\x72\144\137\x70\162\x69\x63\x65"]); goto Dw38l; TwSJi: Db::name("\x79\x62\163\143\137\x75\163\x65\x72")->where("\165\151\x64", $us["\160\x61\x72\x65\x6e\164\137\151\144\137\x32"])->setInc("\x74\157\164\x61\x6c\137\160\162\x69\x63\x65", $us["\x73\x65\143\x6f\x6e\x64\x5f\x70\162\x69\x63\x65"]); goto D4qb2; HJ0XL: Db::name("\171\142\x73\x63\x5f\x75\x73\x65\x72")->where("\x75\x69\x64", $us["\x70\141\162\x65\156\x74\137\151\x64\137\x31"])->setInc("\164\x6f\164\141\154\x5f\x70\162\151\x63\145", $us["\146\x69\162\x73\x74\137\160\x72\x69\x63\145"]); goto Dz0V6; Y2EwE: } goto WxNT_; rEYtd: goto NM83i; goto uVc6t; VfMkE: $tmp["\x72\63"] = $list[$i]["\x6f\162\144\x65\x72\x5f\x69\x74\x65\x6d\x5f\x6c\x69\163\164"][$i2]["\x70\x72\x69\x63\x65"]; goto Vvyxc; ZRqUL: $this->assign("\x73\x74\141\x72\137\x74\151\x6d\145", $star_time); goto joSag; Q0vpu: $tmp["\x64"] = $list[$i]["\x73\164\141\164\x75\x73\137\156\141\x6d\x65"]; goto qF9bT; LVmqh: $page = $list->render(); goto Z2LIs; ItdIY: $search_text = Request::instance()->post("\x6f\162\x64\x65\162\137\x6e\157"); goto z2R4B; UyXW3: if ($status != '') { goto aOkNi; } goto sjRXV; tmtEj: RXSAc: goto vfnWT; sgePx: $tmp["\151"] = $list[$i]["\163\x68\x69\160\x70\151\156\147\137\155\x6f\x6e\x65\x79"]; goto eT06z; yItEm: B15tn: goto eylk5; puxtZ: $tmp["\141"] = $list[$i]["\160\141\x79\137\155\x6f\156\x65\x79"]; goto UpzHE; QdnBG: MBsxy: goto UyXW3; Ztizr: unset($list); goto vvn8S; or4Yw: $this->assign("\x72\145\x66\165\x6e\144\137\164\171\160\x65", 1); goto pWVMj; X6axO: $condition["\155\141\x69\x6c\x69\156\x67\x5f\x74\x79\160\145"] = 1; goto UdAP7; eT06z: $tmp["\157"] = $list[$i]["\145\x78\x70\162\x65\163\163\137\156\x6f"]; goto wCDCX; in3ZL: $es = array(); goto JI_Z_; M0M0N: $end_time = input("\160\x61\162\x61\155\56\145\x6e\144\x5f\164\x69\155\145"); goto dHxtL; Z2LIs: $this->assign("\154\151\x73\164", $list); goto xZ65i; AzTVK: c32px: goto ELiFq; DlhOR: $outtimes = Db::name("\171\x62\163\143\137\x6f\162\144\x65\162")->where("\x72\x65\x66\x75\156\x64\137\x74\151\x6d\x65", 0)->where("\x6f\x72\x64\145\x72\x5f\163\x74\x61\164\x75\163", 2)->where("\x66\151\156\151\163\150\x5f\x74\x69\155\145", 0)->where("\x63\x6f\x6e\163\x69\x67\x6e\x5f\164\151\155\145\x20\x3e\40\60\40\x41\116\104\x20\x63\x6f\x6e\x73\x69\x67\156\137\x74\151\x6d\x65\x20\x3c\40" . ($ttime - 10 * 24 * 60 * 60))->select(); goto QXcG6; dHxtL: if (empty($star_time)) { goto uSnql; } goto GRGz6; USJo5: $tmp["\146"] = $list[$i]["\143\162\145\141\x74\145\x5f\164\x69\155\145"]; goto UgNev; eAjrx: $condition["\143\x72\x65\141\164\145\x5f\x74\x69\155\x65"] = ["\142\145\164\167\145\x65\156", [$star, $end]]; goto QdnBG; W8exX: array_push($es, $tmp); goto ONTtP; Xxepf: if (!isset($exp)) { goto LgBUg; } goto Ztizr; wtcNc: $refund_setting = $setting["\x70\x61\x79\155\145\156\164"]["\x77\145\x63\x68\141\164\137\x72\145\x66\x75\156\144"]; goto YJCcd; se2jc: $tmp["\x74"] = $list[$i]["\162\145\x63\145\x69\x76\145\x72\x5f\x6e\141\x6d\x65"]; goto cNFsG; zA7os: $condition["\x69\163\137\144\x65\x6c\145\164\x65\x64"] = array("\75", 1); goto Y1KBb; sjRXV: $condition["\x69\163\137\x64\145\x6c\145\164\x65\x64"] = array("\x3c\x3e", "\x31"); goto Mw6kM; t2Afb: $tmp["\x75"] = $list[$i]["\x72\145\143\x65\151\x76\x65\x72\x5f\160\x72\157\x76\x69\156\143\x65\137\x6e\141\x6d\x65"] . $list[$i]["\x72\x65\x63\x65\x69\x76\x65\162\137\143\151\164\x79\x5f\x6e\141\x6d\x65"] . $list[$i]["\x72\145\143\x65\x69\x76\x65\162\137\x63\x6f\165\156\x74\171\x5f\x6e\141\155\145"] . $list[$i]["\162\145\143\145\x69\x76\145\162\x5f\141\x64\x64\x72\x65\163\x73"]; goto WmE_2; qU9MA: fl2Ea: goto MRdH5; GRGz6: $star = strtotime($star_time); goto Id1aQ; cNFsG: $tmp["\171"] = $list[$i]["\x72\145\143\145\x69\166\x65\x72\x5f\x6d\157\142\x69\154\145"]; goto t2Afb; B1bO5: $tmp["\167"] = $list[$i]["\165\x73\145\x72\x5f\x6e\x61\155\145"]; goto GOMQU; HqbCT: uSnql: goto WmRya; ihjPp: $tmp["\147"] = $list[$i]["\163\x65\154\154\x65\162\137\x6d\145\x6d\157"]; goto QBERN; i3mw3: ORktt: goto cSj6q; wCDCX: $tmp["\160"] = $list[$i]["\x65\170\x70\162\x65\x73\163\x5f\x63\157\155\160\x61\156\171"]; goto W7Piw; hEWYM: $star_time = input("\160\141\x72\141\155\x2e\163\164\141\162\x5f\164\151\x6d\145"); goto M0M0N; Y1KBb: NM83i: goto u0Y3Y; GE4rj: $condition["\141\143\164\151\x76\x69\x74\x79\x5f\x6f\x72\144\x65\162\x5f\x74\x79\x70\x65"] = array("\145\161", 0); goto hEWYM; YJCcd: if ($refund_setting["\x73\x77\x69\x74\143\x68"] != 1 || empty($refund_setting["\153\x65\x79"]) || empty($refund_setting["\143\x65\162\164"])) { goto BnsDG; } goto or4Yw; kTDYh: if (count($list[$i]["\x6f\x72\x64\145\x72\137\x69\164\x65\155\x5f\154\x69\163\164"]) > 1) { goto RXSAc; } goto Zxo3U; UdAP7: $list = $order->getOrderList($condition, $search_text, "\143\x72\145\141\164\x65\x5f\x74\x69\155\x65\40\x64\145\x73\x63"); goto Ku8IO; K1209: $tmp["\162\x33"] = $list[$i]["\x6f\x72\x64\145\x72\x5f\x69\x74\145\155\137\x6c\x69\x73\x74"][0]["\160\x72\x69\143\145"]; goto se2jc; u0jF_: $i2++; goto bmV0X; WyhQY: rbjB2: goto yQZ5Q; MfL98: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto tdJpi; BsWy2: $child_menu_list = array(); goto e4ndX; LClcy: $tmp["\162"] = $list[$i]["\157\x72\144\145\x72\x5f\x69\x74\145\155\x5f\x6c\151\163\x74"][0]["\x73\153\x75\x5f\x6e\x61\155\145"]; goto SJ2ac; uVgN_: $tmp["\x77"] = $list[$i]["\x75\163\x65\162\x5f\x6e\141\x6d\x65"]; goto wH7eX; UgNev: $tmp["\147"] = $list[$i]["\x73\145\154\154\145\x72\137\155\145\x6d\x6f"]; goto W8exX; k2uo5: H3rTd: goto u0jF_; WmRya: if (!(!empty($star_time) && !empty($end_time))) { goto MBsxy; } goto IORP0; djNes: $condition["\157\162\144\145\162\137\x73\164\141\x74\x75\163"] = array("\75", $status); goto rEYtd; bmV0X: goto ORktt; goto zxnX6; vvn8S: $list = $order->getOrderList1($condition, "\x63\x72\145\141\x74\x65\x5f\x74\151\155\145\40\x64\145\x73\x63"); goto pVRqK; B4kK4: $this->assign("\157\162\144\x65\x72\x5f\163\x74\141\164\165\163", $status); goto GPr5c; Vvyxc: $tmp["\164"] = $list[$i]["\162\145\143\145\x69\x76\x65\162\137\156\141\155\x65"]; goto M8LmJ; adsV9: return view("\157\162\x64\145\162\57\157\162\x64\145\x72\137\154\x69\x73\x74"); goto ft4p6; wdCOd: aOkNi: goto nLXjR; ELiFq: $this->assign("\143\150\151\154\x64\137\x6d\145\x6e\165\137\x6c\151\163\164", $child_menu_list); goto LVmqh; joSag: $this->assign("\145\156\x64\x5f\164\151\x6d\x65", $end_time); goto adsV9; e4ndX: $child_menu_list[] = array("\165\162\x6c" => "\141\144\155\151\x6e\x2f\x4f\162\x64\145\162\57\x6f\162\x64\x65\x72\x4c\x69\x73\x74", "\x6d\145\156\165\x5f\x6e\x61\155\145" => "\xe5\x85\xa8\xe9\x83\250", "\141\x63\x74\x69\x76\x65" => $status == '' ? 1 : 0); goto TjB_0; ft4p6: } public function OrderList2() { goto yuLPu; XRurc: $star_time = input("\x70\x61\x72\141\155\56\163\164\141\162\x5f\164\x69\155\x65"); goto d1xHb; UltcV: $condition["\x6f\x72\144\145\x72\137\163\x74\141\x74\x75\x73"] = array("\x69\x6e", "\60\54\x31\54\62\54\63\54\64\x2c\x35\54\55\x31"); goto vIPSh; KABWm: vvpc6: goto vSYDQ; spyka: $condition["\x6f\x72\x64\x65\162\x5f\163\x74\141\164\x75\163"] = array("\x69\x6e", "\x30\54\61\x2c\x32\54\x33\54\x34\x2c\x35\54\55\61"); goto RUGcA; FNLSo: $refund_setting = $setting["\160\141\x79\x6d\145\x6e\164"]["\x77\145\x63\x68\141\x74\x5f\x72\x65\146\165\x6e\x64"]; goto VKLGP; xuETT: $status = request()->param("\163\x74\141\x74\165\163", ''); goto c0qhT; H8j9J: foreach ($all_status as $k => $v) { goto vQT3P; RXJOH: OZHK_: goto GhL87; vQT3P: $status_arr[$v["\x73\x74\x61\x74\x75\163\x5f\151\x64"]] = $v["\163\164\x61\x74\x75\163\x5f\x6e\x61\155\x65"]; goto ArbBY; ArbBY: $child_menu_list[] = array("\x75\x72\154" => "\141\144\x6d\151\x6e\x2f\157\162\144\145\x72\57\x6f\162\x64\145\x72\114\151\x73\164\x32\46\163\x74\x61\x74\x75\x73\x3d" . $v["\163\x74\141\164\x75\x73\137\x69\144"], "\155\145\x6e\x75\x5f\156\141\155\x65" => $v["\x73\164\x61\x74\165\163\x5f\x6e\141\x6d\145"], "\x61\143\x74\151\x76\x65" => $status == $v["\x73\x74\x61\164\165\x73\x5f\151\144"] ? 1 : 0); goto RXJOH; GhL87: } goto JmcMv; xxG_y: $page = $list->render(); goto v2bn0; Vhyth: goto kqOgq; goto d4hst; goa3P: $status_arr = array(); goto H8j9J; RlSnq: $this->assign("\163\164\x61\x72\x5f\164\151\x6d\145", $star_time); goto eVcvr; c0qhT: $condition["\x6f\x72\x64\145\162\137\156\x6f"] = array("\x6c\151\x6b\x65", "\45" . $search_text . "\45"); goto m1Fak; oa2km: $this->assign("\162\145\146\165\x6e\x64\137\164\171\x70\145", 1); goto f82xW; MmE0P: $list = $order->getOrderList($condition, $search_text, "\143\162\x65\141\x74\145\137\164\x69\x6d\x65\40\144\x65\163\143"); goto WldFk; CIT78: $condition["\143\x72\x65\x61\164\x65\x5f\x74\x69\155\x65"] = ["\142\x65\x74\167\145\145\156", [$star, $star + 86400]]; goto xSmIV; B8lRK: UT45h: goto tzlDG; vUhWy: $star = strtotime($star_time); goto CIT78; IUkxW: $child_menu_list[] = array("\x75\162\154" => "\x61\144\155\151\x6e\x2f\157\162\x64\145\162\57\x6f\x72\144\x65\162\x4c\x69\x73\x74\62\46\163\164\141\164\x75\163\x3d\55\x32", "\x6d\145\156\x75\x5f\156\x61\155\145" => "\345\x9b\236\xe6\224\xb6\347\253\231", "\x61\x63\x74\x69\166\x65" => $status == -2 ? 1 : 0); goto NIsWY; LPMls: $setting = uni_setting_load("\x70\141\x79\155\x65\156\x74", $_W["\x75\156\151\141\143\151\x64"]); goto FNLSo; eVcvr: $this->assign("\x65\x6e\144\137\164\151\x6d\x65", $end_time); goto mm3bw; RZRL7: $all_status = OrderService::getOrderStatus2(); goto VBc30; ATX3q: $this->assign("\x73\164\x61\164\165\163\x5f\x61\162\x72", $status_arr); goto ER_Z7; xieR0: $condition["\151\x73\x5f\144\145\x6c\145\x74\145\x64"] = array("\x3c\x3e", "\x31"); goto thgDj; CzDbL: if (!(!empty($star_time) && !empty($end_time))) { goto UT45h; } goto WcClu; vcZgW: $end = strtotime($end_time); goto ovABO; v2gPP: $child_menu_list[] = array("\x75\162\154" => "\141\x64\x6d\151\156\x2f\x4f\x72\x64\x65\162\57\x6f\x72\144\x65\x72\114\151\163\164\x32", "\155\x65\x6e\165\x5f\x6e\x61\155\145" => "\345\205\250\351\x83\250", "\141\x63\164\151\166\x65" => $status == '' ? 1 : 0); goto goa3P; ER_Z7: $this->assign("\x63\x68\151\154\144\137\x6d\x65\x6e\x75\137\x6c\x69\163\x74", $child_menu_list); goto xxG_y; IcW0d: $condition["\x6d\x61\151\154\151\x6e\147\x5f\164\171\160\x65"] = 2; goto MmE0P; NIsWY: global $_W; goto LPMls; vSYDQ: $this->assign("\162\x65\x66\165\x6e\144\x5f\x74\x79\x70\145", 0); goto p5vsD; RUGcA: $condition["\x69\163\x5f\144\x65\x6c\145\x74\x65\144"] = array("\x3d", 1); goto rJ_uq; ovABO: $condition["\143\162\x65\x61\164\145\x5f\164\x69\155\145"] = ["\x62\145\x74\167\145\145\x6e", [$star, $end]]; goto B8lRK; cXSxb: $condition["\141\x63\x74\151\x76\x69\x74\171\137\x6f\162\x64\x65\162\137\164\x79\160\145"] = array("\x65\x71", 0); goto XRurc; rJ_uq: kqOgq: goto zKjN1; VKLGP: if ($refund_setting["\x73\x77\151\164\x63\x68"] != 1 || empty($refund_setting["\x6b\x65\x79"]) || empty($refund_setting["\x63\x65\162\164"])) { goto vvpc6; } goto oa2km; WldFk: $this->assign("\157\x72\144\x65\x72\x5f\x73\164\x61\x74\165\x73", $status); goto RZRL7; ElUor: $condition["\151\163\x5f\x64\x65\x6c\x65\x74\x65\x64"] = array("\x3c\x3e", "\x31"); goto UltcV; v2bn0: $this->assign("\154\151\x73\x74", $list); goto fRnYT; vIPSh: goto rxDWh; goto Y7hq3; Jxy4H: $order = new OrderService(); goto HuXGP; m1Fak: $condition["\x6d\x63\150\137\x69\x64"] = array("\x65\161", $mch_id); goto cXSxb; tzlDG: if ($status != '') { goto IR_nx; } goto ElUor; gCqoe: if (empty($star_time)) { goto nSSGY; } goto vUhWy; thgDj: $condition["\x6f\x72\144\x65\x72\x5f\x73\x74\x61\164\165\163"] = array("\75", $status); goto Vhyth; HuXGP: $search_text = Request::instance()->post("\x6f\162\144\145\x72\137\x6e\157"); goto pnKNn; JmcMv: CyD3c: goto IUkxW; xSmIV: nSSGY: goto CzDbL; zKjN1: rxDWh: goto IcW0d; p5vsD: aydq5: goto ATX3q; yuLPu: $mch_id = isset($this->bus_id) ? $this->bus_id : "\60"; goto Jxy4H; pnKNn: $search_text = str_replace("\40", '', $search_text); goto xuETT; fRnYT: $this->assign("\x70\141\x67\x65", $page); goto hKDVs; hKDVs: $this->assign("\157\162\x64\x65\x72\x5f\x6e\157", $search_text); goto RlSnq; WcClu: $star = strtotime($star_time); goto vcZgW; VBc30: $child_menu_list = array(); goto v2gPP; Y7hq3: IR_nx: goto DPGBG; d1xHb: $end_time = input("\160\141\162\141\155\x2e\145\x6e\x64\x5f\x74\151\155\145"); goto gCqoe; DPGBG: if ($status == -2) { goto fwYI9; } goto xieR0; mm3bw: return view("\x6f\x72\x64\x65\x72\57\x6f\162\144\145\x72\137\x6c\151\x73\164\x32"); goto ZsQgP; d4hst: fwYI9: goto spyka; f82xW: goto aydq5; goto KABWm; ZsQgP: } public function bargain_order() { goto mUyaw; EfZl2: $status = input("\x70\141\x72\141\155\56\x73\164\x61\164\x75\x73", "\x2d\62"); goto c9bVx; pgKD9: goto wlkn3; goto cGwrQ; zO5hQ: $condition["\142\x6f\x2e\142\141\x72\147\141\x69\156\137\x6e\x61\155\145"] = array("\154\x69\153\145", "\x25" . $search_text . "\x25"); goto Xzyvd; TmVSZ: $page = $list->render(); goto kty5w; jusG5: $this->assign("\163\x74\x61\164\165\x73", $status); goto TTLYo; kty5w: $this->assign("\154\x69\x73\x74", $list); goto XL8XZ; se7I1: $condition["\x62\x6f\56\x6f\x72\144\145\x72\x5f\163\x74\x61\164\165\x73"] = array("\151\x6e", "\60\x2c\x31\x2c\62\x2c\63\54\55\61"); goto n0z60; XL8XZ: $this->assign("\160\x61\x67\145", $page); goto HfFYD; cGwrQ: pifw1: goto se7I1; c9bVx: $search_text = input("\160\x61\162\x61\x6d\56\x73\145\x61\x72\143\150\137\x74\145\x78\164"); goto TnNHY; mUyaw: $mch_id = isset($this->bus_id) ? $this->bus_id : "\60"; goto EfZl2; HfFYD: $this->assign("\x73\145\141\162\143\150\x5f\164\x65\170\x74", $search_text); goto jusG5; Xzyvd: $list = Db::name("\x79\x62\x73\x63\137\142\141\x72\x67\x61\x69\156\137\x6f\162\x64\x65\x72")->alias("\x62\x6f")->join("\x79\x62\163\x63\137\x69\x6d\141\x67\145\163\40\x69", "\151\x2e\151\x6d\147\137\x69\144\x3d\x62\x6f\x2e\142\x61\162\147\x61\151\156\137\160\x69\x63")->where($condition)->where("\x62\x6f\56\155\143\x68\x5f\151\144", $mch_id)->field("\x62\x6f\x2e\x2a\54\x69\56\151\x6d\147\137\x63\157\166\x65\x72\137\163\155\x61\x6c\x6c")->paginate(20, false, $config = ["\x71\x75\145\x72\x79" => ["\163\x74\x61\x74\x75\163" => $status, "\163\145\141\x72\143\150\x5f\164\x65\170\164" => $search_text]]); goto TmVSZ; TTLYo: return view("\x6f\162\x64\145\x72\x2f\x62\141\162\147\141\151\156\137\157\162\x64\145\162"); goto uPM0W; n0z60: wlkn3: goto zO5hQ; u6Hqp: $condition["\142\x6f\x2e\x6f\x72\x64\145\x72\x5f\163\x74\141\x74\165\x73"] = array("\x65\x71", $status); goto pgKD9; TnNHY: if ($status == '' || $status == "\55\62") { goto pifw1; } goto u6Hqp; uPM0W: } public function OrderRefund() { goto DkKTV; q5M9L: if (!($i < count($list))) { goto w3qT5; } goto FwPj7; ynySE: w3qT5: goto pEh8K; oyXeS: $this->assign("\x70\141\147\145", $page); goto Aq6Y9; IUncj: $condition["\x6f\x72\144\145\x72\x5f\163\164\141\164\x75\x73"] = array("\75", $status); goto h91m_; lcZ1k: $status = request()->param("\163\164\141\164\x75\163", ''); goto FjTie; h91m_: $condition["\151\x73\137\144\x65\154\145\164\145\144"] = array("\74\76", "\61"); goto foEo_; v1bSa: $this->assign("\162\x65\x66\x75\x6e\144\x5f\164\x79\160\x65", 0); goto qCPyp; q5xGa: $child_menu_list[] = array("\x75\x72\154" => "\57\141\144\155\x69\x6e\x2f\117\x72\144\x65\x72\x2f\x4f\x72\144\145\162\122\145\146\x75\156\x64", "\155\145\156\x75\137\156\x61\x6d\145" => "\345\x85\xa8\351\203\xa8", "\141\143\164\x69\x76\x65" => $status == '' ? 1 : 0); goto MDqHM; MDqHM: foreach ($all_status as $k => $v) { $child_menu_list[] = array("\165\x72\154" => "\x2f\x61\144\x6d\151\156\57\x6f\x72\144\x65\162\57\x4f\x72\x64\x65\162\122\x65\146\x75\156\144\x26\163\164\141\164\x75\x73\x3d" . $v["\163\x74\141\164\x75\x73\x5f\151\144"], "\155\145\x6e\165\137\156\x61\x6d\x65" => $v["\x73\x74\141\164\165\163\137\x6e\141\155\145"], "\x61\x63\164\x69\166\x65" => $status == $v["\163\164\141\164\165\x73\x5f\151\x64"] ? 1 : 0); tHhz8: } goto ZicrQ; QUMmA: $this->assign("\x65\156\144\137\x74\x69\155\x65", $end_time); goto JBfR_; KqrEy: $this->assign("\x72\145\146\165\x6e\x64\x5f\x74\171\160\x65", 1); goto Vt8o6; Mgiso: $condition["\x63\162\145\141\x74\145\x5f\x74\151\x6d\x65"] = ["\142\145\x74\167\145\145\x6e", [$star, $end]]; goto WWV7t; qpRYK: $child_menu_list = array(); goto q5xGa; J98vf: $star = strtotime($star_time); goto j31WK; KBkdB: $end = strtotime($end_time); goto Mgiso; DfZlO: if (empty($star_time)) { goto VUnwE; } goto J98vf; PUt62: Sl2qq: goto IUncj; EhP_D: if (!(!empty($star_time) && !empty($end_time))) { goto dYgs_; } goto B8x_a; ZicrQ: DGoC6: goto q1Jij; JBfR_: return view("\x6f\x72\144\145\162\x2f\157\x72\x64\x65\162\137\162\145\146\165\156\x64\x5f\154\151\163\164"); goto MCbZ3; X1cDh: $i = 0; goto e_lGd; e_lGd: E1__8: goto q5M9L; Aqi24: $all_status = OrderService::getOrderRefund(); goto qpRYK; j31WK: $condition["\143\162\x65\x61\x74\x65\x5f\x74\151\x6d\x65"] = ["\x62\145\x74\167\145\145\156", [$star, $star + 86400]]; goto FjqLE; x9GDN: $search_text = Request::instance()->post("\157\162\x64\145\x72\x5f\156\157"); goto lcZ1k; B8x_a: $star = strtotime($star_time); goto KBkdB; doob2: $page = $list->render(); goto zKHDK; WWV7t: dYgs_: goto fAYJe; W8UgN: $ea[$i]["\x72\x65\146\x75\x6e\x64\x4c\157\147"] = $refundLog; goto s_gE9; AA6dD: $end_time = input("\160\141\x72\141\x6d\56\145\156\144\137\164\x69\x6d\x65"); goto DfZlO; q1Jij: global $_W; goto z6Ncy; MwuJc: $this->assign("\163\164\x61\x72\137\x74\151\x6d\x65", $star_time); goto QUMmA; qCPyp: Rnhf2: goto fSMPg; WhYtV: $condition["\155\x63\x68\137\151\144"] = array("\145\161", $mch_id); goto gSbAB; Vpnkn: goto I2lug; goto PUt62; Aq6Y9: $this->assign("\157\x72\x64\x65\x72\137\x6e\157", $search_text); goto MwuJc; gSbAB: $star_time = input("\160\x61\x72\x61\x6d\56\163\x74\141\x72\x5f\164\151\155\145"); goto AA6dD; yYtXW: $condition["\157\x72\144\145\x72\x5f\x73\x74\141\x74\165\163"] = array("\151\156", "\64\54\x35"); goto Vpnkn; Nbo4C: $ser = new Arliki(); goto X1cDh; fAYJe: if ($status != '') { goto Sl2qq; } goto yYtXW; Xeb61: $list = $order->getOrderListRefund($condition, $search_text, "\x63\x72\145\x61\x74\145\137\164\x69\155\145\40\144\145\x73\143"); goto I7G0y; JVkbh: ZA9TA: goto v1bSa; FjqLE: VUnwE: goto EhP_D; FwPj7: $ea[$i] = $list[$i]; goto iTZei; MqZ7f: goto E1__8; goto ynySE; zKHDK: $ea = array(); goto Nbo4C; iTZei: $ea[$i]["\x72\x65\x66\165\156\x64\137\x69\x6e\146\x6f"] = $ser->get_refund_info($ea[$i]["\x6f\x72\144\x65\x72\x5f\151\144"], 1); goto v7_C8; FjTie: $condition["\x6f\162\144\145\162\137\156\x6f"] = array("\x6c\x69\153\145", "\x25" . $search_text . "\x25"); goto WhYtV; z6Ncy: $setting = uni_setting_load("\160\x61\x79\155\x65\x6e\164", $_W["\165\156\151\x61\x63\151\x64"]); goto yT3Xx; LDQp8: $i++; goto MqZ7f; pEh8K: $this->assign("\x6c\151\163\164", $ea); goto oyXeS; On6GV: $order = new OrderService(); goto x9GDN; PSyKQ: if ($refund_setting["\163\x77\151\x74\143\x68"] != 1 || empty($refund_setting["\153\x65\171"]) || empty($refund_setting["\x63\x65\x72\x74"])) { goto ZA9TA; } goto KqrEy; fSMPg: $this->assign("\x63\150\x69\154\x64\137\155\x65\x6e\165\137\x6c\x69\x73\x74", $child_menu_list); goto doob2; v7_C8: $refundLog = Db::name("\171\142\x73\x63\137\x6f\x72\x64\145\x72\x5f\x72\145\x66\165\x6e\144")->where(["\x6d\x63\x68\137\151\144" => $this->bus_id, "\164\171\x70\145" => 1, "\x6f\x72\x64\145\162\137\x69\x64" => $ea[$i]["\x6f\162\144\x65\162\137\x69\x64"]])->order("\151\144\x20\144\145\163\x63")->select(); goto W8UgN; s_gE9: SzWdI: goto LDQp8; I7G0y: $this->assign("\x6f\162\144\145\x72\x5f\x73\164\141\x74\165\163", $status); goto Aqi24; DkKTV: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto On6GV; yT3Xx: $refund_setting = $setting["\160\141\171\155\145\x6e\164"]["\167\x65\x63\x68\141\164\x5f\x72\x65\146\x75\156\x64"]; goto PSyKQ; Vt8o6: goto Rnhf2; goto JVkbh; foEo_: I2lug: goto Xeb61; MCbZ3: } public function OrderDetail() { goto KTQje; Yu_x7: $info["\x70\x6f\151\156\x74"] = 0; goto fBYTR; hSbtN: RWW6U: goto mhgWM; VX8Mg: $info["\164\x61\170\x5f\x6d\x6f\x6e\145\x79"] = 0; goto Yu_x7; o27rV: $all_status = OrderService::getOrderRefund(); goto npcje; quicC: $list = Db::name("\171\142\x73\x63\137\x6f\x72\x64\x65\162")->where("\157\162\144\145\x72\x5f\x69\x64", $order_id)->find(); goto Hj1n2; G7xZZ: $order_id = request()->get("\x6f\162\x64\x65\x72\x5f\x69\144", 0); goto t3V4D; Hj1n2: $this->assign("\x6c\x69\x73\164", $list); goto UWd0V; mhgWM: $this->assign("\x6f\162\144\145\x72", $info); goto quicC; fBYTR: foreach ($all_status as $k_status => $v_status) { goto JdJFd; FoIcf: KwGPJ: goto TMuj9; JdJFd: if (!($v_status["\x73\164\x61\164\x75\163\137\151\x64"] == $info["\157\162\x64\x65\x72\x5f\x73\x74\141\164\165\163"])) { goto GDnWz; } goto t5HZs; Nwn8E: GDnWz: goto FoIcf; t5HZs: $info["\163\164\141\x74\165\x73\x5f\156\x61\155\145"] = $v_status["\x73\x74\141\x74\165\x73\137\x6e\x61\x6d\x65"]; goto Nwn8E; TMuj9: } goto hSbtN; BWfCx: i2LPp: goto DjUrA; KTQje: $advert = new OrderService(); goto G7xZZ; npcje: $info["\x75\163\145\162\137\160\x6c\x61\x74\146\157\x72\x6d\x5f\x6d\157\156\x65\171"] = 0; goto VX8Mg; t3V4D: $print = request()->param("\160\x72\151\156\x74\145\162", 2); goto De9i6; DjUrA: $this->assign("\161\162\143\157\x64\x65", $this->get_barcode($info["\157\x72\144\x65\162\137\x6e\x6f"] . "\x5f\x31")); goto MW8tO; hb99C: return view("\157\x72\144\145\x72\x2f\157\x72\x64\145\162\137\x64\145\164\141\151\154"); goto dMSxA; UWd0V: if ($print == 1) { goto i2LPp; } goto hb99C; dMSxA: goto IrF2f; goto BWfCx; wkXDF: IrF2f: goto TYTrS; De9i6: $info = $advert->getOrderDetail($order_id); goto o27rV; MW8tO: return view("\x61\x72\154\151\x6b\x69\57\160\x72\151\156\x74\x65\x72"); goto wkXDF; TYTrS: } public function get_barcode($data, $width = 200, $height = 200) { $str = "\x3c\x64\151\x76\x20\x69\144\x3d\x22\x62\x61\x72\x5f\143\x6f\x64\x65\x22\x3e\74\57\144\x69\x76\x3e\x3c\163\x63\x72\151\x70\164\76\44\50\146\x75\156\x63\x74\151\x6f\156\x28\x29\x7b\x24\50\x22\43\x62\141\x72\x5f\x63\x6f\144\x65\x22\x29\x2e\x71\x72\143\x6f\144\x65\50\x7b\167\151\144\x74\x68\x3a" . $width . "\x2c\x68\145\151\147\150\x74\x3a" . $height . "\54\164\145\x78\x74\x3a\x22" . $data . "\x22\x7d\x29\x3b\175\x29\x3b\x3c\57\x73\143\x72\x69\160\x74\x3e"; return $str; } public function orderTakeDelivery() { goto v34Fj; lJyPM: return AjaxReturn($res); goto Zy3Tc; cG5fk: $order_id = request()->post("\x6f\x72\144\145\162\x5f\151\144", ''); goto JMKg2; v34Fj: $order_service = new OrderService(); goto cG5fk; JMKg2: $res = $order_service->OrderTakeDelivery($order_id); goto lJyPM; Zy3Tc: } public function orderTakeRefund() { goto GV4hd; SUyK_: if (!$res) { goto GWM9w; } goto zmtTD; vtIo0: file_put_contents($cert_path, $cert); goto Qr6bD; yXGF9: $key_path = ATTACHMENT_ROOT . "\160\165\x62\154\151\x63\x2f" . $this->bus_id . "\137\x77\145\x63\150\x61\164\x5f\162\x65\146\165\x6e\144\137\153\145\171\56\160\145\x6d"; goto vtIo0; Wcvl2: skj26: goto W7MXl; SdDcM: ip98B: goto dA0HA; Af3br: $cert_path = ATTACHMENT_ROOT . "\x70\x75\x62\x6c\x69\143\57" . $this->bus_id . "\x5f\x77\x65\143\x68\x61\x74\x5f\162\x65\x66\165\x6e\x64\137\x63\145\x72\x74\x2e\160\x65\155"; goto yXGF9; EhoDq: $ct = Db::name("\171\x62\163\x63\137\x6f\x72\x64\145\x72")->where("\157\x72\144\x65\162\x5f\x69\144", $order_id)->value("\x72\x65\146\165\156\x64\x5f\163\164\x61\x74\x75\x73"); goto PqxfU; PqxfU: $status = intval($ct) == 0 ? 1 : intval($ct); goto o_nUa; TGEmz: $lxm = Db::name("\171\142\x73\x63\x5f\x75\x73\x65\162\137\143\141\x72\x64")->where(["\x69\x73\x5f\144\x65\154" => 1, "\x75\163\145\162\x5f\x69\x64" => $order["\x62\x75\171\x65\x72\x5f\151\x64"]])->setInc("\x6d\x6f\x6e\145\171", floatval($order["\160\141\x79\137\155\x6f\x6e\145\x79"])); goto Dz5ib; qp3PQ: $order_info = Db::name("\171\142\x73\143\137\x6f\162\144\145\x72")->where("\x6f\x72\144\145\x72\x5f\x69\x64", $order_id)->find(); goto ycmXX; CXF0t: $setting = uni_setting_load("\160\x61\171\x6d\x65\x6e\x74", $_W["\x75\x6e\x69\141\x63\151\x64"]); goto d7Cl_; LZl9v: return AjaxReturnMsg(0, "\346\x94\xaf\344\xbb\230\351\x87\221\351\242\235\344\270\xba\xe9\x9b\266\346\x97\240\346\xb3\x95\351\x80\x80\346\254\276"); goto Mq_Yb; Z0MQ4: $order_info = Db::name("\171\142\163\143\x5f\157\162\144\x65\x72")->where("\157\x72\144\x65\162\x5f\x69\144", $order_id)->update(["\x6f\162\144\145\162\137\163\x74\141\164\x75\163" => 5, "\162\x65\x66\165\x6e\x64\x5f\x6d\157\156\x65\171" => $order["\x70\x61\x79\x5f\x6d\x6f\x6e\145\171"], "\146\x69\x6e\151\x73\x68\x5f\164\x69\x6d\145" => time()]); goto dOtBz; MPehW: return AjaxReturn($res); goto DrwlJ; EI1Vh: $res = $temp["\x41\x50\120\137\115\103\x48\111\104"] . date("\131\x6d\144\x48\x69\163") . rand(10000, 9999999); goto db3jM; UYNMX: $ii = Db::name("\x79\x62\x73\143\137\x6f\162\x64\145\162\x5f\x72\x65\146\x75\x6e\144")->where(["\x74\x79\160\x65" => $data["\x74\x79\160\x65"], "\x6f\162\x64\x65\162\x5f\x69\x64" => $data["\157\162\x64\145\x72\137\x69\144"]])->order("\x69\x64", "\x64\145\x73\143")->find(); goto lGXdz; HHlLQ: $res = Db::name("\x79\x62\163\x63\137\157\x72\x64\x65\162\137\x72\145\146\165\x6e\144")->where("\x69\144", $ii["\x69\144"])->update($data); goto ZQ057; TMdRD: HnCMl: goto eHNOU; KcSDL: $data["\162\x65\146\165\156\x64\137\x73\x74\x61\x74\x75\x73"] = 2; goto aCKkW; fR00F: goto NVbQM; goto TMdRD; ZvLPd: $input->SetAppid($temp["\101\120\x50\x5f\111\x44"]); goto YZMCt; lGXdz: if (!($ju == 1)) { goto u2UZM; } goto UQ8kK; WA3rf: $temp = json_decode($bus_config["\x76\141\x6c\165\x65"], true); goto EI1Vh; ksoGr: goto lS1pf; goto SdDcM; wdoXX: return 0; goto lH02P; UQ8kK: if (!($uid == 0)) { goto k4ieg; } goto cZQ38; qGxDr: goto qzD0A; goto WuS9b; RIPzV: $input->SetOut_trade_no($order_info["\x6f\165\x74\137\x74\x72\x61\144\x65\137\x6e\x6f"]); goto gx84U; jF2UL: Db::name("\x79\142\163\x63\x5f\x6f\x72\x64\145\162\x5f\x72\145\146\165\156\x64")->insert($data); goto XeSNK; SNqVh: u2UZM: goto G11Xa; Qr6bD: file_put_contents($key_path, $key); goto qwz44; xEoz1: if (!empty($ii)) { goto Dx_J3; } goto jF2UL; WuS9b: KS5IT: goto Bt05d; z6K0m: GWM9w: goto z3A4S; HGsGx: lS1pf: goto AQklt; d7Cl_: $refund_setting = $setting["\160\141\171\155\x65\x6e\164"]["\x77\145\143\150\141\x74\137\x72\145\x66\x75\x6e\x64"]; goto cweqC; ZQ057: F0owD: goto SUyK_; WnUQt: $data["\162\x65\146\165\x6e\x64\137\x73\x74\141\x74\x75\163"] = 1; goto ii9eb; G11Xa: $order = Db::name("\171\x62\163\x63\137\x6f\x72\x64\x65\x72")->where(["\x6f\162\144\145\162\137\151\x64" => $order_id])->find(); goto qUVsC; jwNVD: $data["\162\x65\x66\x75\x6e\144\x5f\x72\x65\141\x73\x6f\156"] = ''; goto KcSDL; cZQ38: return 0; goto qxHJ_; YZMCt: $cert = $cert; goto aSd24; W7MXl: Db::name("\171\x62\x73\x63\137\157\162\x64\145\x72\x5f\x72\145\146\165\x6e\x64")->where("\151\x64", $ii["\x69\x64"])->update(["\162\x65\146\x75\x6e\144\137\x73\164\x61\164\165\x73" => 2, "\x63\x72\145\141\164\145\137\x74\151\155\x65" => time()]); goto Z0MQ4; QH61Q: goto F0owD; goto cqoyy; Bt05d: $order_service = new OrderService(); goto rCVrw; JVx7L: return AjaxReturn(0); goto Wcvl2; Mq_Yb: VI0WK: goto wjdUv; PEK4C: if ($param["\162\145\x73\x75\x6c\164\x5f\x63\157\144\145"] == "\123\125\x43\x43\105\123\123") { goto HnCMl; } goto pLDwq; ZIA63: $input->SetRefund_fee($order_info["\160\141\171\x5f\155\x6f\x6e\x65\171"] * 100); goto F1gfM; edfuG: $key = authcode($refund_setting["\153\x65\x79"], "\104\x45\x43\x4f\104\x45"); goto qp3PQ; TEy8F: NVbQM: goto qGxDr; qUVsC: if (!($order["\x70\x61\171\137\164\171\x70\145"] == 2)) { goto HPVln; } goto TGEmz; z3A4S: return $res; goto SNqVh; gx84U: $input->SetTotal_fee($order_info["\x70\141\171\137\x6d\x6f\156\145\x79"] * 100); goto ZIA63; pLDwq: $errmsg = "\xe9\200\x80\346\xac\276\xe5\244\261\350\xb4\245\72" . json_encode($param, JSON_UNESCAPED_UNICODE); goto b2UFc; Dz5ib: if (!empty($lxm)) { goto skj26; } goto JVx7L; db3jM: $input = new \WxPayRefund(); goto RIPzV; uXXU3: $info = \request()->param("\x69\x6e\146\x6f", ''); goto OKz9w; CCG96: $data["\164\x79\160\145"] = 1; goto UYNMX; dOtBz: return AjaxReturn($order_info); goto iXxgL; OKz9w: $ju = \request()->param("\x6a\165", 0); goto JKn78; ndE_S: global $_W; goto CXF0t; aSd24: $key = $key; goto Af3br; iXxgL: HPVln: goto ndE_S; Era6U: $res = Db::name("\171\142\163\143\137\157\162\144\145\162\x5f\x72\x65\146\165\x6e\x64")->insert($data); goto QH61Q; wjdUv: $bus_config = Db::name("\x79\x62\163\143\x5f\143\x6f\156\146\x69\x67")->where("\x6d\143\x68\137\x69\x64", $this->bus_id)->where("\153\x65\x79", "\127\x58\x50\101\131")->find(); goto WA3rf; lH02P: AXDi4: goto EhoDq; qwz44: $param = \WxPayApi::refund($input); goto PEK4C; o_nUa: $data["\162\145\146\165\x6e\144\137\162\145\x61\163\157\156"] = $info; goto WnUQt; yFtjP: Dx_J3: goto LLCEy; IfYgq: Db::name("\x79\x62\x73\143\x5f\157\x72\x64\145\162\x5f\162\x65\146\165\156\144")->insert($data); goto ksoGr; DrwlJ: qzD0A: goto fJS4m; GV4hd: $order_id = request()->post("\157\162\x64\145\162\x5f\151\144", ''); goto ynnmW; dA0HA: Db::name("\171\142\x73\143\137\157\x72\144\x65\162\137\162\x65\x66\165\156\144")->where("\151\x64", $ii["\151\144"])->update($data); goto HGsGx; zmtTD: Db::name("\171\x62\x73\143\137\157\162\144\x65\x72")->where("\157\x72\x64\145\162\x5f\x69\144", $order_id)->update(["\x6f\x72\x64\x65\162\137\163\x74\141\164\165\x73" => $status]); goto z6K0m; nHVHI: $input->SetOp_user_id($temp["\101\x50\x50\x5f\115\x43\110\111\104"]); goto ZvLPd; ND9Na: $data["\155\x63\150\x5f\x69\x64"] = $this->bus_id; goto IN1n4; ii9eb: if (!empty($ii)) { goto A5QHm; } goto Era6U; eHNOU: $order_info = Db::name("\x79\x62\x73\x63\x5f\x6f\x72\144\x65\162")->where("\x6f\162\x64\x65\x72\137\151\x64", $order_id)->update(["\x6f\x72\x64\145\x72\137\x73\164\x61\x74\x75\163" => 5, "\162\145\146\165\156\x64\x5f\x6d\157\x6e\145\x79" => $order_info["\x70\141\x79\137\x6d\157\x6e\145\x79"], "\x66\151\156\151\x73\x68\137\x74\x69\155\x65" => time()]); goto YZI2e; cqoyy: A5QHm: goto HHlLQ; YZI2e: if (!empty($ii)) { goto ip98B; } goto IfYgq; XeSNK: goto Fpx8m; goto yFtjP; b2UFc: return AjaxReturnMsg(0, $errmsg); goto fR00F; LLCEy: Db::name("\171\142\x73\143\x5f\x6f\162\144\x65\x72\137\x72\145\x66\165\156\144")->where("\x69\x64", $ii["\151\144"])->update($data); goto AbVjF; ycmXX: if (!($order_info["\x70\x61\171\x5f\x6d\157\x6e\x65\171"] == 0)) { goto VI0WK; } goto LZl9v; rCVrw: $res = $order_service->orderTakeRefund($order_id); goto xEoz1; AQklt: return AjaxReturn($order_info); goto TEy8F; cweqC: if ($refund_setting["\163\167\151\x74\x63\x68"] != 1 || empty($refund_setting["\153\145\x79"]) || empty($refund_setting["\143\145\x72\164"])) { goto KS5IT; } goto qXlYV; IN1n4: $data["\157\x72\144\x65\162\x5f\151\x64"] = $order_id; goto jwNVD; AbVjF: Fpx8m: goto MPehW; LLJqV: if (!empty($info)) { goto AXDi4; } goto wdoXX; JKn78: $data["\165\151\144"] = $uid; goto ND9Na; aCKkW: $data["\143\162\x65\x61\x74\145\x5f\164\151\155\x65"] = time(); goto CCG96; qXlYV: $cert = authcode($refund_setting["\143\x65\x72\164"], "\104\105\x43\x4f\x44\x45"); goto edfuG; ynnmW: $uid = \request()->param("\x75\151\x64", 0); goto uXXU3; qxHJ_: k4ieg: goto LLJqV; F1gfM: $input->SetOut_refund_no($res); goto nHVHI; fJS4m: } public function deleteOrder() { goto x4Bon; x4Bon: if (!request()->isAjax()) { goto ry6zQ; } goto jYRk4; mn8KV: $res = $order_service->deleteOrder($order_id, 1); goto I4YIu; I4YIu: return AjaxReturn($res); goto ZiEsL; ZiEsL: ry6zQ: goto UCECg; jYRk4: $order_service = new OrderService(); goto S_GG8; S_GG8: $order_id = request()->post("\x6f\x72\144\145\x72\137\151\x64", ''); goto mn8KV; UCECg: } public function OrderRecycle() { goto hFfWk; HCA8G: $is_deleted = request()->post("\x69\x73\x5f\144\x65\x6c\x65\164\x65\x64", 0); goto xpEdv; rgGNS: $order_id = request()->post("\157\162\x64\145\x72\137\151\x64", ''); goto HCA8G; OZDVH: return AjaxReturn($res); goto hwsOr; ovKhR: $order_service = new OrderService(); goto rgGNS; xpEdv: $res = $order_service->OrderRecycle($order_id, $is_deleted); goto OZDVH; hwsOr: U4AwL: goto W6Sef; hFfWk: if (!request()->isAjax()) { goto U4AwL; } goto ovKhR; W6Sef: } public function orderDelivery() { goto X3Hsu; h_SzY: foreach ($order_goods_list as $k => $v) { $order_goods_list[$k]["\x73\x68\x69\160\x70\x69\156\x67\x5f\163\x74\141\164\x75\163\x5f\156\141\155\x65"] = $order_service->getShippingInfo($v["\163\x68\x69\x70\x70\x69\156\147\x5f\x73\x74\141\164\x75\x73"])["\163\164\x61\x74\x75\163\x5f\156\x61\155\x65"]; l0X1d: } goto feE0C; NOVPH: $data["\157\162\x64\145\162\x5f\147\157\x6f\x64\163\x5f\154\x69\163\164"] = $order_goods_list; goto Pr8IN; CLqhr: $data["\145\x78\160\x72\x65\x73\x73\137\143\157\x6d\x70\x61\x6e\x79\137\x6c\151\x73\164"] = $express_company_list; goto NOVPH; Pr8IN: $this->assign("\144\141\x74\141", $data); goto QbhEA; Qr1ru: $order_info["\x61\x64\x64\x72\x65\x73\163"] = $address_service->getAddress($order_info["\162\x65\x63\145\151\x76\x65\x72\x5f\141\x72\145\x61"]); goto HxeAz; SjgsY: $order_id = request()->get("\x6f\162\144\145\162\137\x69\x64", ''); goto ROCFJ; feE0C: ZPl9u: goto hERSp; hERSp: $data["\157\162\x64\x65\x72\137\x69\156\146\157"] = $order_info; goto CLqhr; Ebncu: $express_service = new \app\admin\service\Express(); goto VqtFR; VqtFR: $address_service = new Area(); goto SjgsY; HxeAz: $express_company_list = $express_service->expressCompanyQuery(["\155\x63\x68\137\151\x64" => $this->bus_id]); goto dw8Y_; X3Hsu: $order_service = new OrderService(); goto Ebncu; dw8Y_: $order_goods_list = $order_service->getOrderGoods($order_id); goto h_SzY; QbhEA: return view("\x6f\162\x64\145\x72\x2f\x6f\x72\x64\x65\x72\x5f\144\145\154\151\166\x65\162\x79"); goto CY_yz; ROCFJ: $order_info = $order_service->getOrderDetail($order_id); goto Qr1ru; CY_yz: } public function doOrderDelivery() { goto p6twd; qzIw9: vWGws: goto WQJoE; wOV6f: $shipping_type = request()->post("\x73\x68\x69\160\x70\x69\156\147\x5f\x74\171\160\x65", ''); goto qSivc; irvoY: Vl0qq: goto a5N4W; cEunF: $express_name = request()->post("\145\x78\x70\162\145\x73\163\137\x6e\x61\x6d\x65", ''); goto wOV6f; CCYou: $express_no = request()->post("\145\170\x70\162\x65\x73\163\x5f\x6e\x6f", ''); goto vTAdQ; gQbvq: get_url_content($url); goto qzIw9; jzKBa: CvWY3: goto LmMrk; Zv8f1: $url = get_child_url(false) . "\141\x70\160\x2f\x69\156\144\145\x78\x2e\x70\150\160\77\x69\x3d" . $this->bus_id . "\46\164\x3d\165\156\x64\x65\146\151\x6e\145\144\46\166\x3d\61\x2e\60\x2e\x39\66\x26\146\162\x6f\x6d\x3d\x77\170\x61\x70\160\46\143\x3d\145\156\164\x72\x79\x26\x61\x3d\167\170\141\160\x70\x26\144\x6f\x3d\127\170\x70\x75\x73\150\x5f\x44\x65\x6c\151\x76\x65\162\x79\117\162\144\145\x72\x50\x75\163\150\x26\46\155\75\171\142\x5f\x73\150\x6f\160\46\x73\x69\147\156\75\x66\60\142\66\71\67\x64\143\142\145\144\70\x36\x33\145\142\143\x35\x30\66\60\146\61\x30\x38\66\70\x35\66\67\62\x34\46\x6f\162\x64\145\x72\x5f\x69\x64\75" . $order_id; goto gQbvq; p6twd: $order_service = new OrderService(); goto LPAW6; LmMrk: $res = $order_service->orderDelivery($order_id, $express_name, $shipping_type, $express_company_id, $express_no, $this->bus_id); goto irvoY; vTAdQ: if ($shipping_type == 1) { goto CvWY3; } goto KqAws; LPAW6: $order_id = request()->post("\157\x72\144\x65\x72\137\x69\144", ''); goto cEunF; WQJoE: return AjaxReturn($res); goto CfddB; a5N4W: if (!($res > 0)) { goto vWGws; } goto Zv8f1; qSivc: $express_company_id = request()->post("\145\x78\x70\x72\x65\x73\x73\137\143\x6f\x6d\160\141\x6e\x79\137\151\144", ''); goto CCYou; KqAws: $res = $order_service->orderGoodsDelivery($order_id); goto GYHfs; GYHfs: goto Vl0qq; goto jzKBa; CfddB: } public function getOrderSellerMemo() { goto wIKuw; wIKuw: $order_service = new OrderService(); goto DfS7I; hJAF5: $res = $order_service->getOrderSellerMemo($order_id); goto XDNN_; XDNN_: $this->assign("\x72\x65\163", $res); goto voQy6; DfS7I: $order_id = request()->get("\x6f\162\x64\145\162\137\x69\144"); goto hJAF5; voQy6: $this->assign("\157\162\144\145\x72\137\151\x64", $order_id); goto Xw9cN; Xw9cN: return view("\157\162\x64\x65\x72\57\157\162\144\145\162\x5f\x6d\163\x67"); goto Q5XCO; Q5XCO: } public function addMemo() { goto wc2c3; wc2c3: $order_service = new OrderService(); goto OtfrL; U6TNh: $result = $order_service->addOrderSellerMemo($order_id, $memo); goto v0Qre; v0Qre: return AjaxReturn($result); goto Kmzi2; OtfrL: $order_id = request()->post("\x6f\162\144\x65\x72\x5f\x69\x64"); goto ukAoX; ukAoX: $memo = request()->post("\155\x65\155\x6f"); goto U6TNh; Kmzi2: } public function getOrderUpdateAddress() { goto f1RpZ; nE_4_: $this->assign("\157\162\x64\x65\162\137\151\144", $order_id); goto DS4iG; DS4iG: $this->assign("\x72\145\x73", $res); goto VFJRA; f1RpZ: $order_service = new OrderService(); goto S2Pu2; CxiEH: $address_id = $order_service->getCity($res["\162\145\143\145\x69\166\x65\162\x5f\141\x72\145\x61"]); goto nE_4_; S2Pu2: $order_id = request()->get("\x6f\x72\x64\x65\x72\137\x69\144"); goto YSWrZ; YSWrZ: $res = $order_service->getOrderReceiveDetail($order_id); goto CxiEH; GSqNf: return view("\157\x72\x64\145\162\57\157\x72\144\145\162\137\x61\x64\144\162\145\163\163"); goto YJOR8; VFJRA: $this->assign("\x61\144\144\162\145\x73\163\137\x69\144", $address_id); goto GSqNf; YJOR8: } public function updateOrderAddress() { goto R8FZl; L1VV3: return $res; goto qc1w3; vl1tK: $res = $order_service->updateOrderReceiveDetail($order_id, $receiver_mobile, $receiver_province, $receiver_city, $receiver_district, $receiver_address, $receiver_zip, $receiver_name); goto L1VV3; R8FZl: $order_service = new OrderService(); goto twbja; ah09S: $receiver_mobile = request()->post("\162\145\143\x65\x69\166\145\x72\137\x6d\x6f\x62\x69\154\145", ''); goto A6oga; sAXC1: $receiver_province = request()->post("\163\x65\x6c\145\101\162\145\141\116\145\170\x74", ''); goto BJTvN; a1mXc: $receiver_name = request()->post("\162\145\x63\x65\151\166\145\162\x5f\156\x61\x6d\145", ''); goto ah09S; twbja: $order_id = request()->post("\x6f\162\144\x65\162\137\x69\144", ''); goto a1mXc; A6oga: $receiver_zip = request()->post("\162\145\143\x65\151\x76\x65\162\137\x7a\151\x70", ''); goto sAXC1; QatyZ: $receiver_address = request()->post("\141\144\x64\x72\x65\x73\163\x5f\144\x65\x74\141\151\x6c", ''); goto vl1tK; BJTvN: $receiver_city = request()->post("\163\145\x6c\x65\x41\162\145\141\124\150\x69\x72\x64", ''); goto yb8H5; yb8H5: $receiver_district = request()->post("\x73\x65\x6c\145\x41\x72\x65\141\x46\x6f\165\x74\x68", ''); goto QatyZ; qc1w3: } public function getProvince() { goto OE2df; QuDUa: $province_list = $address->getAreaList(); goto QPHD5; QPHD5: return $province_list; goto k0Txl; OE2df: $address = new Area(); goto QuDUa; k0Txl: } public function getCity() { goto Har3P; kylUy: return $city_list; goto nPHos; fE_bh: $city_list = $address->getCityList($province_id); goto kylUy; lDTrM: $province_id = request()->post("\x70\x72\x6f\166\151\156\143\145\137\151\x64", 0); goto fE_bh; Har3P: $address = new Area(); goto lDTrM; nPHos: } public function getDistrict() { goto MGQjK; Be2iF: $district_list = $address->getDistrictList($city_id); goto KxHKm; YRcgo: $city_id = request()->post("\143\x69\164\171\137\x69\x64", 0); goto Be2iF; MGQjK: $address = new Area(); goto YRcgo; KxHKm: return $district_list; goto dWZFg; dWZFg: } public function add_mention() { goto kLzsr; kLzsr: Db::startTrans(); goto JtAcp; Ff_oA: return AjaxReturn($res); goto AvMFt; JtAcp: try { goto CA_7_; W_m4u: $share_data["\165\x73\145\x72\x5f\x69\144"] = $us["\x70\x61\162\145\x6e\x74\137\151\x64\x5f\x31"]; goto uqveY; CKjeh: $share_data["\165\x73\145\162\137\151\144"] = $us["\160\141\162\x65\156\x74\137\151\x64\x5f\x32"]; goto p_gI9; CA_7_: $order_id = input("\160\141\162\141\x6d\x2e\157\x72\x64\x65\162\x5f\151\x64"); goto qrCGF; Wxx_R: Db::name("\171\x62\x73\x63\137\165\x73\x65\162\137\163\x68\x61\162\x65\x5f\x6d\157\x6e\x65\x79")->insert($share_data); goto y313f; wqYYO: $us = Db::name("\x79\x62\163\143\x5f\x6f\x72\x64\145\x72\137\163\150\141\162\145")->where(["\x75\x73\145\162\x5f\151\x64" => $order_info["\142\x75\171\145\162\x5f\151\x64"], "\x6f\162\144\145\x72\x5f\x69\x64" => $order_id])->find(); goto SNM6R; HU2hJ: Db::name("\x79\142\163\143\x5f\x75\x73\x65\162\137\163\x68\x61\162\x65\137\155\157\156\145\171")->insert($share_data); goto LwUbA; nYgrI: HmaiK: goto YLouo; xwclh: $share_data["\163\x6f\165\x72\x63\145"] = 1; goto bTT2y; YLouo: if (!($us["\160\x61\162\x65\x6e\x74\x5f\151\144\137\62"] && $us["\160\x61\162\145\156\x74\x5f\x69\144\137\62"] != 0)) { goto HRqC0; } goto CKjeh; Pb2rk: Db::commit(); goto ECQp7; Pos5c: xyUA_: goto m6zYG; m6zYG: SO64S: goto Pb2rk; WCcyT: if (!empty($res)) { goto INIfw; } goto bokRP; pvN47: $share_data["\x75\163\x65\162\x5f\x69\144"] = $us["\160\141\162\145\156\x74\137\151\144\137\63"]; goto A7Ndj; Jy8dx: Db::name("\x79\x62\163\x63\x5f\x75\x73\145\x72")->where("\165\x69\144", $us["\160\x61\162\145\x6e\164\137\151\x64\137\62"])->setInc("\160\x72\151\143\x65", $us["\x73\x65\143\x6f\156\144\137\x70\x72\151\x63\145"]); goto xcg3w; u63LJ: Db::name("\171\x62\163\143\137\165\163\145\x72")->where("\x75\151\144", $us["\160\x61\x72\145\156\164\137\151\x64\137\x31"])->setInc("\x70\162\x69\x63\x65", $us["\146\151\162\x73\164\x5f\160\x72\151\x63\x65"]); goto nYgrI; A7Ndj: $share_data["\155\x6f\156\145\171"] = $us["\x74\150\151\x72\144\x5f\160\162\151\143\x65"]; goto QGBZ4; i6vCA: Db::name("\x79\x62\163\x63\137\x75\x73\x65\162")->where("\165\151\144", $us["\160\141\162\145\156\x74\137\x69\x64\x5f\61"])->setInc("\x74\157\164\x61\154\x5f\160\x72\151\143\x65", $us["\x66\151\162\163\164\137\160\162\x69\143\x65"]); goto u63LJ; qrCGF: $res = Db::name("\x79\x62\x73\x63\137\157\162\x64\x65\x72")->where("\157\x72\144\145\x72\137\151\144", $order_id)->update(["\x6f\162\144\x65\x72\137\x73\164\x61\x74\x75\x73" => 3, "\146\151\156\151\x73\x68\137\x74\x69\x6d\145" => time(), "\163\151\147\156\x5f\164\x69\x6d\145" => time()]); goto WCcyT; LwUbA: Db::name("\171\142\x73\x63\x5f\165\x73\x65\x72")->where("\165\151\x64", $us["\160\x61\162\x65\x6e\x74\137\x69\144\137\62"])->setInc("\164\157\164\x61\x6c\137\x70\x72\x69\143\145", $us["\x73\145\143\157\x6e\144\x5f\x70\162\x69\143\x65"]); goto Jy8dx; SNM6R: if (!$us) { goto SO64S; } goto Jf20L; p_gI9: $share_data["\x6d\157\156\145\x79"] = $us["\163\145\143\x6f\156\144\x5f\160\x72\x69\143\x65"]; goto Ghovm; Ghovm: $share_data["\163\x6f\x75\x72\x63\x65"] = 2; goto HU2hJ; KISPz: $order_info = Db::name("\171\x62\x73\x63\x5f\157\x72\144\x65\162")->where(["\x6f\x72\144\x65\x72\137\x69\144" => $order_id])->find(); goto wqYYO; bokRP: return AjaxReturn(0); goto JFNSe; Jf20L: $share_data = ["\155\x63\150\x5f\151\x64" => $this->bus_id, "\157\162\x64\x65\x72\137\x69\144" => $order_id, "\143\162\145\x61\164\x65\x5f\164\x69\155\x65" => time(), "\x69\163\137\144\145\154" => 1]; goto clS51; y313f: Db::name("\x79\142\x73\x63\137\165\163\145\x72")->where("\x75\x69\144", $us["\160\x61\x72\145\156\164\x5f\151\144\137\63"])->setInc("\164\157\164\141\x6c\137\160\162\151\143\145", $us["\164\150\x69\162\144\137\x70\162\151\143\x65"]); goto KYDR5; clS51: if (!($us["\160\141\162\x65\x6e\164\x5f\151\144\137\61"] && $us["\160\141\x72\x65\156\x74\x5f\x69\x64\137\x31"] != 0)) { goto HmaiK; } goto W_m4u; bTT2y: Db::name("\x79\x62\163\x63\x5f\165\163\x65\162\x5f\163\x68\x61\162\x65\x5f\x6d\x6f\156\145\171")->insert($share_data); goto i6vCA; QGBZ4: $share_data["\163\157\x75\x72\x63\x65"] = 3; goto Wxx_R; uqveY: $share_data["\155\157\156\145\171"] = $us["\146\151\x72\x73\x74\137\x70\x72\151\143\145"]; goto xwclh; xcg3w: HRqC0: goto Ky02q; KYDR5: Db::name("\171\x62\163\x63\137\x75\163\145\162")->where("\x75\x69\x64", $us["\160\141\162\x65\156\x74\x5f\x69\x64\137\x33"])->setInc("\x70\x72\151\143\145", $us["\x74\150\151\162\144\137\160\x72\151\x63\x65"]); goto Pos5c; Ky02q: if (!($us["\x70\141\162\x65\156\164\137\151\144\x5f\x33"] && $us["\160\x61\162\145\156\164\137\151\144\x5f\x33"] != 0)) { goto xyUA_; } goto pvN47; JFNSe: INIfw: goto KISPz; ECQp7: } catch (\Exception $e) { Db::rollback(); return AjaxReturn(0); } goto Ff_oA; AvMFt: } public function change_money() { goto VBJZ0; Cgbt5: db::name("\171\x62\x73\x63\x5f\157\162\144\145\x72")->where($con)->update($data); goto K_6Mh; lPXkV: $data["\x6f\x75\x74\x5f\x74\x72\141\144\145\137\156\157"] = $this->createOutTradeNo(); goto R14hk; VBJZ0: $old_pay = request()->post("\157\154\x64\x5f\160\141\x79"); goto UQqXJ; XJgq0: k_mwI: goto zBGD_; K_6Mh: $res = db::name("\x79\x62\x73\x63\137\x6f\x72\144\x65\162\x5f\160\141\x79\155\145\x6e\164")->where($cons)->update($data); goto KcsZp; CQl55: return "\62"; goto XJgq0; v5QjN: Z5l62: goto JvThF; k0_H2: return 0; goto InVcS; XkISM: $con["\157\162\x64\145\162\x5f\163\x74\141\164\x75\163"] = "\x30"; goto lPXkV; JvThF: Log::write("\350\xae\xa2\xe5\215\225\xe6\x94\271\344\xbb\xb7\x20\345\225\206\357\xbc\232" . $this->bus_id . "\55\55\350\256\242\345\215\x95\xe5\x8f\267\347\x94\261" . $cons["\x6f\165\164\x5f\164\x72\x61\144\145\x5f\x6e\x6f"] . "\xe6\224\xb9\344\xb8\xba\54" . $data["\157\165\164\x5f\x74\162\x61\144\x65\x5f\x6e\157"] . "\344\xbb\267\xe6\xa0\xbc\xe7\224\xb1" . $old_pay . "\xe6\x94\xb9\xe4\xb8\272" . $data["\x70\141\x79\137\155\157\x6e\x65\x79"], "\157\x72\144\145\162\137\x63\x68\x61\156\147\x65"); goto CQl55; shPHi: $cons["\157\x75\164\137\164\162\x61\144\x65\x5f\x6e\157"] = request()->post("\157\165\164\137\x74\x72\x61\144\x65\x5f\x6e\157"); goto XkISM; UQqXJ: $con["\x6f\162\x64\x65\162\x5f\151\x64"] = request()->post("\151\x64"); goto shPHi; InVcS: goto k_mwI; goto v5QjN; R14hk: $data["\160\141\171\137\155\x6f\156\145\x79"] = request()->post("\166\x61\154"); goto Cgbt5; KcsZp: if ($res) { goto Z5l62; } goto k0_H2; zBGD_: } public function refundLog() { goto h7nD1; uF2ln: return view("\x6f\162\x64\x65\162\57\x72\145\146\x75\156\144\114\x6f\147"); goto HXShc; eFKLo: a_DZJ: goto yA0Pu; XbYEc: $this->assign("\154\x69\163\164", $refundLog); goto uF2ln; B2C9U: $refundLog = Db::name("\171\x62\x73\143\137\x6f\x72\144\145\162\137\x72\x65\146\x75\156\x64")->where(["\x6d\x63\150\137\151\144" => $this->bus_id, "\164\171\x70\145" => $type, "\x6f\162\x64\x65\x72\x5f\151\x64" => $order_id])->order("\x69\144\x20\144\145\x73\x63")->select(); goto RtGy1; yA0Pu: B0Mye: goto XbYEc; h7nD1: $order_id = request()->param("\157\162\x64\x65\x72\137\x69\144", 0); goto lYoi7; RtGy1: if (empty($refundLog)) { goto B0Mye; } goto s8Gfp; s8Gfp: foreach ($refundLog as $k => $v) { goto MFs0h; epxRx: OnNxc: goto PMEZy; agQtu: goto OnNxc; goto IuSx0; dtPX0: goto OnNxc; goto IjXLH; BW_GY: PKqov: goto rRvvX; T3K2j: if ($v["\x72\x65\x66\x75\x6e\144\137\163\164\x61\164\x75\x73"] == 2) { goto h9Lqx; } goto dtPX0; IuSx0: h9Lqx: goto XFscX; MFs0h: if (!$v["\x61\x70\x70\154\x79\137\164\x69\155\145"]) { goto PKqov; } goto ZyBfm; IjXLH: cfi56: goto gmLIk; XFscX: $status = "\xe5\220\214\346\x84\x8f\xe9\200\x80\346\xac\xbe"; goto epxRx; eVT15: $refundLog[$k]["\x63\162\145\x61\164\x65\x5f\164\x69\x6d\145"] = Date("\131\55\x6d\55\144\40\x48\x3a\151", $v["\143\x72\x65\x61\164\x65\137\164\151\155\x65"]); goto w0Afk; w0Afk: FdGTm: goto IxuQY; rRvvX: if (!$v["\143\162\x65\x61\164\145\x5f\164\151\155\x65"]) { goto FdGTm; } goto eVT15; gmLIk: $status = "\xe6\213\x92\347\xbb\x9d\351\200\200\xe6\254\xbe"; goto agQtu; PMEZy: $refundLog[$k]["\163\x74\141\164\165\163\137\x6e\141\x6d\145"] = $status; goto JVAbE; JVAbE: GAf0E: goto hmqYT; PyH1f: if ($v["\162\145\x66\x75\156\144\x5f\x73\x74\141\x74\x75\x73"] == 1) { goto cfi56; } goto T3K2j; ZyBfm: $refundLog[$k]["\141\160\160\154\171\137\x74\x69\155\145"] = Date("\x59\x2d\155\x2d\144\40\110\x3a\x69", $v["\x61\x70\160\x6c\171\x5f\x74\151\x6d\x65"]); goto BW_GY; IxuQY: $status = "\xe7\255\x89\xe5\276\x85\xe5\x95\206\xe5\256\xb6\xe5\xa4\x84\xe7\x90\x86"; goto PyH1f; hmqYT: } goto eFKLo; lYoi7: $type = request()->param("\164\x79\x70\x65", 1); goto B2C9U; HXShc: } }
