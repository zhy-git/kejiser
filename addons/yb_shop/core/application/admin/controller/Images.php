<?php
 namespace app\admin\controller; use think\Db; class Images extends Base { public function image_list() { goto M5lv2; M5lv2: $album = new \app\admin\service\Images(); goto VxZ3N; NTcB9: $page = $retval->render(); goto eGn2N; VxZ3N: $search_text = input("\160\141\162\141\x6d\56\x73\145\x61\162\x63\150\x5f\164\x65\x78\164"); goto XPI0y; XPI0y: $condition["\147\x72\157\165\x70\x5f\x6e\141\x6d\145"] = ["\154\x69\x6b\x65", "\45" . $search_text . "\x25"]; goto cQdS7; zBHrZ: $retval = $album->getAlbumClassList($condition, '', "\163\x6f\162\164"); goto NTcB9; IY821: return view("\151\x6d\x61\147\145\x73\x5f\x6c\x69\x73\164"); goto rVVbM; eGn2N: $this->assign("\x72\145\164\x76\141\154", $retval); goto WQHPM; cml_I: $this->assign("\x73\x65\141\162\x63\150\x5f\x74\145\x78\164", $search_text); goto IY821; WQHPM: $this->assign("\160\x61\x67\x65", $page); goto cml_I; cQdS7: $condition["\x6d\x63\x68\x5f\151\x64"] = array("\x65\161", $this->bus_id); goto zBHrZ; rVVbM: } public function images_add() { goto JCrZ6; FXGon: BjpXb: goto hkatF; JCrZ6: if (request()->isAjax()) { goto BjpXb; } goto qgxDO; qgxDO: return view("\x69\x6d\x61\x67\145\163\x5f\x61\x64\144"); goto kiVkO; Zhb4w: $images_sort = request()->post("\x69\155\x61\147\145\163\137\x73\x6f\x72\x74", 0); goto dWPyS; KTTka: return AjaxReturn($retval); goto ilyN9; dWPyS: $album = new \app\admin\service\Images(); goto Dn7P4; kiVkO: goto WTItV; goto FXGon; hkatF: $images_name = request()->post("\x69\x6d\x61\x67\145\163\x5f\x6e\x61\x6d\145", ''); goto Zhb4w; ilyN9: WTItV: goto KXN54; Dn7P4: $retval = $album->addAlbumClass($images_name, $images_sort, 0, '', 0, $this->bus_id); goto KTTka; KXN54: } public function images_edit() { goto MLkfr; FTfYo: $this->assign("\160\x61\x67\x65", $page); goto eE7mR; MLkfr: $group_id = input("\160\141\x72\x61\x6d\x2e\x73\145\x61\162\143\150\x5f\x74\145\x78\164", 0); goto XpeQ7; gXvVN: return view("\151\155\141\147\145\163\x2f\151\x6d\141\x67\x65\x73\137\x73\x68\157\167"); goto bDXmk; HPUxP: $list = $album->getPictureList($condition, $group_id, "\x75\x70\154\157\x61\x64\x5f\x74\151\155\145\40\144\145\163\x63"); goto yusKD; vogSR: $this->assign("\x6c\x69\x73\x74", $list); goto FTfYo; eE7mR: $this->assign("\147\162\157\x75\160\x5f\151\x64", $group_id); goto gXvVN; XpeQ7: $condition = array("\147\x72\157\165\x70\x5f\x69\144" => $group_id); goto DxUNo; yusKD: $page = $list->render(); goto vogSR; DxUNo: $album = new \app\admin\service\Images(); goto HPUxP; bDXmk: } public function dialogAlbumList() { goto uJ2k3; uJ2k3: $number = request()->get("\156\165\x6d\x62\145\x72", 1); goto VKgsz; e1MzC: $this->assign("\x73\x70\145\x63\x5f\151\144", $spec_id); goto M3cIk; QIcnd: $this->assign("\164\150\151\x73\137\151\x64", $this_id); goto fZBWX; FnZDp: $spec_value_id = request()->get("\163\x70\145\143\x5f\166\x61\x6c\x75\x65\x5f\x69\x64", 0); goto slh7b; a9cYE: return view("\x69\x6d\x61\147\x65\163\57\151\155\x61\x67\x65\163\137\163\145\154\145\x63\x74"); goto iCS5K; qy14x: $this->assign("\x64\x65\146\x61\165\154\164\x5f\141\x6c\142\165\x6d\x5f\151\144", $default_album_detail["\147\x72\x6f\165\160\x5f\151\144"] ? $default_album_detail["\x67\x72\157\165\x70\x5f\151\144"] : 0); goto a9cYE; i0H7F: $this->assign("\x6e\165\x6d\x62\145\x72", $number); goto QIcnd; VRtEH: $default_album_detail = $album->getDefaultAlbumDetail(); goto qy14x; zctZH: $condition["\155\143\150\137\151\x64"] = array("\x65\161", $this->bus_id); goto VRtEH; Lvprd: $this->assign("\x75\x70\x6c\x6f\x61\144\x5f\x74\171\160\145", $upload_type); goto TVE5F; jDZfS: $this_id = request()->get("\x74\x68\151\x73\x5f\x69\144", 0); goto dZpT1; M3cIk: $this->assign("\x73\x70\x65\143\137\x76\141\154\x75\x65\137\151\x64", $spec_value_id); goto Lvprd; UEF4e: $type = request()->get("\164\171\160\145", ''); goto jDZfS; VKgsz: $spec_id = request()->get("\x73\x70\145\143\137\151\x64", 0); goto FnZDp; jTfdp: $this->assign("\x74\x79\x70\145", $type); goto i0H7F; slh7b: $upload_type = request()->get("\x75\160\154\157\x61\144\x5f\164\171\160\145", 1); goto UEF4e; fZBWX: $this->assign("\x63\157\x6d", $com); goto e1MzC; dZpT1: $com = request()->get("\143\x6f\x6d", ''); goto jTfdp; TVE5F: $album = new \app\admin\service\Images(); goto zctZH; iCS5K: } public function getAlbumClassALL() { goto YuBo6; m2FMK: $retval = $album->getAlbumClassAll($condition); goto eIvte; YuBo6: $condition["\155\143\150\x5f\151\x64"] = array("\x65\161", $this->bus_id); goto nWe6z; eIvte: return $retval; goto uAsr3; nWe6z: $album = new \app\admin\service\Images(); goto m2FMK; uAsr3: } public function albumPictureList() { goto yE8Gc; Fpyu3: $album = new \app\admin\service\Images(); goto YDGY1; P39jg: $condition["\x67\x72\157\165\x70\137\x69\144"] = array("\145\x71", $album_id); goto Fpyu3; YDGY1: $list = $album->getImgList($condition, '', "\x75\x70\x6c\157\141\x64\x5f\x74\x69\x6d\x65\x20\x64\145\x73\x63"); goto exgGq; exgGq: return $list; goto bmLHd; yE8Gc: $album_id = request()->post("\x67\x72\x6f\x75\160\x5f\x69\x64", 0); goto ZH57c; ZH57c: $condition = array(); goto P39jg; bmLHd: } public function deletePicture() { goto UMO_D; lPtNd: return AjaxReturn($retval); goto OQtxg; My5XC: $retval = $album->deletePicture($pic_id_array); goto lPtNd; ggs9h: $album = new \app\admin\service\Images(); goto My5XC; UMO_D: $pic_id_array = request()->post("\x69\x6d\147\x5f\151\x64\137\x61\x72\162\141\x79", ''); goto ggs9h; OQtxg: } public function imagesDel() { goto UcTmM; UcTmM: $img = new \app\admin\service\Images(); goto k3yg0; UIEwe: return AjaxReturn($res); goto mHJom; zF3ih: $res = $img->deleteImgGroup($img_id); goto UIEwe; k3yg0: $img_id = input("\x70\x61\x72\141\155\x2e\x69\155\x67\137\151\144", "\60"); goto zF3ih; mHJom: } public function imagesBox() { goto dfK4T; XatHr: return AjaxReturn($res); goto cavGI; ViX7m: $img_id = input("\160\141\x72\x61\155\56\151\155\x67\137\151\x64"); goto G1vsG; G1vsG: $res = $img->updateImagesGroupBox($img_id); goto XatHr; dfK4T: $img = new \app\admin\service\Images(); goto ViX7m; cavGI: } public function zhan_img_box() { goto oNyoA; Nc366: $pic_id_array = input("\160\141\x72\x61\x6d\56\160\x69\143\x5f\x69\144\137\141\x72\162\141\171"); goto aW3n4; oumhx: $this->assign("\x67\162\157\165\160", $group); goto ne8n0; xJvpM: $pic_id_array = request()->param("\151\x6d\147\x5f\151\144\x5f\141\x72\x72\141\x79", ''); goto jnmk5; oX2lP: $group = Db::name("\x79\x62\x73\143\137\x69\x6d\141\147\x65\x73\x5f\x67\x72\x6f\x75\160")->where("\x6d\x63\x68\x5f\x69\x64", $this->bus_id)->select(); goto oumhx; w58xG: $group_id = input("\x70\x61\162\141\x6d\56\x67\162\x6f\165\x70\137\151\144"); goto Nc366; aW3n4: $res = Db::name("\x79\x62\x73\x63\137\x69\x6d\x61\x67\145\x73")->where("\x69\155\x67\x5f\x69\144", "\151\156", $pic_id_array)->update(["\147\162\x6f\165\x70\137\151\144" => $group_id]); goto dFpF5; ne8n0: return view(); goto i6Cji; dFpF5: return AjaxReturn($res); goto NxHuy; jnmk5: $this->assign("\160\151\x63\137\x69\144\137\141\162\x72\x61\x79", $pic_id_array); goto oX2lP; NxHuy: fKpfV: goto xJvpM; oNyoA: if (!request()->isAjax()) { goto fKpfV; } goto w58xG; i6Cji: } public function silent() { goto wBez2; vRfeM: goto xwQXJ; goto Lh3jp; EHarw: $result = Db::name("\171\142\163\143\x5f\x69\x6d\x61\x67\145\x73\x5f\147\162\x6f\x75\x70")->where("\x6d\143\x68\x5f\x69\144", $this->bus_id)->where("\x67\x72\x6f\165\x70\137\151\x64", $data["\151\144"])->update(["\x67\162\157\x75\x70\137\156\141\x6d\145" => $data["\156\141\x6d\x65"]]); goto JzBUx; l1eIZ: $data = request()->post(); goto EHarw; MBmes: return AjaxReturn(0); goto vRfeM; Lh3jp: GBI79: goto DK39q; w98H8: SSEVu: goto gwYsC; SyLQe: xwQXJ: goto w98H8; wBez2: if (!(request()->isAjax() && request()->isPost())) { goto SSEVu; } goto l1eIZ; DK39q: return AjaxReturn(1); goto SyLQe; JzBUx: if ($result !== false) { goto GBI79; } goto MBmes; gwYsC: } }
