<?php
 namespace app\admin\controller; use think\Db; class Product extends Base { public function index() { goto n2hYn; edsMy: $class_list = Db::name("\x79\142\163\143\x5f\x70\x72\x6f\x64\x75\x63\164\137\143\154\141\163\163")->where(["\155\x63\150\137\151\144" => $this->bus_id])->select(); goto pHGHp; H0CGO: $where["\160\x2e\143\154\141\x73\163\x5f\151\144"] = $class_id; goto cJIoA; d8LBV: if (empty($class_id)) { goto QQkkk; } goto H0CGO; cJIoA: QQkkk: goto P2zWB; xXu8P: if (empty($search_text)) { goto WqHlp; } goto G0rMp; RNY2M: return view(); goto qy56c; wgmxu: $class_id = request()->param("\143\154\x61\163\163\137\x69\144", ''); goto b3S0A; aU6Zj: $page = $list->render(); goto OZoOC; n2hYn: $search_text = request()->param("\x73\x65\x61\162\x63\x68\x5f\164\x65\170\164", ''); goto wgmxu; vCJww: $this->assign("\x63\154\141\x73\163\137\151\144", $class_id); goto fK40Z; ZFIKC: $this->assign("\x6c\151\163\164", $list); goto edsMy; P2zWB: $where["\160\x2e\155\x63\150\137\151\144"] = $this->bus_id; goto dvKK2; dvKK2: $querys = urlQueryToArr(); goto OJwAK; OJwAK: $list = Db::name("\171\142\x73\x63\x5f\x70\162\157\144\165\x63\164")->alias("\160")->join("\171\x62\x73\x63\137\x70\162\x6f\144\165\x63\164\x5f\x63\154\x61\x73\x73\x20\x63", "\x70\56\x63\154\x61\x73\x73\137\x69\x64\40\75\x20\x63\x2e\151\144")->where($where)->field("\x70\x2e\52\x2c\143\56\x6e\141\155\x65\40\x61\163\x20\x63\x6c\141\x73\163\x5f\x6e\x61\155\145")->order("\x70\56\163\157\x72\164\40\141\x73\x63")->paginate(15, false, ["\161\165\145\162\x79" => ["\163" => $querys["\x73"], "\163\145\x61\x72\143\150\x5f\x74\x65\170\x74" => $search_text, "\143\154\141\163\163\137\x69\144" => $class_id]])->appends(request()->param()); goto aU6Zj; NyBP4: WqHlp: goto d8LBV; OZoOC: $this->assign("\160\141\x67\x65", $page); goto ZFIKC; b3S0A: $this->assign("\163\145\x61\162\143\x68\137\164\145\x78\x74", $search_text); goto vCJww; G0rMp: $where["\160\x2e\164\151\164\x6c\145"] = array("\x6c\x69\x6b\145", "\x25{$search_text}\45"); goto NyBP4; fK40Z: $where = array(); goto xXu8P; pHGHp: $this->assign("\x63\x6c\141\x73\163\x5f\x6c\151\163\164", $class_list); goto RNY2M; qy56c: } public function add_product() { goto PWp9B; SgRzZ: $res = Db::name("\171\x62\163\x63\137\160\162\157\x64\165\x63\164")->where(["\151\144" => $id])->update($data); goto Pty5H; qdiPn: Ybwpv: goto jdeVK; YBIlc: $data["\155\x63\150\x5f\x69\144"] = $this->bus_id; goto B4aeu; PWp9B: $data = request()->param(); goto txqxd; fXurT: return AjaxReturn($res); goto qdiPn; DPe0R: return view(); goto w2RLM; QHGMt: unset($data["\151\x64"]); goto SgRzZ; N3PSz: $id = $data["\x69\144"]; goto QHGMt; A2tDq: K4ujt: goto N3PSz; Pty5H: TnF0V: goto fXurT; txqxd: if (!(request()->isAjax() && request()->isPost())) { goto Ybwpv; } goto Cnq9b; hnrE2: $data["\163\x74\141\164\165\163"] = 1; goto VQHIK; B4aeu: $data["\143\162\x65\141\164\145\x5f\x74\151\x6d\145"] = time(); goto hnrE2; WgkAX: $class_list = Db::name("\x79\142\163\143\x5f\x70\x72\157\144\165\x63\164\x5f\143\x6c\141\x73\x73")->where(["\x6d\143\x68\x5f\x69\x64" => $this->bus_id])->select(); goto C5OpJ; jydxi: $this->assign("\151\x6e\x66\x6f", $info); goto mpCbK; C5OpJ: $this->assign("\143\154\141\x73\163\x5f\154\151\x73\164", $class_list); goto DPe0R; VQHIK: $res = Db::name("\171\x62\163\x63\x5f\160\x72\157\144\165\x63\x74")->insert($data); goto niuTL; Cnq9b: if (!empty($data["\151\144"])) { goto K4ujt; } goto Ofw7U; jdeVK: if (empty($data["\x69\144"])) { goto f7T56; } goto uBXA9; Ofw7U: unset($data["\151\144"]); goto fsQXB; uBXA9: $info = Db::name("\x79\142\163\143\137\160\162\157\x64\x75\143\x74")->where(["\x69\144" => $data["\x69\x64"]])->find(); goto jydxi; mpCbK: f7T56: goto WgkAX; fsQXB: $data["\x73\157\162\164"] = 0; goto YBIlc; niuTL: goto TnF0V; goto A2tDq; w2RLM: } public function del_product() { goto hqanG; tu5qe: $id = request()->post("\x69\x64", ''); goto YCqvt; YCqvt: $res = Db::name("\171\142\x73\143\x5f\160\162\157\144\165\x63\164")->where(["\x69\x64" => $id])->delete(); goto wRt_t; hqanG: if (!(request()->isAjax() && request()->isPost())) { goto bMqSW; } goto tu5qe; wRt_t: $res = $res !== false ? 1 : 0; goto YBDdv; YBDdv: return AjaxReturn($res); goto Ge64c; Ge64c: bMqSW: goto DYwVx; DYwVx: } public function product_status() { goto lm1Ao; fAptL: $res = Db::name("\171\142\163\143\x5f\160\162\157\144\x75\x63\164")->where(["\151\144" => $id])->update(["\x73\164\x61\164\x75\x73" => $status]); goto aOrhj; aOrhj: return AjaxReturn($res); goto cGGMB; nsUsU: $status = $info["\x73\x74\141\164\x75\163"] == 1 ? 2 : 1; goto fAptL; cGGMB: PpmBt: goto VMq6k; lm1Ao: if (!(request()->isAjax() && request()->isPost())) { goto PpmBt; } goto ABTzA; ABTzA: $id = request()->post("\151\144", ''); goto yIITc; yIITc: $info = Db::name("\x79\x62\163\143\137\160\162\x6f\x64\165\x63\164")->where(["\151\144" => $id])->find(); goto nsUsU; VMq6k: } public function product_sort() { goto RoxTz; kKfN5: GWrKi: goto P8134; kOghP: $res = $res !== false ? 1 : 0; goto cwnvd; jdQl1: $sort = request()->post("\163\x6f\x72\x74", "\60"); goto MBDHj; cwnvd: return AjaxReturn($res); goto kKfN5; RoxTz: if (!(request()->isAjax() && request()->isPost())) { goto GWrKi; } goto huhoZ; huhoZ: $id = request()->post("\151\x64", ''); goto jdQl1; MBDHj: $res = Db::name("\171\x62\163\x63\x5f\x70\x72\157\144\x75\x63\164")->where(["\x69\x64" => $id])->update(["\x73\157\x72\164" => $sort]); goto kOghP; P8134: } public function class_list() { goto bnd3X; HFd2h: $this->assign("\154\x69\x73\x74", $list); goto mDkCw; bnd3X: $list = Db::name("\x79\142\x73\x63\x5f\160\162\x6f\144\x75\143\164\137\143\154\x61\163\163")->where(["\x6d\143\x68\137\x69\x64" => $this->bus_id])->order("\x73\x6f\x72\x74\x20\141\163\143")->select(); goto HFd2h; mDkCw: return view(); goto GRx5v; GRx5v: } public function del_class() { goto ULrOD; V4fZn: $res = $res !== false ? 1 : 0; goto Mspf9; jwulO: return AjaxReturnMsg(0, "\346\255\xa4\345\x88\x86\347\261\xbb\xe4\270\213\350\277\x98\346\x9c\211\xe4\272\xa7\xe5\x93\x81\54\346\227\240\346\xb3\225\345\x88\xa0\351\231\244"); goto zy7M2; kNGZu: $id = request()->post("\151\144", ''); goto r3ead; R49je: if (empty($pp)) { goto BX9p7; } goto jwulO; ULrOD: if (!(request()->isAjax() && request()->isPost())) { goto uDkN6; } goto kNGZu; Lr88o: uDkN6: goto v6Q1w; zy7M2: BX9p7: goto rlfOv; Mspf9: return AjaxReturn($res); goto Lr88o; r3ead: $pp = Db::name("\x79\142\163\x63\x5f\x70\162\157\x64\165\x63\x74")->where(["\x63\x6c\x61\x73\x73\137\x69\144" => $id])->find(); goto R49je; rlfOv: $res = Db::name("\171\x62\x73\x63\137\x70\162\x6f\x64\x75\143\164\137\x63\154\141\x73\163")->where(["\151\x64" => $id])->delete(); goto V4fZn; v6Q1w: } public function add_class() { goto BkQ5l; npU0t: if (empty($data["\x69\144"])) { goto mIxEc; } goto Fwg0z; WS6_U: $res = Db::name("\x79\x62\163\143\x5f\x70\x72\157\144\x75\x63\x74\137\143\154\x61\x73\163")->insert($data); goto tealz; i5mSw: $id = $data["\151\x64"]; goto ZO5bN; vCn0v: mIxEc: goto EcK8X; K1PX8: if (!empty($data["\x69\144"])) { goto H6195; } goto rX2_d; udKmj: H6195: goto i5mSw; Zzm81: PnTgR: goto npU0t; RJ3Rb: $data["\x6d\143\x68\x5f\x69\x64"] = $this->bus_id; goto N2raf; N2raf: $data["\x63\162\145\x61\x74\145\x5f\x74\151\x6d\x65"] = time(); goto so0Pr; so0Pr: $data["\x73\164\x61\x74\165\x73"] = 1; goto WS6_U; dC7BK: if (!(request()->isAjax() && request()->isPost())) { goto PnTgR; } goto K1PX8; OZG04: $this->assign($info); goto vCn0v; S0Zno: $data["\x6c\145\166\145\154"] = 1; goto RJ3Rb; ZTQcO: IVf_J: goto XuE37; Fwg0z: $info = Db::name("\x79\142\x73\143\137\x70\x72\157\x64\x75\x63\164\x5f\x63\154\141\x73\163")->where(["\x69\144" => $data["\x69\144"]])->find(); goto OZG04; BkQ5l: $data = request()->param(); goto dC7BK; GWtNb: $res = Db::name("\171\142\163\x63\137\160\162\157\x64\165\143\164\x5f\143\x6c\x61\x73\x73")->where(["\x69\x64" => $id])->update($data); goto ZTQcO; ZO5bN: unset($data["\x69\144"]); goto GWtNb; XuE37: return AjaxReturn($res); goto Zzm81; EcK8X: return view(); goto H0O5v; tealz: goto IVf_J; goto udKmj; rX2_d: unset($data["\x69\144"]); goto f2N2Z; f2N2Z: $data["\x70\x69\144"] = 0; goto S0Zno; H0O5v: } public function class_sort() { goto hIRU4; Tk8_3: $res = $res !== false ? 1 : 0; goto xqy4Q; PWR3m: $sort = request()->post("\163\157\162\x74", "\60"); goto iz6CJ; cV9NJ: mqARP: goto VUqch; iz6CJ: $res = Db::name("\x79\142\163\143\137\x70\x72\x6f\x64\x75\143\164\137\x63\154\141\x73\x73")->where(["\x69\x64" => $id])->update(["\163\x6f\162\164" => $sort]); goto Tk8_3; hIRU4: if (!(request()->isAjax() && request()->isPost())) { goto mqARP; } goto ACzHL; ACzHL: $id = request()->post("\x69\x64", ''); goto PWR3m; xqy4Q: return AjaxReturn($res); goto cV9NJ; VUqch: } }
