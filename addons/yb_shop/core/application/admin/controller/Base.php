<?php
 namespace app\admin\controller; use app\admin\service\Business; use app\common\model\BusMenu; use think\Controller; use think\Cache; use think\Cookie; use think\Db; use think\Exception; use think\Request; use think\Session; header("\101\143\x63\145\163\163\55\103\157\156\x74\162\157\154\x2d\x41\154\x6c\157\167\55\117\x72\151\147\151\x6e\72\52"); class Base extends Controller { protected $bus = null; protected $mod_class_id = null; protected $bus_id; protected $moduleid = null; protected $rootid = null; protected $controller = null; protected $action = null; protected $module_info = null; protected $bus_group = null; protected $uuid = null; protected $mention = array(1 => "\61", 2 => "\x32", 3 => "\x31\54\x32", 4 => "\64", 5 => "\61\54\x34", 6 => "\x32\54\64", 7 => "\x31\54\62\x2c\64"); public function __construct() { goto jtVUx; jtVUx: parent::__construct(); goto UfscC; UfscC: $this->bus = new Business(); goto n2Oj9; n2Oj9: $this->init(); goto RW1_w; RW1_w: } public function init() { goto Zn2Hv; bcOrn: IREXK: goto IXwhT; IzOTC: TORRb: goto EAD9C; OdoBO: o7VrR: goto OS4xE; hfDKw: $endtime = ["\151\x73\137\163\x68\157\167" => 1, "\x74\x69\155\145" => Date("\x59\55\x6d\x2d\x64", $endtime), "\144\141\171\x73" => $result]; goto bcOrn; QBsVu: Cookie::set("\170\143\170\137\x6e\141\155\x65", $xcx_name); goto m0ybj; LPUUo: $this->assign("\111\x4d\107\x5f\x55\x52\x4c", IMG_URL); goto wEC_f; B0niq: $this->assign("\141\x6c\154\137\x6d\145\156\165", $p); goto AA9G5; dTHQO: $this->assign("\141\x62\157\165\164", $about); goto Rhiq4; vkUx_: hDkWs: goto SM9If; ZFx49: pB1r4: goto txXp2; dQL3S: $this->assign("\x73\151\x74\x65\162\x6f\157\164", $siteroot); goto LPUUo; BU4u8: $this->assign("\163\x68\157\x77\x5f\167\x65\x37", 1); goto Sl5Ux; nFNLr: $this->assign("\x6c\x61\163\x74\137\166\x69\x73\151\164\137\165\162\154", $last_visit_url); goto vkUx_; gd2Cy: $this->bus_id = $uniacid; goto hT2sp; ml0xQ: $username = $_SESSION["\x77\145\x37\x5f\165\x73\x65\x72"]["\x75\x73\x65\x72\x6e\141\155\x65"]; goto KYz5M; feN28: mid2c: goto gd2Cy; hT2sp: $this->assign("\x6d\x63\x68\137\151\144", $this->bus_id); goto fr4Vl; KjEcd: if ($uniacid) { goto yLOrx; } goto tOMPf; RqV22: kBPzs: goto zp8Pv; m0ybj: Cookie::set("\x73\151\x74\145\x72\x6f\x6f\164", $siteroot); goto IzOTC; rcEem: $_SESSION["\x62\x75\x73\x5f\x69\144"] = $uniacid; goto jo_Ew; fr4Vl: $this->uuid = $_W["\x75\151\x64"]; goto rcEem; lokrQ: $this->assign("\164\x68\x72\x65\x65\137\x6d\151\x64", $three_mid); goto B0niq; Zn2Hv: global $_W, $_GPC; goto tIL0W; y9U5h: header("\114\157\143\141\164\x69\157\x6e\72" . url("\141\144\x6d\x69\156\57\154\x6f\x67\x69\x6e\57\x69\156\144\145\170")); goto eBrGn; y0wun: $this->assign("\x6d\x69\141\157\163\150\x61\137\x73\150\x6f\167", 2); goto frEeY; s6AeA: $last_visit = explode("\x2c", $_GPC[$visit_key]); goto nvTSs; VWo5h: $this->assign("\151\x73\146\x6f\165\x6e\x64\x65\x72", $isfounder); goto OmUdA; meUk5: IrcjJ: goto MiUZ0; oHmSN: $this->assign("\x5f\x47\120\x43", $_GPC["\x6d"]); goto OdoBO; G80Ci: $top_mid = Cookie::get("\164\157\160\137\x6d\151\144"); goto AzGb1; ycllt: x0s1P: goto G80Ci; eruRQ: $this->assign("\143\x6f\x70\171\x72\151\147\x68\164", $copyright); goto PpQ81; YYZsm: $xcx_name = Cookie::get("\x78\x63\170\137\x6e\x61\155\x65"); goto rYz1x; s2iNU: $chece_au = Db::name("\171\142\x73\x63\x5f\x75\x73\145\162\137\x70\145\162\155\x69\163\163\x69\157\x6e")->where("\x75\x73\x65\162\137\151\144", $wq_uid)->find(); goto MfAxm; wFAwx: if (empty($_GPC[$visit_key])) { goto hDkWs; } goto s6AeA; X3wgg: $uniacid = $_SESSION["\x77\x65\x37\137\x61\x63\143\157\x75\x6e\164"]["\x75\156\151\x61\143\x69\144"]; goto VRRZ4; ONxsE: $three_mid = Cookie::get("\164\150\162\x65\x65\x5f\155\x69\144"); goto vGHEH; KhrET: uZFhq: goto MkKtM; H0Iw5: $this->assign("\x74\x6f\160\137\155\151\x64", $top_mid); goto g0t6_; S7pYk: $this->moduleid = $this->module_info["\155\157\144\x75\x6c\145\137\151\x64"]; goto jeQ1b; XSybD: WepQ4: goto LX9jX; OUrWv: if ($endtime && $endtime != 0) { goto cVlq5; } goto Wba56; QYTTR: $this->assign("\x6b\141\x6e\x6a\x69\141\x5f\x73\150\x6f\167", 2); goto dsXvF; HtPuk: $permissionList = Db::name("\171\x62\x73\x63\x5f\x62\x75\163\x5f\155\157\x64\165\154\x65")->where($where)->order("\163\157\162\164\x20\141\163\x63\54\x6d\x6f\144\x75\x6c\x65\x5f\x69\x64\40\x61\x73\x63")->select(); goto DBSVU; zUZoP: if (!strpos($user_role_list["\x6d\157\144\x75\x6c\x65\x5f\x69\x64\137\x61\x72\162\x61\x79"], "\x32\x32\63")) { goto EgiMq; } goto QYTTR; RKopl: $where["\x6d\x6f\x64\x75\154\145\x5f\151\x64"] = array(array("\x69\x6e", $user_role_list["\155\157\144\x75\154\x65\137\x69\x64\x5f\141\x72\x72\x61\x79"]), array("\156\157\164\40\151\x6e", "\62\x30\66\54\x32\x30\67\x2c\62\x30\70\54\61\71\67"), "\141\156\144"); goto eV63w; Rhiq4: $root_array = $this->bus->getModuleRootAndSecondMenu($this->moduleid); goto GH0YY; Hmbhw: cVlq5: goto Wccrn; AYecz: if (!empty($res_check)) { goto dzEiE; } goto uh1Aw; GxbwN: goto IREXK; goto Hmbhw; fHb4m: $wq_uid = $_SESSION["\167\145\x37\x5f\x77"]["\x75\163\x65\x72"]["\165\151\144"]; goto lpTek; jeQ1b: $this->assign("\165\x73\145\162\137\x69\156\x66\157", $id); goto V8Ng9; jo_Ew: if (!empty($uniacid)) { goto yY1Pb; } goto KANor; txXp2: header("\114\x6f\143\141\164\x69\157\x6e\x3a" . $siteroot); goto meUk5; heZUS: $this->assign("\163\x69\164\x65\x5f\x6e\141\x6d\145", $site_name["\x73\x69\x74\145\137\x6e\x61\x6d\x65"]); goto Lzzqr; MfAxm: if (!empty($chece_au)) { goto rCL5d; } goto lfCcE; LX9jX: $this->assign("\x66\x61\156\x68\165\151", $fanhui); goto l3Mxn; rYz1x: $siteroot = Cookie::get("\x73\x69\x74\x65\162\x6f\157\164"); goto Nn9SN; VRRZ4: $xcx_name = $_SESSION["\x77\145\67\137\141\x63\x63\157\x75\x6e\164"]["\x6e\x61\x6d\145"]; goto KjEcd; ALn8r: ebvPB: goto RKopl; zp8Pv: foreach ($firstArray as &$first_per) { goto p1L8l; LTIJH: $first_per["\163\165\x62"] = $secondArray; goto laFl3; V_wY5: M8VfA: goto E9tET; laFl3: $p[] = $first_per; goto V_wY5; RzKMQ: foreach ($secondArray as &$second_per) { goto uYV4p; ZHSdh: rCzaO: goto uJvW9; uJvW9: $second_per["\163\165\x62"] = $threeArray; goto zwFre; oN5Sb: foreach ($permissionList as $three_per) { goto Up_n9; A3ZBt: iCOI7: goto TiiwQ; TiiwQ: OhKda: goto rD_Ss; Up_n9: if (!($three_per["\160\x69\x64"] == $second_per["\x6d\x6f\144\x75\154\145\137\x69\x64"])) { goto iCOI7; } goto OU1VQ; OU1VQ: $threeArray[] = $three_per; goto A3ZBt; rD_Ss: } goto ZHSdh; uYV4p: $threeArray = array(); goto oN5Sb; zwFre: pSqn1: goto u28Zd; u28Zd: } goto UtDTQ; kgdlJ: foreach ($permissionList as $childPer) { goto Z_qiq; Z_qiq: if (!($childPer["\x70\x69\144"] == $first_per["\155\x6f\144\x75\154\x65\x5f\151\x64"])) { goto jtxRt; } goto llabo; llabo: $secondArray[] = $childPer; goto NB0nw; AnR2L: M8nLI: goto OwLdo; NB0nw: jtxRt: goto AnR2L; OwLdo: } goto kJ3Uc; p1L8l: $secondArray = array(); goto kgdlJ; UtDTQ: NQg2R: goto LTIJH; kJ3Uc: Tf06M: goto RzKMQ; E9tET: } goto ycllt; lfCcE: $res_check = Db::name("\171\x62\x73\x63\137\165\163\145\x72\x5f\162\157\x6c\145")->find(); goto AYecz; ag3JR: Session::set("\x77\145\67\137\163", $_SESSION["\167\x65\x37\137\167"]); goto ml0xQ; iB6ot: $three_mid = empty($three_mid) ? 0 : $three_mid; goto H0Iw5; nuxNd: $_SESSION["\104\117\103\125\137\x52\117\x4f\x54"] = $DOCU_ROOT[0]; goto X3wgg; znxhP: $result = count_days($date1, $endtime); goto hfDKw; V8Ng9: $about = Db::name("\171\142\163\x63\x5f\142\165\163\151\x6e\x65\163\x73\x5f\x61\142\157\165\164")->where("\x6d\x63\x68\137\151\x64", $uniacid)->find(); goto dTHQO; GH0YY: $this->rootid = $root_array[0]; goto dpGr3; MkKtM: $DOCU_ROOT = explode("\57\x61\144\x64\157\x6e\163", $_SERVER["\123\103\x52\x49\120\x54\137\106\x49\x4c\x45\x4e\x41\115\x45"]); goto nuxNd; tOMPf: $username = Cookie::get("\x75\163\145\x72\156\x61\x6d\145"); goto nlaCu; Wccrn: $date1 = strtotime(date("\131\55\155\x2d\144")); goto znxhP; vSlkQ: $endtime = Db::name("\x61\143\143\157\x75\156\164")->where("\165\x6e\x69\x61\x63\x69\144", $uniacid)->value("\145\x6e\144\164\x69\x6d\x65"); goto OUrWv; cqdat: rCL5d: goto vbP5x; Sl5Ux: $this->assign("\x5f\127", $_W["\163\x65\x74\164\x69\156\x67"]["\x63\x6f\160\171\x72\151\147\150\164"]); goto oHmSN; dW0Pf: dzEiE: goto YaU15; vDAzE: exit; goto KhrET; zJ8ji: $this->assign("\151\163\141\144\155\x69\x6e", $isadmin ? 1 : 2); goto KdQs_; frEeY: Yoioz: goto zUZoP; KANor: $this->redirect("\57"); goto TspdL; uh1Aw: Db::name("\171\x62\x73\x63\x5f\165\163\x65\162\x5f\162\157\154\x65")->insert(["\162\x6f\154\x65\x5f\156\141\x6d\x65" => "\351\273\230\350\xae\244\xe6\x9d\x83\xe9\231\220\xe7\273\204", "\162\157\154\145\137\163\164\141\164\165\x73" => 1, "\x6d\x6f\144\x75\x6c\145\x5f\151\x64\137\x61\162\x72\141\x79" => "\x32\x33\x33\54\62\x33\64\54\62\x34\60\54\61\x39\64\54\61\65\66\x2c\61\65\67\54\61\x39\65\x2c\x32\60\x34\54\x32\60\65\54\62\x34\x36\x2c\62\63\54\62\61\70\x2c\x32\x32\x34\54\x32\x33\65\x2c\61\x37\54\62\x32\60\x2c\62\62\61\x2c\x32\x32\62\54\x31\65\62\54\x32\x33\66\x2c\x31\x34\x35\54\61\71\x38\54\62\x38\x2c\62\x30\60\x2c\x32\60\x32\54\62\60\63\54\x32\x31\x30\54\x32\x31\62\x2c\x32\x31\x33\54\62\x33\67\x2c\x31\x32\54\x32\62\54\x32\65\54\x31\64\71\x2c\x32\71\54\62\x37\54\x31\64\x38\54\61\x35\x31\x2c\62\63\x38\54\61\65\64\54\x31\66\x39\54\62\62\x33\54\x32\61\67\54\x32\61\66\x2c\x32\x31\64\x2c\62\x31\x35\x2c\62\64\x33\x2c\62\x32\x38\54\x32\62\67\54\62\62\66\54\x32\63\x30\54\x32\x32\71", "\151\x6e\x66\x6f" => '', "\143\x72\x65\141\164\145\x5f\x74\151\x6d\x65" => time()]); goto dW0Pf; DBSVU: $firstArray = array(); goto pwQRm; Rllb1: $this->assign("\x57\x58\101\120\x50\x5f\x54\x59\120\x45", WXAPP_TYPE); goto Zb3fD; rmfjf: if (!($_W["\x73\x65\x74\164\x69\156\x67"]["\163\151\x74\x65"]["\x66\141\x6d\x69\154\171"] != "\170")) { goto WepQ4; } goto GUq4y; Lzzqr: $this->assign("\166\145\x72\163\151\x6f\156\x5f\151\144", $_SESSION["\166\x65\162\163\x69\x6f\x6e\x5f\151\144"]); goto Rllb1; IXwhT: $visit_key = "\137\137\x6c\x61\x73\x74\166\151\x73\x69\x74\137" . $_W["\165\151\x64"]; goto wFAwx; KYz5M: Cookie::set("\165\x73\x65\x72\156\x61\x6d\145", $username); goto g3aAl; MiUZ0: exit; goto feN28; wEC_f: $id = self::setUser($username, $uniacid); goto R4Fo4; l3Mxn: $siteroot = $_SESSION["\x77\145\67\x5f\167"]["\x73\x69\164\145\162\157\157\x74"]; goto yiuzo; LQkJi: yLOrx: goto ag3JR; eBrGn: goto IrcjJ; goto ZFx49; OS4xE: $fanhui = 2; goto rmfjf; TspdL: yY1Pb: goto PPpbB; yiuzo: if (!empty($_SESSION["\167\x65\67\x5f\141\x63\x63\x6f\x75\156\x74"])) { goto uZFhq; } goto smVEq; rFibe: $sub_mid = empty($sub_mid) ? 0 : $sub_mid; goto iB6ot; g3aAl: Cookie::set("\x75\x6e\151\141\x63\151\x64", $uniacid); goto QBsVu; DuaiW: if (!empty($id)) { goto mid2c; } goto tNnti; YaU15: $role_id = Db::name("\x79\142\x73\143\137\165\163\x65\x72\137\x72\x6f\154\x65")->order("\x72\157\x6c\145\x5f\151\144\x20\141\x73\143")->find(); goto QP3oy; Nn9SN: goto TORRb; goto LQkJi; tIL0W: if (!(WXAPP_TYPE != 100)) { goto o7VrR; } goto BU4u8; lIT7C: $where["\x69\163\137\x6d\145\x6e\x75"] = 1; goto HtPuk; lpTek: $isadmin = $_SESSION["\x77\145\x37\137\x77"]["\151\163\146\x6f\x75\x6e\144\x65\x72"]; goto zJ8ji; EAD9C: $this->assign("\170\x63\x78\137\x6e\141\155\145", $xcx_name); goto dQL3S; vGHEH: $top_mid = empty($top_mid) ? 233 : $top_mid; goto rFibe; iI12m: if (!($wq_uid != 1 && (!$isadmin || $founder_groupid == 2))) { goto H3EMS; } goto ejasF; KdQs_: $founder_groupid = $_SESSION["\x77\x65\67\x5f\x77"]["\165\163\x65\x72"]["\x66\157\165\156\144\145\x72\x5f\x67\x72\x6f\x75\x70\151\144"]; goto s2iNU; PpQ81: $isfounder = $_SESSION["\167\145\67\137\x77"]["\151\x73\146\157\x75\156\x64\145\x72"]; goto VWo5h; Wba56: $endtime = ["\x69\163\x5f\163\150\157\167" => 0]; goto GxbwN; dsXvF: EgiMq: goto xPBav; vbP5x: $where = array(); goto iI12m; dpGr3: $first_menu_list = $this->bus->getchildModuleQuery(0); goto fHb4m; pwQRm: $p = array(); goto IBJW2; QP3oy: Db::name("\171\142\x73\143\137\x75\x73\145\162\x5f\160\145\x72\155\x69\x73\x73\x69\x6f\x6e")->insert(["\x75\x73\145\162\137\151\144" => $wq_uid, "\x72\x6f\154\145\x5f\x69\x64" => $role_id["\162\157\154\x65\137\x69\x64"], "\x63\x72\x65\141\x74\145\137\164\x69\155\145" => time()]); goto cqdat; R4Fo4: $this->assign("\x75\156\x69\x61\143\151\x64", $uniacid); goto DuaiW; SM9If: $this->assign("\x65\x6e\144\164\x69\x6d\x65", $endtime); goto heZUS; ts4QS: $this->action = Request::instance()->action(); goto WIND1; ujTgd: if (!strpos($user_role_list["\155\x6f\x64\165\x6c\x65\137\x69\x64\137\141\x72\162\141\x79"], "\x32\x37\x34")) { goto Yoioz; } goto y0wun; AzGb1: $sub_mid = Cookie::get("\x73\165\x62\137\x6d\151\x64"); goto ONxsE; IBJW2: foreach ($permissionList as $per) { goto OiqrZ; OiqrZ: if (!($per["\160\151\x64"] == 0 && $per["\x6d\157\144\165\x6c\x65\137\156\x61\x6d\145"] != null)) { goto fbY80; } goto esGYW; yjs6b: Mlze2: goto EV2tr; esGYW: $firstArray[] = $per; goto Mwk6c; Mwk6c: fbY80: goto yjs6b; EV2tr: } goto RqV22; nlaCu: $uniacid = Cookie::get("\x75\156\x69\x61\143\x69\144"); goto YYZsm; OmUdA: $site_name = Db::name("\x79\x62\163\143\x5f\x63\x6f\160\x79\x72\x69\147\x68\x74")->where("\151\x64", 1)->find(); goto vSlkQ; PPpbB: $this->controller = Request::instance()->controller(); goto ts4QS; eV63w: H3EMS: goto lIT7C; GUq4y: $fanhui = 1; goto XSybD; ejasF: $user_role_list = Db::name("\x79\x62\x73\x63\x5f\165\x73\x65\162\x5f\160\145\x72\x6d\151\x73\x73\151\x6f\156")->alias("\x70")->join("\171\142\x73\143\x5f\165\163\x65\x72\x5f\x72\157\154\145\x20\x72", "\x72\56\x72\157\154\145\x5f\151\144\x3d\x70\x2e\162\157\154\x65\137\151\x64")->where("\160\x2e\x75\163\x65\x72\137\x69\144", $wq_uid)->find(); goto ujTgd; xPBav: if (!strpos($user_role_list["\x6d\x6f\144\x75\x6c\x65\x5f\151\x64\x5f\141\x72\x72\141\171"], "\62\64\63")) { goto ebvPB; } goto rFrNR; g0t6_: $this->assign("\x73\x75\x62\x5f\155\151\144", $sub_mid); goto lokrQ; smVEq: header("\x4c\157\x63\x61\x74\x69\x6f\x6e\x3a" . $siteroot); goto vDAzE; AA9G5: $copyright = Db::name("\x79\x62\163\x63\x5f\x63\157\x70\171\x72\151\147\x68\164")->where("\151\144", 1)->find(); goto eruRQ; rFrNR: $this->assign("\x70\151\156\x74\165\141\x6e\137\x73\150\157\167", 2); goto ALn8r; nvTSs: $last_visit_url = $last_visit[1]; goto nFNLr; WIND1: $this->module_info = $this->bus->getModuleIdByModule($this->controller, $this->action); goto S7pYk; tNnti: if (WXAPP_TYPE == 100) { goto pB1r4; } goto y9U5h; Zb3fD: } protected function setUser($username, $uniacid) { goto kaBgC; rU8mT: $un_url = explode("\x3a", $un_data["\x75\x72\x6c"]); goto xkKwy; rYejv: $conf["\x41\x50\x50\x5f\x4e\101\115\x45"] = $_SESSION["\x77\145\x37\137\x77"]["\x61\143\x63\157\x75\x6e\x74"]["\x6e\x61\155\145"]; goto HQoGF; PBV08: $templen["\x74\151\x74\x6c\145"] = $templs["\x6e\x61\x6d\145"]; goto kaEKo; PCmeN: if (count($cuff) > 0) { goto DN3LN; } goto IRkOL; v7JIh: goto IwMnt; goto OMdE_; KlBdA: $templen["\163\x74\171\154\145\137\x76\x61\x6c\165\x65"] = $templs["\163\x74\171\154\x65\137\x76\x61\x6c\x75\x65"]; goto npU8b; xkKwy: $refund_url = $this->get_child_url(false); goto sI9nl; OssqC: $cuff = array_values($cuff); goto zpCHJ; DgTGO: $un_data["\x75\163\145\x72\156\x61\155\x65"] = $username; goto dJ3yZ; r5D0y: $cuff = explode("\57\57", $cuff[0]); goto PJl6j; kkBBJ: $conf["\x41\x50\120\x5f\x55\x52\114\x5f\x42\x47"] = $refund_url . "\141\x64\x64\x6f\156\x73\57\x79\142\x5f\163\x68\x6f\x70\57\x63\157\162\145\57\x62\x61\x72\x67\141\151\x6e\x5f\x70\x61\x79\56\160\150\x70"; goto Cvxk4; t5VCn: IwMnt: goto EtB0U; n_2H8: Db::name("\171\x62\x73\143\137\165\x73\x65\162\137\164\155\x70\154")->insert($toopsen); goto f06bl; MvHGK: $digital["\166\141\154\165\x65\x32"] = ''; goto puq6Y; ku6V1: $un_data["\x61\163\x6b"] = WXAPP_TYPE; goto LXrox; lTdgf: $un_data["\165\x6e\x69\x61\x63\151\x64"] = $uniacid; goto ku6V1; gLAvB: $conf["\x41\120\120\x5f\125\x52\114\137\x4d\123"] = $refund_url . "\x61\x64\x64\157\156\x73\x2f\171\x62\137\163\150\x6f\x70\x2f\143\x6f\162\x65\57\x6d\x73\x5f\160\141\171\56\160\150\160"; goto YDAkY; ojKmG: Db::name("\171\x62\163\x63\137\143\157\156\x66\151\x67")->where("\155\x63\150\137\151\x64", $uniacid)->where("\x6b\145\171", "\127\x58\120\101\x59")->update($payCallback); goto afQyO; Jztvz: $data["\x70\x61\163\163\x77\x6f\x72\x64"] = ''; goto B5DpB; jYmi0: $payCallback["\166\x61\154\165\x65"] = $callback; goto ojKmG; xaNwm: self::base_shape($un_data); goto wBef2; Xryuq: $un_data["\x61\144\x64\x6f\156\163"] = $temp; goto EdHcp; ZIcvb: bee8Q: goto xBm9R; CoJ90: $data["\x63\162\x65\x61\164\x65\x5f\164\151\x6d\x65"] = time(); goto pOqdY; LIDCw: $imgs["\151\x73\x5f\144\x65\x66\x61\165\x6c\x74"] = 1; goto Iwg0G; KHwv4: $callback["\x41\120\x50\x5f\x55\122\x4c\x5f\x4d\123"] = $refund_url . "\141\x64\144\x6f\x6e\x73\x2f\x79\x62\x5f\x73\150\157\x70\x2f\143\x6f\x72\x65\57\155\163\x5f\x70\x61\x79\x2e\160\x68\160"; goto BQhVt; CCHdH: $callback = json_encode($callback, true); goto jYmi0; byg84: $imgs["\143\162\145\141\x74\145\137\164\x69\155\x65"] = time(); goto ZMMQR; BQhVt: $conf["\101\x50\120\137\125\x52\114\x5f\122\x45\x53\x45\122\x56\x45"] = $refund_url . "\141\144\x64\x6f\156\163\x2f\171\x62\x5f\x73\150\x6f\160\x2f\143\x6f\x72\x65\57\x72\x65\x73\x65\x72\166\145\137\160\x61\x79\x2e\x70\x68\x70"; goto CCHdH; i5w3G: $callback = json_decode($payCallback["\x76\141\154\165\x65"], true); goto bTCuK; bTCuK: $refund_url = $this->get_child_url(false); goto jMOOj; EtB0U: GJC5T: goto yn35Z; bC8u5: $snap = $_SESSION["\167\x65\67\137\167"]["\x73\151\x74\x65\162\x6f\x6f\x74"] . "\x61\x64\144\157\156\163"; goto xT332; kaEKo: $templen["\x69\x6e\144\x65\170\137\x76\141\x6c\165\x65\x73"] = $templs["\151\156\144\145\x78\x5f\x76\x61\154\165\x65\x73"]; goto VUsg3; brst0: $data["\150\145\141\144\137\x69\155\147"] = "\x70\x75\142\154\151\x63\57\165\160\154\157\141\x64\57\61\57\x6c\157\x67\x6f\x2f\x31\65\x31\x32\x36\71\x37\61\x31\66\56\160\x6e\x67"; goto jJot_; FS_Cx: $digital["\151\x64"] = $uniacid; goto f0d21; VIfAs: $temp = ''; goto Lwgdh; zpCHJ: $temp = ''; goto PCmeN; IRkOL: $temp = "\x2f"; goto Htn5W; JiOuQ: $imgs["\x67\162\x6f\165\160\x5f\156\x61\x6d\145"] = "\xe9\273\x98\350\256\244\xe7\233\xb8\345\x86\x8c"; goto Yc6Ug; UAU2I: $data["\x6e\x69\143\153\137\x6e\x61\x6d\x65"] = "\347\xae\xa1\347\220\x86\345\x91\230"; goto JXCEx; uY0Ye: self::base_shape($un_data); goto Zvu4X; wBef2: $payCallback = Db::name("\x79\x62\x73\x63\137\143\x6f\156\146\151\147")->where("\x6d\x63\150\x5f\151\x64", $uniacid)->where("\153\x65\x79", "\127\130\x50\101\131")->find(); goto i5w3G; L1xkl: if (empty($result)) { goto zM2G3; } goto j9_4M; NLew7: $imgs["\x70\x61\147\145\x73\137\x75\162\x6c"] = ''; goto J71V_; Lwgdh: if (count($cuff) > 0) { goto wBYVI; } goto h01gp; afQyO: return $result; goto v7JIh; sOxUJ: $data["\141\x67\145\x6e\x74\163\x5f\151\x64"] = 1; goto UAU2I; jMOOj: $callback["\x41\x50\120\137\125\122\114"] = $refund_url . "\141\144\x64\157\156\x73\x2f\x79\x62\x5f\163\x68\x6f\160\57\x63\x6f\x72\x65\x2f\160\x61\x79\56\160\150\160"; goto VmRub; aGvp3: unset($cuff[0]); goto Sk9pm; YDAkY: $conf["\101\120\120\137\x55\x52\114\137\122\105\123\x45\x52\x56\105"] = $refund_url . "\141\x64\144\157\156\x73\x2f\171\x62\x5f\163\x68\157\160\57\143\x6f\162\x65\57\162\x65\x73\145\x72\166\x65\x5f\x70\141\x79\x2e\160\150\160"; goto b5QBC; Oit9m: $digital["\x76\141\154\x75\145"] = $conf; goto MvHGK; zh_XO: $un_data["\x69\x70\x76\64"] = isset($_SERVER["\123\x45\x52\x56\105\122\137\x41\104\x44\122"]) ? $_SERVER["\x53\105\x52\126\105\x52\137\101\104\x44\x52"] : ''; goto uY0Ye; S77MX: $cuff = explode("\x61\x64\x64\x6f\x6e\163", $snap); goto r5D0y; Htn5W: goto lZ5bY; goto XoEv9; d7lkr: $data["\x75\x6e\x69\141\143\x69\x64"] = $uniacid; goto SoPTg; UuaL4: lZ5bY: goto ph46R; W9qCg: $un_data["\x75\162\x6c"] = $_SERVER["\110\124\x54\120\137\x48\117\123\x54"]; goto uL_bg; Bk1Of: $un_data["\x61\163\153"] = WXAPP_TYPE; goto zh_XO; fs8c1: $un_data["\x75\162\154"] = $_SERVER["\x48\x54\x54\120\x5f\x48\117\123\x54"]; goto rU8mT; mk1hR: $digital["\x69\163\x5f\165\x73\145"] = 1; goto M8jDE; h01gp: $temp = "\x2f"; goto m8kEw; fnHMn: wBYVI: goto xjLYo; ph46R: $templs = Db::name("\x79\x62\163\143\x5f\164\x6d\160\154")->where("\151\x64", 1)->find(); goto PBV08; Iwg0G: $imgs["\x73\x6f\162\164"] = 1; goto byg84; VmRub: $callback["\101\120\x50\137\125\x52\x4c\x5f\102\107"] = $refund_url . "\x61\144\x64\x6f\156\x73\x2f\171\142\137\x73\x68\157\x70\x2f\x63\x6f\162\145\57\x62\141\x72\147\141\151\x6e\137\160\x61\x79\x2e\160\x68\x70"; goto TeGpk; Fa2KG: $conf["\101\120\x50\x5f\111\104"] = $_SESSION["\167\x65\x37\137\x77"]["\x61\143\x63\x6f\x75\156\164"]["\153\145\171"]; goto rYejv; iMfi_: $cuff = explode("\57\x2f", $cuff[0]); goto C67TI; iJZSB: $imgs["\151\x64\x65\x6e\x74"] = ''; goto NLew7; HQoGF: $conf["\101\x50\x50\x5f\x53\105\103\x52\105\124"] = $_SESSION["\x77\145\67\137\167"]["\141\143\143\157\x75\x6e\x74"]["\x73\x65\x63\162\145\164"]; goto fErEe; npU8b: $templen["\x69\x6d\147"] = $templs["\151\155\x67"]; goto OVKTO; f06bl: $un_data["\x75\162\154"] = $_SERVER["\x48\x54\x54\x50\137\x48\117\123\124"]; goto kjD5F; VUsg3: $templen["\x63\x72\x65\x61\164\145\137\x74\x69\155\x65"] = time(); goto pKWyA; KlQJJ: $toopsen["\x6d\x63\x68\x5f\151\x64"] = $uniacid; goto GY9cl; HZryp: $un_data["\x75\x72\x6c"] = $un_url[0]; goto Xryuq; v_3T3: $result = Db::name("\x79\142\x73\143\137\142\165\163\151\x6e\x65\163\x73")->where("\x69\x64", $uniacid)->find(); goto L1xkl; C67TI: $cuff = explode("\x2f", $cuff[1]); goto r8svI; xjLYo: foreach ($cuff as $key => $value) { $temp .= "\x2f" . $value; Tl1wg: } goto ZIcvb; k2sn0: CiPEB: goto UuaL4; YfGiH: $data["\x70\141\171\x6d\x65\156\x74\137\155\145\164\150\x6f\144"] = 1; goto hGvDg; gDOb5: $imgs["\x70\x69\x64"] = 0; goto JiOuQ; MUQiV: $imgs["\151\x64\145\156\164\137\x63\154\x61\x73\x73"] = ''; goto dTfC6; wajRx: $data["\x6d\x6f\x64\137\143\154\x61\x73\x73\x5f\x69\144"] = 2; goto NfvsO; f0d21: $digital["\153\x65\171"] = "\x57\x58\120\101\x59"; goto Fa2KG; b5QBC: $conf["\101\120\120\137\x4b\x45\x59"] = ''; goto Vu9ij; uL_bg: $un_url = explode("\x3a", $un_data["\165\162\154"]); goto HZryp; XoEv9: DN3LN: goto IUrI8; PJl6j: $cuff = explode("\x2f", $cuff[1]); goto aGvp3; Yy3op: $un_data["\165\162\x6c"] = $un_url[0]; goto mWxbt; Sk9pm: $cuff = array_values($cuff); goto VIfAs; hGvDg: $data["\151\163\137\157\x6e\x65"] = 2; goto d7lkr; OMdE_: zM2G3: goto TnApe; puq6Y: $digital["\x69\156\x66\157"] = "\xe5\xbe\256\344\277\xa1\346\x94\xaf\xe4\273\x98"; goto mk1hR; Vu9ij: $conf = json_encode($conf, true); goto Oit9m; GY9cl: $toopsen["\166\141\154\165\x65\163"] = $templs["\x73\164\171\154\x65\x5f\x76\x61\x6c\165\x65"]; goto n_2H8; dTfC6: Db::name("\171\x62\x73\x63\137\151\155\141\147\145\163\x5f\147\162\x6f\165\x70")->insert($imgs); goto FS_Cx; xT332: $cuff = explode("\x61\x64\144\x6f\156\x73", $snap); goto iMfi_; dJ3yZ: $un_data["\x75\156\x69\x61\x63\x69\x64"] = $uniacid; goto Bk1Of; r8svI: unset($cuff[0]); goto OssqC; TeGpk: $callback["\101\120\x50\x5f\125\x52\x4c\x5f\x50\124"] = $refund_url . "\x61\x64\x64\x6f\x6e\163\x2f\171\142\x5f\163\150\x6f\x70\57\x63\157\x72\145\x2f\160\x74\x5f\160\141\x79\56\160\x68\x70"; goto KHwv4; JXCEx: $data["\156\x61\x6d\x65"] = $username; goto Jztvz; jJot_: $data["\141\160\160\x5f\x6b\145\171"] = ''; goto CoJ90; OVKTO: $toopsen["\x69\156\144\x65\170\x5f\166\x61\x6c\x75\x65\x73"] = $templs["\x69\156\x64\x65\170\x5f\x76\141\154\x75\x65\163"]; goto KlQJJ; LXrox: $un_data["\151\160\166\x34"] = isset($_SERVER["\x53\x45\122\x56\105\x52\137\x41\x44\x44\x52"]) ? $_SERVER["\123\x45\122\x56\105\x52\137\x41\x44\x44\x52"] : ''; goto xaNwm; fErEe: $conf["\101\120\120\x5f\x4d\103\110\111\x44"] = ''; goto fs8c1; ZMMQR: $imgs["\155\x63\x68\x5f\x69\144"] = $uniacid; goto iJZSB; EdHcp: $un_data["\x75\163\x65\x72\156\141\x6d\x65"] = $username; goto lTdgf; pOqdY: $data["\151\x73\137\x64\x65\154"] = 1; goto wajRx; kaBgC: if (!isset($uniacid)) { goto GJC5T; } goto v_3T3; SoPTg: Db::name("\x79\x62\163\143\137\142\x75\163\151\x6e\145\x73\x73")->insert($data); goto gDOb5; m8kEw: goto tbagQ; goto fnHMn; IUrI8: foreach ($cuff as $key => $value) { $temp .= "\57" . $value; ctS3y: } goto k2sn0; pKWyA: $templen["\155\143\x68\x5f\x69\x64"] = $uniacid; goto KlBdA; M8jDE: $digital["\x6d\143\x68\x5f\x69\x64"] = $uniacid; goto msJia; kjD5F: $un_url = explode("\x3a", $un_data["\x75\162\x6c"]); goto Yy3op; Yc6Ug: $imgs["\147\x72\x6f\x75\160\137\x63\157\166\x65\x72"] = "\61\x32\64"; goto LIDCw; xBm9R: tbagQ: goto W9qCg; Cvxk4: $conf["\101\x50\120\x5f\x55\122\114\x5f\120\124"] = $refund_url . "\x61\144\144\157\x6e\x73\57\171\142\x5f\x73\150\x6f\160\57\x63\157\162\x65\57\x70\x74\x5f\x70\x61\171\56\x70\150\x70"; goto gLAvB; J71V_: $imgs["\x69\x73\x5f\x73\171\163\x74\145\155"] = 0; goto MUQiV; Zvu4X: return $data; goto t5VCn; NfvsO: $data["\142\165\x73\137\x6d\x6f\144\x5f\x69\x64"] = 1; goto YfGiH; ghisG: Db::name("\171\x62\x73\143\137\x63\x6f\x6e\146\x69\x67")->insert($digital); goto bC8u5; TnApe: $data["\151\144"] = $uniacid; goto sOxUJ; B5DpB: $data["\160\150\x6f\x6e\145"] = ''; goto brst0; j9_4M: $snap = $_SESSION["\167\145\67\137\x77"]["\x73\151\x74\x65\162\157\157\x74"] . "\141\144\x64\x6f\x6e\163"; goto S77MX; mWxbt: $un_data["\x61\x64\144\x6f\156\163"] = $temp; goto DgTGO; msJia: $digital["\x6d\157\x64\x69\146\x79\x5f\x74\151\x6d\x65"] = time(); goto ghisG; sI9nl: $conf["\101\120\x50\137\125\122\x4c"] = $refund_url . "\x61\x64\x64\x6f\156\163\x2f\x79\142\x5f\163\150\x6f\160\x2f\x63\x6f\x72\x65\57\x70\141\x79\x2e\160\x68\160"; goto kkBBJ; yn35Z: } protected function base_shape($un_data) { try { goto mzXTC; Q_pCg: $opts = array("\x68\x74\x74\x70" => array("\x6d\x65\x74\150\x6f\144" => "\120\117\123\124", "\150\x65\x61\x64\145\x72" => "\103\157\x6e\164\x65\x6e\164\55\x74\x79\160\x65\x3a\x20\x61\x70\160\154\151\x63\x61\164\x69\x6f\x6e\x2f\170\55\167\x77\167\x2d\x66\x6f\162\155\55\x75\x72\x6c\x65\x6e\143\x6f\144\145\144", "\x63\157\156\164\x65\156\x74" => $postdata, "\x74\151\x6d\x65\x6f\x75\164" => 15 * 60)); goto F2SaL; m3XDl: return file_get_contents(IMG_URL . "\57\x61\144\x6d\x69\x6e\x2f\141\x6c\x6c\151\141\x6e\x63\x65\57\154\x65\141\147\165\x65", false, $context); goto Gs2wz; mzXTC: $postdata = http_build_query($un_data); goto Q_pCg; F2SaL: $context = stream_context_create($opts); goto m3XDl; Gs2wz: } catch (Exception $e) { return false; } } protected function update_user($data, $id) { goto hqfLx; Q6mNF: $conf["\x41\x50\120\x5f\125\x52\x4c\x5f\120\124"] = $refund_url . "\141\x64\144\157\x6e\163\x2f\x79\142\x5f\x73\x68\x6f\x70\57\143\x6f\x72\x65\57\x70\164\x5f\160\x61\171\56\x70\150\x70"; goto ASmxL; wLeu2: goto T9KSo; goto fz8Ba; ASmxL: $conf["\x41\x50\120\x5f\x55\x52\x4c\137\x4d\123"] = $refund_url . "\141\x64\144\157\156\163\57\171\142\x5f\163\x68\x6f\160\57\143\157\162\x65\x2f\x6d\x73\137\160\141\171\56\160\150\160"; goto nqUPK; yo0fV: $conf["\101\120\x50\137\x49\104"] = $data["\x61\x63\143\x6f\x75\x6e\x74"]["\153\x65\x79"]; goto wtdUf; DwChr: $un_data["\165\162\154"] = $_SERVER["\x48\124\124\x50\x5f\110\117\x53\x54"]; goto MUcr1; Ux668: $digital["\x6b\x65\171"] = "\127\130\120\101\x59"; goto yo0fV; wtdUf: $conf["\101\x50\120\137\x4e\101\x4d\x45"] = $data["\141\x63\143\157\x75\x6e\x74"]["\x6e\x61\x6d\145"]; goto UWHs2; FO2ka: $ids = db::name("\x79\x62\x73\143\x5f\143\157\x6e\x66\151\147")->where("\x6d\x63\x68\x5f\x69\144", $id)->where("\x6b\145\171", "\127\x58\x50\101\x59")->count(); goto UaTUI; DkCog: db::name("\x79\142\163\x63\x5f\143\x6f\156\146\151\147")->insert($digital); goto CITtn; hqfLx: $digital["\x69\x64"] = $id; goto Ux668; xx_hQ: $digital["\x69\x73\x5f\x75\163\x65"] = 1; goto CGP5M; CITtn: T9KSo: goto iWKVO; myrwK: $refund_url = $this->get_child_url(false); goto i9bbA; UaTUI: if ($ids == "\x30") { goto OxUlv; } goto U4I1a; Roydp: $digital["\155\157\x64\x69\x66\171\x5f\164\151\x6d\145"] = time(); goto FO2ka; NTulf: $digital["\x76\141\154\165\x65"] = $conf; goto nGdx8; j6JIs: $conf["\101\x50\120\x5f\113\105\x59"] = ''; goto VyNP0; IVgUJ: $digital["\151\x6e\x66\157"] = "\xe5\276\256\xe4\277\241\xe6\x94\xaf\344\273\230"; goto xx_hQ; U4I1a: db::name("\x79\142\163\x63\137\x63\157\156\x66\151\147")->where("\x6d\143\150\137\151\144", $digital["\x6d\x63\x68\137\x69\144"])->where("\x6b\145\x79", "\127\130\x50\x41\131")->update($digital); goto wLeu2; i9bbA: $conf["\x41\x50\120\x5f\x55\122\114"] = $refund_url . "\x61\144\144\x6f\x6e\x73\57\x79\x62\x5f\163\150\157\x70\x2f\x63\157\x72\145\57\160\141\171\56\x70\x68\x70"; goto ziiZJ; UWHs2: $conf["\101\120\x50\137\x53\x45\x43\x52\105\124"] = $data["\x61\x63\143\x6f\165\x6e\164"]["\163\145\143\x72\x65\164"]; goto Df3nj; MUcr1: $un_url = explode("\x3a", $un_data["\165\x72\x6c"]); goto myrwK; fz8Ba: OxUlv: goto DkCog; CGP5M: $digital["\x6d\143\x68\x5f\151\x64"] = $id; goto Roydp; nGdx8: $digital["\166\141\154\x75\x65\62"] = ''; goto IVgUJ; ziiZJ: $conf["\101\x50\x50\x5f\x55\x52\114\137\102\x47"] = $refund_url . "\x61\x64\x64\157\x6e\163\x2f\171\x62\137\x73\x68\157\160\57\x63\x6f\162\x65\x2f\x62\x61\x72\147\x61\151\x6e\137\x70\141\x79\56\160\150\160"; goto Q6mNF; VyNP0: $conf = json_encode($conf, true); goto NTulf; nqUPK: $conf["\x41\x50\x50\137\x55\122\114\x5f\x52\105\x53\x45\x52\x56\105"] = $refund_url . "\x61\x64\x64\157\x6e\163\57\x79\x62\137\163\150\x6f\x70\57\x63\x6f\x72\145\57\x72\145\163\x65\x72\x76\145\137\x70\x61\x79\56\x70\x68\x70"; goto j6JIs; Df3nj: $conf["\x41\x50\x50\137\115\x43\x48\x49\x44"] = ''; goto DwChr; iWKVO: } public function createOrderNo() { $no = time() . rand(111, 999); return $no; } public function createOutTradeNo() { goto Cdp8g; Cdp8g: $time_str = date("\x59\x6d\x64"); goto AfAPP; AfAPP: $order_no = $time_str . time() . rand(111, 999); goto xd3BI; xd3BI: return $order_no; goto nJcpv; nJcpv: } public function open_page($start = true, $value = 1, $exp = 20) { goto KukeM; Rf7Ij: Cache::set("\151\x73\137\154\x6f\141\144", null); goto NTr8v; NTr8v: goto hCiqn; goto u80xi; KukeM: if ($start) { goto pDisu; } goto Rf7Ij; L3dE5: hCiqn: goto JWXlC; u80xi: pDisu: goto tRUH1; tRUH1: Cache::set("\x69\163\x5f\154\157\141\x64", $value, $exp); goto L3dE5; JWXlC: } private function get_child_url($http = true) { goto g98xD; g98xD: if (isset($_SERVER["\x48\124\124\120\137\130\x5f\122\105\x41\x4c\x5f\110\x4f\x53\124"])) { goto kRidm; } goto W4DL3; UgWQp: CDkZs: goto Eb53f; uTxTz: return $http . $host . $child_path[0]; goto k8DYt; ask8m: kRidm: goto QF7u5; ESH4z: goto Uj7A4; goto GKofs; QF7u5: $host = $_SERVER["\x48\124\x54\x50\x5f\130\x5f\122\105\x41\114\x5f\x48\x4f\123\x54"]; goto UgWQp; a_m6O: $child_path = explode("\x61\144\x64\x6f\156\163\x2f", $_SERVER["\120\x48\120\x5f\x53\x45\114\106"]); goto iBRc4; iBRc4: Uj7A4: goto H9q4l; GKofs: Uk68Y: goto a_m6O; W4DL3: $host = $_SERVER["\x48\124\x54\x50\137\110\x4f\x53\124"]; goto BiI28; BiI28: goto CDkZs; goto ask8m; Eb53f: if (isset($_SERVER["\120\x48\x50\137\123\x45\x4c\x46"])) { goto Uk68Y; } goto jwenH; H9q4l: $http = $http === true ? "\x68\x74\x74\x70\x3a\x2f\x2f" : "\150\x74\x74\160\x73\72\x2f\57"; goto uTxTz; jwenH: $child_path = explode("\x61\x64\144\x6f\156\163\x2f", $_SERVER["\122\105\121\x55\105\123\x54\137\x55\122\111"]); goto ESH4z; k8DYt: } public function write_log($do, $data = '') { db::name("\171\x62\163\x63\137\x73\x79\156\154\x6f\x67")->insert(["\x6d\143\150\x5f\x69\144" => $this->bus_id, "\x6d\x65\144\151\x61\x5f\151\144" => $this->uuid . "\x3a" . $do . $data, "\143\x72\x65\141\164\x65\137\164\x69\155\x65" => date("\131\x6d\144\57\110\151\163", time())]); } }
