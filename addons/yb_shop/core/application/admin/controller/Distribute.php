<?php
 namespace app\admin\controller; use think\Db; class Distribute extends Base { public function index() { goto Bn8n6; Inzgq: $share_level = db::name("\x79\142\x73\143\137\x75\163\145\x72\x5f\163\x68\141\x72\x65\137\163\145\x74\164\x69\156\x67")->where("\x6d\x63\150\x5f\151\x64", $this->bus_id)->field("\x6c\145\x76\x65\x6c")->find(); goto gMZIe; qzhQR: $this->assign("\x70\141\147\x65", $page); goto mA_AW; SZcH7: if (empty($star_time)) { goto rh2LJ; } goto FGudM; lnqCe: goto r3Lzd; goto hQVVR; FsTKt: r3Lzd: goto y5Zeh; w69Xd: return view(); goto bM486; pAQwX: $page = $list->render(); goto qzhQR; IzhaJ: $where["\163\x2e\155\143\150\137\x69\144"] = array("\x65\161", $this->bus_id); goto AJA1_; hQVVR: VHaHj: goto R1jB3; Gr1cw: if (!(!empty($star_time) && !empty($end_time))) { goto Rjj99; } goto m0Gi1; UDj7P: Le_YR: goto NLdA_; WfqeE: $where["\x73\56\x63\x72\145\141\x74\145\137\x74\151\155\x65"] = ["\x62\145\x74\167\145\145\x6e", [$star, $end]]; goto Sk09y; euWie: rh2LJ: goto Gr1cw; m0Gi1: $star = strtotime($star_time); goto r3QH3; JY_Y9: $url = explode("\75\x2f", $url); goto nRgGA; IviE7: $share = $share_level; goto lnqCe; ITvY7: $search_text = input("\160\141\162\141\x6d\56\163\x65\x61\x72\x63\x68\x5f\164\x65\170\164"); goto pA0wU; pYUyp: $this->assign("\163\164\x61\162\137\164\151\155\145", $star_time); goto aYcU9; NLdA_: $star_time = input("\x70\141\x72\141\x6d\x2e\163\164\x61\162\x5f\164\151\x6d\x65"); goto tiWyl; jHCGY: IaQ_d: goto oHYLb; HhFVi: $url = "\x2f" . $url[0]; goto ZLnET; YYJCL: $this->assign("\163\145\x61\162\143\150\x5f\x74\145\170\164", $search_text); goto pYUyp; y5Zeh: switch ($share_level["\x6c\145\x76\x65\x6c"]) { case 0: goto FXm7V; case 1: goto p0jDg; YvVxx: goto FXm7V; goto SfZ86; p0jDg: $share["\x73\x65\143\157\x6e\144"] = "\x2d\x31"; goto q6ANw; q6ANw: $share["\164\150\151\162\144"] = "\x2d\x31"; goto YvVxx; SfZ86: case 2: $share["\x74\150\151\162\x64"] = "\x2d\x31"; goto FXm7V; } goto jHCGY; oHYLb: FXm7V: goto EZ3uG; b9Wdq: $where["\147\x2e\x67\157\x6f\144\x73\137\156\141\x6d\145"] = ["\x6c\151\153\145", "\45" . $search_text . "\x25"]; goto UDj7P; tiWyl: $end_time = input("\160\141\x72\141\155\56\x65\156\x64\137\164\x69\155\145"); goto SZcH7; ZLnET: $list = Db::name("\x79\142\x73\x63\x5f\x67\x6f\157\144\163\x5f\163\x68\x61\162\145\137\x73\x65\164\164\x69\156\x67")->alias("\163")->join("\x79\142\x73\143\x5f\147\157\x6f\x64\163\x20\147", "\147\56\x67\157\x6f\144\163\x5f\x69\144\x3d\x73\x2e\x67\x6f\x6f\x64\x73\x5f\x69\144")->join("\171\x62\163\143\x5f\x69\155\141\147\x65\x73\x20\151\155\141\x67\145\x73", "\x67\56\x69\155\x61\147\145\163\x20\x3d\40\151\x6d\141\x67\145\x73\56\151\155\x67\x5f\151\144", "\x6c\145\146\x74")->field("\163\x2e\x2a\x2c\x67\56\x67\157\157\x64\x73\x5f\x6e\x61\155\x65\x2c\x67\56\x70\x72\151\x63\145\54\147\x2e\151\x6d\x61\x67\x65\163\54\x69\x6d\141\x67\145\x73\56\151\x6d\x67\137\x63\157\166\145\x72")->where($where)->paginate(20, false, ["\x71\x75\145\x72\171" => ["\163" => $url]]); goto pAQwX; EZ3uG: $this->assign("\163\150\141\162\145", $share); goto w69Xd; aYcU9: $this->assign("\x65\156\x64\137\164\151\155\145", $end_time); goto Inzgq; mA_AW: $this->assign("\x72\x65\x73\165\154\164", $list); goto YYJCL; nRgGA: $url = explode("\x26\x70\x61\147\x65", $url[1]); goto HhFVi; Sk09y: Rjj99: goto IzhaJ; r3QH3: $end = strtotime($end_time); goto WfqeE; gMZIe: if (empty($share_level)) { goto VHaHj; } goto IviE7; xlhgi: $where["\x73\x2e\143\x72\145\x61\x74\x65\137\x74\151\x6d\x65"] = ["\x62\145\x74\x77\145\145\x6e", [$star, $star + 86400]]; goto euWie; pA0wU: if (empty($search_text)) { goto Le_YR; } goto b9Wdq; FGudM: $star = strtotime($star_time); goto xlhgi; AJA1_: $url = request()->query(); goto JY_Y9; Bn8n6: $where["\x67\x2e\151\x73\137\144\x65\154"] = 0; goto ITvY7; R1jB3: $share["\154\145\x76\145\x6c"] = 0; goto FsTKt; bM486: } public function share_type_all() { goto cQbc0; j_6Sc: $res = Db::name("\x79\142\x73\143\x5f\147\157\x6f\x64\163\x5f\163\150\x61\162\x65\x5f\163\145\x74\164\151\x6e\x67")->where("\x69\x64", $id)->update(["\163\164\141\164\x75\x73" => $status]); goto kXevV; Zthu3: $status = input("\160\141\162\x61\155\x2e\153\145\171"); goto j_6Sc; kXevV: return AjaxReturn($res); goto pLaKT; cQbc0: $id = input("\x70\x61\x72\141\x6d\56\151\144"); goto Zthu3; pLaKT: } public function share_del() { goto Y0j1Z; Y0j1Z: $id = input("\160\141\x72\x61\x6d\56\x69\x64"); goto GVo9k; GVo9k: $res = Db::name("\171\142\x73\143\x5f\x67\157\x6f\144\x73\137\x73\x68\x61\162\145\x5f\163\x65\x74\164\151\x6e\x67")->where("\151\x64", $id)->delete(); goto VuvPW; VuvPW: return AjaxReturn($res); goto yAxCL; yAxCL: } public function add_share() { goto dh3Jb; tPCef: $share = db::name("\171\x62\x73\x63\x5f\147\157\157\x64\163\x5f\163\x68\x61\x72\x65\137\163\145\164\x74\151\x6e\x67")->alias("\163")->join("\171\142\163\143\137\x67\157\157\x64\x73\x20\147", "\x67\x2e\x67\157\x6f\144\163\x5f\151\144\75\x73\56\x67\x6f\157\144\x73\x5f\151\144")->join("\171\x62\163\143\137\151\x6d\141\x67\x65\163\x20\x69\x6d\141\x67\145\163", "\147\x2e\x69\155\141\x67\145\163\x20\75\40\x69\x6d\x61\x67\145\163\x2e\x69\x6d\x67\137\151\144", "\x6c\x65\x66\x74")->field("\163\56\x2a\54\x67\56\147\x6f\157\144\163\x5f\x6e\141\155\145\x2c\x67\56\x70\162\151\143\145\x2c\x67\x2e\x69\155\141\x67\145\163\x2c\x69\155\x61\x67\x65\163\56\151\155\147\x5f\143\157\166\145\x72")->where("\x73\x2e\x67\x6f\x6f\144\163\137\151\144", $id)->find(); goto OkdgU; EiUbm: lW509: goto mU_jM; yJb7o: $share2 = db::name("\171\x62\163\143\x5f\165\x73\145\x72\x5f\163\x68\x61\162\x65\x5f\163\x65\164\164\x69\x6e\x67")->where("\155\143\x68\137\x69\x64", $this->bus_id)->field("\154\145\166\x65\x6c")->find(); goto duR5l; duR5l: if (!empty($share2)) { goto vBs2D; } goto RwKa5; jcbhC: return view(); goto SrdNS; E0AZY: $share["\151\x63\x6f\156"] = "\345\x85\203"; goto UABGj; EnjbJ: qc0M1: goto haxDy; K2ZIg: dtR1u: goto EnjbJ; xzTIF: $this->assign("\x73\150\141\162\x65", $share); goto FEdgE; HbWSE: B4xaO: goto xzTIF; haxDy: if ($share["\x70\162\151\143\x65\x5f\164\x79\x70\145"] == 0) { goto lW509; } goto E0AZY; OfLAe: vBs2D: goto xHWYj; dh3Jb: $id = input("\x70\141\x72\141\x6d\56\147\157\157\144\163\137\x69\144", 0); goto xRzfY; xHWYj: switch ($share2["\x6c\145\x76\x65\154"]) { case 0: goto qc0M1; case 1: goto z2k9k; z2k9k: $share["\x73\x65\143\x6f\156\144"] = "\x2d\x31"; goto fYzGE; fYzGE: $share["\164\x68\x69\162\144"] = "\55\x31"; goto STqgA; STqgA: goto qc0M1; goto cpgNh; cpgNh: case 2: $share["\x74\150\x69\162\x64"] = "\x2d\61"; goto qc0M1; } goto K2ZIg; xRzfY: if ($id > 0) { goto CVfH4; } goto IasrE; AcIr5: CVfH4: goto tPCef; UABGj: goto B4xaO; goto EiUbm; IasrE: $share["\x70\x72\x69\x63\145\x5f\x74\x79\x70\145"] = 0; goto iljlS; RwKa5: $share["\x6c\x65\166\x65\154"] = 0; goto OfLAe; iljlS: goto QvW2h; goto AcIr5; mU_jM: $share["\x69\143\x6f\x6e"] = "\x25"; goto HbWSE; OkdgU: QvW2h: goto yJb7o; FEdgE: $this->assign("\x69\144", $id); goto jcbhC; SrdNS: } public function share_pay() { goto acclu; aqhjT: return 1; goto fNu3o; CEepq: $rs = Db::name("\x79\x62\163\143\x5f\x67\x6f\x6f\144\x73\137\x73\x68\x61\x72\145\137\x73\x65\x74\164\151\156\x67")->where(["\147\x6f\157\x64\163\x5f\151\144" => $data["\x67\x6f\157\144\163\137\151\x64"], "\x6d\x63\x68\137\151\144" => $data["\x6d\143\150\x5f\151\x64"]])->update($data); goto qcaSD; uemrC: APct2: goto Rlw9t; Rlw9t: return 0; goto ew63M; MWy2l: $count = Db::name("\171\142\x73\143\137\x67\x6f\x6f\144\163\137\163\150\141\162\145\x5f\x73\145\x74\x74\151\156\147")->where(["\x67\157\157\144\x73\x5f\151\x64" => $data["\x67\157\157\144\x73\x5f\151\x64"], "\x6d\x63\150\137\151\x64" => $data["\x6d\x63\x68\x5f\x69\x64"]])->count(); goto fZLe2; fNu3o: t0Xj6: goto eIKF1; fZLe2: if ($count > 0) { goto Nm8ac; } goto cEzT_; zRSrt: Nm8ac: goto CEepq; gHWdK: $data["\x73\x65\143\x6f\156\144"] = input("\160\x61\162\x61\x6d\56\163\145\x63\157\156\144", 0.0); goto vYWq2; eIKF1: $data["\x6d\143\150\x5f\151\x64"] = $this->bus_id; goto uiCmi; gaTCT: $data["\163\x74\x61\164\165\163"] = 1; goto yhHOG; uiCmi: $data["\x66\151\x72\163\x74"] = input("\x70\x61\162\x61\x6d\56\x66\151\x72\x73\164", 0.0); goto gHWdK; acclu: $data["\147\157\x6f\144\163\137\x69\144"] = input("\x70\141\x72\x61\155\56\147\x6f\x6f\x64\x73\137\151\144", 0); goto FL2As; yhHOG: $rs = Db::name("\171\142\163\x63\137\x67\157\157\144\x73\137\163\150\141\x72\145\137\163\x65\x74\x74\x69\x6e\147")->insert($data); goto qVHoY; FL2As: if (!($data["\147\x6f\x6f\144\163\x5f\151\144"] == 0)) { goto t0Xj6; } goto aqhjT; cEzT_: $data["\x63\162\x65\141\x74\x65\137\x74\151\155\x65"] = time(); goto gaTCT; UtdSE: goto zhu0X; goto uemrC; vYWq2: $data["\x74\x68\x69\x72\144"] = input("\x70\141\x72\141\x6d\56\x74\x68\x69\162\x64", 0.0); goto GgAZl; rcUPY: if ($rs) { goto APct2; } goto ffkEi; ew63M: zhu0X: goto Pdzfq; ffkEi: return 1; goto UtdSE; qVHoY: goto LrAck; goto zRSrt; qcaSD: LrAck: goto rcUPY; GgAZl: $data["\160\162\151\x63\x65\x5f\164\x79\160\145"] = input("\160\141\x72\x61\155\x2e\160\162\151\x63\145\137\x74\171\160\145", 0); goto MWy2l; Pdzfq: } }
