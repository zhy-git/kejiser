<?php
 namespace app\admin\controller; use app\admin\service\BusActivity; use think\Db; use think\Exception; class Activity extends Base { protected $contr_share_set = array("\x31" => "\xe5\x8f\xaf\346\x8f\220\347\216\260\xe4\xbd\243\351\x87\x91", "\62" => "\xe5\267\xb2\xe6\217\x90\xe7\x8e\260\xe4\xbd\xa3\xe9\207\x91", "\x33" => "\xe6\216\xa8\xe8\215\220\xe4\272\xba", "\64" => "\xe6\x9c\xaa\xe7\xbb\223\347\xae\227\xe4\xbd\xa3\xe9\207\x91", "\x35" => "\345\x88\206\351\224\200\xe4\275\243\351\207\221", "\66" => "\xe5\210\206\xe9\x94\x80\xe8\xae\242\345\215\225", "\67" => "\346\217\x90\xe7\216\xb0\346\230\216\347\273\x86", "\70" => "\xe6\x88\x91\xe7\x9a\x84\345\x9b\242\351\x98\x9f", "\71" => "\xe6\216\xa8\xe5\xb9\xbf\xe4\272\x8c\347\273\xb4\347\240\x81", "\x31\x30" => "\345\x8f\221\xe5\261\x95\xe4\xb8\213\347\xba\xbf", "\61\61" => "\xe5\276\x85\346\x89\x93\xe6\xac\xbe\344\xbd\xa3\351\207\x91", "\x31\x32" => "\xe5\x88\x86\351\224\200\xe4\xb8\xad\xe5\277\203", "\61\x33" => "\345\210\x86\351\x94\x80\345\x95\206"); protected $contr_pay_type = array("\60" => "\xe5\276\xae\344\277\xa1\346\x94\257\xe4\273\230", "\61" => "\346\x94\xaf\344\273\x98\xe5\256\x9d\xe6\224\xaf\344\273\230", "\x32" => "\351\x93\xb6\xe8\241\214\345\215\xa1\346\x94\257\344\xbb\230", "\63" => "\344\275\231\351\xa2\235\xe6\224\xaf\344\xbb\230"); protected $contr_order_status = array("\55\61" => "\345\267\xb2\xe5\217\226\xe6\xb6\210", "\x30" => "\xe5\276\x85\346\x94\257\xe4\273\x98", "\x31" => "\xe5\276\205\345\217\x91\350\264\247", "\62" => "\xe5\276\205\346\x94\266\xe8\xb4\xa7", "\63" => "\xe5\xb7\xb2\345\xae\x8c\346\x88\220", "\x34" => "\351\x80\x80\346\254\276\xe4\270\255", "\x35" => "\xe5\xb7\xb2\xe9\200\x80\xe6\xac\276"); protected $contr_share_deep = 3; public function index() { goto v4E4P; hS9Ke: if ($actn) { goto DsQqc; } goto CD4zd; KQWt0: $url = explode("\x26", $url[1]); goto bYk5x; WSlPx: $list = $activity->getActivityAll($condition, '', "\x73\164\x61\162\x5f\164\151\155\x65\x20\x64\x65\163\x63"); goto knBda; OJ9V0: $list = Db::name("\171\142\x73\143\x5f\142\165\163\x69\156\145\x73\x73\137\x61\x63\164\151\166\x69\x74\171")->where("\x61\x63\x74\151\x76\151\164\x79\x5f\x6e\141\x6d\145", "\x6c\x69\153\145", "\45{$actn}\x25")->where("\x6d\x63\150\137\151\144", $mch_id)->order("\163\164\x61\162\137\164\151\x6d\145", "\144\145\163\143")->paginate(20, false, ["\161\165\145\162\x79" => ["\163" => $url]]); goto u177V; NQGXW: DsQqc: goto vcfxI; v4E4P: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto PZzQ1; p6y0r: $page = $list->render(); goto fIRgy; CD4zd: $activity = new BusActivity(); goto MApwy; iSgfD: return view("\x61\143\164\x69\x76\x69\164\171\57\151\156\144\145\x78"); goto dGKBu; bYk5x: $url = "\57" . $url[0]; goto OJ9V0; JDvap: $this->assign("\154\x69\163\164", $list); goto gDk_c; knBda: goto OEES8; goto NQGXW; vcfxI: $url = request()->query(); goto lnVMt; gDk_c: $this->assign("\160\141\147\x65", $page); goto iSgfD; MApwy: $condition["\155\x63\x68\137\x69\144"] = array("\145\161", $mch_id); goto WSlPx; lnVMt: $url = explode("\x3d\57", $url); goto KQWt0; PZzQ1: $actn = request()->post("\x73\x65\141\162\143\150\137\x74\x65\x78\x74", ''); goto hS9Ke; u177V: OEES8: goto p6y0r; fIRgy: $this->assign("\x73\x65\x61\x72\x63\150\x5f\x74\x65\x78\x74", $actn); goto JDvap; dGKBu: } public function addActivity() { goto ujueR; VFaKq: $satisfy_money = input("\160\141\162\x61\x6d\56\x73\141\164\x69\x73\146\171\137\155\x6f\x6e\x65\x79", "\x30"); goto H3TvS; ufZEo: if (!request()->isAjax()) { goto YTNtO; } goto NgZRt; NgZRt: $activity_name = input("\x70\x61\162\141\x6d\x2e\141\x63\164\x69\x76\151\164\x79\x5f\x6e\x61\x6d\145", ''); goto VFaKq; NnCwt: $end_time = strtotime(input("\x70\x61\x72\x61\x6d\x2e\145\156\144\x5f\164\x69\155\145", "\x30")); goto HH3xq; QT9wp: return view("\141\143\x74\151\166\x69\x74\171\x2f\x61\x64\x64\137\x61\143\164\151\x76\x69\164\171"); goto IZOOB; HH3xq: $is_use = input("\x70\141\x72\141\x6d\56\151\x73\137\x75\163\145"); goto FAOgt; tlydo: $activity = new BusActivity(); goto ufZEo; ujueR: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto tlydo; H3TvS: $discount_money = input("\x70\x61\162\141\x6d\56\x64\x69\x73\x63\x6f\165\156\x74\137\x6d\157\x6e\x65\171", "\x30"); goto xqZxT; xqZxT: $star_time = strtotime(input("\x70\x61\162\x61\155\x2e\x73\x74\x61\162\137\x74\151\155\x65"), "\x30"); goto NnCwt; jtxNb: return AjaxReturn($res); goto R6ntv; FAOgt: $res = $activity->addActivity($activity_name, $satisfy_money, $discount_money, $star_time, $end_time, $is_use, $mch_id); goto jtxNb; R6ntv: YTNtO: goto QT9wp; IZOOB: } public function editActivity() { goto L4mnP; d9lBQ: $satisfy_money = input("\x70\x61\162\141\155\56\x73\141\164\151\x73\146\171\137\x6d\157\x6e\x65\x79", "\60"); goto QvyU6; L4mnP: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto pvziI; hf2mY: $this->assign("\151\x6e\146\157", $info); goto tpcIT; pvziI: $activity = new BusActivity(); goto q0bau; etU58: $id = input("\160\141\x72\x61\155\x2e\x69\x64", "\60"); goto Fnk2O; tNSI0: qBp6B: goto etU58; ny4sk: $star_time = strtotime(input("\x70\x61\x72\141\155\56\163\x74\141\162\x5f\164\x69\x6d\145"), "\60"); goto Upc31; TN4DA: $res = $activity->editActivity($id, $activity_name, $satisfy_money, $discount_money, $star_time, $end_time, $is_use, $mch_id); goto Rg5gW; Fnk2O: $info = $activity->getActivityInfo($id); goto hf2mY; eOzgr: $id = input("\x70\141\x72\141\x6d\x2e\151\144", "\x30"); goto jQ9cu; Rg5gW: return AjaxReturn($res); goto tNSI0; jQ9cu: $activity_name = input("\160\141\x72\141\x6d\x2e\x61\x63\x74\x69\x76\151\x74\171\137\156\x61\155\x65", ''); goto d9lBQ; z2wok: $is_use = input("\x70\141\162\141\155\x2e\x69\163\x5f\x75\x73\145"); goto TN4DA; QvyU6: $discount_money = input("\x70\141\x72\141\x6d\x2e\144\151\163\143\x6f\x75\x6e\x74\x5f\155\157\156\x65\171", "\x30"); goto ny4sk; Upc31: $end_time = strtotime(input("\x70\x61\162\x61\x6d\x2e\x65\x6e\144\137\x74\151\155\x65", "\x30")); goto z2wok; tpcIT: return view("\x61\x63\x74\151\166\x69\164\x79\57\145\x64\151\164\137\x61\143\x74\151\166\x69\x74\171"); goto foM2m; q0bau: if (!request()->isAjax()) { goto qBp6B; } goto eOzgr; foM2m: } public function delActivity() { goto VkGG_; Rsubl: return AjaxReturn($res); goto mkGHa; WtoGC: $res = $activity->delActivity($id, $mch_id); goto Rsubl; oh2B8: $id = input("\x70\141\162\141\x6d\x2e\151\144", "\x30"); goto WtoGC; CDf9r: $activity = new BusActivity(); goto oh2B8; VkGG_: $mch_id = isset($this->bus_id) ? $this->bus_id : "\60"; goto CDf9r; mkGHa: } public function offActivity() { goto geFsB; sKWqZ: $id = input("\x70\x61\x72\x61\x6d\x2e\x69\x64", "\x30"); goto MgAhJ; geFsB: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto zgBO8; i7Dc3: return AjaxReturn($res); goto a3Xky; MgAhJ: $res = $activity->offActivity($id); goto i7Dc3; zgBO8: $activity = new BusActivity(); goto sKWqZ; a3Xky: } public function onActivity() { goto P98O4; P98O4: $mch_id = isset($this->bus_id) ? $this->bus_id : "\60"; goto nM2B3; WKzCO: $res = $activity->onActivity($id); goto hx1Le; hx1Le: return AjaxReturn($res); goto Z9Dim; PyXCh: $id = input("\160\141\162\141\155\x2e\151\144", "\60"); goto WKzCO; nM2B3: $activity = new BusActivity(); goto PyXCh; Z9Dim: } public function coupon() { goto lTPRD; shLa_: return view("\141\143\164\x69\x76\x69\164\x79\x2f\x63\157\165\x70\x6f\156"); goto nt9XQ; RQCmC: $where["\141\143\164\151\166\151\x74\x79\137\x6e\141\155\145"] = array("\154\x69\153\145", "\x25" . $search_text . "\45"); goto Z7PZi; irg2c: if (empty($search_text)) { goto lrTFb; } goto RQCmC; KRfmY: $this->assign("\x73\x65\141\162\x63\x68\x5f\164\145\x78\x74", $search_text); goto shLa_; ZLwMK: $page = $list->render(); goto w5Eix; k6oPW: $where["\x69\x73\137\x75\x73\145"] = ["\x69\x6e", "\x31\x2c\62"]; goto irg2c; w5Eix: $this->assign("\154\151\x73\164", $list); goto Wfr5A; lTPRD: $search_text = request()->param("\x73\145\141\x72\x63\x68\137\x74\145\x78\164", ''); goto GuRWE; GuRWE: $where = array(); goto k6oPW; h2m1U: $list = db::name("\x79\142\163\143\137\142\165\163\151\x6e\145\163\163\137\x63\x6f\165\160\157\x6e")->where("\155\x63\150\137\151\144", $this->bus_id)->where($where)->order("\145\x6e\144\137\x74\x69\155\145")->paginate(20); goto ZLwMK; Z7PZi: lrTFb: goto h2m1U; Wfr5A: $this->assign("\160\x61\147\145", $page); goto KRfmY; nt9XQ: } public function add_coupon() { goto g8tcz; YGOTF: $data["\x73\x74\141\x72\x5f\164\x69\x6d\x65"] = strtotime(input("\160\141\x72\141\155\56\163\164\x61\x72\x5f\164\x69\x6d\145"), "\x30"); goto t96l5; cGni8: return AjaxReturn($res); goto ZaomQ; UH02b: $data["\143\157\x75\x6e\x74"] = input("\x70\x61\x72\141\x6d\x2e\x63\x6f\165\x6e\x74", "\61\x30"); goto K6Rw2; srxE_: $data["\x73\141\x74\151\163\146\x79\x5f\x6d\x6f\156\x65\171"] = input("\160\141\x72\x61\x6d\x2e\x73\x61\x74\151\x73\x66\171\x5f\x6d\157\156\145\x79", "\x30"); goto eMD5f; id8NF: $data["\x69\163\137\165\x73\145"] = input("\160\141\162\141\155\x2e\x69\163\x5f\x75\163\145"); goto K5jqW; t96l5: $data["\x65\156\144\x5f\x74\151\x6d\x65"] = strtotime(input("\160\x61\162\x61\155\x2e\145\x6e\144\x5f\164\151\155\x65", "\x30")); goto id8NF; DUnGH: $data["\x74\x6f\147\145\x74\150\x65\162"] = input("\x70\141\162\141\155\x2e\164\x6f\147\145\x74\x68\x65\x72", "\61"); goto nz5a0; K6Rw2: $data["\x72\x65\x6d\137\143\x6f\165\x6e\x74"] = input("\160\x61\x72\141\155\x2e\x63\x6f\165\156\x74", "\61\x30"); goto DUnGH; xYEkN: return view("\x61\x63\164\x69\x76\x69\x74\171\x2f\x63\x6f\165\x70\x6f\156\137\141\144\144"); goto INxP4; nz5a0: $res = db::name("\171\142\163\143\x5f\142\165\x73\151\156\145\x73\163\137\x63\157\165\160\x6f\x6e")->insert($data); goto cGni8; jFOgv: $data["\x61\x63\x74\151\x76\x69\164\171\137\x6e\141\155\145"] = input("\x70\141\162\141\155\x2e\x61\x63\x74\151\166\x69\164\171\137\156\141\155\145", ''); goto srxE_; g8tcz: if (!request()->isAjax()) { goto zc8SC; } goto jFOgv; ZaomQ: zc8SC: goto xYEkN; eMD5f: $data["\144\151\x73\143\157\x75\x6e\164\137\x6d\157\156\145\171"] = input("\160\x61\x72\141\155\56\144\151\163\143\157\165\156\164\137\155\x6f\x6e\x65\171", "\x30"); goto YGOTF; K5jqW: $data["\x6d\x63\x68\x5f\x69\144"] = $this->bus_id; goto UH02b; INxP4: } public function delCoupon() { goto BBoFF; BBoFF: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto oepFn; KGePd: $res = Db::name("\171\142\x73\143\x5f\x62\165\x73\151\x6e\145\163\163\x5f\143\x6f\x75\160\x6f\156")->where(["\151\x64" => $id, "\x6d\x63\x68\137\151\144" => $mch_id])->update(["\x69\x73\x5f\165\x73\145" => 3]); goto aMxgf; aMxgf: return AjaxReturn($res); goto itC8e; oepFn: $id = input("\x70\x61\162\x61\155\x2e\x69\x64", "\x30"); goto KGePd; itC8e: } public function edit_coupon() { } public function off_coupon() { goto zK9Xs; xUNCn: return AjaxReturn($res); goto L9184; zK9Xs: $id = input("\160\141\162\x61\x6d\56\151\x64", "\60"); goto F6WyT; F6WyT: $res = db::name("\x79\x62\163\x63\137\142\165\163\x69\x6e\x65\163\163\x5f\143\157\x75\160\157\x6e")->where("\x69\x64", $id)->update(["\x69\163\x5f\165\163\145" => 2]); goto xUNCn; L9184: } public function on_coupon() { goto Rf0B0; ZbSPq: $res = db::name("\171\x62\163\143\x5f\142\x75\x73\x69\156\x65\163\x73\137\x63\157\x75\x70\x6f\x6e")->where("\151\x64", $id)->update(["\x69\x73\x5f\165\x73\x65" => 1]); goto APjqj; APjqj: return AjaxReturn($res); goto OHmYX; Rf0B0: $id = input("\160\x61\162\x61\155\56\x69\x64", "\60"); goto ZbSPq; OHmYX: } public function together_stop() { goto R_HB2; TlYB2: $res = db::name("\171\x62\x73\143\137\142\165\x73\x69\156\145\x73\x73\137\143\x6f\x75\160\157\x6e")->where("\151\x64", $id)->update(["\x74\x6f\x67\145\164\150\145\x72" => 1]); goto YVb1R; YVb1R: return AjaxReturn($res); goto N8b9W; R_HB2: $id = input("\x70\141\x72\141\155\56\151\x64", "\60"); goto TlYB2; N8b9W: } public function together_on() { goto Ydy9O; Ydy9O: $id = input("\x70\141\x72\141\155\x2e\x69\x64", "\60"); goto OUOB2; OUOB2: $res = db::name("\x79\x62\163\x63\x5f\x62\165\163\x69\156\x65\x73\x73\x5f\143\x6f\x75\x70\x6f\x6e")->where("\151\x64", $id)->update(["\164\157\x67\x65\164\x68\145\x72" => 2]); goto RtMOX; RtMOX: return AjaxReturn($res); goto VgZb1; VgZb1: } public function together_user_list() { goto HZylt; qvrQ7: $this->assign("\154\151\163\164", $list); goto EgNIK; nlSjD: $url = explode("\x26", $url[1]); goto kxizK; rAJxv: $this->assign("\x73\x65\141\x72\x63\x68\x5f\164\145\x78\164", $search_text); goto dx7or; xZftp: $this->assign("\151\144", $id); goto rAJxv; lDu3V: $this->assign("\145\156\144\x5f\x74\151\155\145", $end_time); goto gDbeR; EgNIK: $this->assign("\x70\141\147\145", $page); goto xZftp; HZylt: $id = input("\x70\x61\162\x61\x6d\56\x69\144"); goto jGayb; kxizK: $url = "\57" . $url[0]; goto fsYmJ; I6uOn: $page = $list->render(); goto qvrQ7; NOSAO: $url = explode("\x3d\x2f", $url); goto nlSjD; gDbeR: $url = request()->query(); goto NOSAO; jGayb: $search_text = preg_replace("\43\40\43", '', input("\160\x61\x72\141\x6d\56\x73\145\141\x72\x63\x68\x5f\x74\145\x78\164")); goto bBrBb; d1HyD: $where["\143\x2e\x6b\145\x79"] = array("\x6c\x69\x6b\145", "\45" . $search_text . "\x25"); goto OqblV; dx7or: return view("\141\x63\x74\x69\x76\151\x74\171\x2f\143\x6f\x75\160\x6f\156\137\x75\163\x65\x72\137\154\x69\163\x74"); goto ig_jL; xgT0H: $end_time = db::name("\171\x62\x73\x63\x5f\142\x75\163\x69\x6e\x65\163\x73\137\x63\x6f\x75\x70\x6f\x6e")->where("\151\144", $id)->value("\145\x6e\x64\137\164\151\x6d\x65"); goto lDu3V; fsYmJ: $list = db::name("\x79\x62\163\x63\x5f\x75\163\145\162\137\143\x6f\165\160\157\156")->alias("\143")->join("\171\x62\163\x63\x5f\x75\x73\x65\x72\x20\x75", "\x75\56\165\x69\144\x3d\x63\56\165\x73\145\162\137\x69\144", "\x6c\x65\146\x74")->where("\x63\x2e\155\x63\x68\x5f\151\x64", $this->bus_id)->where("\x63\56\143\x6f\165\x70\157\156\137\151\144", $id)->where($where)->field("\x75\56\156\151\x63\153\137\x6e\141\155\145\x2c\143\56\52")->order("\x63\x2e\147\x65\x74\x5f\x74\151\x6d\x65\40\x64\x65\163\143")->paginate(4, false, ["\x71\x75\145\x72\x79" => ["\163" => $url, "\151\144" => $id]]); goto I6uOn; gewxw: if (empty($search_text)) { goto GeXVX; } goto d1HyD; bBrBb: $where = array(); goto gewxw; OqblV: GeXVX: goto xgT0H; ig_jL: } public function coupon_user_hx() { goto Gnz7N; cg2C0: $res = db::name("\171\142\163\143\137\165\163\x65\162\137\x63\157\165\x70\157\156")->where("\x69\x64", $id)->update(["\x75\x73\145\137\164\151\x6d\x65" => time(), "\163\x74\x61\164\x75\163" => 1]); goto XlqI2; XlqI2: return AjaxReturn($res); goto UA5q5; Gnz7N: $id = input("\160\x61\162\141\155\56\x69\x64"); goto cg2C0; UA5q5: } public function user_share() { goto MHiuy; SllI2: $user[$i]["\x66\x61\x74\x68\x65\162"] = "\346\x80\273\xe5\272\227"; goto iaWG7; ACzNj: bepRH: goto SllI2; YncXm: $share = db::name("\171\x62\x73\143\137\x75\x73\x65\x72\137\163\150\141\x72\x65\x5f\163\x65\164\x74\x69\x6e\x67")->where("\x6d\143\x68\x5f\151\x64", $mch_id)->field("\151\x64\54\x6c\x65\166\145\x6c\54\146\x69\x72\x73\164\x5f\156\x61\x6d\x65\x2c\x73\x65\143\x6f\x6e\144\x5f\x6e\141\x6d\145\x2c\x74\x68\151\162\x64\x5f\x6e\x61\155\x65\x2c\146\x69\162\163\164\x2c\163\145\x63\157\x6e\144\x2c\164\150\x69\162\144\54\160\x72\x69\143\x65\137\x74\x79\x70\x65")->find(); goto tLIWd; aZKNZ: $this->assign("\x73\x65\141\x72\x63\150\x5f\x6e\x61\155\x65", $search_name); goto rbiky; uuRW_: $share["\x70\162\x69\143\x65\x5f\164\x79\160\x65"] = "\60"; goto GA0xY; hDslC: $condition["\163\56\x69\163\137\144\145\x6c"] = 1; goto yXOnm; W52Tl: if ($user[$i]["\x70\x69\x64"] == 0) { goto bepRH; } goto iCiQh; rbiky: $this->assign("\154\x69\163\x74", $user); goto Z23sm; fHrds: $share["\164\x68\x69\x72\x64"] = "\x2d\x31"; goto y5_tv; qdMYi: G1SVU: goto BX5hH; C3A3s: $share["\x69\x63\157\156"] = "\x25"; goto Ecx5g; sPecg: $user[$i]["\x66\x61\164\x68\145\x72"] = $pid["\156\x61\x6d\145"]; goto p5dNR; AG9Bu: $this->assign("\x73\x74\x61\x74\165\163", $status); goto aZKNZ; OWnVF: rQPEX: goto JHCbX; rACRE: $condition["\163\x74\141\164\x75\x73"] = $status; goto ktcb6; qO56N: $user[$i]["\x63\150\x69\x6c\x64"] = $get_child->get_child_share($user[$i]["\x73\x69\x64"], "\55\61", $deep); goto mzqvE; MHiuy: @pdo_run("\x55\x50\x44\x41\x54\105\40\140\151\155\163\x5f\171\142\163\x63\x5f\x75\163\145\162\140\x20\x53\x45\x54\x20\160\x69\144\x3d\60\x20\127\110\105\x52\105\40\x70\x69\x64\x3d\x75\x69\144\40\101\x4e\104\x20\151\x73\137\144\x69\163\164\162\x69\142\165\x74\157\x72\x3d\x31"); goto yHmEi; tIjcX: goto rQPEX; goto bK7F_; ktcb6: LdDqZ: goto MHZnM; mzqvE: CfybC: goto tQY_R; M29_n: $i = 0; goto OWnVF; bK7F_: Sjg5E: goto YncXm; Z23sm: return view(); goto Y63nq; hSZmK: if (empty($search_name)) { goto zJFoF; } goto tYYMz; Ecx5g: if (!($share["\154\145\x76\145\154"] == 0)) { goto BHvcw; } goto r4F3B; BX5hH: $share["\151\143\x6f\x6e"] = "\xe5\205\x83"; goto GI0GD; ZZaZ1: cefwH: goto W52Tl; iCiQh: $pid = db::name("\171\x62\x73\x63\x5f\165\x73\145\162\137\163\x68\x61\162\x65")->field("\156\141\x6d\x65")->where("\165\x73\145\x72\x5f\151\144", $user[$i]["\x70\x69\x64"])->where("\x69\x73\137\x64\145\x6c", 1)->find(); goto sPecg; r4F3B: $share["\x6c\145\x76\x65\x6c"] = "\x36"; goto uuRW_; nkCwT: $condition["\163\56\155\x63\150\137\x69\144"] = $mch_id; goto hSZmK; g0JXw: if (!($status == "\x30" || $status == "\x31")) { goto LdDqZ; } goto rACRE; iaWG7: yvYFF: goto qO56N; tYYMz: $condition["\156\151\143\153\x5f\156\x61\x6d\x65"] = ["\154\151\153\145", "\45" . $search_name . "\x25"]; goto nuRbS; F2zoP: $this->assign("\x73\150\141\162\x65", $share); goto AG9Bu; GA0xY: $share["\x73\x65\143\x6f\x6e\x64"] = "\x2d\x31"; goto fHrds; fozfN: $get_child = new BusActivity(); goto M29_n; Ag9hk: $user[$i]["\163\145\x6c\154\145\162\x5f\143\x6f\x6d\155\x65\x6e\164\163"] = substr($user[$i]["\163\145\154\x6c\x65\162\137\x63\x6f\x6d\x6d\x65\156\164\x73"], 0, 9) . "\x2e\56\56"; goto ZZaZ1; aMnBi: $search_name = input("\x70\x61\x72\x61\x6d\56\x73\x65\141\162\x63\x68\137\156\141\155\x65", ''); goto hDslC; CNS5d: goto ZJqbf; goto qdMYi; yXOnm: $mch_id = $this->bus_id; goto nkCwT; nuRbS: zJFoF: goto g0JXw; yHmEi: $status = request()->get("\163\x74\141\x74\x75\x73", ''); goto aMnBi; tQY_R: $i++; goto tIjcX; JHCbX: if (!($i < count($user))) { goto Sjg5E; } goto uS9uo; p5dNR: goto yvYFF; goto ACzNj; MHZnM: $user = db::name("\x79\142\x73\143\137\x75\163\145\162\137\x73\x68\x61\x72\x65")->alias("\x73")->join("\x79\142\163\x63\137\165\163\145\x72\x20\165", "\163\x2e\x75\163\145\162\137\x69\144\75\x75\56\x75\151\144", "\x6c\x65\x66\164")->field("\163\56\x75\163\x65\162\x5f\151\144\40\163\151\144\54\x6d\x6f\x62\151\x6c\145\x2c\156\x61\155\x65\54\163\164\141\164\x75\163\x2c\143\162\145\x61\164\x65\x5f\164\x69\155\x65\54\163\145\x6c\154\145\162\x5f\x63\x6f\155\x6d\x65\156\164\163\x2c\x6e\151\143\x6b\137\156\x61\155\145\x2c\x74\x6f\164\141\x6c\x5f\160\x72\x69\143\145\x2c\x70\x72\151\x63\145\54\160\x69\x64")->where($condition)->order("\163\x2e\151\x64\x20\144\x65\163\143")->select(); goto KN9u_; GI0GD: ZJqbf: goto F2zoP; tLIWd: if (!empty($share["\160\162\151\x63\145\x5f\x74\171\160\x65"]) && $share["\160\162\151\143\145\x5f\164\171\x70\145"] != 0) { goto G1SVU; } goto C3A3s; y5_tv: BHvcw: goto CNS5d; uS9uo: if (!(strlen($user[$i]["\163\x65\x6c\x6c\145\x72\x5f\143\x6f\155\155\x65\156\x74\x73"]) > 10)) { goto cefwH; } goto Ag9hk; KN9u_: $deep = $this->contr_share_deep; goto fozfN; Y63nq: } public function user_share_edit() { goto RVnTO; SxR6f: goto t_WR_; goto p7EPM; p7EPM: AH7UW: goto d2Byy; RVnTO: $id = input("\160\x61\x72\141\x6d\56\x69\144", "\x30"); goto IMFGp; WtRst: mD_NQ: goto rey0U; rey0U: if ($sql == '') { goto AH7UW; } goto wUzvZ; UAslN: t_WR_: goto SixRm; Kw24B: return 1; goto SxR6f; nmsVr: switch ($type) { case "\144\145\x6c\x5f\163\x68\141\162\x65": $sql = "\165\160\x64\141\164\x65\x20\151\155\163\x5f\171\142\163\143\137\x75\x73\x65\162\137\163\150\141\162\x65\40\163\40\111\116\x4e\x45\x52\40\x4a\x4f\111\116\40\151\x6d\163\137\x79\142\163\x63\x5f\165\x73\145\162\x20\165\40\x6f\x6e\40\x73\x2e\x75\x73\145\x72\137\151\144\x3d\165\x2e\x75\x69\x64\x20\x73\145\164\x20\x73\x2e\151\x73\x5f\x64\x65\154\x20\x3d\x20\62\x2c\x75\x2e\x69\163\137\x64\x69\163\164\x72\x69\x62\x75\164\x6f\x72\75\x30\x20\167\150\x65\162\145\40\163\56\165\x73\145\x72\137\151\x64\x3d" . $id; goto mD_NQ; case "\151\163\137\x70\x61\x73\x73": $sql = "\x75\x70\144\141\x74\145\40\x69\x6d\163\x5f\x79\x62\163\143\137\x75\163\x65\162\x5f\163\x68\x61\x72\145\40\163\40\x49\116\x4e\105\x52\x20\x4a\117\x49\116\40\x69\x6d\163\137\x79\x62\x73\143\x5f\165\x73\145\162\40\x75\40\157\x6e\40\x73\56\x75\163\145\162\137\151\144\x3d\x75\56\165\x69\x64\x20\x73\x65\164\x20\163\x2e\x73\164\x61\164\x75\163\40\75\40\61\x2c\165\56\x69\163\137\144\151\163\164\x72\151\x62\165\164\x6f\x72\x3d\x31\x20\167\150\145\162\x65\x20\163\x2e\x75\163\145\162\x5f\x69\x64\75" . $id; goto mD_NQ; case "\x6e\x6f\x5f\x70\x61\163\x73": $sql = "\165\160\144\141\x74\x65\x20\x69\155\x73\137\x79\142\x73\x63\x5f\165\x73\145\x72\137\x73\150\141\162\x65\40\x73\x20\111\116\x4e\105\x52\x20\x4a\x4f\x49\x4e\x20\x69\155\x73\137\x79\x62\163\143\x5f\x75\x73\145\x72\x20\165\40\157\156\x20\163\x2e\165\163\x65\162\137\x69\x64\75\x75\56\165\151\144\40\x73\145\x74\40\163\x2e\163\x74\141\164\165\163\x20\x3d\40\62\x2c\165\x2e\x69\163\137\144\x69\163\164\162\x69\142\x75\164\157\162\x3d\60\x20\167\150\145\x72\x65\40\x73\x2e\165\163\145\162\137\151\x64\75" . $id; goto mD_NQ; case "\141\154\x6c\137\x70\141\163\163": goto EdwHD; EdwHD: $check = new BusActivity(); goto wNEg_; oa9sq: goto mD_NQ; goto rkMxu; uB77C: U2Qm8: goto HqNXs; wNEg_: $id = $check->screen_id("\171\142\x73\143\x5f\165\163\145\162\x5f\163\150\141\x72\145", $id, "\165\163\x65\x72\137\x69\x64", 0, "\163\x74\141\x74\x75\163"); goto FXS_z; nRSW5: return 1; goto uB77C; HqNXs: $sql = "\x75\x70\144\141\164\x65\x20\x69\x6d\x73\137\x79\x62\163\143\x5f\165\x73\145\162\x5f\x73\150\141\162\145\x20\163\x20\x49\116\x4e\x45\122\x20\112\x4f\x49\x4e\x20\x69\x6d\x73\137\x79\x62\x73\x63\137\x75\x73\145\x72\40\165\x20\x6f\156\x20\x73\x2e\x75\x73\x65\x72\137\151\x64\75\x75\56\165\x69\x64\x20\x73\145\164\x20\163\x2e\x73\164\x61\164\165\163\40\x3d\40\61\x2c\x75\56\x69\163\x5f\x64\x69\x73\164\162\x69\x62\x75\164\x6f\x72\75\61\x20\167\150\x65\x72\x65\x20\163\x2e\165\163\145\162\x5f\x69\x64\x20\151\x6e\x20\x28\x20" . $id . "\40\51"; goto oa9sq; FXS_z: if (!(strlen($id) == 0)) { goto U2Qm8; } goto nRSW5; rkMxu: } goto cum_T; wUzvZ: @pdo_run($sql); goto Kw24B; d2Byy: return 0; goto UAslN; IMFGp: $type = input("\160\x61\x72\141\x6d\56\x74\x79\160\145\163", "\60"); goto nmsVr; cum_T: vS7wk: goto WtRst; SixRm: } public function comment_edit() { goto Qj9NX; CoWOU: $comment = db::name("\171\142\163\143\x5f\165\163\145\162\137\x73\150\x61\x72\145")->where("\x75\163\x65\x72\137\151\144", $id)->field("\x73\145\154\154\x65\x72\137\x63\x6f\155\155\145\156\x74\163\54\165\x73\x65\x72\137\151\144")->find(); goto LQ22J; Qj9NX: $id = request()->get("\x69\x64", "\x30"); goto CoWOU; LQ22J: $this->assign("\144\x61\164\141", $comment); goto dIT3U; dIT3U: return view("\141\x63\164\151\166\151\x74\171\57\x63\x6f\155\x6d\x65\156\164\x5f\x65\144\x69\x74"); goto n9FqG; n9FqG: } public function update_comment() { goto Gcbom; Gcbom: $id = input("\x70\x61\x72\141\x6d\56\151\x64"); goto KfiT9; ap99T: if (!empty($com)) { goto NdugM; } goto Y2bmI; vmxXH: pdo_run($sql); goto LwKR_; KfiT9: $com = request()->post("\x63\x6f\x6d"); goto ap99T; LwKR_: return "\62"; goto InXeT; sH1We: $sql = "\165\160\x64\x61\164\145\x20\151\x6d\163\137\x79\x62\163\143\137\165\x73\x65\162\137\163\150\141\162\x65\40\163\145\x74\40\x73\x65\154\x6c\x65\x72\x5f\143\157\x6d\x6d\x65\156\164\163\x3d\47" . $com . "\47\x20\167\x68\x65\162\x65\40\165\x73\x65\162\x5f\151\x64\75" . $id; goto vmxXH; gUGgn: goto OPaBA; goto Wx15Y; InXeT: OPaBA: goto Lf5em; Wx15Y: NdugM: goto sH1We; Y2bmI: return "\x31"; goto gUGgn; Lf5em: } public function child_show() { goto Ssu9d; wwitt: $child = $get_child->get_child_share($pid, $deep); goto eSWEi; eSWEi: $this->assign("\x6c\151\x73\x74", $child); goto tXJ0A; xevAY: $deep = request()->get("\144\145\145\160"); goto wwitt; Ssu9d: $get_child = new BusActivity(); goto FosI6; FosI6: $pid = request()->get("\160\x69\144"); goto xevAY; tXJ0A: return view(); goto w1KcR; w1KcR: } public function share_set() { goto N1W70; ltnpq: $share["\x69\x73\x5f\x72\145\x62\x61\x74\145"] = 0; goto Nh346; CkluS: $min_money = request()->post("\155\151\156\137\155\157\156\x65\x79"); goto dq3GP; CbUMQ: $share["\160\141\x79\137\164\x79\160\x65"] = ''; goto I3vRB; Dyf4b: $share = db::name("\x79\x62\x73\x63\x5f\165\163\145\x72\137\x73\150\x61\x72\145\137\x73\145\164\x74\x69\156\147")->where("\x6d\143\150\137\151\x64", $id)->find(); goto TI85t; zByOe: $share["\160\141\171\x5f\x74\x79\x70\145"] = json_decode($share["\x70\141\x79\x5f\164\x79\x70\x65"], true); goto F1oBf; kvtMm: return view(); goto Ax_qS; pgz9d: AqFup: goto zByOe; OPm2O: if (!(!empty($level) || $level == "\60")) { goto J1fin; } goto YNi3U; LnTZd: $share["\143\157\156\164\145\x6e\x74"] = ''; goto WAQFN; f77Uf: $content = request()->post("\x63\x6f\156\164\145\156\x74"); goto YF9Wv; N1W70: $id = $this->bus_id; goto P8IDS; XkO52: $level = request()->post("\154\145\166\x65\154"); goto xXWP3; cjnWL: $res = db::name("\x79\x62\163\x63\x5f\x75\x73\x65\162\137\163\x68\141\x72\145\137\163\145\164\164\x69\156\x67")->where("\155\143\150\137\151\x64", $id)->update(["\x6c\145\166\145\x6c" => $level, "\x70\141\171\x5f\164\171\x70\x65" => $pay_type, "\x6d\151\x6e\137\x6d\x6f\156\145\171" => $min_money, "\x6d\x61\x78\137\155\x6f\x6e\x65\171" => $max_money, "\143\157\156\164\x65\156\x74" => $content, "\x73\150\x61\162\145\x5f\x63\157\156\144\x69\x74\x69\157\x6e" => $share_condition, "\141\147\162\x65\x65" => $agree, "\155\x63\150\137\151\144" => $this->bus_id, "\151\163\x5f\162\145\142\141\x74\145" => $is_rebate]); goto MwtqR; F1oBf: $this->assign("\163\150\141\x72\x65", $share); goto kvtMm; W0R2E: $share_condition = request()->post("\163\x68\x61\162\145\137\143\x6f\156\x64\x69\x74\x69\x6f\x6e"); goto XkO52; TI85t: if (!(count($share) == 0)) { goto AqFup; } goto CbUMQ; I3vRB: $share["\x6c\x65\x76\x65\x6c"] = 0; goto ltnpq; WAQFN: $share["\141\x67\x72\145\x65"] = ''; goto pgz9d; ez25J: bCQFp: goto u0k97; rBK6o: J1fin: goto Dyf4b; u0k97: $res = db::name("\x79\142\x73\143\137\165\x73\x65\x72\137\163\x68\x61\x72\x65\137\163\x65\x74\164\151\156\147")->insert(["\154\x65\166\145\154" => $level, "\x70\x61\171\x5f\x74\171\160\145" => $pay_type, "\155\x69\x6e\137\x6d\157\x6e\x65\171" => $min_money, "\155\x61\170\x5f\155\x6f\156\x65\x79" => $max_money, "\x63\157\x6e\164\x65\x6e\x74" => $content, "\163\x68\x61\x72\145\137\143\157\x6e\144\x69\x74\151\157\156" => $share_condition, "\x61\x67\162\x65\x65" => $agree, "\x6d\x63\150\137\151\144" => $this->bus_id, "\x69\163\x5f\162\x65\x62\141\164\145" => $is_rebate]); goto J1GCf; J1GCf: hB7_C: goto Fhsna; Fhsna: return $res; goto rBK6o; P8IDS: $pay_type = request()->post("\160\x61\x79\x5f\x74\x79\x70\x65"); goto CkluS; MwtqR: goto hB7_C; goto ez25J; YF9Wv: $agree = request()->post("\x61\147\x72\x65\145"); goto uoF3N; uoF3N: $is_rebate = request()->post("\x69\x73\137\x72\x65\142\141\164\x65"); goto W0R2E; Nh346: $share["\x6d\x69\x6e\x5f\155\x6f\x6e\x65\x79"] = "\60\x2e\x30\60"; goto pI3ka; xXWP3: $count = db::name("\x79\x62\x73\143\x5f\165\163\145\162\137\x73\150\x61\x72\x65\137\x73\x65\x74\x74\x69\156\x67")->where("\155\143\150\x5f\151\144", $id)->count(); goto OPm2O; YNi3U: if ($count == 0) { goto bCQFp; } goto cjnWL; dq3GP: $max_money = request()->post("\x6d\x61\x78\137\x6d\x6f\156\x65\x79"); goto f77Uf; pI3ka: $share["\x6d\141\x78\137\x6d\157\156\x65\x79"] = "\60\56\x30\60"; goto LnTZd; Ax_qS: } public function share_pay() { goto dPBcB; rad2L: return "\60"; goto vmHku; OQ6FE: if (!($share["\x6c\145\166\145\x6c"] == 0)) { goto oW7tc; } goto TyfHD; KNDBu: NkMY1: goto kWYYH; rbGys: goto c8AZO; goto SsUpS; gNMu5: $share["\163\145\143\x6f\x6e\x64"] = "\x2d\x31"; goto IEtLP; vmHku: i4Dr_: goto Mmdnn; mQlXG: if (request()->isAjax()) { goto NkMY1; } goto Fe8xD; RF6k0: oW7tc: goto rbGys; prPY6: ODHMq: goto pjSMq; lcAcg: $share["\x6c\x65\x76\145\x6c"] = 0; goto Wz6B3; WMHDK: if (!(count($share) == 0)) { goto y_OKe; } goto lcAcg; atpAs: goto i4Dr_; goto KNDBu; ZWcyW: $share["\160\162\x69\143\x65\137\164\x79\160\145"] = "\x30"; goto gNMu5; iX_xh: $share["\x69\x63\157\156"] = "\xe5\205\203"; goto Dw4h3; GtrJp: HEUd6: goto prPY6; Mmdnn: $this->assign("\163\x68\x61\162\x65", $share); goto HajAw; SsUpS: Mdkh8: goto iX_xh; dPBcB: $id = $this->bus_id; goto mQlXG; Dw4h3: c8AZO: goto atpAs; ts2bA: switch ($share["\154\145\166\x65\154"]) { case 0: goto ODHMq; case 1: goto trmXa; pplVp: $share["\x74\x68\151\x72\144"] = "\55\61"; goto WX7fe; WX7fe: goto ODHMq; goto fQOo1; trmXa: $share["\163\145\x63\157\x6e\x64"] = "\x2d\x31"; goto pplVp; fQOo1: case 2: $share["\x74\x68\151\162\144"] = "\x2d\x31"; goto ODHMq; } goto GtrJp; kWYYH: $share = db::name("\171\142\x73\x63\137\x75\x73\145\x72\x5f\x73\x68\141\x72\145\137\x73\145\x74\164\151\x6e\147")->where("\x6d\143\150\137\x69\x64", $id)->update(request()->post()); goto rad2L; lU0Jn: $share["\151\143\157\x6e"] = "\x25"; goto OQ6FE; IEtLP: $share["\x74\150\151\162\x64"] = "\55\x31"; goto RF6k0; Fe8xD: $share = db::name("\171\142\x73\x63\137\165\163\x65\162\137\x73\150\x61\x72\x65\137\x73\145\164\164\151\x6e\147")->where("\155\x63\150\137\151\144", $id)->field("\151\144\x2c\x6c\145\166\145\154\54\x66\151\162\x73\x74\137\x6e\x61\155\145\54\x73\145\x63\x6f\156\x64\137\x6e\x61\x6d\145\54\x74\x68\x69\x72\x64\x5f\156\141\155\145\54\x66\x69\x72\163\164\54\x73\145\143\x6f\156\x64\x2c\164\150\151\x72\x64\54\160\162\151\x63\145\x5f\164\171\x70\145")->find(); goto WMHDK; TyfHD: $share["\x6c\x65\166\x65\x6c"] = "\66"; goto ZWcyW; pjSMq: if (!empty($share["\160\x72\151\143\x65\137\x74\x79\160\145"]) && $share["\x70\x72\x69\x63\x65\x5f\164\171\x70\145"] != 0) { goto Mdkh8; } goto lU0Jn; Wz6B3: y_OKe: goto ts2bA; HajAw: return view(); goto Cmchb; Cmchb: } public function share_other() { goto hIvYp; HswrK: $share = $share_default; goto oGY8g; a9N8O: J6vbh: goto FPQ51; Cys2P: if ($share["\157\x74\150\x65\x72"]) { goto vz4GM; } goto HswrK; XulNm: $share = json_decode($share["\x6f\x74\x68\x65\162"], true); goto t2fMu; oGY8g: goto v0d2w; goto eiktV; hIvYp: $id = $this->bus_id; goto nfOWN; SdXa3: return "\x30"; goto a9N8O; nfOWN: if (!request()->isAjax()) { goto J6vbh; } goto SNSnJ; Lym3z: $this->assign("\163\x68\141\162\x65", $share); goto apsdI; eiktV: vz4GM: goto XulNm; bnYWr: return view(); goto eciyA; Vkoco: $share_default = $this->contr_share_set; goto Cys2P; t2fMu: v0d2w: goto Lym3z; SNSnJ: $share = db::name("\171\142\x73\143\x5f\x75\163\x65\x72\x5f\x73\x68\x61\162\145\137\163\x65\164\164\x69\156\147")->where("\x6d\x63\x68\x5f\151\x64", $id)->update(request()->post()); goto SdXa3; apsdI: $this->assign("\x73\x68\141\162\x65\x5f\144\x65\146\x61\165\154\164", $share_default); goto bnYWr; FPQ51: $share = db::name("\171\x62\x73\x63\137\165\163\x65\162\x5f\x73\x68\x61\x72\145\137\x73\x65\164\x74\151\156\147")->where("\x6d\143\x68\x5f\151\x64", $id)->field("\x6f\164\150\145\x72")->find(); goto Vkoco; eciyA: } public function set_share_title() { goto HRpAn; fJUIG: return AjaxReturn($res); goto k05JF; qBZXY: gGDjj: goto xFaw0; eshsL: Aq50b: goto YSzel; ZC3lm: $res = Db::name("\171\142\x73\x63\137\165\163\145\x72\137\163\150\141\162\145\x5f\x73\145\x74\x74\x69\156\147")->where("\x6d\143\150\137\x69\x64", $this->bus_id)->update(["\157\164\x68\x65\x72" => $new_data]); goto fJUIG; xFaw0: $data = $this->contr_share_set; goto eshsL; IQZZ0: $data = json_decode($info, true); goto mO_Q6; YDttt: if (empty($info)) { goto gGDjj; } goto IQZZ0; mO_Q6: goto Aq50b; goto qBZXY; OQ9JJ: $new_data = json_encode($data); goto ZC3lm; vPBsK: $val = input("\x70\x61\162\141\x6d\x2e\166\141\154"); goto IhxT2; HRpAn: $type = input("\x70\x61\x72\x61\x6d\x2e\x74\x79\x70\x65"); goto vPBsK; YSzel: $data[$type] = $val; goto OQ9JJ; IhxT2: $info = Db::name("\x79\142\x73\143\137\x75\x73\x65\x72\x5f\x73\150\141\x72\145\x5f\163\145\x74\164\151\x6e\x67")->where("\x6d\x63\x68\137\x69\x64", $this->bus_id)->value("\157\x74\x68\x65\x72"); goto YDttt; k05JF: } public function share_cash() { goto tQL8U; asFFf: goto oy2p_; goto s0V_y; YDELH: hQDyB: goto Fm7Qf; HQ5UF: $condition["\165\x2e\156\x69\143\153\137\156\x61\x6d\145"] = array("\154\151\x6b\x65", "\x25{$search_text}\x25"); goto bwdvF; JG6Mh: $nn = ''; goto AYCIy; rM3vV: $this->assign("\143\x61\163\150", $cash); goto SN5Cp; j8hXv: $nn = "\x32"; goto GBOfR; BFt29: $condition["\x63\56\151\x73\x5f\144\145\154"] = 1; goto CpHI3; Fm7Qf: empty($status) ? $condition["\x73\164\x61\164\x75\x73"] = '' : ($condition["\163\x74\x61\x74\165\163"] = $status); goto rM3vV; wZ5C4: $cash[$i]["\x74\x79\x70\x65"] = $type[$cash[$i]["\x74\x79\160\145"]]; goto wZdwJ; rbHQl: return view(); goto oNf19; DWirm: oy2p_: goto EOxFG; xEobE: $condition["\x73\164\x61\x74\165\x73"] = "\x2d\61"; goto YDELH; eLPn_: qaz1l: goto BFt29; NCsAp: if (!($nn == "\62")) { goto hQDyB; } goto xEobE; EWkAz: $condition["\x73\164\141\x74\165\163"] = "\x30"; goto eLPn_; EOxFG: if (!($i < count($cash))) { goto pC41k; } goto wZ5C4; AYCIy: goto neHZN; goto IBADf; LKU0s: $cash = db::name("\x79\142\163\x63\137\165\163\x65\162\x5f\x73\x68\141\162\145\x5f\143\x61\x73\x68")->alias("\x63")->join("\x79\142\163\x63\137\x75\x73\145\x72\40\165", "\x75\56\165\x69\x64\x3d\143\x2e\x75\x73\145\162\137\x69\x64", "\x6c\x65\146\164")->field("\143\x2e\x69\x64\x2c\x63\56\164\x79\x70\x65\x2c\165\56\x6e\151\x63\153\x5f\x6e\x61\155\x65\x2c\x75\x2e\160\x72\151\143\x65\40\x74\x6f\x74\141\x6c\x2c\143\x2e\x70\162\x69\143\x65\40\160\162\151\143\x65\54\143\56\143\x72\x65\x61\x74\145\x5f\164\151\155\145\54\x63\56\x73\164\x61\164\x75\163\54\x63\x2e\142\141\x6e\x6b\137\x6e\141\155\x65\x2c\x63\x2e\x6d\x6f\x62\151\x6c\145\54\x63\x2e\x6e\141\x6d\145")->where("\x63\x2e\155\x63\x68\x5f\x69\144", $this->bus_id)->where($condition)->select(); goto fT_Qz; IBADf: s6ou7: goto j8hXv; SN5Cp: $this->assign("\163\x74\x61\164\165\163", $status); goto NUN37; IGsfX: if (!($nn == "\62")) { goto qaz1l; } goto EWkAz; s0V_y: pC41k: goto NCsAp; bwdvF: ph_zB: goto LKU0s; wZdwJ: $cash[$i]["\143\x72\145\141\164\145\137\x74\x69\155\x65"] = date("\131\x2d\x6d\x2d\x64\x20\110\x3a\x69\72\x73", $cash[$i]["\x63\162\145\x61\164\145\x5f\x74\151\x6d\x65"]); goto ZWhBh; NUN37: $this->assign("\x73\x65\x61\162\143\x68\137\x74\145\x78\164", $search_text); goto rbHQl; fv_aZ: if ($status == "\x2d\61") { goto s6ou7; } goto JG6Mh; Wg5Vp: $i++; goto asFFf; fT_Qz: $type = $this->contr_pay_type; goto oFi5v; tQL8U: $status = request()->param("\x73\x74\141\x74\x75\x73", ''); goto ypLAK; GBOfR: neHZN: goto B46Ai; ZWhBh: Fh8cV: goto Wg5Vp; oFi5v: $i = 0; goto DWirm; ypLAK: $search_text = request()->param("\163\x65\x61\162\x63\150\137\x74\x65\170\x74", ''); goto fv_aZ; CpHI3: if (empty($search_text)) { goto ph_zB; } goto HQ5UF; B46Ai: empty($status) ? $condition["\x73\x74\x61\x74\165\x73"] = array("\151\156", "\x30\x2c\x31\54\x32\54\63") : ($condition["\x73\x74\141\164\165\163"] = $status); goto IGsfX; oNf19: } public function share_cash_edit() { goto CDutO; zmJ7B: $info = 0; goto MWAXH; ZYNYi: try { goto E9bt_; my7p9: $info = Db::name("\x79\x62\163\143\x5f\x75\x73\x65\162\x5f\163\x68\x61\162\145\x5f\143\141\163\x68")->where("\151\x64", $id)->update(["\x69\x73\x5f\144\x65\154" => 2]); goto zX5qu; G0Q2r: $rs = Db::name("\171\142\163\143\137\165\x73\x65\x72")->where("\165\151\x64", $u["\x75\x73\145\x72\137\151\x64"])->setInc("\160\162\151\x63\145", $u["\x70\162\151\143\145"]); goto JBd7L; zX5qu: goto eMGUs; goto EgD4r; rJMzs: throw new Exception("\x30"); goto q9OSM; x7mVT: if (!($status == 3)) { goto i0QHV; } goto wYbXR; JBd7L: if (!empty($rs)) { goto Id0Ye; } goto rJMzs; DAjGy: $info = Db::name("\x79\142\x73\143\x5f\x75\x73\x65\x72\x5f\x73\x68\141\x72\145\137\143\x61\x73\x68")->where("\x69\144", $id)->update(["\163\164\x61\x74\165\x73" => $status]); goto x7mVT; QpMtO: eMGUs: goto n0MTi; n0MTi: Db::commit(); goto T6kfd; wYbXR: $u = Db::name("\171\x62\x73\143\137\165\x73\x65\x72\137\x73\150\141\162\145\137\143\141\x73\150")->where("\151\x64", $id)->find(); goto G0Q2r; E9bt_: if ($status == 0 || $status == 1 || $status == 2 || $status == 3) { goto huJ48; } goto my7p9; EgD4r: huJ48: goto DAjGy; QMc_z: i0QHV: goto QpMtO; q9OSM: Id0Ye: goto QMc_z; T6kfd: } catch (\Exception $e) { Db::rollback(); return 0; } goto V6FRj; MWAXH: Db::startTrans(); goto ZYNYi; V6FRj: return $info; goto sFKYy; CDutO: $id = request()->post("\151\x64"); goto qwz_p; qwz_p: $status = request()->post("\x73\x74\141\x74\x75\163"); goto zmJ7B; sFKYy: } public function share_order() { goto DBgqs; DBgqs: $order = new BusActivity(); goto NlxTW; CyGLR: $page = $list->render(); goto AuHZP; iQcU_: $list = $order->get_order_list($condition, $order_no); goto CyGLR; k1p43: HGCoS: goto iQcU_; TGOwp: x48s3: goto Y7c2z; LXt4O: $this->assign("\x6f\162\144\145\162\137\156\x6f", $order_no); goto rXo7Q; d7hg8: $condition["\x73\56\155\143\x68\137\x69\144"] = $mch_id; goto utAa7; SxkNH: $condition = array(); goto d7hg8; H_Utx: $mch_id = $this->bus_id; goto SxkNH; tqbOO: $condition["\157\56\x6f\162\144\x65\162\x5f\156\157"] = ["\154\151\x6b\145", "\45" . $order_no . "\x25"]; goto Q_mR2; MpBUy: $condition["\163\x2e\x63\162\x65\141\x74\145\137\164\x69\155\x65"] = ["\x62\145\164\167\145\145\x6e", [$eetime - 86400, $eetime]]; goto TGOwp; Zf8c1: $condition["\x73\x2e\143\162\x65\x61\164\x65\137\164\151\x6d\x65"] = ["\142\x65\x74\167\145\x65\x6e", [$sstime, $sstime + 86400]]; goto ve0fI; s3gQ5: $stime = strtotime($stime); goto g2vEY; oRSO8: $order_no = input("\160\x61\162\141\x6d\x2e\x6f\162\144\145\x72\x5f\156\157", ''); goto H_Utx; Q86Dg: $this->assign("\163\164\151\x6d\x65", $stime); goto FBhQZ; ve0fI: E3Nua: goto Zxr2Z; kQMKn: $stime = date("\x59\x2d\x6d\x2d\144", $stime); goto pnOjd; AuHZP: $this->assign("\160\141\147\145", $page); goto Z1e34; Z1e34: $this->assign("\x6c\x69\163\164", $list); goto Q86Dg; WyTyj: $eetime = strtotime($etime); goto MpBUy; Y7c2z: if (!(!empty($stime) && !empty($etime))) { goto HGCoS; } goto s3gQ5; NlxTW: $stime = input("\160\x61\162\141\x6d\x2e\163\x74\x69\155\x65", ''); goto BYc3T; rXo7Q: return view(); goto va7IV; FBhQZ: $this->assign("\x65\x74\x69\x6d\145", $etime); goto LXt4O; Q_mR2: Kfmk7: goto RN87v; pnOjd: $etime = date("\131\55\x6d\55\144", $etime); goto k1p43; cuLph: $condition["\x73\56\143\x72\x65\141\164\145\137\x74\x69\155\145"] = ["\142\x65\164\167\145\145\156", [$stime, $etime]]; goto kQMKn; Zxr2Z: if (empty($etime)) { goto x48s3; } goto WyTyj; utAa7: if (empty($order_no)) { goto Kfmk7; } goto tqbOO; L1UeK: $sstime = strtotime($stime); goto Zf8c1; g2vEY: $etime = strtotime($etime); goto cuLph; BYc3T: $etime = input("\x70\141\162\x61\x6d\56\x65\164\151\x6d\x65", ''); goto oRSO8; RN87v: if (empty($stime)) { goto E3Nua; } goto L1UeK; va7IV: } function recancel() { goto Nsgec; Nsgec: $pid = request()->post("\151\144"); goto DADlM; tjdYy: return AjaxReturn($res); goto nvQ08; DADlM: $res = db::name("\171\x62\163\x63\137\x75\163\145\162")->where("\165\x69\x64", $pid)->update(["\160\x69\x64" => 0]); goto tjdYy; nvQ08: } public function order_send() { goto X0iXl; gLLIS: $res = Db::name("\x79\x62\x73\x63\137\x61\143\x74\x69\166\151\164\x79\x5f\157\x72\x64\145\x72")->where("\157\162\144\x65\x72\x5f\x69\x64", $id)->update(["\x6f\x72\x64\145\162\137\x73\164\141\x74\165\163" => 2]); goto XPMf4; XPMf4: return AjaxReturn($res); goto Fu_hC; X0iXl: $id = input("\x70\x61\162\x61\155\x2e\151\144"); goto gLLIS; Fu_hC: } public function order_send_two() { goto rORJY; BYehG: $res = Db::name("\x79\x62\x73\x63\137\141\143\164\x69\x76\x69\164\171\x5f\x6f\162\x64\x65\x72")->where("\157\x72\144\x65\x72\x5f\x69\x64", $id)->update(["\x6f\162\144\145\162\x5f\x73\164\141\164\x75\163" => 3]); goto wMmZd; wMmZd: return AjaxReturn($res); goto rj14e; rORJY: $id = input("\x70\x61\x72\141\155\x2e\x69\x64"); goto BYehG; rj14e: } public function miaosha() { goto x6Eh1; Xd83p: $list[$i]["\x73\150\157\x77\137\x6f\x72\x64\145\162"] = 1; goto sLyVG; UCLVA: oPt9k: goto lrunK; cN8QU: $list[$i]["\156\157\167"] = "\345\267\262\xe6\x88\xaa\346\255\xa2"; goto LhO0X; hqn1W: $res = Db::name("\x79\x62\x73\143\137\x61\143\x74\151\166\151\x74\x79")->where($where)->paginate(15, false, $config = ["\161\x75\x65\162\x79" => ["\163" => $url, "\x6e\141\155\x65" => $name]]); goto WxWgF; GaAr0: $list[$i]["\x6e\x6f\167"] = "\346\x9c\xaa\345\xbc\200\xe5\247\213"; goto V4jn1; Qwbhf: if (!($res[$i]["\x73\x74\151\x6d\x65"] < time() && $res[$i]["\145\x74\151\155\145"] > time())) { goto GjACx; } goto fKbeK; ZdQLN: $url = explode("\75\x2f", $url); goto aFsAJ; CLkZ6: if (!($res[$i]["\x65\164\151\155\145"] < time())) { goto oPt9k; } goto cN8QU; oVjI3: $list[$i]["\x6d\141\x78\137\x70\162\145"] = $res[$i]["\155\141\x78\x5f\x70\x72\x65"] == 0 ? "\346\x97\240\351\231\220" : $res[$i]["\x6d\141\170\x5f\160\x72\x65"]; goto N1a0v; vWQ4d: m8fvk: goto qJS35; eFoBE: $list[$i]["\163\x65\154\154"] = Db::name("\171\x62\x73\143\137\x61\143\164\151\x76\x69\x74\x79\137\x6f\x72\144\145\x72")->where("\157\x72\x64\x65\162\x5f\163\164\141\164\165\x73", "\151\156", [1, 2, 3, 4, 5])->where("\142\141\x72\x67\x61\151\156\x5f\151\x64", $list[$i]["\151\144"])->count(); goto KM0Qx; dmkfq: $where["\x69\x73\137\144\x65\x6c"] = 2; goto Py2_3; M3uuS: fF2EZ: goto Mc_oy; qN1kn: $url = "\57" . $url[0]; goto zXLHc; U_UbI: $list[$i]["\145\164\151\x6d\x65"] = date("\x59\55\x6d\55\x64\40\110\72\151\72\163", $res[$i]["\145\x74\151\x6d\145"]); goto oVjI3; aFsAJ: $url = explode("\x26", $url[1]); goto qN1kn; zXLHc: $where["\x6d\143\150\x5f\151\x64"] = $this->bus_id; goto QWnI0; hCAxm: if (!($i < count($res))) { goto m8fvk; } goto CWmmX; pBOVW: if (empty($name)) { goto KHCq7; } goto m7vDY; x6Eh1: $url = request()->query(); goto ZdQLN; WxWgF: $list = array(); goto yyoWk; KM0Qx: $list[$i]["\x73\164\x69\155\x65"] = date("\x59\55\x6d\x2d\144\40\x48\x3a\151\72\163", $res[$i]["\163\164\151\155\145"]); goto U_UbI; lrunK: if (!($res[$i]["\x73\x74\141\164\165\163"] == 2)) { goto r3Ekk; } goto ELxwv; ELxwv: $list[$i]["\x6e\157\167"] = "\xe5\xb7\xb2\345\x81\x9c\347\224\250"; goto OnLoL; SX9eC: KHCq7: goto hqn1W; N1a0v: $list[$i]["\x69\x6d\147"] = json_decode($res[$i]["\x69\x6d\x67"], true); goto I1hAA; qJS35: $this->assign("\x6c\x69\x73\164", $list); goto Kc9KW; fKbeK: $list[$i]["\x6e\x6f\x77"] = "\xe8\277\233\350\241\x8c\344\270\xad"; goto Xd83p; QWnI0: $where["\x74\171\x70\x65"] = 1; goto dmkfq; sLyVG: GjACx: goto CLkZ6; V4jn1: r3Zu2: goto Qwbhf; Z6Z5x: Zwc2F: goto hCAxm; lFVuc: $list[$i]["\153\x75\143\x75\156"] = intval($res[$i]["\x61\154\x6c\137\x73\145\x6c\154"] - $list[$i]["\x73\145\x6c\154"]); goto M3uuS; xFPbb: return view(); goto f8xYs; yyoWk: $i = 0; goto Z6Z5x; CWmmX: $list[$i] = $res[$i]; goto eFoBE; Mc_oy: $i++; goto BGJot; Py2_3: $name = str_replace("\40", '', request()->param("\x73\x65\141\162\143\x68\x5f\x74\x65\x78\x74")); goto pBOVW; Kc9KW: $this->assign("\160\x61\147\145", $res->render()); goto xFPbb; OnLoL: r3Ekk: goto lFVuc; LhO0X: $list[$i]["\x73\x68\157\167\137\157\x72\x64\x65\162"] = 1; goto UCLVA; I1hAA: if (!($res[$i]["\163\x74\151\x6d\x65"] > time())) { goto r3Zu2; } goto GaAr0; m7vDY: $where["\156\141\155\145"] = ["\x6c\x69\x6b\x65", "\45" . $name . "\x25"]; goto SX9eC; BGJot: goto Zwc2F; goto vWQ4d; f8xYs: } public function add_miaosha() { goto sNQNc; ggKDm: M_jUs: goto t21Ep; G0ZAO: FFp31: goto gIZ1E; nS0G8: $show = "\x61\x64\144\137\x6d\x69\x61\157\163\x68\141"; goto G0ZAO; gIZ1E: if (!(request()->isPost() && request()->isAjax())) { goto wzhmu; } goto oUiXG; ylHWV: $data = request()->post(); goto ukKkJ; BoL3v: wzhmu: goto E1E3Z; Qgzyu: if (!($type == 1)) { goto FFp31; } goto nS0G8; E1E3Z: return view($show); goto ZAbfJ; xWqGK: return AjaxReturn($res . json_decode($data)); goto BoL3v; qojfZ: $table = "\x79\x62\163\x63\x5f\141\143\164\151\166\151\164\171"; goto ggKDm; oUiXG: if (!($type == 1)) { goto M_jUs; } goto ylHWV; sGgps: $data["\145\x74\151\155\145"] = strtotime($data["\145\164\x69\x6d\x65"]); goto Q4AfL; sNQNc: $type = request()->param("\164\x79\x70\x65", 1); goto Qgzyu; Q4AfL: $data["\x6d\x63\x68\x5f\151\144"] = $this->bus_id; goto qojfZ; ukKkJ: $data["\x73\164\151\x6d\x65"] = strtotime($data["\163\164\151\x6d\x65"]); goto sGgps; t21Ep: $res = Db::name($table)->insert($data); goto xWqGK; ZAbfJ: } public function edit_miaosha() { goto Urkz1; V1o_l: if (!($type == 1)) { goto sFYOg; } goto Bd0g3; fWkSw: $id = request()->param("\x69\144"); goto JGrTc; OBkHY: return AjaxReturn($res . json_decode($data)); goto Y30LC; wa_VK: $res = Db::name($table)->where($where)->update($data); goto OBkHY; chK_z: $info = Db::name("\171\142\x73\x63\137\141\x63\x74\x69\x76\x69\x74\x79")->where("\x69\144", $id)->find(); goto EluAU; eSFud: $show = "\x65\144\151\x74\137\x6d\151\141\157\163\x68\141"; goto ShYVi; EluAU: $info["\163\164\x69\x6d\x65"] = date("\x59\x2d\155\x2d\x64\40\x48\x3a\151\x3a\163", $info["\163\x74\151\x6d\x65"]); goto Q360y; rw9Yb: return view($show); goto B3z5m; JGrTc: if (!(request()->isPost() && request()->isAjax())) { goto qPz2w; } goto V1o_l; Urkz1: $type = request()->param("\x74\171\160\145", 1); goto fWkSw; fkxE3: sFYOg: goto wa_VK; VTD2s: $data["\163\164\151\x6d\145"] = strtotime($data["\163\164\x69\x6d\145"]); goto sMK5a; ShYVi: OU1QI: goto rw9Yb; D8nKz: $where["\151\144"] = $id; goto fkxE3; f19mY: $this->assign("\x69\x6e\x66\157", $info); goto eSFud; Bd0g3: $data = request()->post(); goto mHbGy; mHbGy: unset($data["\x69\144"]); goto VTD2s; LEID_: $table = "\x79\142\163\x63\x5f\141\143\x74\x69\166\x69\164\171"; goto D8nKz; Y30LC: qPz2w: goto HHydc; HHydc: if (!($type == 1)) { goto OU1QI; } goto chK_z; sMK5a: $data["\145\164\151\155\x65"] = strtotime($data["\x65\x74\x69\155\145"]); goto LEID_; Q360y: $info["\x65\164\x69\155\145"] = date("\131\55\155\x2d\144\40\110\72\x69\x3a\x73", $info["\145\164\151\x6d\x65"]); goto f19mY; B3z5m: } public function ac_order() { goto Acr3w; KdZ91: tlKiE: goto OxoZf; M4yTm: if (!($status == -2)) { goto X9UGs; } goto TWh20; q6bDm: $ea[$i]["\162\x65\146\x75\x6e\x64\137\151\156\x66\x6f"] = $ser->get_refund_info($ea[$i]["\157\x72\144\x65\162\137\151\x64"], 4); goto vFSdG; XQbrw: $id = request()->param("\x61\x63\151\144", ''); goto paIy_; M5Jgr: X9UGs: goto H_FWX; FYtdD: dAPHW: goto jAiP7; Ck8Mb: $where["\x73\x2e\157\x72\144\145\x72\x5f\x73\x74\x61\x74\x75\x73"] = $status; goto eQVc3; xl_7n: global $_W; goto RqMUk; Acr3w: $url = request()->query(); goto dQWGt; CKeoc: $this->assign("\163\164\x61\164\165\x73", $status); goto Uj2XI; dQWGt: $url = explode("\75\57", $url); goto SHBz_; Xr0zQ: $search_text = request()->param("\163\145\x61\162\x63\150\x5f\x74\x65\170\x74", ''); goto wVEsR; OxoZf: $where["\x73\56\x61\143\164\x69\166\151\164\171\x5f\157\x72\144\x65\162\x5f\164\x79\160\145"] = 3; goto Ikyeq; yMdmi: YU8sq: goto e4BzQ; GKuny: $show = "\x6d\151\141\157\x73\150\141\x5f\x6f\162\144\x65\162"; goto XQbrw; vtrJg: $this->assign("\162\145\146\165\156\144\x5f\x74\171\160\145", 1); goto yUaas; SHuXl: $list = Db::name("\x79\142\x73\x63\x5f\x61\x63\164\x69\x76\151\x74\171\x5f\157\x72\144\145\162")->alias("\x73")->join("\171\142\x73\143\x5f\141\143\x74\x69\166\151\164\171\x20\141", "\163\x2e\155\143\150\x5f\x69\144\x3d\141\x2e\x6d\143\x68\137\x69\144\x20\101\x4e\x44\x20\x73\x2e\x62\141\162\147\x61\x69\156\137\x69\x64\x3d\x61\56\x69\144", "\x6c\x65\x66\164")->where($where)->field("\163\x2e\x6f\162\144\x65\162\137\x69\x64\54\163\x2e\157\x72\x64\x65\162\137\x6e\157\54\x61\x2e\x6e\x61\x6d\145\x2c\x61\x2e\160\151\143\54\x73\x2e\165\x73\145\162\137\156\x61\x6d\145\54\163\56\x72\145\143\145\x69\x76\x65\x72\x5f\x6d\x6f\142\x69\154\145\x2c\163\x2e\x72\x65\143\x65\x69\166\x65\162\137\x61\x72\145\141\54\x73\56\x72\x65\143\x65\151\x76\145\162\137\x61\144\144\x72\x65\x73\163\x2c\x73\x2e\x6f\x72\x64\145\162\137\155\157\x6e\x65\171\54\x73\56\157\162\144\x65\x72\137\x73\x74\141\x74\x75\163\x2c\x73\x2e\x6f\162\144\145\x72\137\151\144\54\163\56\x62\x75\171\145\162\137\151\x64\54\x73\x2e\x6d\x65\x6e\x74\151\157\x6e\x5f\164\x69\155\145\x2c\163\x2e\x62\165\x79\x65\162\137\x6d\x65\163\163\141\x67\x65")->order("\x73\x2e\x63\x72\x65\141\164\145\x5f\164\x69\x6d\x65\40\144\x65\x73\143")->paginate(15, false, $config = ["\x71\165\145\162\x79" => ["\163" => $url, "\x73\x74\141\164\165\x73" => $status, "\163\145\x61\162\143\x68\x5f\x74\145\x78\x74" => $search_text]]); goto hnRSH; TWh20: $where["\163\56\x6f\162\144\x65\x72\x5f\x73\x74\141\164\165\x73"] = array("\x69\x6e", "\60\x2c\61\x2c\62\x2c\x33\54\64\x2c\65\54\55\x31"); goto M5Jgr; UNNug: $ea[$i] = $list[$i]; goto q6bDm; paIy_: if (empty($id)) { goto tlKiE; } goto wNrt0; KQKm2: $refund_setting = $setting["\x70\141\171\155\x65\156\164"]["\x77\x65\x63\150\x61\x74\137\x72\145\x66\165\x6e\x64"]; goto KteIY; Ikyeq: $where["\x73\56\x69\x73\137\144\145\x6c\145\x74\145\144"] = 0; goto OnHUw; e4BzQ: $this->assign("\x6c\151\163\164", $ea); goto CKeoc; zOKjn: $url = "\x2f" . $url[0]; goto ukBHe; ukBHe: $type = request()->param("\164\x79\x70\145", 1); goto swiN3; hnRSH: $ea = array(); goto eWkR2; TOpD0: if (!($i < count($list))) { goto DTK1n; } goto UNNug; SHBz_: $url = explode("\x26", $url[1]); goto zOKjn; KteIY: if ($refund_setting["\x73\x77\151\164\143\x68"] != 1 || empty($refund_setting["\x6b\145\x79"]) || empty($refund_setting["\x63\145\162\x74"])) { goto dAPHW; } goto vtrJg; wVEsR: if (!($type == 1)) { goto wnz_n; } goto GKuny; z2ZHD: wnz_n: goto xl_7n; iSIdh: $this->assign("\160\141\147\145", $list->render()); goto zl747; H_FWX: if (empty($search_text)) { goto XcT_g; } goto dqSbH; eQVc3: $where["\x73\56\x6d\141\x69\154\151\x6e\x67\137\x74\171\x70\x65"] = 1; goto M4yTm; eWkR2: $ser = new Arliki(); goto TUfXz; Uj2XI: $this->assign("\163\145\x61\162\x63\150\x5f\x74\145\x78\164", $search_text); goto iSIdh; vmpv1: goto UI8u1; goto ut131; RqMUk: $setting = uni_setting_load("\x70\141\171\155\x65\x6e\x74", $_W["\x75\x6e\x69\141\x63\151\x64"]); goto KQKm2; wNrt0: $where["\x73\x2e\142\x61\x72\147\141\151\156\x5f\151\144"] = $id; goto KdZ91; WEEPI: $i++; goto vmpv1; JK_Jr: UI8u1: goto TOpD0; ut131: DTK1n: goto z2ZHD; dqSbH: $where["\x61\x2e\x6e\x61\155\145"] = array("\x6c\151\x6b\x65", "\45" . $search_text . "\45"); goto ZVWHq; vFSdG: HGYI7: goto WEEPI; yUaas: goto YU8sq; goto FYtdD; OnHUw: $where["\163\x2e\x6d\x63\150\137\x69\144"] = $this->bus_id; goto Ck8Mb; zl747: return view($show); goto dgPl4; swiN3: $status = request()->param("\163\164\141\x74\165\163", -2); goto Xr0zQ; TUfXz: $i = 0; goto JK_Jr; jAiP7: $this->assign("\162\x65\146\165\156\x64\x5f\164\171\160\145", 0); goto yMdmi; ZVWHq: XcT_g: goto SHuXl; dgPl4: } public function ac_order_two() { goto Vrrra; Tb2XT: $ser = new Arliki(); goto hcCJ4; WXzbw: $ea[$i]["\x72\x65\146\165\156\144\137\x69\x6e\146\157"] = $ser->get_refund_info($ea[$i]["\157\162\144\145\x72\137\x69\x64"], 4); goto Vsd2a; KGAh4: $where["\x73\x2e\x6d\x63\x68\137\x69\x64"] = $this->bus_id; goto uRG3l; Xt2oz: $this->assign("\x72\x65\146\165\x6e\x64\x5f\164\171\160\x65", 0); goto o4BYT; nxeuh: $ea = array(); goto Tb2XT; hcCJ4: $i = 0; goto zRjgs; fJj61: if (!($type == 1)) { goto vrZHM; } goto Jaz3X; i1MRt: if (!($status == -2)) { goto ippX5; } goto rYNTa; o4BYT: A2R12: goto D5_1P; J09NC: vaUMd: goto wJgOR; Z36N5: vNqi8: goto n6N9B; bmSiJ: $setting = uni_setting_load("\x70\x61\171\x6d\145\x6e\x74", $_W["\x75\x6e\151\141\x63\151\x64"]); goto Cd_oy; L1Lw0: $url = "\57" . $url[0]; goto ju1FZ; yAziR: $this->assign("\x73\145\x61\162\143\x68\137\x74\145\170\x74", $search_text); goto KEMBp; BgMhF: goto A2R12; goto AReLF; pnMqd: $this->assign("\163\164\x61\x74\165\163", $status); goto yAziR; Sz1u4: $i++; goto TA1Fo; Cd_oy: $refund_setting = $setting["\x70\x61\x79\x6d\x65\156\x74"]["\x77\145\x63\x68\x61\164\x5f\162\145\x66\165\x6e\144"]; goto zoe0Q; oJ_5e: if (empty($search_text)) { goto vaUMd; } goto UNS_H; w3mt_: global $_W; goto bmSiJ; xCUFf: $url = explode("\46", $url[1]); goto L1Lw0; TKsAo: return view($show); goto EcazD; x9YJM: $where["\x73\56\x6d\141\151\x6c\151\156\x67\137\164\171\x70\145"] = 2; goto i1MRt; k_ev7: $ea[$i] = $list[$i]; goto WXzbw; UNS_H: $where["\141\56\156\141\x6d\x65"] = array("\154\151\x6b\x65", "\45" . $search_text . "\45"); goto J09NC; rYNTa: $where["\163\56\x6f\x72\x64\145\162\x5f\x73\x74\x61\x74\x75\163"] = array("\151\x6e", "\60\54\x31\x2c\x32\54\x33\x2c\x34\x2c\65\54\x2d\61"); goto EY8PC; Vsd2a: gzsqN: goto Sz1u4; n6N9B: $where["\x73\56\x61\143\x74\x69\x76\x69\x74\x79\x5f\x6f\x72\x64\x65\162\x5f\x74\x79\x70\145"] = 3; goto Z0smq; P4SK6: $search_text = request()->param("\163\x65\141\162\x63\150\137\164\x65\170\x74", ''); goto fJj61; AAkTB: if (!($i < count($list))) { goto Fbiik; } goto k_ev7; TA1Fo: goto Sn40V; goto yEGT4; KEMBp: $this->assign("\160\141\x67\x65", $list->render()); goto TKsAo; zRjgs: Sn40V: goto AAkTB; zoe0Q: if ($refund_setting["\x73\167\151\164\x63\150"] != 1 || empty($refund_setting["\x6b\x65\171"]) || empty($refund_setting["\x63\145\x72\x74"])) { goto m3ZeO; } goto L5oiB; yEGT4: Fbiik: goto MEZtp; jbZMs: $url = explode("\x3d\x2f", $url); goto xCUFf; ju1FZ: $type = request()->param("\x74\171\160\x65", 1); goto Hqh3N; EY8PC: ippX5: goto oJ_5e; uRG3l: $where["\163\56\157\162\x64\145\162\137\163\x74\x61\164\x75\163"] = $status; goto x9YJM; MEZtp: vrZHM: goto w3mt_; L5oiB: $this->assign("\x72\x65\146\165\156\144\137\x74\171\160\145", 1); goto BgMhF; wJgOR: $list = Db::name("\171\x62\163\143\137\141\x63\164\x69\166\151\164\x79\137\x6f\x72\144\145\162")->alias("\163")->join("\171\x62\x73\143\x5f\x61\143\x74\151\x76\x69\164\171\x20\141", "\x73\x2e\x6d\x63\x68\x5f\151\x64\x3d\x61\56\x6d\143\150\137\151\144\x20\x41\x4e\x44\x20\x73\56\x62\141\x72\x67\141\x69\x6e\x5f\151\x64\75\141\x2e\151\144", "\154\145\146\164")->where($where)->field("\163\x2e\157\162\x64\x65\x72\137\151\144\x2c\x73\x2e\157\x72\144\145\x72\137\156\x6f\54\141\56\x6e\141\155\145\54\x61\x2e\x70\151\143\54\x73\56\x75\163\x65\162\x5f\x6e\x61\155\x65\54\163\x2e\x72\145\143\x65\151\166\x65\x72\x5f\155\x6f\x62\x69\154\145\x2c\163\x2e\x72\x65\143\x65\151\x76\145\x72\137\x61\162\145\141\x2c\x73\x2e\162\x65\x63\145\151\166\145\x72\x5f\141\x64\x64\x72\x65\x73\x73\54\163\56\157\162\144\x65\162\x5f\x6d\157\x6e\x65\x79\x2c\x73\x2e\x6f\162\x64\145\162\137\x73\x74\141\164\165\163\54\163\56\x6f\162\x64\145\162\x5f\x69\144\54\x73\56\142\165\x79\145\162\137\151\x64\54\x73\56\x6d\145\156\x74\x69\157\156\137\164\x69\155\145")->order("\163\56\143\162\145\141\x74\145\137\x74\151\155\x65\x20\144\145\x73\143")->paginate(15, false, $config = ["\161\x75\145\162\171" => ["\163" => $url, "\x73\x74\141\164\x75\163" => $status, "\163\x65\141\x72\143\150\x5f\x74\x65\x78\x74" => $search_text]]); goto nxeuh; eymu3: $where["\x73\56\x62\141\x72\x67\x61\151\156\137\x69\144"] = $id; goto Z36N5; pqxZx: $id = request()->param("\x61\x63\151\x64", ''); goto QjrBD; Z0smq: $where["\163\x2e\x69\163\137\144\x65\x6c\145\x74\145\x64"] = 0; goto KGAh4; QjrBD: if (empty($id)) { goto vNqi8; } goto eymu3; AReLF: m3ZeO: goto Xt2oz; Jaz3X: $show = "\155\x69\141\x6f\x73\150\x61\137\x6f\x72\x64\145\162\x5f\164\167\x6f"; goto pqxZx; D5_1P: $this->assign("\x6c\x69\163\x74", $ea); goto pnMqd; Hqh3N: $status = request()->param("\x73\164\141\164\165\163", -2); goto P4SK6; Vrrra: $url = request()->query(); goto jbZMs; EcazD: } public function change() { goto cNxH0; GzRlh: OYWKU: goto ehmLv; Z9W93: $id = request()->param("\151\144"); goto wUR6V; ehmLv: return AjaxReturn($res); goto nT730; cenHz: $where["\155\143\x68\137\x69\x64"] = $this->bus_id; goto VtXT7; axX6R: fM0dk: goto UBiUJ; xECmE: $table = "\171\x62\163\x63\137\x61\x63\164\151\166\x69\164\171"; goto axX6R; UBiUJ: $res = 0; goto I2tDe; wUR6V: if (!($type == 1)) { goto fM0dk; } goto bZjcw; I2tDe: if (!(!empty($where) && !empty($table))) { goto OYWKU; } goto NkUb_; NkUb_: $res = Db::name($table)->where($where)->update($update); goto GzRlh; VtXT7: $update["\163\164\x61\164\165\163"] = request()->param("\163\x74\x61\164\165\163", 1); goto xECmE; cNxH0: $type = request()->param("\164\x79\x70\145", 1); goto Z9W93; bZjcw: $where["\x69\144"] = $id; goto cenHz; nT730: } public function del() { goto e2zIa; PEiOX: BaKtS: goto dz65N; riksz: if (!empty($update)) { goto k2tXy; } goto unoyl; kYQNT: if (!(!empty($where) && !empty($table))) { goto tm9be; } goto riksz; PqtcV: $update["\x69\x73\x5f\144\145\x6c"] = 1; goto PEiOX; GCvzd: $id = request()->param("\151\144"); goto ATEjD; wW8Yy: goto bod2B; goto BG6Qj; YNmjc: $where["\155\x63\x68\137\151\144"] = $this->bus_id; goto tNSBu; vRnaH: $res = Db::name($table)->where($where)->update($update); goto Gp5Yy; BG6Qj: k2tXy: goto vRnaH; IL9Nr: $where["\x69\144"] = $id; goto YNmjc; tNSBu: $table = "\171\142\x73\x63\137\141\143\164\x69\166\x69\x74\171"; goto PqtcV; unoyl: $res = Db::name($table)->where($where)->delete(); goto wW8Yy; J55iv: tm9be: goto f6bGU; e2zIa: $type = request()->param("\x74\x79\160\145", 1); goto GCvzd; Gp5Yy: bod2B: goto J55iv; dz65N: $res = 0; goto kYQNT; f6bGU: return AjaxReturn($res); goto Hmy6x; ATEjD: if (!($type == 1)) { goto BaKtS; } goto IL9Nr; Hmy6x: } public function printer3() { goto ftbrX; tmNAf: $type = no_space("\164\171\x70\x65", "\x6b\141\156"); goto czi6K; LeCHn: $type = "\137\62"; goto PvPD9; y56KD: $this->assign("\x69\156\x66\x6f", $list); goto ei83G; ei83G: return view("\x61\162\x6c\151\x6b\151\57\x70\x72\x69\156\x74\145\162\63"); goto quR_s; E4Qt5: $this->assign("\161\162\x63\x6f\x64\145", $this->get_barcode($list["\x6f\x72\x64\145\162\x5f\x6e\x6f"] . $type)); goto y56KD; PvPD9: $list = Db::name("\x79\x62\163\143\x5f\142\141\x72\x67\x61\151\x6e\137\x6f\x72\144\145\x72")->alias("\141")->join("\x79\x62\x73\x63\x5f\x61\162\x65\x61\40\163", "\141\56\162\145\143\145\151\x76\x65\162\x5f\141\x72\x65\x61\x3d\163\x2e\x69\144", "\154\145\146\x74")->field("\x61\56\x2a\54\163\x2e\156\x61\x6d\145\x20\163\x68\151\x6e\141\x6d\x65")->where("\141\x2e\x6f\x72\x64\145\162\137\151\x64", $order_id)->find(); goto DZOvK; V0b0i: ANoZA: goto E4Qt5; czi6K: if (!($type == "\x6b\141\156")) { goto XtVrZ; } goto LeCHn; MB1AN: $type = "\x5f\64"; goto E1ix0; DZOvK: XtVrZ: goto zab1e; zab1e: if (!($type == "\x6d\151\x61\157")) { goto ANoZA; } goto MB1AN; E1ix0: $list = Db::name("\x79\142\163\143\x5f\141\x63\x74\151\166\151\x74\x79\137\x6f\x72\x64\x65\x72")->alias("\141")->join("\171\x62\163\x63\137\141\162\145\x61\40\163", "\141\56\x72\145\143\x65\x69\166\145\x72\x5f\141\x72\x65\141\x3d\x73\x2e\151\144", "\154\x65\146\x74")->field("\x61\x2e\52\x2c\x73\56\156\141\x6d\x65\40\x73\150\151\x6e\x61\155\x65")->where("\x61\56\x6f\162\144\145\x72\x5f\x69\x64", $order_id)->find(); goto V0b0i; ftbrX: $order_id = no_space("\x69\144"); goto tmNAf; quR_s: } public function get_barcode($data, $width = 200, $height = 200) { $str = "\x3c\144\x69\x76\x20\151\144\75\42\x62\x61\162\x5f\x63\157\x64\x65\42\76\74\x2f\x64\x69\x76\76\x3c\x73\x63\x72\x69\160\x74\x3e\x24\x28\x66\165\156\143\164\x69\x6f\x6e\50\x29\173\44\50\42\x23\x62\141\x72\137\x63\157\x64\x65\x22\x29\x2e\x71\162\x63\x6f\x64\x65\50\173\x77\x69\x64\164\150\x3a" . $width . "\x2c\150\145\x69\147\150\x74\x3a" . $height . "\x2c\164\x65\x78\x74\x3a\x22" . $data . "\x22\175\51\x3b\x7d\x29\73\74\57\163\143\162\151\x70\x74\76"; return $str; } }
