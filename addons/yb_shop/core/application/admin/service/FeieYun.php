<?php
 namespace app\admin\service; class FeieYun { var $host; var $port; var $path; var $method; var $postdata = ''; var $cookies = array(); var $referer; var $accept = "\x74\x65\x78\x74\57\x78\x6d\x6c\x2c\141\160\160\x6c\x69\x63\x61\164\x69\157\156\57\170\155\154\x2c\141\160\x70\154\x69\x63\x61\164\x69\157\156\57\x78\150\x74\155\154\x2b\170\x6d\x6c\x2c\164\x65\170\x74\57\150\x74\155\x6c\54\164\x65\170\x74\57\160\x6c\x61\151\x6e\54\151\x6d\x61\x67\x65\57\160\x6e\x67\54\x69\155\141\x67\145\x2f\152\160\145\147\x2c\x69\155\x61\x67\145\57\147\x69\x66\x2c\52\57\52"; var $accept_encoding = "\x67\x7a\x69\x70"; var $accept_language = "\145\156\x2d\165\163"; var $user_agent = "\111\x6e\x63\x75\x74\x69\157\x20\110\164\x74\x70\103\x6c\x69\145\x6e\164\x20\x76\x30\56\x39"; var $timeout = 20; var $use_gzip = true; var $persist_cookies = true; var $persist_referers = true; var $debug = false; var $handle_redirects = true; var $max_redirects = 5; var $headers_only = false; var $username; var $password; var $status; var $headers = array(); var $content = ''; var $errormsg; var $redirect_count = 0; var $cookie_host = ''; function __construct($host, $port = 80) { $this->host = $host; $this->port = $port; } function get($path, $data = false) { goto OQwao; zJ0vX: $this->method = "\107\x45\124"; goto mkEQT; xsML7: $this->path .= "\77" . $this->buildQueryString($data); goto P0V_d; h2iUs: return $this->doRequest(); goto Zl2b7; mkEQT: if (!$data) { goto p4gyu; } goto xsML7; P0V_d: p4gyu: goto h2iUs; OQwao: $this->path = $path; goto zJ0vX; Zl2b7: } function post($path, $data) { goto kAa3v; kAa3v: $this->path = $path; goto mcvHh; mcvHh: $this->method = "\120\x4f\123\124"; goto Bwako; X56ek: return $this->doRequest(); goto BFz55; Bwako: $this->postdata = $this->buildQueryString($data); goto X56ek; BFz55: } function buildQueryString($data) { goto s2XL9; s2XL9: $querystring = ''; goto xrizm; xrizm: if (is_array($data)) { goto HqwnT; } goto G029n; J94iV: HqwnT: goto EkQDm; HFhUE: goto I5Vgh; goto J94iV; EkQDm: foreach ($data as $key => $val) { goto rAjwD; BXa6u: goto WGhgL; goto hpbR6; cotT8: $querystring .= urlencode($key) . "\75" . urlencode($val) . "\x26"; goto BXa6u; SHOC8: WGhgL: goto ngn1b; rAjwD: if (is_array($val)) { goto l3ck3; } goto cotT8; hpbR6: l3ck3: goto TYO8I; A3OL5: QH6sd: goto SHOC8; ngn1b: b5W6O: goto c5WN2; TYO8I: foreach ($val as $val2) { $querystring .= urlencode($key) . "\x3d" . urlencode($val2) . "\x26"; X0qrn: } goto A3OL5; c5WN2: } goto fhJB2; dAQvi: return $querystring; goto tdkfj; fhJB2: HLY__: goto SQZ_P; SQZ_P: $querystring = substr($querystring, 0, -1); goto daUum; G029n: $querystring = $data; goto HFhUE; daUum: I5Vgh: goto dAQvi; tdkfj: } function doRequest() { goto d2pk4; wCjjJ: e2WWs: goto QV_FL; WACkO: $this->content = ''; goto orNnv; lVM20: $this->headers[$key] = array($this->headers[$key], $val); goto Qm85M; p17Aa: $this->redirect_count = 0; goto I0Pic; FZ0U8: $inHeaders = false; goto jmXnz; l53Pc: $this->headers[$key] = $val; goto XpPE8; SWj8V: $inHeaders = true; goto diu7V; TiDG_: return true; goto gUaOA; jmXnz: $this->debug("\x52\x65\x63\x65\151\166\x65\144\40\110\x65\x61\144\145\x72\x73", $this->headers); goto Hfpiv; vPVQa: if (!(++$this->redirect_count >= $this->max_redirects)) { goto sC9_T; } goto oxxqp; d48u5: goto PkcAy; goto QUFn5; QUFn5: oZhQN: goto aSFKE; FW3kA: if (!$this->handle_redirects) { goto lBhRS; } goto vPVQa; NbzHa: $status_string = $m[3]; goto Dpwfx; XpPE8: goto hAIXL; goto KdhdG; uavUH: goto PkcAy; goto lJExr; zVBap: if (is_array($cookies)) { goto sSYX7; } goto M2LY4; pbbhm: $this->cookie_host = $this->host; goto Rrov9; MWAMU: sC9_T: goto qtSRo; ECXSm: $uri = isset($this->headers["\x75\x72\x69"]) ? $this->headers["\x75\x72\x69"] : ''; goto B7mru; orNnv: $this->errormsg = ''; goto SWj8V; DynsC: $atStart = false; goto d9Vqc; siQRB: YSm4q: goto HyZVS; M2LY4: $cookies = array($cookies); goto dmqYC; NqEP6: $this->headers[$key][] = $val; goto siQRB; e8xAX: if (!$atStart) { goto e2WWs; } goto DynsC; v6Zk0: goto PkcAy; goto wCjjJ; w79xK: $this->headers = array(); goto WACkO; x6T6L: Ejilz: goto d48u5; CBKri: $http_version = $m[1]; goto mVAVP; Cfa1O: PkcAy: goto HC7d1; mVAVP: $this->status = $m[2]; goto NbzHa; uqtpU: fwrite($fp, $request); goto w79xK; Hfpiv: if (!$this->headers_only) { goto Ejilz; } goto FqR0Y; npxEU: bqbGx: goto CBKri; R_KOQ: goto PkcAy; goto Pnu5C; t6e55: UO3SK: goto G0zbd; xzv2y: $this->debug("\x52\x65\x71\x75\145\x73\164", $request); goto uqtpU; SFs0m: lBhRS: goto TiDG_; UGfyU: tcVEK: goto muCM3; xbTOP: if (is_array($this->headers[$key])) { goto ovFFw; } goto lVM20; qtSRo: $location = isset($this->headers["\154\x6f\x63\141\164\151\x6f\156"]) ? $this->headers["\154\x6f\143\141\x74\151\157\x6e"] : ''; goto ECXSm; lqUpt: goto PkcAy; goto yEIyR; I_HNs: $this->errormsg = "\123\164\141\x74\165\163\x20\x63\157\144\x65\x20\x6c\x69\x6e\x65\40\x69\156\166\x61\154\x69\x64\72\x20" . htmlentities($line); goto hnVfS; Dpwfx: $this->debug(trim($line)); goto v6Zk0; si_md: fclose($fp); goto FkOCl; S3lmD: $this->referer = $this->getRequestURL(); goto IIEJq; muCM3: wxIcm: goto hscTK; dp6CY: return false; goto npxEU; z568u: $this->debug($this->errormsg); goto p17Aa; IHZLD: ovFFw: goto NqEP6; qpoEE: $this->debug("\120\x65\162\163\x69\x73\164\x69\x6e\147\40\x72\145\146\145\162\x65\162\x3a\x20" . $this->getRequestURL()); goto S3lmD; W00uK: $cookies = $this->headers["\x73\x65\164\x2d\143\x6f\x6f\153\151\145"]; goto zVBap; FqR0Y: goto UnqiD; goto x6T6L; IIEJq: nzYFk: goto FW3kA; XA5sL: $url = parse_url($location . $uri); goto BIocK; ZcpDg: foreach ($cookies as $cookie) { goto qTXEs; DUANt: fpdwl: goto YkApj; UUkQu: Y4lHw: goto DUANt; zzDdf: $this->cookies[$m[1]] = $m[2]; goto UUkQu; qTXEs: if (!preg_match("\x2f\x28\x5b\136\x3d\x5d\x2b\x29\x3d\x28\133\x5e\73\x5d\53\x29\x3b\57", $cookie, $m)) { goto Y4lHw; } goto zzDdf; YkApj: } goto Sbs93; Rrov9: sBMT1: goto aKhtC; dmqYC: sSYX7: goto ZcpDg; xIZS2: $this->content = substr($this->content, 10); goto Y5jGT; FkOCl: if (!(isset($this->headers["\143\x6f\156\x74\x65\156\x74\55\145\x6e\143\157\x64\151\x6e\x67"]) && $this->headers["\x63\157\156\x74\x65\x6e\x74\55\x65\156\143\x6f\x64\151\156\x67"] == "\x67\x7a\151\x70")) { goto UO3SK; } goto DmwxF; qTPYd: ZrUPg: goto SFs0m; UkyPq: switch ($errno) { case -3: $this->errormsg = "\123\x6f\143\x6b\x65\164\x20\x63\162\x65\141\x74\151\157\156\x20\x66\x61\x69\x6c\145\144\x20\50\x2d\x33\51"; case -4: $this->errormsg = "\x44\116\123\40\x6c\x6f\157\153\165\x70\x20\146\141\x69\x6c\x75\162\x65\40\x28\x2d\x34\x29"; case -5: $this->errormsg = "\103\x6f\156\x6e\x65\x63\x74\151\x6f\x6e\x20\162\145\146\165\x73\145\x64\40\157\162\40\164\151\x6d\145\x64\40\x6f\165\x74\x20\50\x2d\65\51"; default: goto cez5B; qViQf: $this->debug($this->errormsg); goto aOyPt; E7S5C: $this->errormsg .= "\40" . $errstr; goto qViQf; cez5B: $this->errormsg = "\x43\157\156\x6e\x65\x63\164\x69\157\x6e\x20\x66\x61\x69\154\x65\x64\x20\x28" . $errno . "\51"; goto E7S5C; aOyPt: } goto UGfyU; yEIyR: SHKnl: goto MX0Ij; MX0Ij: $key = strtolower(trim($m[1])); goto dJomD; HyZVS: hAIXL: goto R_KOQ; B_muL: $this->content .= $line; goto uavUH; d9Vqc: if (preg_match("\57\x48\x54\124\x50\134\57\50\134\144\134\56\x5c\x64\x29\134\x73\x2a\x28\134\144\53\51\134\x73\x2a\50\56\52\x29\x2f", $line, $m)) { goto bqbGx; } goto I_HNs; Sbs93: c0znM: goto pbbhm; G0zbd: if (!($this->persist_cookies && isset($this->headers["\x73\x65\x74\55\x63\157\157\153\x69\145"]) && $this->host == $this->cookie_host)) { goto sBMT1; } goto W00uK; oxxqp: $this->errormsg = "\116\165\155\142\x65\162\40\x6f\146\40\162\145\x64\x69\x72\x65\143\164\163\x20\x65\170\143\x65\x65\x64\145\x64\x20\x6d\x61\x78\151\155\165\155\40\50" . $this->max_redirects . "\x29"; goto z568u; AImGP: if (!(trim($line) == '')) { goto oZhQN; } goto FZ0U8; lJExr: UnqiD: goto si_md; KdhdG: Y88MC: goto xbTOP; mtOCt: if (isset($this->headers[$key])) { goto Y88MC; } goto l53Pc; diu7V: $atStart = true; goto Cfa1O; I0Pic: return false; goto MWAMU; hnVfS: $this->debug($this->errormsg); goto dp6CY; hscTK: return false; goto aIbgA; QV_FL: if (!$inHeaders) { goto d0xjh; } goto AImGP; B7mru: if (!($location || $uri)) { goto ZrUPg; } goto XA5sL; HC7d1: if (feof($fp)) { goto UnqiD; } goto oy6OH; aIbgA: ZtUg9: goto Y67Vp; d2pk4: if ($fp = @fsockopen($this->host, $this->port, $errno, $errstr, $this->timeout)) { goto ZtUg9; } goto UkyPq; dJomD: $val = trim($m[2]); goto mtOCt; rr9kF: $request = $this->buildRequest(); goto xzv2y; Pnu5C: d0xjh: goto B_muL; Y5jGT: $this->content = gzinflate($this->content); goto t6e55; aSFKE: if (preg_match("\57\x28\133\x5e\72\135\x2b\51\72\x5c\163\52\50\x2e\x2a\x29\x2f", $line, $m)) { goto SHKnl; } goto lqUpt; Y67Vp: socket_set_timeout($fp, $this->timeout); goto rr9kF; oy6OH: $line = fgets($fp, 4096); goto e8xAX; DmwxF: $this->debug("\103\x6f\x6e\x74\145\156\x74\40\151\163\40\147\172\151\160\x20\145\x6e\143\x6f\x64\x65\144\x2c\40\165\x6e\x7a\x69\160\x70\151\156\147\x20\151\x74"); goto xIZS2; BIocK: return $this->get($url["\160\x61\x74\150"]); goto qTPYd; aKhtC: if (!$this->persist_referers) { goto nzYFk; } goto qpoEE; Qm85M: goto YSm4q; goto IHZLD; gUaOA: } function buildRequest() { goto sh0Pt; waw6N: $headers[] = "\x52\x65\146\x65\162\x65\x72\72\x20{$this->referer}"; goto hk1bp; yEO1w: if (!$this->postdata) { goto iLlSZ; } goto JB_ta; hk1bp: bpPW1: goto wKUxZ; LU8w3: foreach ($this->cookies as $key => $value) { $cookie .= "{$key}\x3d{$value}\x3b\x20"; o9gsm: } goto gE1RL; gE1RL: TcFrX: goto hptyT; RNs0I: $request = implode("\xd\xa", $headers) . "\xd\12\15\12" . $this->postdata; goto Hll1C; kJzp_: $headers[] = "\125\163\145\x72\55\101\x67\x65\156\x74\x3a\x20{$this->user_agent}"; goto q9e8C; sh0Pt: $headers = array(); goto K3YJ1; j4rVV: $headers[] = "\103\157\x6e\164\x65\x6e\164\55\x4c\145\x6e\147\164\150\x3a\x20" . strlen($this->postdata); goto gn222; ze52k: $headers[] = "\x41\143\143\145\160\x74\x2d\x65\x6e\143\157\144\151\156\x67\x3a\x20{$this->accept_encoding}"; goto jX1Fy; Hll1C: return $request; goto aBzpv; aFay1: vWmDk: goto NUjFR; T9_1d: GuPag: goto yEO1w; K3YJ1: $headers[] = "{$this->method}\x20{$this->path}\40\x48\124\124\120\x2f\61\56\x30"; goto FiHEl; gn222: iLlSZ: goto RNs0I; q9e8C: $headers[] = "\101\x63\143\x65\160\164\72\40{$this->accept}"; goto bZvAc; lcXRU: $headers[] = "\x41\143\x63\145\160\x74\55\154\141\x6e\147\165\x61\147\x65\x3a\40{$this->accept_language}"; goto N9UfB; NUjFR: if (!($this->username && $this->password)) { goto GuPag; } goto PV7F3; FiHEl: $headers[] = "\110\x6f\x73\x74\x3a\40{$this->host}"; goto kJzp_; b533_: $cookie = "\103\157\x6f\x6b\151\145\x3a\40"; goto LU8w3; hptyT: $headers[] = $cookie; goto aFay1; bZvAc: if (!$this->use_gzip) { goto ELWme; } goto ze52k; N9UfB: if (!$this->referer) { goto bpPW1; } goto waw6N; PV7F3: $headers[] = "\101\165\164\x68\x6f\x72\x69\172\141\164\x69\x6f\156\72\40\102\x41\x53\111\103\40" . base64_encode($this->username . "\72" . $this->password); goto T9_1d; JB_ta: $headers[] = "\103\157\156\164\145\156\x74\x2d\x54\171\160\x65\72\x20\x61\160\160\154\151\143\x61\164\151\157\x6e\57\170\55\x77\x77\x77\55\x66\157\x72\x6d\x2d\x75\162\x6c\x65\x6e\143\157\144\x65\x64"; goto j4rVV; wKUxZ: if (!$this->cookies) { goto vWmDk; } goto b533_; jX1Fy: ELWme: goto lcXRU; aBzpv: } function getStatus() { return $this->status; } function getContent() { return $this->content; } function getHeaders() { return $this->headers; } function getHeader($header) { goto FLv1T; NEPdi: Z45P1: goto pb2Ln; G9ipW: kAD8r: goto pLOOt; pb2Ln: return $this->headers[$header]; goto G9ipW; FLv1T: $header = strtolower($header); goto L2TWA; NlOFq: return false; goto iNxeY; L2TWA: if (isset($this->headers[$header])) { goto Z45P1; } goto NlOFq; iNxeY: goto kAD8r; goto NEPdi; pLOOt: } function getError() { return $this->errormsg; } function getCookies() { return $this->cookies; } function getRequestURL() { goto NL6CX; nszCs: return $url; goto GIFCa; rkG2W: $url .= $this->path; goto nszCs; j4P6R: M12EG: goto rkG2W; hkyOV: if (!($this->port != 80)) { goto M12EG; } goto PVB38; PVB38: $url .= "\x3a" . $this->port; goto j4P6R; NL6CX: $url = "\x68\164\164\x70\72\57\x2f" . $this->host; goto hkyOV; GIFCa: } function setUserAgent($string) { $this->user_agent = $string; } function setAuthorization($username, $password) { $this->username = $username; $this->password = $password; } function setCookies($array) { $this->cookies = $array; } function useGzip($boolean) { $this->use_gzip = $boolean; } function setPersistCookies($boolean) { $this->persist_cookies = $boolean; } function setPersistReferers($boolean) { $this->persist_referers = $boolean; } function setHandleRedirects($boolean) { $this->handle_redirects = $boolean; } function setMaxRedirects($num) { $this->max_redirects = $num; } function setHeadersOnly($boolean) { $this->headers_only = $boolean; } function setDebug($boolean) { $this->debug = $boolean; } function quickGet($url) { goto jvwYw; kRp4Q: k4_yQ: goto waopp; UrrUa: goto PruaJ; goto kRp4Q; jvwYw: $bits = parse_url($url); goto ClUBw; waopp: return false; goto E2rYl; R6P2x: $path = isset($bits["\x70\141\x74\150"]) ? $bits["\x70\141\164\x68"] : "\57"; goto hHz16; ClUBw: $host = $bits["\x68\157\163\164"]; goto ZZoVO; jxork: $path .= "\x3f" . $bits["\x71\165\145\x72\x79"]; goto seOrs; atihp: if (!$client->get($path)) { goto k4_yQ; } goto Uym3f; oCFXX: $client = new HttpClient($host, $port); goto atihp; ZZoVO: $port = isset($bits["\160\x6f\x72\164"]) ? $bits["\x70\157\x72\x74"] : 80; goto R6P2x; Uym3f: return $client->getContent(); goto UrrUa; seOrs: gL0ap: goto oCFXX; hHz16: if (!isset($bits["\161\x75\145\162\171"])) { goto gL0ap; } goto jxork; E2rYl: PruaJ: goto U0G8g; U0G8g: } function quickPost($url, $data) { goto t1WhR; ez57V: if (!$client->post($path, $data)) { goto wfKnr; } goto aEejg; wqZ6w: wfKnr: goto LlMPv; QaP9F: goto CCPkD; goto wqZ6w; uoj8w: $host = $bits["\x68\157\x73\x74"]; goto GYjtx; LlMPv: return false; goto vPOPL; vPOPL: CCPkD: goto MjhFd; aEejg: return $client->getContent(); goto QaP9F; t1WhR: $bits = parse_url($url); goto uoj8w; CPYjV: $path = isset($bits["\160\x61\x74\150"]) ? $bits["\160\x61\164\x68"] : "\57"; goto KmmLG; KmmLG: $client = new HttpClient($host, $port); goto ez57V; GYjtx: $port = isset($bits["\x70\157\x72\x74"]) ? $bits["\x70\x6f\x72\x74"] : 80; goto CPYjV; MjhFd: } function debug($msg, $object = false) { goto TiK_D; E9YmD: print "\74\x70\x72\145\76" . $content . "\74\57\x70\162\x65\76"; goto ufwRt; TiK_D: if (!$this->debug) { goto oOSvc; } goto DAaP7; JNYx3: print "\x3c\57\144\x69\166\x3e"; goto D0hap; D0hap: oOSvc: goto JKsAT; Rgcpl: $content = htmlentities(ob_get_contents()); goto ml86x; DAaP7: print "\x3c\144\x69\166\40\163\x74\x79\154\145\75\x22\x62\157\162\x64\x65\162\72\40\x31\x70\x78\40\x73\157\154\x69\144\x20\162\x65\144\73\x20\160\141\144\x64\151\156\147\x3a\x20\x30\x2e\65\145\155\x3b\x20\155\x61\x72\147\x69\156\x3a\40\x30\56\65\x65\x6d\x3b\42\x3e\x3c\x73\x74\x72\157\x6e\x67\x3e\x48\164\x74\x70\103\x6c\151\x65\x6e\x74\40\x44\x65\x62\x75\147\72\74\x2f\x73\164\162\x6f\x6e\147\76\40" . $msg; goto Rhske; WeZQS: ob_start(); goto PRoVT; ufwRt: VMD1N: goto JNYx3; Rhske: if (!$object) { goto VMD1N; } goto WeZQS; PRoVT: print_r($object); goto Rgcpl; ml86x: ob_end_clean(); goto E9YmD; JKsAT: } }
