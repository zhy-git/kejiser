<?php
 namespace app\admin\service; use app\common\model\Advert; use app\common\model\AdvertPosition; class AdvertService extends Base { function __construct() { parent::__construct(); } public function getAdvertPosition($condition = '', $search_text, $order) { goto GnGc_; GnGc_: $advert_position = new AdvertPosition(); goto uVTGm; I8Xl2: return $rs; goto DkMEW; uVTGm: $rs = $advert_position->getPageLisy($condition, $search_text, $order); goto I8Xl2; DkMEW: } public function addHeight($adv_id, $info) { goto dYjGI; tT50k: $data = array("\141\144\x76\x5f\x68\145\151\x67\150\x74" => $info); goto l3bGK; by3y9: return $res; goto zEbAp; l3bGK: $res = $advert->save($data, ["\141\x64\166\x5f\x69\x64" => $adv_id]); goto by3y9; dYjGI: $advert = new Advert(); goto tT50k; zEbAp: } public function addAdvertPosition($mch_id, $ap_intro, $ap_name, $sort, $height, $width) { goto KDM0W; F75J3: return $res; goto FNXeN; O1sXo: $res = $advert_position->save($data); goto F75J3; KDM0W: $advert_position = new AdvertPosition(); goto kHopV; kHopV: $data = array("\141\x70\x5f\x6e\141\155\145" => $ap_name, "\141\x70\137\x69\156\164\162\x6f" => $ap_intro, "\x63\x72\x65\141\164\x65\x5f\164\151\x6d\x65" => time(), "\163\157\x72\x74" => $sort, "\x6d\143\x68\x5f\x69\x64" => $mch_id, "\150\x65\x69\147\x68\x74" => $height, "\167\x69\144\164\x68" => $width); goto O1sXo; FNXeN: } public function setAdvertPositionUse($ap_id, $is_use) { goto i8YtB; ASbJr: $data = array("\151\x73\x5f\165\x73\145" => $is_use); goto gI8SM; gI8SM: $res = $advert_position->save($data, ["\x61\160\x5f\151\x64" => $ap_id]); goto H4Kjo; H4Kjo: return $res; goto koa5F; i8YtB: $advert_position = new AdvertPosition(); goto ASbJr; koa5F: } public function getAdvertPositionDetail($ap_id) { goto evnoj; hd7rU: return $info; goto ceVBn; evnoj: $advert_position = new AdvertPosition(); goto trOek; trOek: $info = $advert_position->getInfo(["\x61\160\x5f\151\144" => $ap_id]); goto hd7rU; ceVBn: } public function updateAdvertPositionDetail($mch_id, $ap_id, $ap_name, $ap_intro, $sort, $height, $width) { goto wpFVa; xjjad: return $res; goto n_Fpy; M_3Go: $res = $advert_position->save($data, ["\141\x70\137\151\x64" => $ap_id]); goto xjjad; wpFVa: $advert_position = new AdvertPosition(); goto MECQM; MECQM: $data = array("\141\x70\x5f\x6e\x61\x6d\x65" => $ap_name, "\141\x70\137\x69\156\164\162\157" => $ap_intro, "\155\x63\x68\x5f\151\x64" => $mch_id, "\x73\157\x72\164" => $sort, "\x68\x65\151\147\150\x74" => $height, "\x77\151\144\x74\150" => $width); goto M_3Go; n_Fpy: } public function delAdvertPosition($ap_id) { goto BiXOv; XZR23: return $res; goto we9V0; BiXOv: $advert = new Advert(); goto KBU6R; hztzs: try { goto eOioC; GVtb_: $advert_position->commit(); goto pWFEk; eOioC: $advert->destroy(["\141\x70\x5f\151\144" => $ap_id]); goto SC9bM; SC9bM: $res = $advert_position->destroy($ap_id); goto GVtb_; pWFEk: } catch (\Exception $e) { $advert_position->rollback(); return $e->getMessage(); } goto XZR23; ZKnx3: $advert_position->startTrans(); goto hztzs; KBU6R: $advert_position = new AdvertPosition(); goto ZKnx3; we9V0: } public function getAdvert($condition = '', $search_text, $order) { goto KzuI9; UOLIc: $rs = $advert->getPageLisy($condition, $search_text, $order); goto so5TK; KzuI9: $advert = new Advert(); goto UOLIc; so5TK: return $rs; goto ULZtw; ULZtw: } public function addAdvert($cate_id, $mod_id, $ap_id, $adv_title, $adv_url, $adv_image, $sort, $background, $mch_id) { goto Rs4xu; XaPov: if (!($mod_id == 1)) { goto c30Rm; } goto NyUUc; pqdnh: $res = $advert->save($data); goto LBe1Q; Rs4xu: $advert = new Advert(); goto U6s47; U6s47: $data = array("\141\x70\x5f\151\144" => $ap_id, "\x61\144\x76\137\164\151\164\x6c\145" => $adv_title, "\141\144\x76\x5f\165\162\x6c" => $adv_url, "\x61\x64\166\x5f\151\x6d\141\x67\x65" => $adv_image, "\163\157\162\164" => $sort, "\x62\x61\143\153\147\162\x6f\165\156\144" => $background, "\x63\162\145\x61\x74\145\x5f\x74\x69\x6d\145" => time(), "\155\143\150\137\x69\144" => $mch_id, "\155\157\x64\x5f\x69\144" => $mod_id, "\143\141\x74\x65\137\x69\x64" => $cate_id); goto XaPov; LBe1Q: return $res; goto L9QME; Ycs74: c30Rm: goto pqdnh; NyUUc: $data["\x61\144\x76\x5f\150\x65\x69\x67\x68\x74"] = 188; goto Ycs74; L9QME: } public function setAdvertUse($adv_id, $is_use) { goto eVLtO; jRAQK: $res = $advert->save($data, ["\x61\x64\x76\x5f\151\144" => $adv_id]); goto OfMxP; eVLtO: $advert = new Advert(); goto oEdXh; oEdXh: $data = array("\x69\163\137\165\163\145" => $is_use); goto jRAQK; OfMxP: return $res; goto DdQSw; DdQSw: } public function getAdvertDetail($adv_id) { goto Lbuij; HxEgg: $info = $advert->getInfo(["\x61\x64\x76\x5f\x69\144" => $adv_id]); goto s1GI8; Lbuij: $advert = new Advert(); goto HxEgg; s1GI8: return $info; goto jSpP3; jSpP3: } public function updateAdvert($adv_id, $adv_title, $adv_url, $adv_image, $sort, $background, $mch_id) { goto MIYsO; ntQzd: $data = array("\141\144\x76\137\x74\151\x74\x6c\x65" => $adv_title, "\141\144\x76\x5f\165\162\154" => $adv_url, "\141\144\x76\137\x69\x6d\x61\x67\145" => $adv_image, "\163\x6f\x72\164" => $sort, "\142\x61\143\x6b\x67\x72\x6f\x75\156\144" => $background, "\x6d\x63\150\137\x69\144" => $mch_id); goto hWiyi; hWiyi: $res = $advert->save($data, ["\x61\144\x76\137\151\144" => $adv_id, "\x6d\x63\150\137\x69\x64" => $mch_id]); goto hFoWn; hFoWn: return $res; goto At04P; MIYsO: $advert = new Advert(); goto ntQzd; At04P: } public function delAdvert($adv_id) { goto sgiaP; sgiaP: $advert = new Advert(); goto B8UkO; B8UkO: $res = $advert->destroy($adv_id); goto BzPJQ; BzPJQ: return $res; goto Hoxsf; Hoxsf: } public function AdvertPositionSort($ap_id, $sort) { goto nfcxR; maBJc: $res = $advert->save($data, ["\x61\x64\x76\137\x69\144" => $ap_id]); goto kK9_x; kK9_x: return $res; goto Sx9cb; nfcxR: $advert = new Advert(); goto yLFFf; yLFFf: $data = array("\x73\x6f\162\164" => $sort); goto maBJc; Sx9cb: } public function AdvertSort($ap_id, $sort) { goto HpqXD; p46kj: $res = $advert->save($data, ["\x61\160\x5f\151\x64" => $ap_id]); goto mWo9v; ycqsz: $data = array("\x73\x6f\162\x74" => $sort); goto p46kj; HpqXD: $advert = new AdvertPosition(); goto ycqsz; mWo9v: return $res; goto bDJ0Y; bDJ0Y: } public function getAdvertPosImg($condition = '', $field = "\52", $order = '') { goto Qqmav; Mfxc0: $list = $advert->getQuerys($condition, $field, $order); goto n_ZW5; n_ZW5: return $list; goto N1U5l; Qqmav: $advert = new Advert(); goto Mfxc0; N1U5l: } public function UpdateAdvertImg($adv_title, $adv_id, $key) { goto Q27Wy; S4KdU: $res = $advert->save($data, ["\141\144\x76\x5f\x69\x64" => $adv_id]); goto K6Rd2; y_y55: iXbqc: goto O0tc8; T5sCp: blL7g: goto S4KdU; bU2t3: $data = ["\x61\x64\166\137\x75\x72\154" => $adv_title]; goto y_y55; Gy3N6: ZrhCc: goto iY6yc; e95Lk: W1W1P: goto e023r; O0tc8: goto blL7g; goto e95Lk; HP7lm: if ($key == "\165\x72\x6c") { goto mlK6b; } goto QCypQ; SILyy: mlK6b: goto bU2t3; Ykf8P: if ($key == "\x74\151\x74\154\145") { goto W1W1P; } goto HP7lm; K6Rd2: return $res; goto f3GfS; Q27Wy: $advert = new Advert(); goto Ykf8P; QCypQ: if (!($key == "\x77\x69\144\164\x68")) { goto ZrhCc; } goto KowE7; iY6yc: goto iXbqc; goto SILyy; e023r: $data = ["\x61\x64\166\x5f\164\x69\x74\x6c\145" => $adv_title]; goto T5sCp; KowE7: $data = ["\x61\x64\166\x5f\167\x69\x64\164\x68" => $adv_title]; goto Gy3N6; f3GfS: } public function UpdateAdvertProportion($info, $ap_id, $key) { goto Ex6Ov; VfToB: if ($key == "\167\151\x64\164\150") { goto nawYO; } goto eeZiU; Q5TjX: cS4oy: goto Gx0Kz; pH4oF: $data = ["\x68\145\x69\147\x68\164" => $info]; goto i2Inw; i2Inw: hZvcp: goto WWQ_C; h2AXD: nawYO: goto Rdoge; Rdoge: $data = ["\167\x69\144\x74\x68" => $info]; goto Q5TjX; WWQ_C: goto cS4oy; goto h2AXD; sQnBJ: return $res; goto xx88G; eeZiU: if (!($key == "\x68\x65\151\147\x68\x74")) { goto hZvcp; } goto pH4oF; Gx0Kz: $res = $advert_position->save($data, ["\141\x70\x5f\x69\x64" => $ap_id]); goto sQnBJ; Ex6Ov: $advert_position = new AdvertPosition(); goto VfToB; xx88G: } public function editNavigation($adv_id, $cate_id, $adv_title, $sort, $background, $adv_url, $adv_image) { goto GIywH; iFpy9: $res = $advert->save($data, ["\x61\144\x76\137\x69\x64" => $adv_id]); goto lF97L; GIywH: $advert = new Advert(); goto vhn5l; lF97L: return $res; goto bj1l1; vhn5l: $data = array("\141\144\166\137\164\151\x74\x6c\x65" => $adv_title, "\141\144\166\137\165\x72\x6c" => $adv_url, "\141\144\x76\137\151\155\x61\147\145" => $adv_image, "\x73\x6f\x72\164" => $sort, "\142\141\x63\x6b\x67\162\157\x75\156\144" => $background, "\143\141\x74\x65\137\x69\144" => $cate_id); goto iFpy9; bj1l1: } }
