<?php
 namespace app\admin\service; use app\common\model\AdminModule; class AdminGroup extends Base { function __construct() { parent::__construct(); $this->admin_group = new \app\common\model\AdminGroup(); } public function getSystemUserGroupDetail($group_id) { return $this->admin_group->get($group_id); } public function addSystemUserGroup($group_name, $module_id_array, $info) { goto FgYNg; rPEoS: $res = $this->admin_group->save($data); goto S0Qjn; B1bxd: if (!($count > 0)) { goto Pitiu; } goto RxMvv; Zy2r6: Pitiu: goto kuk1T; kuk1T: $data = array("\162\x6f\154\145\x5f\x6e\x61\155\145" => $group_name, "\155\x6f\144\165\154\x65\137\151\x64\137\141\x72\162\141\x79" => $module_id_array, "\151\156\146\157" => $info, "\143\162\145\141\x74\145\x5f\x74\x69\155\x65" => time()); goto rPEoS; RxMvv: return 2; goto Zy2r6; FgYNg: $count = $this->admin_group->getCount(["\x72\157\154\x65\137\156\141\155\x65" => $group_name]); goto B1bxd; S0Qjn: return $res; goto ZPt6U; ZPt6U: } public function updateSystemUserGroup($role_id, $role_name, $module_id_array, $info) { goto Nz3s9; HsNJm: $data = array("\162\157\x6c\x65\x5f\x6e\x61\x6d\145" => $role_name, "\x6d\x6f\x64\x75\x6c\145\137\151\144\137\x61\x72\162\x61\x79" => $module_id_array, "\151\x6e\146\157" => $info, "\x6d\157\x64\x69\146\x79\x5f\164\x69\x6d\145" => time()); goto XNLSk; XNLSk: $res = $this->admin_group->save($data, ["\x72\157\x6c\145\137\x69\x64" => $role_id]); goto ZxQLu; Li21k: ChwLE: goto HsNJm; S3ZV9: $count = $this->admin_group->getCount(["\162\x6f\154\x65\x5f\x6e\x61\x6d\145" => $role_name]); goto SP8H4; Nz3s9: $group_info = $this->admin_group->getInfo(["\162\157\x6c\145\137\151\x64" => $role_id], "\x2a"); goto W0DT9; ZxQLu: return $res; goto SI8iI; TbCg4: return 2; goto ynKFP; W0DT9: if (!($role_name != $group_info["\x72\157\154\145\x5f\156\141\x6d\145"])) { goto ChwLE; } goto S3ZV9; ynKFP: uAllJ: goto Li21k; SP8H4: if (!($count > 0)) { goto uAllJ; } goto TbCg4; SI8iI: } public function deleteSystemAdminGroup($rol_id) { goto bygY4; ZggWW: return $res; goto pCD3h; dr8pP: if ($count > 0) { goto jL5qH; } goto lLLjY; KPlnZ: jL5qH: goto qUsDB; bygY4: $count = $this->getAdminGroupIsUse($rol_id); goto dr8pP; MQe_C: olrjj: goto KpJMj; pCD3h: goto olrjj; goto KPlnZ; qUsDB: return USER_GROUP_ISUSE; goto MQe_C; lLLjY: $res = $this->admin_group->where("\x72\x6f\154\x65\x5f\x69\x64", $rol_id)->delete(); goto ZggWW; KpJMj: } private function getAdminGroupIsUse($rol_id) { goto EmM12; EmM12: $user_admin = new \app\common\model\Admin(); goto EYOmQ; EYOmQ: $count = $user_admin->getCount(["\162\x6f\154\x65\x5f\x69\144\x5f\141\162\162\x61\x79" => $rol_id]); goto YhGNq; YhGNq: return $count; goto PcBaZ; PcBaZ: } public function getSystemAdminGroupAll() { $all = $this->admin_group->all(); return $all; } }
