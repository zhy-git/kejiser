<?php
 namespace app\admin\service; class ArticleClass extends Base { function __construct() { parent::__construct(); $this->article_class = new \app\common\model\ArticleClass(); } public function getArticleClass($condition = '', $field = "\52", $order = '') { $list = $this->article_class->getQuerys($condition, $field, $order); return $list; } public function getClassCategoryDetail($pid) { $res = $this->article_class->get($pid); return $res; } public function getClassCategoryTree($pid, $mch_id) { goto i62PX; i62PX: $list = array(); goto fyMxL; LtCtu: return $list; goto E3AVV; fyMxL: $one_list = $this->getClassCategoryListByParentId($pid, $mch_id); goto D1IXo; D1IXo: $list = $one_list; goto LtCtu; E3AVV: } public function getClassCategoryListByParentId($pid, $mch_id) { goto DJr5R; lKobS: $list["\144\141\164\x61"][$i]["\x69\163\137\x70\x61\162\145\x6e\x74"] = 0; goto P7Amx; spMAt: $where["\x6d\143\150\x5f\151\x64"] = array("\145\161", $mch_id); goto oOCw6; OpA1B: if (!($i < count($list["\144\x61\x74\x61"]))) { goto O4YG0; } goto FR0qm; bkSEe: $child_list = $this->getClassCategoryList(1, 1, "\160\x69\144\x3d" . $parent_id, "\x70\151\144\x2c\163\157\162\x74"); goto g5BIY; zJhqt: O4YG0: goto iV0ke; eTQvx: $list = $this->getClassCategoryList(1, 0, $where, "\160\151\144\54\163\157\162\x74"); goto RzeYI; hK_uk: Iatqg: goto o6pD_; P7Amx: goto Iatqg; goto yAQNR; iV0ke: PCAXB: goto Psdak; RzeYI: if (empty($list)) { goto PCAXB; } goto S5N7H; DJr5R: $where["\x70\151\144"] = array("\x65\161", $pid); goto spMAt; yAQNR: dD3qL: goto clWgV; ct_BV: goto cp5DO; goto zJhqt; o6pD_: Fwr1B: goto ScptO; FR0qm: $parent_id = $list["\x64\x61\x74\141"][$i]["\143\154\141\x73\163\x5f\x69\144"]; goto bkSEe; g5BIY: if (!empty($child_list) && $child_list["\164\x6f\164\x61\154\x5f\x63\157\x75\156\164"] > 0) { goto dD3qL; } goto lKobS; ebwjF: cp5DO: goto OpA1B; S5N7H: $i = 0; goto ebwjF; ScptO: $i++; goto ct_BV; oOCw6: $where["\x69\163\137\x64\145\154"] = array("\x65\x71", 1); goto eTQvx; Psdak: return $list["\144\x61\x74\x61"]; goto YEWiJ; clWgV: $list["\x64\x61\164\x61"][$i]["\151\163\137\160\x61\162\x65\156\x74"] = 1; goto hK_uk; YEWiJ: } public function getClassCategoryList($page_index = 1, $page_size = 0, $condition = '', $order = '', $field = "\52") { $list = $this->article_class->pageQuery($page_index, $page_size, $condition, $order, $field); return $list; } public function getFormatClassCategoryList($mch_id) { $one_list = $this->getCategoryTreeUseInShopIndex($mch_id); return $one_list; } public function getCategoryTreeUseInShopIndex($mch_id) { goto CQK3y; s_PsX: return $goods_category_one; goto K28v6; OTdwZ: if (empty($goods_category_one)) { goto qQobX; } goto mDJFz; gcl3W: A7XCl: goto Cf9Sr; mDJFz: foreach ($goods_category_one as $k_cat_one => $v_cat_one) { goto kK7az; NTGdA: if (empty($goods_category_two_list)) { goto jND3F; } goto bIpxp; E1wDQ: $v_cat_one["\x63\x6f\x75\x6e\x74"] = count($goods_category_two_list); goto NTGdA; d3DvB: $v_cat_one["\x63\x68\151\154\x64\137\x6c\x69\x73\164"] = $goods_category_two_list; goto oqjnU; kK7az: $goods_category_two_list = $goods_category_model->getQuerys(["\x6c\x65\166\145\x6c" => 2, "\160\151\x64" => $v_cat_one["\143\x6c\x61\x73\163\x5f\x69\144"], "\151\x73\137\144\x65\154" => 1], "\143\154\x61\163\163\137\151\x64\54\x6e\x61\x6d\x65\x2c\160\x69\144\54\143\x6c\141\x73\163\x5f\151\155\147\x2c\163\x6f\x72\x74\x2c\x63\162\145\141\164\x65\137\164\151\155\145", "\x73\157\162\164"); goto E1wDQ; wOReD: jND3F: goto d3DvB; oqjnU: wv_RP: goto iG0cT; E_skr: o2_9K: goto wOReD; bIpxp: foreach ($goods_category_two_list as $k_cat_two => $v_cat_two) { goto l_yFb; ZxB0z: $v_cat_two["\143\150\151\x6c\144\x5f\154\x69\163\x74"] = $cat_three_list; goto omkyu; BnBLX: $v_cat_two["\x63\157\165\x6e\x74"] = count($cat_three_list); goto ZxB0z; l_yFb: $cat_three_list = $goods_category_model->getQuerys(["\154\145\166\x65\154" => 3, "\160\151\144" => $v_cat_two["\x63\154\x61\x73\x73\x5f\x69\144"], "\151\163\137\x64\145\154" => 1], "\143\154\x61\163\x73\x5f\x69\x64\x2c\x6e\x61\155\145\54\x70\151\x64\54\x63\154\141\x73\163\x5f\x69\155\x67\54\x73\157\x72\x74\54\143\162\x65\x61\x74\x65\137\164\x69\x6d\145", "\x73\x6f\162\164"); goto BnBLX; omkyu: w05jk: goto cULwd; cULwd: } goto E_skr; iG0cT: } goto gcl3W; Cf9Sr: qQobX: goto s_PsX; CQK3y: $goods_category_model = new \app\common\model\ArticleClass(); goto bbsoW; bbsoW: $goods_category_one = $goods_category_model->getQuerys(["\x6c\145\x76\x65\154" => 1, "\x6d\143\x68\x5f\151\x64" => $mch_id, "\x69\163\137\x64\145\154" => 1], "\x63\x6c\141\163\x73\137\151\x64\x2c\x6e\141\x6d\145\x2c\160\151\x64\x2c\x63\x6c\141\x73\163\x5f\151\155\x67\x2c\163\x6f\x72\x74\x2c\x63\x72\145\141\164\145\x5f\x74\x69\155\145", "\x73\x6f\x72\164"); goto OTdwZ; K28v6: } public function addArticleClass($data) { $res = $this->article_class->save($data); return $res; } public function getArticleClassById($class_id) { $info = $this->article_class->getInfo(["\143\154\x61\163\x73\x5f\151\144" => $class_id]); return $info; } public function updateArticleClass($data) { $res = $this->article_class->save($data, ["\x63\154\141\x73\163\137\151\144" => $data["\143\x6c\x61\x73\x73\137\151\x64"]]); return $res; } public function delArticleClass($class_id) { goto Pj_yZ; LkwMP: $res = $article_class->destroy($class_id); goto soC6T; rrnCd: if ($article_list) { goto wXIeU; } goto LkwMP; Pj_yZ: $article = new \app\common\model\Article(); goto XaKpu; qRJjp: wXIeU: goto iG0gx; iDxLz: $article_list = $article->getInfo(["\143\x6c\x61\163\163\137\151\x64" => $class_id]); goto rrnCd; XaKpu: $article_class = new \app\common\model\ArticleClass(); goto iDxLz; q_p0Q: goto JpAVc; goto qRJjp; iG0gx: return "\55\x31"; goto B85wc; soC6T: return $res; goto q_p0Q; B85wc: JpAVc: goto aGU4T; aGU4T: } }
