<?php
 namespace app\admin\service; use app\common\model\ExpressCompany; use app\common\model\OrderGoods; use think\db; class OrderExpress extends Base { function __construct() { parent::__construct(); } public function delivey($order_id, $express_name, $shipping_type, $express_company_id, $express_no, $bus_id) { goto PM4KP; fQckM: $user_name = $user->getInfo(["\x69\x64" => $bus_id], "\156\141\x6d\145"); goto vkdlZ; RMEJV: try { goto aC2PQ; b155v: return 1; goto Do8Kq; vc6Z1: $order_goods = new \app\admin\service\OrderGoods(); goto F2nmx; aC2PQ: $express_company = new ExpressCompany(); goto egGPm; EAvx1: $order_express->commit(); goto vc6Z1; HUV74: $order_express->save($data_goods_delivery); goto EAvx1; j9KSA: $data_goods_delivery = array("\157\162\144\x65\162\x5f\151\x64" => $order_id, "\x6f\x72\x64\145\162\137\x67\x6f\x6f\144\x73\137\x69\x64\137\x61\162\x72\x61\x79" => '', "\x65\x78\x70\x72\145\163\163\x5f\156\x61\x6d\145" => $express_name, "\163\x68\x69\x70\160\x69\156\147\137\164\171\160\x65" => $shipping_type, "\145\x78\x70\x72\x65\163\163\137\x63\x6f\x6d\x70\x61\156\171\x5f\x69\x64" => $express_company_id, "\145\x78\160\x72\145\163\163\x5f\x63\157\155\x70\x61\156\x79" => $express_company_info["\143\157\x6d\160\141\x6e\171\137\156\141\155\145"], "\x65\170\160\162\145\x73\163\137\156\x6f" => $express_no, "\x75\151\144" => $bus_id, "\x75\x73\145\162\137\x6e\x61\x6d\x65" => $user_name["\x6e\141\x6d\x65"], "\x73\150\151\160\x70\x69\x6e\147\x5f\x74\x69\155\x65" => time()); goto Ssdbm; Ssdbm: $order_express->startTrans(); goto HUV74; egGPm: $express_company_info = $express_company->getInfo(["\x63\x6f\137\151\x64" => $express_company_id], "\143\x6f\155\x70\x61\x6e\x79\137\x6e\x61\155\x65"); goto j9KSA; F2nmx: $order_goods->orderGoodsDelivery($order_id, ''); goto b155v; Do8Kq: } catch (\Exception $e) { $order_express->rollback(); return $e->getMessage(); } goto KAwsJ; PM4KP: $user = new \app\common\model\Business(); goto fQckM; vkdlZ: $order_express = new \app\common\model\OrderExpress(); goto RMEJV; KAwsJ: } }
