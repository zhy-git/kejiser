<?php
 namespace app\images\controller; use app\admin\controller\Base; use think\Controller; use think\Db; class Index extends Base { protected $bus_id = 5; public function __construct() { goto AyC1z; AyC1z: parent::__construct(); goto CLcvJ; ZhnSc: $album->init(); goto tmgVV; CLcvJ: $album = new \app\images\service\Index($this->bus_id); goto ZhnSc; tmgVV: } public function index() { goto dvaAD; tSSNu: $this->assign("\154\151\163\164", $list); goto Z6ulA; AbSH5: return view(); goto WRU_g; Z5sSD: $this->assign("\163\x65\x61\162\143\150\137\164\145\170\164", $search_text); goto AbSH5; Z6ulA: $this->assign("\x70\141\x67\x65", $page); goto Z5sSD; dvaAD: $album = new \app\images\service\Index($this->bus_id); goto fCd36; SEfLH: list($list, $page) = $album->getAlbumList($search_text); goto tSSNu; fCd36: $search_text = trim(input("\160\x61\162\141\155\56\x73\145\141\162\x63\x68\x5f\164\x65\170\164")); goto SEfLH; WRU_g: } public function album_add() { goto ljtqc; JyEyZ: return view(); goto whR8I; frbCV: exit(json_encode($rs, true)); goto TlVL9; CIv0h: $sort = request()->post("\163\x6f\162\x74", 0); goto K1jY6; TlVL9: cfMcb: goto JyEyZ; KH7kT: $res = $album->addAlbum($group_name, $sort); goto jTXr2; ljtqc: if (!request()->isAjax()) { goto cfMcb; } goto vUN9J; jTXr2: $rs["\143\157\x64\145"] = $res; goto frbCV; K1jY6: $album = new \app\images\service\Index($this->bus_id); goto KH7kT; vUN9J: $group_name = request()->param("\x67\x72\x6f\165\160\137\156\141\155\x65", ''); goto CIv0h; whR8I: } public function album_name_save() { goto k5Q43; yxBrM: $res = $album->album_rename($data["\x69\144"], $data["\156\141\155\145"]); goto e1Dku; zJqbv: $album = new \app\images\service\Index($this->bus_id); goto yxBrM; e1Dku: $rs["\143\x6f\144\x65"] = $res; goto jmbnJ; jmbnJ: exit(json_encode($rs, true)); goto r9ym4; DbIto: $data = request()->post(); goto zJqbv; k5Q43: if (!request()->isAjax()) { goto EHpL1; } goto DbIto; r9ym4: EHpL1: goto GACy5; GACy5: } public function album_del() { goto aB58s; aB58s: if (!request()->isAjax()) { goto vIjE1; } goto DpZQU; zPcn4: $img = new \app\images\service\Index($this->bus_id); goto CUyzP; CUyzP: $res = $img->album_del($group_id); goto n_dnn; DpZQU: $group_id = request()->param("\147\162\157\x75\160\x5f\151\144"); goto zPcn4; n_dnn: $rs["\x63\157\x64\145"] = $res; goto PwnM9; PwnM9: exit(json_encode($rs, true)); goto jgUam; jgUam: vIjE1: goto DiFrz; DiFrz: } public function album_edit() { goto rpuLt; g600r: $this->assign("\x70\x61\147\145", $page); goto BUVOA; rpuLt: $group_id = request()->param("\147\162\x6f\165\160\x5f\151\x64"); goto wFdaY; BUVOA: $this->assign("\x67\x72\157\x75\x70\x5f\151\144", $group_id); goto noV11; wFdaY: $album = new \app\images\service\Index($this->bus_id); goto JDgFA; noV11: return view(); goto WZT3E; x2zAk: $this->assign("\x6c\x69\163\x74", $list); goto g600r; JDgFA: list($list, $page) = $album->getPictureList($group_id); goto x2zAk; WZT3E: } public function imageUpload() { goto I_Q0P; msSg9: $album = new \app\images\service\Index($this->bus_id); goto epsnx; epsnx: $res = $album->imageUpload($group_id); goto XKUPR; XKUPR: exit(json_encode($res, true)); goto bqKhl; I_Q0P: $group_id = request()->param("\147\x72\157\x75\x70\x5f\151\144"); goto msSg9; bqKhl: } public function album_cover() { goto wNPfU; wNPfU: if (!request()->isAjax()) { goto vDFUz; } goto Dp_wR; P5OmT: $album = new \app\images\service\Index($this->bus_id); goto ovRcJ; ZwYvp: $rs["\143\x6f\x64\x65"] = $res; goto Cn49c; jwLce: vDFUz: goto PFT_i; Cn49c: exit(json_encode($rs, true)); goto jwLce; Dp_wR: $img_id = request()->param("\151\155\147\137\x69\x64"); goto P5OmT; ovRcJ: $res = $album->album_cover($img_id); goto ZwYvp; PFT_i: } public function album_images_move() { goto mG7Yb; kZYNI: GRmRN: goto n8raH; SWFPD: $res = $album->album_images_move($img_ids, $group_id); goto TIVim; WOIMp: $this->assign("\x67\x72\x6f\x75\160\163", $group); goto UeXWr; XKkLT: exit(json_encode($rs, true)); goto kZYNI; rh3fK: $where["\147\162\157\x75\160\137\151\x64"] = array("\x6e\145\161", $group_id); goto P7f4u; TIVim: $rs["\x63\157\144\145"] = $res; goto XKkLT; yuyZW: if (!request()->isAjax()) { goto GRmRN; } goto Ct0Xj; UeXWr: return view(); goto wCcFs; mG7Yb: $group_id = request()->param("\x67\x72\157\165\160\x5f\151\x64"); goto YwdKQ; qoEFn: $where["\155\143\x68\x5f\151\144"] = $this->bus_id; goto rh3fK; P7f4u: $group = Db::tb("\151\155\141\x67\x65\x73\x5f\x67\x72\x6f\165\160")->where($where)->select(); goto WOIMp; Ct0Xj: $album = new \app\images\service\Index($this->bus_id); goto SWFPD; YwdKQ: $img_ids = request()->param("\151\155\x67\137\151\x64\163"); goto yuyZW; n8raH: $this->assign("\x69\155\147\x5f\x69\x64\x73", $img_ids); goto qoEFn; wCcFs: } public function album_images_del() { goto A8eij; EydEa: IA0T9: goto I49Sc; A8eij: if (!request()->isAjax()) { goto IA0T9; } goto bSGxi; bSGxi: $img_ids = request()->param("\x69\x6d\x67\x5f\x69\144\x73"); goto KGFgV; sQaB8: exit(json_encode($rs, true)); goto EydEa; KGFgV: $album = new \app\images\service\Index($this->bus_id); goto ykrOS; S3oFS: $rs["\143\157\x64\145"] = $res; goto sQaB8; ykrOS: $res = $album->album_images_del($img_ids); goto S3oFS; I49Sc: } public function images_select() { goto KweR3; yQkZU: unset($data["\156\x75\155"]); goto ppROg; F3xwO: $this->assign("\144\x61\164\x61", json_encode($data, true)); goto gTKSb; dKXi7: $num = request()->get("\x6e\165\155", 1); goto yQkZU; ppROg: $this->assign("\156\x75\155", $num); goto F3xwO; gTKSb: return view(); goto DCwG0; KweR3: $data = request()->param(); goto dKXi7; DCwG0: } public function getAlbumALL() { goto MPQDS; D6WSB: $list = $album->getAlbumAll(); goto p7YcA; p7YcA: exit(json_encode($list, true)); goto aCVCX; MPQDS: $album = new \app\images\service\Index($this->bus_id); goto D6WSB; aCVCX: } public function getAlbumPictureALL() { goto pe2ac; pe2ac: $group_id = request()->param("\147\162\x6f\x75\x70\137\151\x64"); goto X70LW; ocxyW: $list = $album->getPictureAll($group_id); goto GqK3i; X70LW: $album = new \app\images\service\Index($this->bus_id); goto ocxyW; GqK3i: return $list; goto zUtJE; zUtJE: } }
