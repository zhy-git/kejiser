<?php
 namespace app\portal\controller; use think\Controller; use think\Db; use think\Request; class Index extends Controller { private $page_num = 20; protected $mch_id; public function __construct() { goto TJKOU; FH6mg: $m = Db::name("\x79\x62\x73\143\137\x75\x73\x65\162\x5f\164\x6d\160\154")->where("\x6d\x63\x68\137\151\x64\x3d" . $this->mch_id)->find(); goto uXmHu; LDZQM: unset($rs["\x70\141\147\145"]); goto IKXPX; IKXPX: $this->assign($rs); goto D6cpd; uBFSu: $rs["\x70\x61\x67\x65\163"] = $rs["\x70\141\147\x65"]; goto WuvE2; WuvE2: unset($rs["\x61\x6c\x6c\x5f\144\x61\164\141"]); goto LDZQM; uXmHu: $rs = json_decode($m["\x69\x6e\x64\x65\170\137\166\141\154\x75\145\163"], true); goto uBFSu; TJKOU: parent::__construct(); goto dYXN5; eEBzM: $_W["\x75\x6e\151\x61\x63\x69\x64"] = $this->mch_id; goto FH6mg; IISe7: $this->mch_id = Request::instance()->param("\165\x6e\151\141\143\151\x64"); goto eEBzM; dYXN5: global $_W; goto IISe7; D6cpd: } public function index() { goto M8M9d; JJtzB: return $this->fetch("\160\157\x72\164\141\x6c\57\x69\156\x64\x65\170"); goto D2WrD; M8M9d: $m = Db::name("\x79\x62\x73\x63\x5f\165\163\145\162\x5f\164\x6d\x70\154")->where("\155\143\x68\x5f\151\144\x3d" . $this->mch_id)->find(); goto LXXmD; LXXmD: $rs = json_decode($m["\151\156\x64\x65\x78\137\x76\x61\x6c\165\145\x73"], true); goto GdBB9; lLuQW: $this->assign("\162\x6f\165\x74\145", "\57\151\156\144\x65\170\x2e\x68\164\x6d\x6c"); goto JJtzB; GdBB9: $this->assign("\x6c\151\x73\164", $rs); goto lLuQW; D2WrD: } public function article_list() { goto yJv3N; FYY8C: $this->assign("\143\x6c\x61\163\163\137\151\x64", $class_id); goto V8L69; l9BsE: $this->assign("\x64\x61\164\x61\x5f\x65\x6e\x64", $data_end); goto QL2Le; V8L69: $this->assign("\162\157\165\x74\x65", "\x2f\146\151\156\x64\x2f\60\x5f\x31\x2e\x68\164\155\154"); goto JXtYu; VozpN: $this->assign("\x70\141\x67\x65", intval($page) + 1); goto xS8bO; M2Uu5: goto yEwiB; goto Snvdb; xS8bO: $this->assign("\x6c\x69\x73\164", $list); goto DbRN3; JXtYu: return $this->fetch("\x70\157\x72\164\141\x6c\57\141\162\164\151\x63\154\x65\x5f\x6c\x69\163\164"); goto ZdAWd; b0lgh: $new_data["\x63\154\141\x73\x73\137\x69\144"] = ["\x69\156", self::InfiniteArticle($class_id, $this->mch_id)]; goto bUnj4; Snvdb: AA09H: goto eEyML; LbOnm: if (!($class_id != 0)) { goto YjVGx; } goto b0lgh; SbqzH: $data_end = 2; goto M2Uu5; qPNe9: $new_data = ["\155\143\150\137\151\x64" => $this->mch_id, "\x74\x79\x70\x65" => 1, "\163\x74\x61\x74\165\163" => 2]; goto LbOnm; QL2Le: $class_list = Db::name("\171\142\x73\143\x5f\141\162\164\x69\143\154\145\137\143\x6c\141\163\x73")->where(["\x6d\143\x68\x5f\151\x64" => $this->mch_id, "\160\x69\x64" => 0, "\x69\163\137\144\x65\x6c" => 1])->order("\163\157\162\164\40\x64\145\163\x63")->order("\x63\154\141\x73\163\x5f\x69\x64\x20\x64\145\x73\143")->select(); goto MZqav; r6rJp: yEwiB: goto VozpN; yJv3N: $class_style = Request::instance()->param("\143\x6c\x61\163\163\x5f\163\x74\x79\154\x65", 2); goto F52gU; eEyML: $data_end = 1; goto r6rJp; F52gU: $page = Request::instance()->param("\160\x61\x67\x65", 1); goto trRrM; bUnj4: $class_style = Db::name("\171\142\x73\x63\137\141\x72\164\151\x63\x6c\x65\x5f\143\x6c\x61\x73\163")->where(["\143\154\x61\x73\x73\137\151\144" => $class_id])->value("\143\x6c\x61\x73\x73\137\x73\164\171\x6c\145"); goto ewTaj; ObG9c: if (intval($page) * $this->page_num > count($list)) { goto AA09H; } goto SbqzH; ewTaj: YjVGx: goto D1eB0; DbRN3: $this->assign("\143\154\x61\163\x73\x5f\x73\164\171\154\x65", $class_style); goto N_jXN; D1eB0: $list = Db::name("\171\x62\x73\x63\x5f\x61\x72\164\x69\x63\x6c\x65")->where($new_data)->order(["\163\157\x72\x74" => "\x64\145\x73\143", "\141\x72\x74\151\143\x6c\145\137\x69\x64" => "\144\145\163\x63"])->limit(0, intval($page) * $this->page_num)->select(); goto ObG9c; trRrM: $class_id = Request::instance()->param("\143\x6c\141\163\163\x5f\x69\144", 0); goto qPNe9; N_jXN: $this->assign("\155\x63\x68\x5f\x69\x64", $this->mch_id); goto l9BsE; MZqav: $this->assign("\x63\x6c\141\x73\163\137\154\x69\163\164", $class_list); goto FYY8C; ZdAWd: } public static function InfiniteArticle($class_id, $mch_id) { goto qM3Ir; zs1Ul: return $rs; goto zUZm0; q96gc: HR2qL: goto zs1Ul; k6Ipc: foreach ($cate_list as $key => $value) { $rs = array_merge($rs, self::InfiniteArticle($value["\143\x6c\x61\x73\x73\137\x69\x64"], $mch_id)); nbNr8: } goto q96gc; mxBIs: $rs[] = $class_id; goto T72o5; qM3Ir: $rs = array(); goto mxBIs; T72o5: $cate_list = Db::name("\171\x62\x73\x63\137\x61\x72\164\151\x63\x6c\145\x5f\143\154\x61\x73\x73")->where("\x70\x69\x64", $class_id)->where("\x6d\x63\x68\x5f\x69\x64", $mch_id)->where("\151\163\x5f\144\x65\x6c", 1)->field("\x63\154\141\x73\163\137\151\x64")->select(); goto k6Ipc; zUZm0: } public function article_info() { goto JdYuF; SNIRG: preg_match_all("\x2f\x28\74\x69\x6d\x67\x20\51\50\x5b\134\x73\134\x53\135\52\x3f\x29\x28\x20\x5c\x2f\76\x29\57", $desc, $matche); goto qmh1r; R7_XB: $desc = preg_replace("\x2f\163\x74\171\x6c\x65\75\42\x2e\x2a\x3f\42\57\x69", '', $info["\143\x6f\x6e\164\145\x6e\x74"]); goto SNIRG; pilU5: if (!$info["\x63\162\x65\141\164\145\137\164\x69\x6d\x65"]) { goto smxmU; } goto Cuzrp; JpNRi: if ($info) { goto Yw4BN; } goto k8u6d; JdYuF: $id = Request::instance()->param("\151\144"); goto KlGF7; DjO9J: $this->assign("\x73\x68\157\x77", $show); goto wy_h2; wy_h2: $this->assign("\162\x6f\x75\164\145", "\x2f\146\x69\156\x64\137\151\x6e\146\157\57{$id}\x2e\x68\x74\155\154"); goto BGkJn; QJ2du: $info["\143\x6f\x6e\164\145\156\x74"] = $desc; goto h3G5l; JrB0W: $mip_img = array(); goto KyDG1; KlGF7: $info = Db::name("\x79\x62\163\x63\137\x61\162\x74\151\143\154\145")->where(["\x6d\143\x68\137\x69\x64" => $this->mch_id, "\141\x72\x74\x69\x63\x6c\x65\137\151\144" => $id, "\164\171\x70\x65" => 1, "\x73\164\x61\164\165\163" => 2])->find(); goto JpNRi; KyDG1: foreach ($all_img as $img) { goto l8viU; U7fs5: aMh1F: goto H_OH3; c_Zc4: $src = $matche[2][0]; goto akbkX; l8viU: $matche = array(); goto tixiK; akbkX: $mip_img[] = "\74\155\151\x70\55\151\x6d\147\40\x63\x6c\x61\x73\x73\x3d\x22\143\x6f\x6e\164\145\156\164\x5f\151\155\x67\42\x20\x73\x72\143\x3d\42{$src}\x22\76\74\57\x6d\151\160\55\x69\x6d\147\76"; goto U7fs5; tixiK: preg_match_all("\x2f\x28\x73\x72\x63\x3d\42\x29\50\x5b\134\163\134\123\135\x2a\x3f\51\50\x22\x29\57", $img, $matche); goto c_Zc4; H_OH3: } goto CDK35; vfKCu: $desc = str_replace($all_img, $mip_img, $desc); goto QJ2du; k16kC: Yw4BN: goto pilU5; Cuzrp: $info["\x63\x72\145\141\164\145\x5f\x74\151\x6d\145"] = date("\131\55\x6d\x2d\x64\40\110\x3a\x69", $info["\x63\x72\x65\141\164\145\137\164\151\155\145"]); goto eQc2m; EIFxQ: goto pmfOI; goto k16kC; h3G5l: $show = 1; goto HcKNj; CDK35: z9sOg: goto vfKCu; eQc2m: smxmU: goto R7_XB; BGkJn: return $this->fetch("\160\x6f\x72\164\x61\154\x2f\x61\162\x74\151\143\x6c\x65\137\x69\x6e\x66\157"); goto g9xok; HcKNj: pmfOI: goto HV8w3; HV8w3: $this->assign("\151\x6e\146\x6f", $info); goto DjO9J; qmh1r: $all_img = $matche[0]; goto JrB0W; k8u6d: $show = 2; goto EIFxQ; g9xok: } public function class_image() { goto y0pio; tgcMQ: $page = Request::instance()->param("\160\x61\147\x65", 1); goto s68dH; zbGbB: $data_end = 1; goto wqWQI; mpbOS: $this->assign("\144\141\x74\x61\x5f\x65\x6e\144", $data_end); goto uB6KZ; U1VWk: $this->assign("\x6d\143\150\137\151\x64", $this->mch_id); goto mpbOS; uB6KZ: return $this->fetch("\160\x6f\x72\x74\x61\x6c\x2f\143\154\141\x73\x73\x5f\x69\155\141\147\x65"); goto xNfwH; GUzIp: goto cyxcH; goto iFmuD; iFmuD: U90A_: goto zbGbB; s68dH: $list = Db::name("\171\142\x73\x63\x5f\x69\155\x61\x67\145\163\x5f\147\x72\157\x75\160")->where(["\x6d\x63\x68\137\151\144" => $this->mch_id])->order(["\147\162\x6f\x75\160\137\151\144" => "\x64\x65\163\x63"])->limit(0, intval($page) * $this->page_num)->select(); goto DpF4O; LtnB_: nMuQw: goto lyIgs; y0pio: $this->assign("\162\157\x75\164\x65", "\57\143\154\141\163\x73\137\x69\155\141\x67\x65\57\x31\x2e\150\164\x6d\x6c"); goto tgcMQ; RlX8R: foreach ($list as $k => $v) { goto CmJ_U; hYNo1: LfwO8: goto DmcOG; yG9bw: $img = Db::name("\171\142\163\x63\137\x69\155\x61\147\145\x73")->where(["\x69\x6d\x67\x5f\151\x64" => $v["\x67\162\157\x75\160\x5f\143\x6f\x76\x65\162"]])->value("\x69\155\x67\x5f\143\157\166\145\x72"); goto LAMz5; a9qXw: c0aeS: goto GqKeD; CmJ_U: if (empty($v["\x67\x72\x6f\x75\x70\x5f\143\x6f\166\145\162"])) { goto zdnwX; } goto yG9bw; NDYBJ: $img = ''; goto a9qXw; GqKeD: $list[$k]["\151\x6d\147"] = $img; goto hYNo1; ULW3p: zdnwX: goto NDYBJ; LAMz5: goto c0aeS; goto ULW3p; DmcOG: } goto LtnB_; DpF4O: if (empty($list)) { goto NyTzq; } goto RlX8R; KZkpx: $this->assign("\154\x69\163\164", $list); goto U1VWk; tMobW: $data_end = 2; goto GUzIp; g5KlJ: $this->assign("\160\x61\x67\145", intval($page) + 1); goto KZkpx; lyIgs: NyTzq: goto W0v7g; W0v7g: if (intval($page) * $this->page_num > count($list)) { goto U90A_; } goto tMobW; wqWQI: cyxcH: goto g5KlJ; xNfwH: } public function image() { goto VAneV; Wuv3n: $this->assign("\151\144", $group_id); goto JwZ1B; grO4a: $this->assign("\x64\141\x74\x61\137\145\156\x64", $data_end); goto rDDBV; SJFFd: $this->assign("\160\141\x67\x65", intval($page) + 1); goto IXKY1; OxTYv: WB5kv: goto TSH0g; p0jOK: $this->assign("\155\143\150\137\x69\144", $this->mch_id); goto Wuv3n; N01wC: dI3zG: goto dBY18; vp3QV: $group_id = Request::instance()->param("\x69\144", 0); goto TWbCc; TSH0g: $list = Db::name("\171\x62\163\143\x5f\151\155\x61\x67\x65\x73")->alias("\151")->join("\171\x62\x73\x63\x5f\151\155\141\147\145\163\x5f\147\162\x6f\x75\160\40\x67", "\151\56\x67\x72\157\x75\x70\137\x69\x64\x3d\x67\56\x67\162\157\165\x70\x5f\x69\144")->where($where)->order(["\x69\56\151\x6d\x67\x5f\151\144" => "\144\x65\163\143"])->limit(0, intval($page) * $this->page_num)->field("\x69\56\x2a")->select(); goto fni_y; VAneV: $title = "\xe5\x9b\xbe\347\x89\207\xe5\210\x97\xe8\241\xa8"; goto l63BB; UdOih: $title = Db::name("\171\142\x73\143\x5f\151\x6d\x61\147\145\x73\137\x67\162\x6f\x75\160")->where(["\x67\162\x6f\x75\160\137\151\144" => $group_id])->value("\x67\162\157\x75\160\x5f\156\141\x6d\x65"); goto OxTYv; y0beg: if (!($group_id != 0)) { goto WB5kv; } goto C9K_T; p5qFH: $data_end = 2; goto fFgzh; l63BB: $page = Request::instance()->param("\x70\x61\x67\x65", 1); goto vp3QV; IXKY1: $this->assign("\x6c\151\x73\x74", $list); goto p0jOK; zbjab: $where["\147\x2e\x6d\x63\x68\x5f\151\x64"] = $this->mch_id; goto y0beg; fni_y: if (intval($page) * $this->page_num > count($list)) { goto dI3zG; } goto p5qFH; dBY18: $data_end = 1; goto lcy8r; rDDBV: return $this->fetch("\x70\157\162\164\141\154\57\151\155\141\x67\145"); goto es68q; lcy8r: EkGwj: goto SJFFd; fFgzh: goto EkGwj; goto N01wC; JwZ1B: $this->assign("\164\151\164\x6c\x65", $title); goto grO4a; C9K_T: $where["\151\x2e\x67\162\x6f\x75\x70\x5f\151\144"] = $group_id; goto UdOih; TWbCc: $this->assign("\x72\x6f\x75\x74\145", "\x2f\x69\155\141\147\145\57{$group_id}\137\x31\56\150\x74\x6d\154"); goto zbjab; es68q: } public function product() { goto A2wuk; Hmask: $this->assign("\x6d\x63\x68\x5f\151\x64", $this->mch_id); goto QYrfQ; QYrfQ: $this->assign("\x64\x61\x74\141\x5f\145\156\x64", $data_end); goto py0io; py0io: $class_list = Db::name("\x79\142\x73\x63\137\147\x6f\157\x64\163\x5f\x63\141\x74\145")->where(["\155\x63\x68\x5f\151\144" => $this->mch_id, "\x70\x69\x64" => 0, "\x69\x73\x5f\x76\151\x73\151\142\x6c\x65" => 1])->order("\x73\157\x72\x74\x20\141\x73\143")->order("\143\141\164\x65\137\x69\x64\40\144\145\x73\143")->select(); goto ekpiD; FAhM5: $this->assign("\x63\x6c\x61\x73\163\137\151\144", $class_id); goto EtYIN; EJ_6d: UVdGI: goto IrevE; lNalN: $this->assign("\154\151\x73\164", $list); goto Hmask; baTNw: $this->assign("\162\x6f\x75\x74\x65", "\57\x70\x72\x6f\144\165\143\x74\57\x30\137\61\x2e\x68\164\155\x6c"); goto mAsY3; EtYIN: return $this->fetch("\160\x6f\162\164\141\154\x2f\160\x72\x6f\x64\165\143\x74"); goto FP4pu; LkHwd: $data_end = 2; goto xvBDH; ekpiD: $this->assign("\x63\x6c\141\x73\163\x5f\154\151\x73\164", $class_list); goto FAhM5; xvBDH: goto UVdGI; goto EaqHD; IrevE: $this->assign("\160\x61\x67\x65", intval($page) + 1); goto lNalN; EaqHD: Ix4gm: goto OK5t2; fKMMf: $where["\x67\x2e\143\x61\x74\145\137\x69\144"] = ["\x69\156", self::Infiniteproduct($class_id, $this->mch_id)]; goto DCfZN; LkiG9: $class_id = Request::instance()->param("\x63\x6c\x61\x73\x73\137\151\x64", 0); goto baTNw; OK5t2: $data_end = 1; goto EJ_6d; mAsY3: $where["\x67\56\x6d\143\x68\x5f\151\144"] = $this->mch_id; goto CFNhl; DCfZN: wZxYQ: goto cXcdI; A2wuk: $page = Request::instance()->param("\x70\x61\147\145", 1); goto LkiG9; uEgh7: if (!($class_id != 0)) { goto wZxYQ; } goto fKMMf; Tlr6B: if (intval($page) * $this->page_num > count($list)) { goto Ix4gm; } goto LkHwd; cXcdI: $list = Db::name("\171\x62\163\x63\137\x67\x6f\157\144\x73")->alias("\147")->join("\171\x62\163\143\x5f\x69\155\141\147\145\163\x20\151", "\147\x2e\x69\155\141\x67\145\163\40\75\40\x69\56\151\x6d\147\x5f\x69\144", "\114\x45\x46\x54")->where($where)->order("\x67\56\x73\x6f\x72\x74\40\x64\145\x73\x63\x2c\147\56\147\x6f\157\144\x73\137\151\144\x20\x64\145\163\x63")->limit(0, intval($page) * $this->page_num)->field("\147\56\x67\x6f\157\x64\x73\137\151\144\x20\x61\163\40\151\144\54\x67\56\147\x6f\157\x64\x73\137\156\141\x6d\145\40\x61\163\40\x74\151\x74\154\x65\54\x67\x2e\143\x61\164\145\137\151\x64\40\141\163\x20\x63\x6c\141\163\163\137\151\x64\54\147\x2e\x64\145\163\x63\162\x69\x70\164\151\157\156\x20\141\x73\x20\143\157\x6e\x74\145\156\164\x2c\x69\x2e\x69\155\147\x5f\143\157\166\145\162\40\x61\x73\40\151\155\141\147\145")->select(); goto Tlr6B; CFNhl: $where["\147\56\151\163\137\144\x65\154"] = 0; goto uEgh7; FP4pu: } public static function Infiniteproduct($class_id, $mch_id) { goto pvFBr; V8N3L: $rs[] = $class_id; goto NdamX; Vo6Sa: return $rs; goto s2Iev; pvFBr: $rs = array(); goto V8N3L; NdamX: $cate_list = Db::name("\171\142\163\143\137\147\157\x6f\144\163\x5f\x63\x61\x74\x65")->where("\160\x69\144", $class_id)->where("\x6d\x63\150\137\x69\144", $mch_id)->where("\x69\x73\137\166\x69\163\151\142\154\145", 1)->field("\x63\x61\x74\145\x5f\151\x64")->select(); goto Wy8c2; crNLN: SkXgl: goto Vo6Sa; Wy8c2: foreach ($cate_list as $key => $value) { $rs = array_merge($rs, self::Infiniteproduct($value["\x63\141\164\145\137\x69\144"], $mch_id)); Y_vJL: } goto crNLN; s2Iev: } public function product_info() { goto ZIGe3; STFHa: $mip_img = array(); goto WxuYW; LTgNl: goto xa69g; goto fiV7J; T2ZWx: $this->assign("\163\150\x6f\x77", $show); goto vbemi; fYtu0: $desc = preg_replace("\57\163\164\171\154\145\x3d\x22\56\x2a\x3f\42\x2f\151", '', $info["\143\157\x6e\164\145\156\x74"]); goto Ct3qn; klyD2: $desc = str_replace($all_img, $mip_img, $desc); goto HIcjQ; RkMss: $info = Db::name("\171\142\x73\143\x5f\x67\x6f\157\x64\x73")->alias("\x67")->join("\171\142\x73\x63\137\x69\x6d\x61\x67\145\163\40\151", "\147\x2e\151\155\x61\147\145\163\x20\75\x20\151\56\x69\155\x67\137\151\144", "\x4c\105\x46\x54")->where(["\x67\x2e\155\143\x68\x5f\151\x64" => $this->mch_id, "\x67\x2e\147\x6f\x6f\144\x73\x5f\x69\x64" => $id, "\147\x2e\x69\163\137\x64\145\154" => 0])->field("\147\x2e\x67\x6f\x6f\144\x73\137\151\144\40\141\x73\40\151\x64\54\147\x2e\x67\x6f\x6f\x64\x73\137\156\x61\x6d\145\40\x61\x73\40\164\151\x74\154\145\x2c\x67\x2e\x63\141\x74\x65\137\x69\x64\40\141\163\x20\x63\154\x61\x73\163\137\x69\x64\54\147\x2e\x64\x65\163\143\162\x69\x70\x74\x69\x6f\156\40\141\x73\x20\x63\157\156\164\x65\x6e\x74\54\x69\56\x69\155\x67\137\x63\x6f\x76\x65\x72\x20\141\x73\x20\x69\155\141\147\145")->find(); goto FT0mF; Ct3qn: preg_match_all("\x2f\x28\74\151\x6d\x67\x20\x29\50\x5b\x5c\163\x5c\x53\135\52\77\x29\x28\40\134\57\76\51\x2f", $desc, $matche); goto q1KpZ; HIcjQ: $info["\143\157\x6e\164\x65\156\164"] = $desc; goto qMi3o; fiV7J: SVmSt: goto fYtu0; VJXsN: $this->assign("\x72\x6f\x75\164\x65", "\57\160\162\x6f\144\x75\x63\164\x5f\x69\x6e\x66\157\57{$id}\56\x68\164\x6d\154"); goto RkMss; CsHLt: $show = 2; goto LTgNl; qMi3o: $show = 1; goto t5JvZ; WxuYW: foreach ($all_img as $img) { goto qH_AU; xxeYp: preg_match_all("\x2f\50\x73\162\143\x3d\x22\51\x28\133\134\x73\134\123\x5d\52\77\51\x28\42\51\57", $img, $matche); goto lEUsj; wawVi: eKyO3: goto CtDsQ; lEUsj: $src = $matche[2][0]; goto j6lwP; j6lwP: $mip_img[] = "\74\x6d\151\160\x2d\151\155\147\40\143\154\141\163\163\x3d\x22\143\157\x6e\x74\x65\x6e\164\x5f\x69\x6d\147\42\40\163\162\143\75\x22{$src}\x22\x3e\74\x2f\155\151\160\55\x69\155\x67\x3e"; goto wawVi; qH_AU: $matche = array(); goto xxeYp; CtDsQ: } goto yo4f4; t5JvZ: xa69g: goto beDvf; ZIGe3: $id = Request::instance()->param("\151\x64"); goto VJXsN; yo4f4: BQo7K: goto klyD2; FT0mF: if ($info) { goto SVmSt; } goto CsHLt; q1KpZ: $all_img = $matche[0]; goto STFHa; beDvf: $this->assign("\151\156\x66\157", $info); goto T2ZWx; vbemi: return $this->fetch("\160\157\162\164\x61\154\x2f\x70\x72\157\x64\x75\x63\164\137\151\156\x66\x6f"); goto ZCjJF; ZCjJF: } }
