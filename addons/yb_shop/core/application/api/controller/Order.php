<?php
 namespace app\api\controller; use think\Request; use think\Log; use think\Db; require_once BASE_ROOT . "\143\x6f\162\x65\x2f\x61\x70\160\154\x69\x63\x61\164\151\157\x6e\57\141\160\x69\57\143\157\156\x74\162\x6f\154\154\x65\162\x2f\102\141\163\145\103\x6f\x6e\x74\x72\157\154\x6c\x65\x72\x2e\160\150\160"; require_once BASE_ROOT . "\143\157\162\145\57\x61\x70\x70\154\x69\143\141\x74\151\157\x6e\x2f\x61\x70\151\x2f\163\x65\162\x76\151\143\x65\x2f\x41\x72\154\x69\x6b\151\123\145\162\166\151\x63\145\56\x70\x68\x70"; use app\api\service\OrderService; use app\api\service\ArlikiService; class Order extends BaseController { public function PrintTest() { goto SZ5H5; Nab7u: $mch_id = $this->getMchId($app_id); goto STMm9; YuF0f: $order = new OrderService(); goto iawMN; X88dw: return $info; goto KYQ9O; STMm9: $oid = Request::instance()->param("\x6f\x72\x64\145\x72\137\x69\144"); goto YuF0f; iawMN: $info = $order->Print_test($mch_id, $oid); goto X88dw; SZ5H5: $app_id = Request::instance()->param("\151"); goto Nab7u; KYQ9O: } public function CreateOrder() { goto AkPZn; iTPiR: $ser = new ArlikiService($mch_id); goto ENiEn; uydCX: $data["\160\141\x79\x5f\x6d\x6f\x6e\145\x79"] = 0; goto dJfhq; sa61P: return json_encode($rs); goto PEOcj; ZIvlj: $share_data["\x73\x68\141\162\145\137\155\157\x6e\145\x79"] = round(floatval($data["\157\x72\144\145\162\x5f\155\x6f\156\145\x79"]) - floatval($data["\162\145\142\x61\164\x65\137\155\x6f\x6e\x65\171"]) - floatval($data["\x63\157\x75\x70\157\156\137\155\157\156\145\171"]) - floatval($data["\144\151\163\x63\x6f\x75\x6e\164\137\x6d\157\x6e\x65\171"]), 2); goto XkVgU; F9H_w: MO6OH: goto iTPiR; Pli1L: $data["\141\143\164\x69\166\151\x74\x79\x5f\x6f\x72\144\145\162\137\164\x79\160\145"] = 4; goto TiCi_; u3gMN: $rs["\x6d\163\147"] = $info["\x6d\163\x67"]; goto b8abx; TiCi_: gDZv1: goto zCBRP; iRYtM: $data = ["\x6f\162\144\145\162\137\x6e\x6f" => $this->createOrderNo(), "\157\x75\164\x5f\164\x72\141\x64\x65\x5f\x6e\x6f" => $this->createOutTradeNo(), "\160\x61\171\137\x74\171\x70\x65" => Request::instance()->param("\160\141\x79\x5f\x74\x79\x70\x65", "\61"), "\x73\x68\151\160\x70\151\156\x67\137\x74\x79\160\x65" => Request::instance()->param("\x73\150\x69\x70\x70\151\156\147\x5f\x74\x79\160\145", "\61"), "\x73\150\x69\x70\160\x69\x6e\147\x5f\x6d\157\156\145\x79" => Request::instance()->param("\163\150\151\x70\x70\151\156\147\x5f\x6d\157\x6e\x65\171", 0), "\x73\x68\151\x70\160\x69\x6e\x67\x5f\143\x6f\155\x70\x61\x6e\171\x5f\x69\x64" => Request::instance()->param("\x73\x68\151\160\x70\151\x6e\147\x5f\x63\157\155\x70\141\156\x79\x5f\151\144", 0), "\x62\165\171\145\x72\x5f\x6d\x65\x73\x73\141\147\x65" => Request::instance()->param("\x62\165\x79\x65\x72\137\155\145\163\x73\x61\147\x65", ''), "\x72\x65\143\145\151\166\x65\162\137\x7a\x69\x70" => Request::instance()->param("\x72\x65\x63\x65\x69\x76\145\162\137\x7a\151\160"), "\144\151\x73\x63\157\x75\x6e\x74\137\x6d\x6f\x6e\x65\x79" => Request::instance()->param("\x64\x69\163\x63\157\x75\x6e\x74\137\x6d\157\x6e\x65\x79", "\60\x2e\60\60"), "\143\x6f\x75\x70\x6f\x6e\137\151\x64" => Request::instance()->param("\x63\x6f\x75\160\x6f\156\x5f\x69\144", 0), "\143\157\x75\x70\157\156\137\x6d\x6f\x6e\145\171" => Request::instance()->param("\143\157\165\x70\x6f\x6e\x5f\155\157\x6e\145\171", "\x30\x2e\x30\x30"), "\162\x65\142\x61\x74\145\137\155\x6f\156\x65\x79" => Request::instance()->param("\x72\145\142\x61\164\x65\x5f\155\x6f\x6e\145\x79", "\60\56\x30\x30"), "\141\x63\164\x69\166\151\x74\171\137\157\x72\144\x65\x72\137\164\x79\160\145" => Request::instance()->param("\141\143\164\x69\166\151\164\171\x5f\157\162\x64\145\162\137\x74\x79\x70\145", 0), "\x63\x72\x65\x61\x74\145\x5f\x74\x69\155\x65" => time(), "\142\x75\x79\x65\162\x5f\151\x64" => Request::instance()->param("\142\165\171\x65\162\137\x69\x64"), "\x75\163\x65\x72\137\156\x61\155\x65" => Request::instance()->param("\165\163\x65\x72\x5f\x6e\141\x6d\x65"), "\x72\145\143\x65\151\166\145\162\137\x6d\157\142\x69\x6c\x65" => Request::instance()->param("\x70\x68\x6f\x6e\x65"), "\162\x65\x63\x65\151\166\x65\162\x5f\x61\x72\x65\x61" => Request::instance()->param("\x61\x72\x65\141", 0), "\x72\145\x63\145\x69\x76\x65\x72\x5f\141\x64\x64\x72\x65\x73\163" => Request::instance()->param("\141\144\x64\162\x65\163\x73", "\xe6\227\240"), "\162\145\x63\x65\x69\166\145\162\x5f\x6e\x61\155\x65" => Request::instance()->param("\x63\157\156\x73\151\x67\x6e\145\x72"), "\157\162\x64\145\162\137\155\x6f\x6e\x65\x79" => Request::instance()->param("\157\162\x64\x65\x72\137\x6d\x6f\156\x65\171"), "\163\153\165\137\151\x64" => Request::instance()->param("\x73\x6b\x75\x5f\x69\x64"), "\x6d\x63\x68\x5f\x69\x64" => $mch_id, "\155\x61\151\154\x69\156\147\x5f\164\x79\x70\x65" => Request::instance()->param("\155\141\151\154\x69\x6e\x67\x5f\x74\x79\160\145", 1), "\x6d\145\x6e\x74\x69\x6f\156\x5f\164\x69\x6d\145" => Request::instance()->param("\x6d\145\x6e\164\x69\x6f\x6e\137\164\151\155\145")]; goto ZIvlj; gqQrz: $rs["\151\156\x66\157"] = $info["\151\156\x66\157"]; goto sa61P; xdBo3: kw1ZJ: goto ohp8G; zCBRP: $rule = [["\142\x75\171\145\162\137\151\x64", "\x72\145\x71\165\151\x72\145\x7c\156\x75\x6d\142\x65\162"], ["\165\x73\x65\162\x5f\156\141\155\x65", "\162\x65\x71\165\151\x72\145"], ["\x6d\141\151\154\x69\x6e\x67\137\x74\x79\160\x65", "\x72\x65\161\165\151\x72\x65"], ["\x72\x65\x63\145\151\166\x65\x72\x5f\155\157\142\x69\154\145", "\x72\145\x71\165\151\x72\x65\x7c\156\x75\x6d\x62\x65\162\x7c\x6c\x65\x6e\x67\164\x68\72\x31\x31"], ["\162\x65\143\145\x69\x76\x65\x72\137\x6e\x61\155\x65", "\162\x65\x71\165\151\162\145"], ["\x6f\x72\x64\145\x72\137\x6d\157\x6e\x65\171", "\x72\x65\x71\165\151\x72\145\174\156\x75\x6d\142\145\162"], ["\160\x61\171\137\155\157\x6e\145\171", "\162\x65\161\x75\x69\x72\145\174\x6e\x75\155\x62\x65\x72"], ["\163\153\x75\137\151\x64", "\162\x65\161\x75\151\162\145"], ["\x6d\143\150\137\151\144", "\x72\145\x71\x75\x69\x72\x65", "\344\270\215\345\xad\230\345\234\250\345\225\x86\xe6\x88\267"]]; goto y3JmB; kWY0v: if (empty($result)) { goto kw1ZJ; } goto R4m2Z; HfV8_: $info = $order->createOrder($data, $share_data); goto cZrkV; dJfhq: HmAKJ: goto nDvc1; b8abx: return json_encode($rs); goto Y29Kf; Y29Kf: goto d9TIm; goto F9H_w; PEOcj: d9TIm: goto HrLOI; ENiEn: $ser->send_sms($data["\x6f\x72\144\145\x72\x5f\x6e\157"]); goto gqQrz; PH5fc: if (!(floatval($data["\x70\141\x79\137\x6d\157\x6e\x65\x79"]) < 0)) { goto HmAKJ; } goto uydCX; MaSNB: $share_data["\157\x72\144\x65\162\x5f\x67\157\157\x64\163"] = $data["\x73\153\165\137\x69\x64"]; goto d125_; d125_: $data["\x70\x61\x79\137\155\157\x6e\x65\x79"] = round(floatval($data["\157\162\144\x65\162\137\155\157\156\x65\x79"]) - floatval($data["\x72\x65\x62\141\164\145\x5f\155\157\156\145\x79"]) + floatval($data["\x73\x68\151\x70\x70\151\156\147\137\x6d\x6f\156\x65\x79"]) - floatval($data["\143\157\165\x70\157\x6e\137\x6d\x6f\x6e\x65\x79"]) - floatval($data["\x64\151\x73\x63\157\165\156\164\137\x6d\157\156\145\171"]), 2); goto PH5fc; qBPSO: $rs["\155\x73\x67"] = $result; goto yLvuz; cZrkV: if ($info["\x65\162\x72\137\143\157\x64\x65"] == 0) { goto MO6OH; } goto jvcZQ; Rk0R9: $app_id = Request::instance()->param("\151"); goto jWDHY; yLvuz: return json_encode($rs); goto xdBo3; jvcZQ: $rs["\143\x6f\144\145"] = 1; goto u3gMN; ohp8G: $order = new OrderService(); goto HfV8_; R4m2Z: $rs["\x63\x6f\144\145"] = 1; goto qBPSO; nDvc1: if (!($data["\144\151\163\143\x6f\165\156\x74\x5f\155\157\156\145\171"] != "\60\x2e\x30\x30" && $data["\143\157\165\160\x6f\x6e\x5f\x6d\x6f\156\x65\171"] != "\60\x2e\x30\60")) { goto gDZv1; } goto Pli1L; jWDHY: $mch_id = $this->getMchId($app_id); goto iRYtM; AkPZn: $rs = array("\143\x6f\144\x65" => 0, "\x69\x6e\x66\157" => array()); goto Rk0R9; XkVgU: $share_data["\x64\151\x73\143\x6f\165\156\x74\137\x6d\157\x6e\145\x79"] = round(floatval($data["\162\x65\142\x61\164\x65\x5f\155\157\156\x65\x79"]) + floatval($data["\x63\157\x75\x70\157\x6e\x5f\155\x6f\156\x65\x79"]) + floatval($data["\144\151\x73\143\157\x75\x6e\x74\137\155\x6f\156\x65\x79"]), 2); goto MaSNB; y3JmB: $result = $this->checkParam($rule, $data); goto kWY0v; HrLOI: } public function OrderList() { goto oTJ1L; dXA9G: $data["\x6f\x72\x64\145\162\137\x73\x74\x61\164\x75\163"] = ["\151\156", [4, 5]]; goto J4l2k; Nm59h: if (empty($result)) { goto vNX0x; } goto wSvLM; uF8s4: $result = $this->checkParam($rule, $data); goto Nm59h; Sk0Qp: return json_encode($rs); goto HxP3F; jXVcz: if ($status == 4) { goto uyXZ9; } goto zKGjz; mNOfs: $rule = [["\142\165\171\145\x72\x5f\151\x64", "\162\145\161\165\x69\x72\145", "\x75\x69\144\xe4\270\215\xe8\203\275\xe4\xb8\xba\347\251\xba"], ["\155\143\x68\x5f\151\x64", "\162\145\x71\165\151\x72\145", "\344\270\x8d\345\255\x98\xe5\x9c\250\345\x95\206\346\210\xb7"]]; goto C7w83; IlFpA: goto dlZUa; goto mMaeG; J4l2k: dlZUa: goto sZe2u; YbRQu: $data["\x6f\162\x64\145\x72\x5f\x73\x74\141\164\165\x73"] = ["\x3c\x3e", "\55\x31"]; goto SvyKl; wSvLM: $rs["\143\x6f\x64\x65"] = 1; goto Lv4oQ; SdVAO: $info = $order->orderList($data, $page); goto W2HQp; M98xS: $uid = Request::instance()->param("\x75\x69\x64"); goto Eu0bh; GhQwe: $order = new OrderService(); goto SdVAO; Eu0bh: $status = Request::instance()->param("\x73\x74\141\x74\x75\x73", null); goto y4F9L; Lv4oQ: $rs["\x6d\x73\x67"] = $result; goto Sk0Qp; in1dX: iB0EQ: goto jXVcz; IkJ54: $app_id = Request::instance()->param("\x69"); goto OJzkG; mPThM: return json_encode($rs); goto Ih7ym; OJzkG: $mch_id = $this->getMchId($app_id); goto mNOfs; sZe2u: fuouj: goto uF8s4; HxP3F: vNX0x: goto GhQwe; zKGjz: $data["\x6f\x72\x64\145\x72\137\x73\164\x61\x74\x75\x73"] = $status; goto IlFpA; ZRFlI: if ($status != null) { goto iB0EQ; } goto YbRQu; C7w83: $data = ["\x62\165\171\145\162\x5f\151\x64" => $uid, "\155\x63\150\x5f\151\x64" => $mch_id]; goto ZRFlI; oTJ1L: $rs = array("\143\157\144\145" => 0, "\151\x6e\x66\157" => array()); goto M98xS; y4F9L: $page = Request::instance()->param("\x70\141\147\145", 1); goto IkJ54; mMaeG: uyXZ9: goto dXA9G; SvyKl: goto fuouj; goto in1dX; W2HQp: $rs["\151\156\146\x6f"] = $info; goto mPThM; Ih7ym: } public function GetOrder() { goto MxRPk; uyC_X: return json_encode($rs); goto kgmOA; ifNfK: $result = $this->checkParam($rule, $data); goto q9DAF; MxRPk: $rs = array("\x63\157\144\x65" => 0, "\151\156\146\157" => array()); goto r3auh; C9D0o: return json_encode($rs); goto jAUyF; qcyua: $mch_id = $this->getMchId($app_id); goto itdA9; Gy52x: $rs["\x6d\163\147"] = $result; goto C9D0o; fr1IN: $order = new OrderService(); goto K3UtS; jAUyF: OSffs: goto fr1IN; q9DAF: if (empty($result)) { goto OSffs; } goto qTdVv; r3auh: $app_id = Request::instance()->param("\x69"); goto qcyua; K3UtS: $info = $order->getOrder($data); goto Jno8e; itdA9: $rule = [["\142\x75\171\x65\162\x5f\151\144", "\162\145\x71\x75\x69\162\145", "\x75\x69\144\344\xb8\215\350\x83\xbd\344\xb8\xba\347\251\272"]]; goto Ay3vh; qTdVv: $rs["\x63\x6f\144\x65"] = 1; goto Gy52x; Ay3vh: $data = ["\x62\165\171\145\x72\137\x69\144" => Request::instance()->param("\142\165\x79\145\x72\x5f\151\144"), "\157\x72\x64\145\x72\x5f\x69\144" => Request::instance()->param("\157\x72\144\x65\x72\x5f\151\144"), "\x6d\143\x68\137\151\x64" => $mch_id]; goto ifNfK; Jno8e: $rs["\151\x6e\x66\x6f"] = $info; goto uyC_X; kgmOA: } public function SignOrder() { goto WtOFU; mNpAc: $rule = [["\142\x75\171\x65\x72\x5f\151\144", "\x72\145\161\x75\151\x72\145"], ["\157\162\x64\x65\x72\137\x69\x64", "\162\x65\x71\165\151\x72\145"], ["\155\143\150\x5f\x69\x64", "\x72\x65\161\x75\151\x72\145"]]; goto dR7OM; Ju4cb: $result = $this->checkParam($rule, $data); goto LB2WT; gNkKZ: $rs["\143\157\x64\x65"] = 1; goto Yr4rn; clgAG: rmv41: goto MYHS_; WtOFU: $app_id = Request::instance()->param("\x69"); goto V1GtC; MYHS_: $order = new OrderService(); goto T2e6F; LB2WT: if (empty($result)) { goto rmv41; } goto gNkKZ; vMa6d: return json_encode($rs); goto clgAG; V1GtC: $mch_id = $this->getMchId($app_id); goto mNpAc; Yr4rn: $rs["\155\x73\x67"] = $result; goto vMa6d; T2e6F: $info = $order->signOrder($data); goto vZN0G; dR7OM: $data = ["\x62\165\x79\145\x72\x5f\151\x64" => Request::instance()->param("\142\165\171\145\162\x5f\151\x64"), "\157\x72\x64\x65\x72\137\x69\144" => Request::instance()->param("\157\162\x64\145\x72\x5f\x69\144"), "\x6f\x72\144\x65\162\137\x73\164\141\164\165\163" => 2, "\x6d\143\x68\137\x69\x64" => $mch_id]; goto Ju4cb; vZN0G: return $info; goto mgeWA; mgeWA: } public function CancelOrder() { goto YbuAK; YXONo: return json_encode($rs); goto bh3Hi; LiAR1: $rs["\x6d\x73\147"] = $result; goto JfGXn; xdQ18: $order = new OrderService(); goto OBzOB; OBzOB: $info = $order->cancelOrder($data); goto cR7Ye; j0sBf: $rs["\x6d\x73\147"] = "\350\xae\242\xe5\215\225\345\x8f\226\xe6\xb6\x88\345\xa4\xb1\350\xb4\xa5"; goto LTQtn; jO5pp: if (empty($result)) { goto w1Dht; } goto anR3f; anR3f: $rs["\x63\157\x64\145"] = 1; goto LiAR1; zGiN1: $rs["\x63\157\144\x65"] = 1; goto j0sBf; V55t4: $rs["\151\x6e\x66\x6f"] = $info; goto YXONo; LTQtn: return json_encode($rs); goto ORkfm; IJ9wP: $result = $this->checkParam($rule, $data); goto jO5pp; AvWuv: $rule = [["\142\165\171\145\x72\x5f\151\144", "\162\145\161\x75\x69\162\145"], ["\157\x72\x64\145\x72\x5f\x69\x64", "\162\145\161\165\151\x72\145"]]; goto NTGpi; JfGXn: return json_encode($rs); goto cTHjD; cTHjD: w1Dht: goto xdQ18; YbuAK: $rs = array("\x63\157\144\x65" => 0, "\151\156\x66\157" => array()); goto AvWuv; NTGpi: $data = ["\142\165\x79\145\x72\x5f\x69\x64" => Request::instance()->param("\142\165\x79\x65\x72\x5f\x69\x64"), "\157\162\x64\145\x72\x5f\151\x64" => Request::instance()->param("\x6f\x72\x64\x65\x72\137\x69\x64"), "\157\x72\x64\x65\162\x5f\163\x74\141\x74\x75\163" => 0]; goto IJ9wP; cR7Ye: if (!empty($info)) { goto ZUy9I; } goto zGiN1; ORkfm: ZUy9I: goto V55t4; bh3Hi: } public function DelOrder() { goto gyvq2; SpCnb: $info = $order->delOrder($data); goto iwD2C; OnTI0: return json_encode($rs); goto brQ3n; MtSbb: $rs["\x63\x6f\144\145"] = 1; goto ozliT; BW_AU: $rs["\x6d\163\x67"] = $result; goto OnTI0; LJMjW: $data = ["\142\165\x79\x65\x72\137\151\144" => Request::instance()->param("\142\x75\x79\x65\162\x5f\x69\144"), "\157\x72\144\145\162\137\151\144" => Request::instance()->param("\x6f\162\x64\145\162\x5f\x69\144"), "\157\x72\x64\x65\162\x5f\163\x74\141\x74\x75\163" => ["\x69\156", [0, -1, 3, 5]]]; goto u0uc3; jL2ED: return json_encode($rs); goto RbOEm; gW9Px: if (empty($result)) { goto p659F; } goto m22VE; a7a05: $rs["\x69\156\x66\x6f"] = $info; goto x2aV_; m22VE: $rs["\143\x6f\144\145"] = 1; goto BW_AU; iwD2C: if (!empty($info)) { goto XPkOs; } goto MtSbb; RbOEm: XPkOs: goto a7a05; brQ3n: p659F: goto gebpk; gebpk: $order = new OrderService(); goto SpCnb; nbEm4: $rule = [["\142\x75\171\145\x72\137\x69\x64", "\x72\x65\x71\x75\151\162\x65"], ["\x6f\162\144\x65\x72\x5f\x69\x64", "\162\145\x71\165\x69\x72\145"]]; goto LJMjW; ozliT: $rs["\155\x73\147"] = "\350\xae\xa2\345\x8d\225\xe5\210\xa0\xe9\x99\xa4\345\244\xb1\xe8\xb4\xa5"; goto jL2ED; gyvq2: $rs = array("\143\x6f\144\145" => 0, "\x69\x6e\146\157" => array()); goto nbEm4; x2aV_: return json_encode($rs); goto DY7Od; u0uc3: $result = $this->checkParam($rule, $data); goto gW9Px; DY7Od: } public function RefundOrder() { goto XqtZN; rPyl1: $order = new OrderService(); goto BLHYX; bU44F: $rule = [["\x62\165\171\x65\x72\x5f\x69\144", "\162\x65\161\x75\151\x72\x65"], ["\x6f\x72\x64\145\162\137\x69\x64", "\x72\145\x71\165\x69\162\145"]]; goto bWCDw; P9HRS: $rs["\143\157\x64\145"] = 1; goto uGQwE; DgpRp: if (empty($result)) { goto igG6N; } goto P9HRS; Fd4mm: return json_encode($rs); goto ubKRs; dKEYD: $rs["\143\157\x64\x65"] = 1; goto radgd; iqOdl: return json_encode($rs); goto d33AV; rz0mm: igG6N: goto wAUwp; LPrFf: return json_encode($rs); goto rz0mm; d33AV: w1YEg: goto kML9R; kML9R: $rs["\151\x6e\146\157"] = $info; goto Fd4mm; wAUwp: $apply_refund = Request::instance()->param("\x61\x70\x70\x6c\171\x5f\x72\x65\146\165\156\144", ''); goto rPyl1; radgd: $rs["\x6d\163\x67"] = "\xe8\256\xa2\345\x8d\225\351\200\x80\xe6\xac\xbe\xe5\244\xb1\350\xb4\xa5"; goto iqOdl; bWCDw: $data = ["\x62\165\x79\145\162\x5f\151\x64" => Request::instance()->param("\142\165\171\145\162\x5f\x69\x64"), "\x6f\x72\x64\x65\x72\x5f\151\x64" => Request::instance()->param("\x6f\162\144\x65\x72\x5f\x69\x64"), "\157\x72\144\145\162\137\163\164\x61\164\x75\x73" => ["\151\x6e", [1, 2, 3]]]; goto bTXzC; XqtZN: $rs = array("\143\x6f\144\145" => 0, "\x69\156\x66\157" => array()); goto bU44F; aaviX: if (!empty($info)) { goto w1YEg; } goto dKEYD; bTXzC: $result = $this->checkParam($rule, $data); goto DgpRp; uGQwE: $rs["\x6d\163\147"] = $result; goto LPrFf; BLHYX: $info = $order->refundOrder($data, $apply_refund); goto aaviX; ubKRs: } public function CancelRefundorder() { goto mApPO; avr2G: Ww4T0: goto N7QRc; gp5KT: if (!$res) { goto PCk0O; } goto hLZbB; vrImO: $udata["\162\145\146\x75\156\x64\x5f\x73\164\x61\164\165\163"] = 3; goto FIoco; lgsGJ: if ($data["\x74\x79\x70\x65"] == 3) { goto LbI8T; } goto Al77W; cG532: $rs["\155\163\x67"] = "\xe8\xae\xa2\345\x8d\225\xe5\217\226\346\266\x88\xe9\x80\x80\346\254\276\346\x88\220\xe5\x8a\x9f"; goto cLaKq; iOt7w: switch ($data["\164\171\x70\145"]) { case 1: $table = "\171\142\163\x63\137\157\x72\144\145\162"; goto fCx_u; case 2: $table = "\171\142\x73\x63\x5f\142\x61\x72\147\141\x69\x6e\137\x6f\162\144\145\x72"; goto fCx_u; case 3: $table = "\x79\142\x73\x63\137\160\x74\137\x6f\162\144\145\162\x73"; goto fCx_u; case 4: $table = "\171\x62\163\143\x5f\141\x63\164\x69\x76\x69\x74\x79\137\157\x72\x64\x65\162"; goto fCx_u; } goto G1OHb; FIoco: $res = Db::name("\x79\142\x73\143\x5f\157\162\144\x65\x72\x5f\x72\x65\146\x75\156\x64")->where("\x69\144", $info["\151\144"])->update($udata); goto gp5KT; Idr0s: xg4B4: goto iOt7w; WLyTq: $rs["\x6d\x73\x67"] = $result; goto OdO_C; ohqCt: if (!empty($info)) { goto xg4B4; } goto COyvz; ytaEg: PCk0O: goto mBOlc; hLZbB: Db::name($table)->where($cond)->update(["\x6f\162\144\x65\162\137\163\x74\x61\164\x75\163" => $status]); goto GOzoq; DNfiv: $rule = [["\142\x75\171\145\162\x5f\151\x64", "\x72\145\161\x75\151\162\x65"], ["\157\162\144\145\162\137\x69\x64", "\162\145\161\165\151\x72\x65"], ["\164\171\160\145", "\x72\x65\x71\165\151\x72\x65"]]; goto h3xoR; mBOlc: $rs["\143\157\144\x65"] = 1; goto WYcVq; COyvz: $rs["\143\x6f\x64\x65"] = 1; goto N5drR; NxkOI: $ct = Db::name($table)->where($cond)->value("\162\x65\146\x75\x6e\x64\x5f\163\164\x61\164\165\163"); goto lgsGJ; NQVol: LbI8T: goto APUIw; CDVbc: $udata["\162\x65\146\x75\156\x64\x5f\162\145\x61\163\x6f\x6e"] = "\xe7\224\xa8\xe6\210\267\xe5\217\226\xe6\xb6\210\xe9\x80\200\346\xac\276"; goto vrImO; G1OHb: dv0ZU: goto A_zuK; OdO_C: return json_encode($rs); goto avr2G; N7QRc: $info = Db::name("\171\x62\x73\x63\137\157\x72\144\x65\162\x5f\x72\x65\146\x75\156\144")->where(["\x74\x79\160\x65" => $data["\x74\x79\x70\145"], "\157\x72\x64\145\x72\137\x69\144" => $data["\157\162\144\145\162\137\x69\144"], "\x75\x69\x64" => $data["\x62\x75\x79\x65\162\137\x69\144"]])->order("\x69\144", "\x64\145\x73\x63")->find(); goto ohqCt; cLaKq: return json_encode($rs); goto ytaEg; A_zuK: fCx_u: goto Sfagc; zrTsk: return json_encode($rs); goto uYyN5; h3xoR: $data = ["\142\x75\171\145\x72\x5f\x69\x64" => Request::instance()->param("\142\x75\171\x65\x72\x5f\151\x64"), "\157\x72\x64\145\x72\137\151\144" => Request::instance()->param("\157\x72\144\x65\162\137\x69\144"), "\x74\171\160\145" => Request::instance()->param("\x74\171\x70\x65")]; goto Z0661; GOzoq: $rs["\143\x6f\x64\145"] = 0; goto cG532; APUIw: $status = intval($ct) == 0 ? 2 : intval($ct); goto Gp0hW; Gp0hW: hs_PG: goto CDVbc; rSwpt: goto hs_PG; goto NQVol; WYcVq: $rs["\x6d\163\147"] = "\xe8\xae\xa2\345\215\225\345\217\x96\xe6\xb6\x88\xe9\x80\200\xe6\254\xbe\xe5\xa4\261\350\264\xa5"; goto zrTsk; Sfagc: $cond = $data["\164\x79\160\145"] == 3 ? ["\x69\x64" => $data["\x6f\x72\x64\145\162\x5f\151\144"]] : ["\x6f\162\144\x65\x72\137\x69\x64" => $data["\157\162\x64\145\162\x5f\151\x64"]]; goto NxkOI; Z0661: $result = $this->checkParam($rule, $data); goto esba6; myDJH: return json_encode($rs); goto Idr0s; esba6: if (empty($result)) { goto Ww4T0; } goto k0i33; N5drR: $rs["\x6d\x73\147"] = "\xe8\xae\242\xe5\215\225\345\x8f\226\xe6\266\210\351\x80\x80\346\xac\xbe\xe5\244\xb1\xe8\264\245"; goto myDJH; k0i33: $rs["\143\x6f\144\145"] = 1; goto WLyTq; mApPO: $rs = array("\143\157\x64\145" => 0, "\151\156\x66\157" => array()); goto DNfiv; Al77W: $status = intval($ct) == 0 ? 1 : intval($ct); goto rSwpt; uYyN5: } public function RefundList() { goto RQbx3; Z92sy: return json_encode($rs); goto ShIUt; OIKnH: return json_encode($rs); goto N5DoJ; bpHVO: $rs["\155\163\x67"] = "\xe6\x9a\x82\346\x97\xa0\346\x95\260\346\215\256"; goto Z92sy; zePZ1: if (!empty($info)) { goto i9uAi; } goto qENSU; M4iZh: $info = $order->RefundList($data); goto zePZ1; At2a9: $mch_id = $this->getMchId($app_id); goto fiOmZ; ShIUt: i9uAi: goto DsAHM; LN4XQ: $rs["\x6d\163\147"] = $result; goto nAMsT; RQbx3: $rs = array("\x63\x6f\144\x65" => 0, "\x69\156\x66\x6f" => array()); goto q16Zz; AZlGx: $rs["\x63\157\144\x65"] = 1; goto LN4XQ; qENSU: $rs["\x63\x6f\144\x65"] = 1; goto bpHVO; q16Zz: $app_id = Request::instance()->param("\x69"); goto At2a9; SAnfe: $result = $this->checkParam($rule, $data); goto JXOVy; FPGCU: $data = ["\157\162\x64\x65\x72\x5f\x69\x64" => Request::instance()->param("\x6f\162\x64\145\x72\x5f\151\x64"), "\x74\171\160\x65" => Request::instance()->param("\164\x79\160\x65", 1), "\165\x69\x64" => Request::instance()->param("\x75\151\x64"), "\155\143\x68\x5f\151\x64" => $mch_id]; goto SAnfe; DsAHM: $rs["\151\x6e\146\157"] = $info; goto OIKnH; MlEJx: $order = new OrderService(); goto M4iZh; fiOmZ: $rule = [["\x6d\143\150\x5f\x69\144", "\x72\145\161\165\151\162\145"], ["\157\x72\x64\x65\162\x5f\x69\x64", "\x72\x65\161\165\x69\162\x65"], ["\165\151\x64", "\162\145\x71\x75\x69\162\145"]]; goto FPGCU; nAMsT: return json_encode($rs); goto X5iut; X5iut: wvmkl: goto MlEJx; JXOVy: if (empty($result)) { goto wvmkl; } goto AZlGx; N5DoJ: } public function GetOrderDetail() { goto vF6vN; Ls5Js: Tg301: goto iY4dJ; vF6vN: $rs = array("\143\x6f\x64\x65" => 0, "\x69\156\146\x6f" => array()); goto SSXvn; WoKq9: $data = ["\157\162\x64\x65\x72\x5f\156\157" => Request::instance()->param("\157\162\144\x65\x72\x5f\x6e\157"), "\164\x79\x70\145" => Request::instance()->param("\x74\171\x70\145"), "\x6d\x63\x68\x5f\151\x64" => $mch_id]; goto jucLg; UiE6T: $rs["\x63\157\x64\145"] = 1; goto wsOmr; feZzj: $rs["\143\157\x64\145"] = 1; goto UOYhc; Xd5Mp: M6H4X: goto UPDjp; K6dQT: if (empty($detail_info["\x6d\163\x67"])) { goto M6H4X; } goto feZzj; IvsgX: $rs["\x6d\x73\x67"] = "\350\xae\xa2\xe5\215\x95\xe7\xb1\xbb\345\x9e\x8b\351\224\231\xe8\xaf\257"; goto lLQtw; wsOmr: $rs["\155\x73\x67"] = $result; goto lIoQC; SSXvn: $app_id = Request::instance()->param("\151"); goto WkUD8; JLPi0: FF09w: goto DQnTr; jucLg: $result = $this->checkParam($rule, $data); goto VLZH0; lIoQC: return json_encode($rs); goto JLPi0; WkUD8: $mch_id = $this->getMchId($app_id); goto VGFjG; UPDjp: $rs["\x69\x6e\x66\x6f"] = $detail_info; goto NUqX9; VLZH0: if (empty($result)) { goto FF09w; } goto UiE6T; f3HCn: $detail_info = $order->getOrderDetail($data); goto K6dQT; lLQtw: return json_encode($rs); goto Ls5Js; NUqX9: return json_encode($rs); goto xsSmF; UOYhc: $rs["\x6d\163\x67"] = $detail_info["\x6d\163\x67"]; goto zYerM; DQnTr: if (in_array($data["\x74\x79\x70\x65"], ["\x74", "\153", "\160", "\155"])) { goto Tg301; } goto o2yMp; zYerM: return json_encode($rs); goto Xd5Mp; VGFjG: $rule = [["\x6f\x72\144\x65\x72\x5f\156\157", "\x72\145\161\x75\151\x72\x65"], ["\x74\x79\x70\x65", "\162\145\161\165\x69\x72\x65"]]; goto WoKq9; iY4dJ: $order = new OrderService(); goto f3HCn; o2yMp: $rs["\143\x6f\x64\x65"] = 1; goto IvsgX; xsSmF: } public function heXiaoOrder() { goto foGQk; hM8DX: $rs["\143\157\x64\x65"] = 1; goto vh8II; vh8II: $rs["\155\163\x67"] = $res["\155\x73\147"]; goto gzetX; NPjzP: return json_encode($rs); goto IDTRR; foGQk: $rs = array("\143\157\144\145" => 0, "\x69\x6e\146\157" => array()); goto v36oc; pEpX3: if (empty($res["\x6d\163\147"])) { goto Lqx1Y; } goto hM8DX; JbFF_: return json_encode($rs); goto hkm2a; x1Vfc: Lqx1Y: goto CqQTS; ZzTne: $result = $this->checkParam($rule, $data); goto rN7yN; QNAGW: $data = ["\157\162\x64\x65\162\137\151\144" => Request::instance()->param("\157\x72\x64\x65\162\x5f\x69\144"), "\164\x79\x70\x65" => Request::instance()->param("\164\171\160\x65"), "\x75\151\x64" => Request::instance()->param("\x75\151\144"), "\155\143\x68\x5f\151\x64" => $mch_id]; goto ZzTne; oR4XX: $rs["\x63\x6f\144\x65"] = 1; goto iEjeD; iEjeD: $rs["\x6d\x73\x67"] = $result; goto NPjzP; nwML3: $rs["\x63\157\x64\x65"] = 1; goto SZTSK; v36oc: $app_id = Request::instance()->param("\151"); goto EP6pd; IDTRR: tkmGp: goto idZIG; v6Ea2: $order = new OrderService(); goto X5u1j; CqQTS: $rs["\151\156\x66\x6f"]["\164\x69\155\x65"] = $res["\x74\151\155\145"]; goto UGFo4; EP6pd: $mch_id = $this->getMchId($app_id); goto RKQlZ; hkm2a: nSTNs: goto v6Ea2; idZIG: if (in_array($data["\x74\171\x70\x65"], ["\x74", "\153", "\160", "\x6d"])) { goto nSTNs; } goto nwML3; X5u1j: $res = $order->heXiaoOrder($data); goto pEpX3; rN7yN: if (empty($result)) { goto tkmGp; } goto oR4XX; RKQlZ: $rule = [["\x6f\162\x64\x65\x72\x5f\151\144", "\162\145\x71\165\x69\162\x65"], ["\x74\171\x70\145", "\162\x65\x71\165\151\162\145"], ["\x75\x69\x64", "\162\145\161\x75\151\162\x65"]]; goto QNAGW; SZTSK: $rs["\155\x73\147"] = "\350\256\xa2\xe5\x8d\x95\347\xb1\xbb\xe5\236\213\xe9\224\231\xe8\xaf\257"; goto JbFF_; UGFo4: return json_encode($rs); goto zGhcm; gzetX: return json_encode($rs); goto x1Vfc; zGhcm: } public function express() { goto odhhp; IGfzn: if (!empty($order_id)) { goto iMjKj; } goto VZoJ1; VZoJ1: $res["\143\157\144\x65"] = 0; goto ZjIaL; ZW8Sz: return json_encode($res); goto H23eN; gZSMI: $order_id = $data["\157\162\x64\x65\x72\137\x69\144"]; goto IGfzn; ZjIaL: $res["\155\145\x73\163\141\147\x65"] = "\xe8\256\xa2\345\215\225\xe5\xbc\x82\xe5\xb8\xb8\x2c\xe8\xaf\267\xe6\240\270\345\256\x9e"; goto RH07h; gNTLL: iMjKj: goto yZTFD; baPA8: ohM0n: goto UOy2m; kHN2V: $result = $this->checkParam($rule, $data); goto r14lt; XAkCx: $data = ["\x6f\162\144\145\x72\x5f\x69\144" => Request::instance()->param("\x6f\x72\144\x65\x72\137\x69\x64"), "\164\171\x70\145" => Request::instance()->param("\164\x79\x70\145", 1), "\155\143\x68\137\151\x64" => $mch_id]; goto kHN2V; xtP9X: $rule = [["\155\x63\150\137\x69\144", "\x72\x65\161\x75\x69\162\145"], ["\x6f\162\144\145\162\x5f\151\x64", "\x72\x65\161\165\x69\x72\x65"]]; goto XAkCx; yZTFD: $ser = new ArlikiService($mch_id); goto ofOZf; UOy2m: $res["\x63\157\144\x65"] = 0; goto bXy8r; G_KOv: xajFb: goto ckdXM; H23eN: eas1m: goto gZSMI; RH07h: goto xajFb; goto gNTLL; Ktijl: oCB3y: goto G_KOv; bXy8r: $res["\155\x65\163\x73\x61\147\145"] = "\xe5\x8d\225\xe5\217\267\xe5\xbc\202\xe5\270\xb8\54\xe8\xaf\267\xe6\xa0\xb8\345\256\x9e"; goto Ktijl; ahIFO: $app_id = Request::instance()->param("\151"); goto N24Mb; u6gVm: if (empty($express)) { goto ohM0n; } goto rLoF6; IJhLI: $res["\143\157\x64\145"] = 1; goto CvjOV; r14lt: if (empty($result)) { goto eas1m; } goto IJhLI; ckdXM: return json_encode($res); goto GeHBw; bTw3H: goto oCB3y; goto baPA8; ofOZf: $express = Db::name("\171\142\x73\143\137\x6f\162\x64\145\x72\137\x65\170\160\x72\145\x73\x73")->where(["\x73\x68\x69\160\x70\151\156\147\137\x74\171\160\145" => 1, "\x6f\162\x64\145\162\137\x74\171\160\145" => 0, "\x6f\x72\144\x65\x72\x5f\x69\x64" => $order_id])->find(); goto u6gVm; rLoF6: $res = $ser->exp_load($express["\x65\x78\160\x72\145\163\163\137\x6e\157"]); goto bTw3H; CvjOV: $res["\155\145\x73\163\x61\x67\145"] = $result; goto ZW8Sz; odhhp: $res = ["\143\x6f\x64\145" => 0, "\x6d\x65\163\x73\x61\147\x65" => "\xe8\xaf\xb7\346\xb1\202\xe6\210\x90\345\x8a\x9f", "\151\x6e\x66\157" => array()]; goto ahIFO; N24Mb: $mch_id = $this->getMchId($app_id); goto xtP9X; GeHBw: } }
