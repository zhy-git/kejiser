<?php
 namespace app\api\controller; use think\Request; use think\Db; use think\Log; use app\api\service\CateringService; use think\Session; use think\Cache; class Catering extends BaseController { public function VoiceCall() { goto nvj6K; qdY4E: return AjaxReturn($info); goto a3P1J; BUFng: $app_id = Request::instance()->param("\x69"); goto HrY8m; aqdev: if (Cache::get("\145\x78\x70\151\162\x65\137\164\x69\155\145\x5f" . $data["\144\x65\x73\153\137\x69\x64"] . "\x5f" . $data["\x63\141\154\x6c\x5f\164\x79\x70\145"]) && Cache::get("\145\x78\x70\x69\162\x65\x5f\x74\x69\155\x65\x5f" . $data["\144\145\x73\153\x5f\151\x64"] . "\137" . $data["\143\x61\x6c\x6c\x5f\164\x79\160\145"]) > time()) { goto M2z_U; } goto ZqUTi; HrY8m: $mch_id = $this->getMchId($app_id); goto y0vjt; LxBr5: mjQM1: goto aqdev; RR0vZ: $rs["\155\x73\x67"] = $result; goto FXGk7; FXGk7: return json_encode($rs); goto LxBr5; nvj6K: $rs = array("\143\x6f\144\x65" => 0, "\151\156\x66\157" => array()); goto BUFng; a3P1J: goto oJITU; goto FqWgH; bj3r2: $order = new CateringService(); goto ctjOQ; ArWOs: return json_encode($rs); goto XvWND; XvWND: oJITU: goto BYbtj; hPCKW: $rs["\x63\157\144\145"] = 1; goto RR0vZ; ZqUTi: Cache::set("\x65\170\x70\x69\x72\x65\137\164\x69\155\145\137" . $data["\144\x65\163\153\x5f\151\x64"] . "\137" . $data["\143\141\x6c\154\137\164\171\160\145"], time() + 300); goto bj3r2; zGVsT: $result = $this->checkParam($rule, $data); goto WBec8; ctjOQ: $info = $order->VoiceCall($data); goto qdY4E; y0vjt: $data = ["\x64\x65\163\x6b\137\151\144" => Request::instance()->param("\x64\145\x73\153\x5f\x69\x64"), "\x6d\143\x68\137\x69\144" => $mch_id, "\143\x61\154\x6c\x5f\x74\171\x70\x65" => Request::instance()->param("\143\x61\154\x6c\x5f\164\171\160\x65")]; goto xS242; YTQiV: $rs["\x6d\x73\x67"] = "\346\202\250\xe6\x93\215\xe4\xbd\234\345\244\252\xe9\xa2\221\347\xb9\201\xef\xbc\214\350\257\267\344\272\x8e\x35\xe5\x88\206\351\222\237\xe5\220\216\xe9\x87\x8d\350\xaf\225"; goto ArWOs; KntkO: $rs["\143\x6f\144\145"] = 1; goto YTQiV; FqWgH: M2z_U: goto KntkO; WBec8: if (empty($result)) { goto mjQM1; } goto hPCKW; xS242: $rule = [["\x64\145\x73\153\137\151\144", "\162\x65\161\165\x69\162\x65\174\x6e\x75\x6d\142\x65\162"], ["\143\141\x6c\154\x5f\164\x79\x70\x65", "\162\x65\161\x75\x69\162\145\174\156\x75\x6d\x62\145\162"], ["\155\x63\x68\137\151\144", "\x72\145\x71\x75\x69\x72\x65", "\344\xb8\215\345\xad\x98\xe5\234\xa8\xe5\225\206\xe6\x88\xb7"]]; goto zGVsT; BYbtj: } public function CreateOrder() { goto u1RKu; zmQUq: $rs["\x6d\163\x67"] = $result; goto Vkm5k; kcBBi: $rs["\143\157\144\145"] = 1; goto eqoxg; rTWl2: if (!empty($info)) { goto Xa7yZ; } goto xrWvu; JIEPH: $order = new CateringService(); goto XPS4y; Janrr: pgefR: goto lhdWX; Zx6ql: $data["\x61\x63\x74\x69\166\151\164\171\137\157\162\x64\x65\x72\137\x74\x79\x70\145"] = 4; goto Janrr; oKGPs: $rs["\143\x6f\144\145"] = 1; goto zmQUq; eqoxg: $rs["\x6d\163\x67"] = "\347\x94\237\346\x88\220\xe8\xae\xa2\xe5\215\x95\345\244\261\xe8\xb4\245"; goto Sznhb; UfYaT: $result = $this->checkParam($rule, $data); goto XrZM4; N3BQp: iOQcU: goto JIEPH; owE5c: $mch_id = $this->getMchId($app_id); goto Kvr_H; Kvr_H: $data = ["\157\162\144\145\x72\x5f\156\157" => $this->createOrderNo(), "\157\165\x74\137\x74\x72\141\144\145\x5f\x6e\157" => $this->createOutTradeNo(), "\x62\x75\x79\145\162\137\x6d\145\x73\x73\141\147\x65" => Request::instance()->param("\x62\x75\x79\145\x72\x5f\155\x65\163\x73\141\147\x65", ''), "\x64\151\x73\143\157\165\x6e\164\137\x6d\x6f\156\x65\x79" => Request::instance()->param("\144\x69\x73\143\157\x75\156\x74\137\155\x6f\x6e\x65\171", "\x30\x2e\x30\60"), "\143\x6f\165\x70\157\156\x5f\151\x64" => Request::instance()->param("\x63\157\165\x70\157\x6e\137\x69\144", 0), "\x63\x6f\165\x70\x6f\x6e\x5f\155\x6f\156\x65\171" => Request::instance()->param("\143\x6f\x75\x70\x6f\x6e\x5f\x6d\157\x6e\x65\x79", "\x30\56\x30\x30"), "\143\162\145\141\x74\145\137\x74\151\155\145" => time(), "\165\x73\x65\162\x5f\151\144" => Request::instance()->param("\x62\x75\x79\x65\x72\137\151\x64"), "\144\x65\x73\153\137\x69\x64" => Request::instance()->param("\144\145\x73\x6b\137\151\144"), "\157\x72\144\145\162\137\155\157\x6e\145\x79" => Request::instance()->param("\157\x72\x64\x65\162\x5f\x6d\157\x6e\x65\171"), "\160\x61\x79\x5f\x6d\x6f\x6e\145\171" => Request::instance()->param("\160\x61\171\137\x6d\x6f\x6e\145\171"), "\x6f\162\x64\x65\x72\137\144\151\x73\150\x5f\152\163\x6f\156" => Request::instance()->param("\157\162\x64\x65\162\x5f\x64\151\x73\150\137\152\163\x6f\156"), "\x61\x63\x74\151\x76\x69\x74\171\x5f\x6f\162\144\145\162\x5f\x74\x79\160\x65" => Request::instance()->param("\x61\143\164\151\x76\151\164\171\x5f\157\x72\144\x65\x72\137\164\x79\x70\145", 0), "\x6d\143\x68\137\x69\144" => $mch_id, "\x70\x61\171\137\164\171\160\x65" => Request::instance()->param("\160\141\171\x5f\164\x79\x70\145", 1), "\x74\157\164\141\154" => Request::instance()->param("\164\x6f\164\141\x6c")]; goto djZJa; GtOC7: return json_encode($rs); goto MNmiL; o1niT: Xa7yZ: goto BlFEl; Sznhb: return json_encode($rs); goto o1niT; Vkm5k: return json_encode($rs); goto N3BQp; djZJa: if (!($data["\x64\151\x73\x63\157\165\156\164\137\155\x6f\156\145\171"] != "\60\56\x30\60" && $data["\x63\157\x75\160\157\x6e\x5f\155\x6f\x6e\145\171"] != "\60\x2e\60\x30")) { goto pgefR; } goto Zx6ql; BlFEl: $rs["\x69\156\146\157"] = $info; goto GtOC7; xrWvu: Log::write("\347\x94\x9f\xe6\x88\x90\xe8\256\242\xe5\x8d\x95\xe5\244\261\350\264\xa5\40\55\55" . $data["\x75\163\145\162\x5f\151\x64"], "\x6f\x72\144\145\x72\x5f\143\162\x65\141\x74\145\x5f\145\162\x72\x6f\x72"); goto kcBBi; lhdWX: $rule = [["\x75\x73\145\x72\137\x69\x64", "\162\x65\x71\x75\151\162\x65\174\156\x75\x6d\x62\145\162"], ["\157\162\144\x65\x72\137\x6d\157\156\145\171", "\x72\x65\x71\165\x69\x72\145\x7c\156\x75\x6d\142\145\162"], ["\x70\141\171\137\155\157\156\x65\171", "\162\x65\x71\165\151\x72\x65\174\156\x75\x6d\142\145\x72"], ["\157\162\x64\145\162\137\144\x69\163\150\x5f\x6a\163\x6f\156", "\x72\x65\161\x75\151\x72\145"], ["\x6d\143\150\x5f\151\144", "\x72\x65\161\165\x69\x72\x65", "\344\270\x8d\345\255\230\345\234\xa8\xe5\x95\x86\346\x88\267"]]; goto UfYaT; XPS4y: $info = $order->createOrder($data); goto rTWl2; u1RKu: $rs = array("\143\x6f\144\145" => 0, "\x69\156\146\157" => array()); goto hSLsu; XrZM4: if (empty($result)) { goto iOQcU; } goto oKGPs; hSLsu: $app_id = Request::instance()->param("\x69"); goto owE5c; MNmiL: } public function OrderList() { goto CHodS; oih_r: $result = $this->checkParam($rule, $data); goto r41il; CJUlp: $rule = [["\x75\x73\x65\x72\x5f\151\144", "\162\x65\161\x75\151\x72\145", "\x75\x69\144\xe4\xb8\215\xe8\x83\xbd\xe4\270\xba\xe7\251\272"], ["\155\x63\x68\x5f\x69\144", "\x72\145\161\165\x69\x72\x65", "\344\270\x8d\xe5\255\230\xe5\x9c\250\xe5\x95\x86\346\x88\xb7"]]; goto vgOLM; CHodS: $rs = array("\143\157\x64\145" => 0, "\x69\156\x66\x6f" => array()); goto MNcVi; aaNKo: if ($status != null) { goto X662V; } goto QG27P; MqhVv: $data["\x6f\x72\x64\x65\x72\x5f\x73\164\x61\x74\165\x73"] = ["\151\x6e", [4, 5]]; goto lCLam; qGtxj: $mch_id = $this->getMchId($app_id); goto CJUlp; zVGSC: return json_encode($rs); goto PgAsf; oBo8S: goto BgYGc; goto G7Mdm; G5zWn: $order = new CateringService(); goto jpmrT; MNcVi: $uid = Request::instance()->param("\x75\151\x64"); goto aMTdU; PgAsf: Mnfn_: goto G5zWn; vgOLM: $data = ["\165\x73\145\x72\x5f\151\144" => $uid, "\x6d\x63\150\x5f\151\144" => $mch_id]; goto aaNKo; sJ1DL: $rs["\155\x73\x67"] = $result; goto zVGSC; g5bx_: ZX2cQ: goto oih_r; ApYP0: if ($status == 4) { goto XuNnh; } goto RgDKz; RgDKz: $data["\157\x72\144\x65\x72\137\x73\x74\141\164\x75\x73"] = $status; goto oBo8S; lCLam: BgYGc: goto g5bx_; jpmrT: $info = $order->orderList($data, $page); goto m6VPj; QG27P: $data["\157\x72\x64\145\162\x5f\x73\164\x61\164\x75\x73"] = ["\x3c\76", "\x2d\61"]; goto E7v00; E7v00: goto ZX2cQ; goto DtTsQ; m6VPj: $rs["\x69\156\x66\x6f"] = $info; goto zgOuh; DtTsQ: X662V: goto ApYP0; iiTQU: $rs["\x63\157\144\145"] = 1; goto sJ1DL; M4PZ3: $app_id = Request::instance()->param("\x69"); goto qGtxj; zgOuh: return json_encode($rs); goto gnzej; xhEQw: $page = Request::instance()->param("\160\x61\147\x65", 1); goto M4PZ3; r41il: if (empty($result)) { goto Mnfn_; } goto iiTQU; aMTdU: $status = Request::instance()->param("\x73\x74\141\x74\165\x73", null); goto xhEQw; G7Mdm: XuNnh: goto MqhVv; gnzej: } public function GetOrder() { goto SHD2V; ocFaL: $rule = [["\165\163\145\162\x5f\x69\x64", "\x72\145\x71\x75\151\162\x65", "\x75\151\x64\344\270\215\350\203\xbd\xe4\xb8\272\xe7\251\272"]]; goto iRSbS; lEGpN: $mch_id = $this->getMchId($app_id); goto ocFaL; rYpyQ: $rs["\155\x73\147"] = $result; goto jiGAr; BtEgd: if (empty($result)) { goto Z3bLC; } goto ipYGs; ipYGs: $rs["\143\157\x64\145"] = 1; goto rYpyQ; jiGAr: return json_encode($rs); goto LWEfG; SHD2V: $rs = array("\x63\x6f\x64\x65" => 0, "\151\156\x66\x6f" => array()); goto BZSKC; BZSKC: $app_id = Request::instance()->param("\x69"); goto lEGpN; XMgr0: $rs["\151\x6e\x66\157"] = $info; goto eAISD; eAISD: return json_encode($rs); goto Wijlo; gVE97: $result = $this->checkParam($rule, $data); goto BtEgd; LdzEB: $order = new CateringService(); goto AOSLp; AOSLp: $info = $order->getOrder($data); goto XMgr0; LWEfG: Z3bLC: goto LdzEB; iRSbS: $data = ["\x75\163\145\x72\137\x69\144" => Request::instance()->param("\x62\165\171\145\x72\137\151\144"), "\x6f\x72\x64\x65\x72\x5f\151\144" => Request::instance()->param("\x6f\162\144\x65\162\x5f\x69\144"), "\155\143\150\137\151\144" => $mch_id]; goto gVE97; Wijlo: } public function SignOrder() { goto QUGTv; nqiZb: $rs["\x69\156\146\157"] = $info; goto pwwvX; pwwvX: return json_encode($rs); goto zXfHi; gJXn1: $rs["\x63\x6f\x64\145"] = 1; goto s7006; SCiMd: $data = ["\x75\163\x65\162\x5f\x69\144" => Request::instance()->param("\x62\x75\171\x65\x72\x5f\x69\x64"), "\157\162\x64\145\162\x5f\151\144" => Request::instance()->param("\157\x72\144\x65\x72\137\x69\144"), "\157\162\144\x65\162\137\x73\164\x61\x74\x75\x73" => 2]; goto bhXEW; O3H1F: PHapX: goto WxOvL; ninPG: $rule = [["\165\163\x65\x72\137\x69\144", "\x72\x65\161\165\151\x72\x65"], ["\x6f\162\x64\145\162\x5f\151\x64", "\162\x65\x71\165\x69\x72\145"]]; goto SCiMd; bhXEW: $result = $this->checkParam($rule, $data); goto XvHdA; qDUv8: $info = $order->signOrder($data); goto nqiZb; WxOvL: $order = new CateringService(); goto qDUv8; QUGTv: $rs = array("\x63\157\144\145" => 0, "\151\x6e\x66\x6f" => array()); goto ninPG; s7006: $rs["\155\x73\147"] = $result; goto Y_k7y; XvHdA: if (empty($result)) { goto PHapX; } goto gJXn1; Y_k7y: return json_encode($rs); goto O3H1F; zXfHi: } public function CancelOrder() { goto eAx9c; xdTz3: return json_encode($rs); goto Z3D5D; U4Cle: $rs["\151\x6e\146\157"] = $info; goto lhJNB; eAx9c: $rs = array("\x63\x6f\x64\x65" => 0, "\x69\x6e\x66\157" => array()); goto aulti; bt0w3: if (empty($result)) { goto naBP9; } goto lieJT; qrEJr: $rs["\143\x6f\x64\145"] = 1; goto sBn0p; zyRUA: $info = $order->cancelOrder($data); goto ZHK9v; lieJT: $rs["\x63\x6f\144\x65"] = 1; goto n9QzT; lhJNB: return json_encode($rs); goto xVVfK; sBn0p: $rs["\x6d\163\x67"] = "\xe8\256\xa2\345\215\x95\xe5\x8f\226\346\266\x88\xe5\244\261\xe8\264\xa5"; goto tTjGc; dJzXx: GqLbx: goto U4Cle; tTjGc: return json_encode($rs); goto dJzXx; ZHK9v: if (!empty($info)) { goto GqLbx; } goto qrEJr; bX0Ck: $data = ["\165\163\x65\x72\137\151\144" => Request::instance()->param("\x62\x75\x79\x65\x72\137\x69\x64"), "\x6f\162\x64\x65\x72\137\151\x64" => Request::instance()->param("\157\x72\x64\145\x72\137\151\144"), "\x6f\162\144\145\x72\x5f\x73\x74\141\x74\165\163" => 1]; goto mbaKm; aulti: $rule = [["\x75\x73\x65\162\x5f\x69\x64", "\162\x65\161\x75\151\x72\x65"], ["\x6f\162\x64\145\162\x5f\x69\144", "\x72\145\161\x75\151\162\145"]]; goto bX0Ck; jIq0A: $order = new CateringService(); goto zyRUA; n9QzT: $rs["\155\x73\147"] = $result; goto xdTz3; Z3D5D: naBP9: goto jIq0A; mbaKm: $result = $this->checkParam($rule, $data); goto bt0w3; xVVfK: } public function RefundOrder() { goto IR1mj; caE_U: $info = $order->refundOrder($data); goto gu8VV; XtYQG: gB6Hs: goto pvzOJ; xBMwp: $rs["\x63\x6f\x64\x65"] = 1; goto xx4q8; OXtoe: return json_encode($rs); goto XtYQG; btUQ2: $result = $this->checkParam($rule, $data); goto gGmAD; IR1mj: $rs = array("\143\x6f\x64\145" => 0, "\x69\x6e\x66\157" => array()); goto F3ML_; ZOyYW: $rs["\155\x73\147"] = $result; goto hu4vX; F3ML_: $rule = [["\165\x73\x65\x72\137\151\x64", "\162\x65\161\165\x69\x72\145"], ["\x6f\162\x64\x65\162\x5f\x69\144", "\162\145\x71\x75\151\x72\145"]]; goto Ilqkv; hq1lh: return json_encode($rs); goto gYjGO; hu4vX: return json_encode($rs); goto WGk2h; Lt7OC: $order = new CateringService(); goto caE_U; pvzOJ: $rs["\151\x6e\146\157"] = $info; goto hq1lh; gGmAD: if (empty($result)) { goto ZeMkb; } goto Z8PQL; Ilqkv: $data = ["\x75\x73\x65\162\x5f\x69\x64" => Request::instance()->param("\142\165\x79\145\x72\x5f\151\x64"), "\x6f\x72\144\x65\x72\137\151\144" => Request::instance()->param("\x6f\162\144\x65\x72\x5f\x69\x64"), "\157\x72\144\x65\x72\x5f\x73\x74\x61\164\x75\163" => ["\x69\156", [2, 3]]]; goto btUQ2; xx4q8: $rs["\x6d\163\147"] = "\350\256\242\345\215\225\xe9\200\200\xe6\xac\276\345\244\261\350\xb4\245"; goto OXtoe; WGk2h: ZeMkb: goto Lt7OC; Z8PQL: $rs["\x63\157\x64\x65"] = 1; goto ZOyYW; gu8VV: if (!empty($info)) { goto gB6Hs; } goto xBMwp; gYjGO: } public function Book() { goto gaDti; fJUxp: $rs["\151\156\146\x6f"] = $info; goto hwXal; Dj3lL: return json_encode($rs); goto ZwcqE; flbNB: $app_id = Request::instance()->param("\x69"); goto tbXhh; Tu23a: $order = new CateringService(); goto CZZg2; gaDti: $rs = array("\143\157\144\145" => 0, "\x69\156\146\x6f" => array()); goto flbNB; tbXhh: $mch_id = $this->getMchId($app_id); goto qx2sd; vvVmA: $rs["\x6d\163\147"] = "\xe6\217\220\xe4\xba\244\xe5\244\261\350\xb4\xa5"; goto Dj3lL; ZwcqE: Bn1oR: goto fJUxp; Jx1Tu: if (empty($result)) { goto IZZ3_; } goto pERIU; pERIU: $rs["\x63\x6f\144\x65"] = 1; goto z1DoE; CEctN: $data = ["\156\141\155\145" => Request::instance()->param("\x6e\141\x6d\145"), "\x70\150\x6f\x6e\x65" => Request::instance()->param("\x70\150\x6f\156\x65"), "\142\x6f\x6f\x6b\x65\144\x5f\164\x69\x6d\145" => Request::instance()->param("\142\157\x6f\153\x65\x64\137\x74\x69\x6d\145"), "\x6e\165\x6d\142\145\x72\137\x70\x65\157\160\x6c\145" => Request::instance()->param("\156\x75\155\142\x65\x72\137\x70\x65\x6f\x70\x6c\x65"), "\x6d\145\163\163\x61\x67\145" => Request::instance()->param("\x6d\x65\163\x73\141\x67\x65"), "\x73\x74\141\164\x75\163" => 1, "\155\x63\x68\x5f\151\144" => $mch_id, "\165\x73\145\162\x5f\x69\x64" => Request::instance()->param("\x75\x73\x65\x72\x5f\x69\x64"), "\143\162\145\x61\164\x65\137\x74\151\155\145" => time()]; goto fWYdr; MNnt8: if (!empty($info)) { goto Bn1oR; } goto QzV2l; QzV2l: $rs["\143\x6f\x64\145"] = 1; goto vvVmA; qx2sd: $rule = [["\156\x61\155\x65", "\x72\x65\161\x75\151\x72\x65"], ["\160\150\x6f\x6e\x65", "\162\145\161\165\151\x72\145"], ["\x6d\x63\x68\137\151\x64", "\x72\145\161\165\x69\x72\x65", "\344\xb8\x8d\345\xad\230\345\234\250\345\225\206\346\210\267"], ["\142\x6f\x6f\x6b\x65\x64\x5f\164\x69\x6d\x65", "\162\x65\x71\x75\x69\162\145"], ["\x6e\165\x6d\142\145\x72\x5f\160\145\x6f\x70\x6c\x65", "\x72\145\x71\x75\x69\x72\145"], ["\x75\163\145\x72\x5f\151\144", "\162\145\x71\165\151\162\x65"]]; goto CEctN; z1DoE: $rs["\x6d\x73\147"] = $result; goto t28DW; hwXal: return json_encode($rs); goto iEMv2; fWYdr: $result = $this->checkParam($rule, $data); goto Jx1Tu; VLh22: IZZ3_: goto Tu23a; t28DW: return json_encode($rs); goto VLh22; CZZg2: $info = $order->Book($data); goto MNnt8; iEMv2: } public function Booklist() { goto oxn0A; r8Li8: return json_encode($rs); goto faWb9; MXnE0: $rs["\155\163\147"] = $result; goto r8Li8; wyspj: return json_encode($rs); goto ddiEv; tLkKZ: $mch_id = $this->getMchId($app_id); goto k4UA1; lMbRz: $order = new CateringService(); goto DrYjS; dLll2: $app_id = Request::instance()->param("\x69"); goto tLkKZ; oxn0A: $rs = array("\143\x6f\x64\x65" => 0, "\x69\x6e\x66\157" => array()); goto dLll2; DrYjS: $info = $order->Booklist($data, $page); goto O5I_3; faWb9: FiWVr: goto lMbRz; k4UA1: $page = Request::instance()->param("\x70\141\x67\145", 1); goto Z5t6c; O5I_3: $rs["\x69\156\146\157"] = $info; goto wyspj; H7ZYF: $data = ["\155\143\150\137\x69\x64" => $mch_id, "\165\163\x65\162\x5f\x69\x64" => Request::instance()->param("\x75\163\x65\x72\137\151\x64")]; goto QT1T9; QT1T9: $result = $this->checkParam($rule, $data); goto JQ40F; JQ40F: if (empty($result)) { goto FiWVr; } goto P512A; Z5t6c: $rule = [["\x6d\143\x68\137\x69\x64", "\162\x65\161\x75\x69\162\145", "\344\270\x8d\xe5\xad\230\xe5\234\250\345\225\206\xe6\210\267"], ["\x75\x73\x65\x72\137\151\x64", "\162\x65\x71\165\x69\x72\145"]]; goto H7ZYF; P512A: $rs["\143\x6f\144\x65"] = 1; goto MXnE0; ddiEv: } public function CancelBook() { goto LN7xb; zXPSH: ACiW9: goto VmxAS; LN7xb: $rs = array("\x63\157\144\x65" => 0, "\x69\156\x66\x6f" => array()); goto QMW00; XWMzZ: $result = $this->checkParam($rule, $data); goto AKhMh; TCXLu: $rs["\x6d\x73\x67"] = $result; goto bAnOT; bAnOT: return json_encode($rs); goto zXPSH; QMW00: $rule = [["\165\163\145\x72\137\x69\x64", "\x72\145\161\x75\x69\x72\x65"], ["\x69\144", "\x72\145\161\x75\151\162\x65"]]; goto kNM44; Y_eu2: return json_encode($rs); goto qi54j; qi54j: PqcqG: goto iPGFU; Uzwk5: $rs["\x6d\163\x67"] = "\351\xa2\204\350\256\xa2\xe5\217\x96\346\xb6\x88\345\244\261\xe8\264\245"; goto Y_eu2; l5bxi: return json_encode($rs); goto LCdl2; eT2K0: $rs["\143\157\x64\145"] = 1; goto Uzwk5; VmxAS: $order = new CateringService(); goto gUzEl; aZTWu: if (!empty($info)) { goto PqcqG; } goto eT2K0; gUzEl: $info = $order->cancelBook($data); goto aZTWu; kNM44: $data = ["\165\163\x65\x72\137\x69\x64" => Request::instance()->param("\165\x73\145\162\137\151\x64"), "\151\x64" => Request::instance()->param("\x69\144"), "\163\x74\141\164\x75\x73" => 0]; goto XWMzZ; iPGFU: $rs["\x69\x6e\146\x6f"] = $info; goto l5bxi; AKhMh: if (empty($result)) { goto ACiW9; } goto zIm39; zIm39: $rs["\143\x6f\144\x65"] = 1; goto TCXLu; LCdl2: } public function ShopService() { goto X5s8j; KoobK: return json_encode($rs); goto x6bhJ; XuR4j: $data = ["\x6d\143\150\x5f\x69\x64" => $mch_id]; goto leXI0; dUQ4v: $rs["\x6d\x73\x67"] = $result; goto KoobK; X5s8j: $rs = array("\x63\157\x64\x65" => 0, "\151\156\x66\x6f" => array()); goto IZCtB; VeLUo: if (empty($info)) { goto OmSId; } goto OG3jg; jBpFH: $mch_id = $this->getMchId($app_id); goto zxKsS; IZCtB: $app_id = Request::instance()->param("\151"); goto jBpFH; a3X6k: $rs["\x63\x6f\x64\x65"] = 1; goto dUQ4v; mI8ME: $order = new CateringService(); goto rBqbG; zxKsS: $rule = [["\x6d\143\x68\x5f\151\144", "\162\x65\161\x75\x69\x72\x65", "\344\270\x8d\345\255\230\xe5\234\250\xe5\225\x86\346\x88\xb7"]]; goto XuR4j; Ks7G5: OmSId: goto FK3Rk; OG3jg: $info = explode("\54", $info); goto Ks7G5; leXI0: $result = $this->checkParam($rule, $data); goto qSx3W; qSx3W: if (empty($result)) { goto E8Nfs; } goto a3X6k; FK3Rk: $rs["\151\x6e\x66\x6f"] = $info; goto rTaDo; rBqbG: $info = $order->ShopService($data); goto VeLUo; rTaDo: return json_encode($rs); goto oY9lh; x6bhJ: E8Nfs: goto mI8ME; oY9lh: } public function uploadFile() { goto NxX02; b0onF: return json_encode($rs); goto qDhie; mkMeH: return null; goto GSaSk; XUuVg: return null; goto BdiIG; qDhie: d6UNv: goto gmXjd; Jk26h: $file_name_explode = explode("\x2e", $file_name); goto H1un7; rBMds: if (!($file_path == '')) { goto oPpG5; } goto XUuVg; tqxuo: $newfile = $guid . $ext; goto H3q4v; NxX02: $rs = array("\143\x6f\144\145" => 0, "\151\x6e\146\157" => array()); goto up3a1; f0xsB: return $ok["\x70\141\x74\x68"]; goto TlbQp; DJ2Kf: goto UxlPe; goto gxbNj; X7TCm: if ($ok["\x63\x6f\144\145"]) { goto D4l6G; } goto JZk6x; up3a1: $app_key = Request::instance()->param("\x61\160\160\137\153\x65\x79"); goto ho8Vz; pWCCv: $rs["\143\157\x64\145"] = 1; goto dvd0L; tDVIZ: $ext = "\56" . $file_name_explode[$suffix]; goto tqxuo; dqksO: $file_size = $_FILES["\146\x69\154\x65\137\165\160\x6c\x6f\141\x64"]["\x73\151\172\x65"]; goto UccCi; H1un7: $suffix = count($file_name_explode) - 1; goto tDVIZ; H3q4v: $ok = $this->moveUploadFile($_FILES["\146\151\154\145\x5f\x75\160\x6c\x6f\141\144"]["\164\x6d\160\137\x6e\141\x6d\145"], $file_path . $newfile); goto X7TCm; d0_pw: $mode = intval("\60\67\67\67", 8); goto KWQgJ; gxbNj: D4l6G: goto qqwed; UccCi: $file_type = $_FILES["\x66\151\154\x65\x5f\x75\x70\x6c\157\141\x64"]["\x74\x79\160\145"]; goto w3rQM; JZk6x: return null; goto DJ2Kf; KWQgJ: mkdir($file_path, $mode, true); goto aeFKq; w3rQM: if (!($file_size == 0)) { goto OMluN; } goto mkMeH; V1n0t: $file_path = "\160\165\142\154\x69\143\57\x75\160\x6c\x6f\x61\144\57" . $mch_id . "\x2f\x63\157\155\x6d\145\x6e\x74\x5f\160\151\x63\57"; goto rBMds; ho8Vz: $mch_id = $this->getMchId($app_key); goto V1n0t; qqwed: @unlink($_FILES["\146\151\154\x65\137\165\x70\154\157\x61\144"]); goto f0xsB; YOk78: $file_name = $_FILES["\x66\151\x6c\145\x5f\165\160\x6c\157\141\144"]["\156\x61\155\x65"]; goto dqksO; dvd0L: $rs["\155\163\147"] = "\346\226\x87\xe4\xbb\266\xe4\xb8\212\xe4\274\240\345\244\261\xe8\264\245\x2c\350\xaf\xb7\xe6\243\200\346\x9f\245\346\x82\xa8\344\xb8\212\xe4\274\xa0\347\232\204\xe6\226\207\xe4\xbb\xb6\347\261\273\xe5\x9e\x8b\x2c\xe6\226\x87\344\xbb\xb6\345\xa4\247\345\260\x8f\xe4\270\215\350\203\xbd\xe8\xb6\x85\350\277\x87\x35\115\102"; goto b0onF; GSaSk: OMluN: goto tx0Ch; BdiIG: oPpG5: goto rqLUh; aeFKq: DsXEQ: goto YOk78; TlbQp: UxlPe: goto p7fPA; gmXjd: $guid = time() . rand(10000, 99999); goto Jk26h; rqLUh: if (file_exists($file_path)) { goto DsXEQ; } goto d0_pw; tx0Ch: if (!($file_type != "\x69\x6d\x61\x67\x65\57\147\x69\x66" && $file_type != "\151\x6d\141\x67\145\x2f\x70\156\x67" && $file_type != "\x69\x6d\141\x67\x65\57\x6a\x70\145\x67" && $file_size > 5000000)) { goto d6UNv; } goto pWCCv; p7fPA: } private $upload_type = 1; private function moveUploadFile($file_path, $key) { goto VhYaZ; VhYaZ: if (!($this->upload_type == 1)) { goto Y4LZd; } goto fX8vx; COd89: return $result; goto aIYKW; aIYKW: Y4LZd: goto VeRkf; fX8vx: $ok = @move_uploaded_file($file_path, $key); goto BDpna; BDpna: $result = ["\x63\x6f\144\145" => $ok, "\160\141\164\150" => $key, "\144\157\155\x61\151\x6e" => '', "\142\165\143\x6b\x65\164" => '']; goto COd89; VeRkf: } public function WriteComment() { goto o08fF; mciNt: $rs["\155\x73\147"] = "\346\217\x90\344\xba\244\345\244\xb1\xe8\264\245"; goto dQQ5O; fB0ZV: $app_id = Request::instance()->param("\151"); goto RVd74; vMC7n: $array_pic = ''; goto Jbri9; vcmnA: $rs["\143\x6f\x64\145"] = 1; goto mciNt; UANg5: $data["\141\162\162\141\171\137\x70\x69\x63"] = $array_pic; goto nBjA1; pBVe7: if (!empty($info)) { goto pWVuT; } goto vcmnA; abfV5: nxrPQ: goto UANg5; smLqJ: $rs["\x6d\x73\x67"] = $result; goto cf8Q6; zledX: $order = new CateringService(); goto vMC7n; dQQ5O: return json_encode($rs); goto EzJJL; o08fF: $rs = array("\143\157\144\x65" => 0, "\151\x6e\x66\x6f" => array()); goto fB0ZV; ggLZ_: $rule = [["\155\143\150\x5f\151\144", "\162\145\161\165\151\x72\145", "\344\270\x8d\xe5\xad\230\xe5\x9c\250\xe5\x95\x86\xe6\210\267"], ["\146\162\141\143\x74\x69\157\156", "\162\145\x71\165\151\162\145"], ["\151\x6e\146\157", "\162\x65\161\x75\151\x72\x65"], ["\165\x73\x65\x72\x5f\x69\x64", "\162\145\x71\x75\151\162\145"]]; goto h3IMy; h3IMy: $data = ["\x69\x6e\146\157" => Request::instance()->param("\151\x6e\146\x6f"), "\146\162\x61\143\x74\151\157\x6e" => Request::instance()->param("\x66\162\141\x63\x74\151\x6f\x6e"), "\141\162\162\x61\171\137\x70\151\143" => Request::instance()->post("\x61\x72\x72\141\171\137\160\x69\143\x2f\x61", []), "\x6d\143\150\x5f\151\144" => $mch_id, "\165\163\145\x72\137\151\x64" => Request::instance()->param("\x75\163\x65\162\x5f\151\x64"), "\x63\162\145\141\164\x65\137\x74\151\155\145" => time(), "\x64\x65\x6c" => 1]; goto UdlRd; aC0Du: return json_encode($rs); goto V7PEY; nBrpk: $rs["\x69\x6e\146\x6f"] = $info; goto aC0Du; EzJJL: pWVuT: goto nBrpk; UdlRd: $result = $this->checkParam($rule, $data); goto c_wmO; RVd74: $mch_id = $this->getMchId($app_id); goto ggLZ_; cf8Q6: return json_encode($rs); goto Z3EG5; nBjA1: $info = $order->WriteComment($data); goto pBVe7; c_wmO: if (empty($result)) { goto rpJ4h; } goto yFUeG; Jbri9: foreach ($data["\x61\162\x72\x61\x79\137\x70\151\x63"] as $v) { $array_pic .= $v . "\x2c"; JdJ4y: } goto abfV5; Z3EG5: rpJ4h: goto zledX; yFUeG: $rs["\143\x6f\144\145"] = 1; goto smLqJ; V7PEY: } public function CommentList() { goto b3gBh; hOGFY: $mch_id = $this->getMchId($app_id); goto qnmqD; zPB1R: return json_encode($rs); goto yjeeL; rksxO: $rs["\x63\157\144\145"] = 1; goto Tb0lx; BcdK4: $order = new CateringService(); goto RGau0; uCGnU: $rule = [["\155\143\x68\x5f\x69\144", "\x72\145\161\165\151\x72\x65", "\xe4\270\x8d\xe5\255\x98\xe5\x9c\250\xe5\225\206\xe6\x88\xb7"]]; goto ctsZu; yjeeL: ZLiGz: goto BcdK4; Tb0lx: $rs["\155\163\147"] = $result; goto zPB1R; Uq2Hf: if (empty($result)) { goto ZLiGz; } goto rksxO; RGau0: $info = $order->CommentList($data, $page); goto meONE; tyhqw: $rs["\x69\x6e\x66\x6f"] = $info; goto WvBHr; meONE: $info = json_decode($info, true); goto tyhqw; ctsZu: $data = ["\155\x63\150\x5f\151\x64" => $mch_id, "\x64\x65\x6c" => 1]; goto YTqB2; qnmqD: $page = Request::instance()->param("\x70\x61\x67\145", 1); goto uCGnU; YTqB2: $result = $this->checkParam($rule, $data); goto Uq2Hf; LDLOW: $app_id = Request::instance()->param("\151"); goto hOGFY; b3gBh: $rs = array("\143\157\x64\145" => 0, "\x69\x6e\146\157" => array()); goto LDLOW; WvBHr: return json_encode($rs); goto JTSIg; JTSIg: } public function addOrder() { goto q_fPy; VYGlh: return AjaxReturn($info); goto EcI96; X7C8X: $json = Request::instance()->param("\x6f\162\x64\145\162\137\144\151\x73\150\x5f\152\x73\x6f\156"); goto eJPdF; LgAHR: $info = $order->addOrder($data, $json); goto VYGlh; t0qXx: TcztW: goto ovuKJ; sW8eF: if (empty($result)) { goto TcztW; } goto RPmcb; mE9HX: $rs["\155\163\147"] = $result; goto XU2vQ; RPmcb: $rs["\143\157\144\x65"] = 1; goto mE9HX; jFVv0: $rule = [["\x6d\143\150\137\151\144", "\x72\x65\161\x75\151\162\x65", "\344\270\215\xe5\xad\x98\345\x9c\250\345\225\x86\346\210\267"], ["\165\163\145\x72\x5f\151\x64", "\162\145\x71\165\x69\162\145"], ["\x6f\x72\x64\x65\162\x5f\151\x64", "\x72\x65\161\165\151\x72\145"], ["\x61\x64\x64\137\x70\x72\151\x63\145", "\x72\145\x71\x75\151\x72\x65"], ["\x74\x6f\x74\x61\x6c", "\x72\145\161\x75\x69\162\x65"]]; goto FYZXL; ovuKJ: $order = new CateringService(); goto LgAHR; q_fPy: $app_id = Request::instance()->param("\x69"); goto DTX0B; XU2vQ: return json_encode($rs); goto t0qXx; DTX0B: $mch_id = $this->getMchId($app_id); goto jFVv0; FYZXL: $data = ["\155\143\x68\x5f\151\x64" => $mch_id, "\157\162\144\145\x72\137\151\144" => Request::instance()->param("\157\162\x64\145\162\137\x69\144"), "\165\x73\x65\162\x5f\x69\144" => Request::instance()->param("\x75\x73\x65\162\137\151\144"), "\x61\x64\x64\x5f\x70\162\151\143\x65" => Request::instance()->param("\141\144\144\x5f\160\162\151\x63\x65"), "\x74\x6f\x74\x61\x6c" => Request::instance()->param("\x74\157\164\x61\x6c")]; goto X7C8X; eJPdF: $result = $this->checkParam($rule, $data); goto sW8eF; EcI96: } public function tuiOrder() { goto RJ3Oh; RAaI2: $result = $this->checkParam($rule, $data); goto XyciH; MJDQV: $data = ["\x6d\143\150\x5f\x69\x64" => $mch_id, "\157\x72\144\x65\x72\x5f\x69\x64" => Request::instance()->param("\157\162\144\145\x72\137\151\144"), "\165\x73\145\162\x5f\151\144" => Request::instance()->param("\165\x73\x65\x72\x5f\x69\x64"), "\x72\x65\144\x75\x63\145\x5f\160\162\x69\x63\145" => Request::instance()->param("\x72\145\x64\165\x63\x65\x5f\x70\162\x69\x63\x65"), "\x74\157\164\x61\154" => Request::instance()->param("\164\157\164\141\x6c")]; goto kIl53; XyciH: if (empty($result)) { goto xo7Js; } goto a4nTj; RJ3Oh: $app_id = Request::instance()->param("\151"); goto s9a3W; Y54CL: $info = $order->tuiOrder($data, $json); goto bU1GN; bU1GN: return AjaxReturn($info); goto U2nEt; ZpA7y: $rs["\x6d\x73\147"] = $result; goto Yeghb; Yeghb: return json_encode($rs); goto XgI4P; s9a3W: $mch_id = $this->getMchId($app_id); goto bcjeD; bcjeD: $rule = [["\155\x63\150\137\x69\144", "\162\145\161\165\x69\x72\x65", "\344\xb8\215\xe5\xad\230\xe5\234\xa8\xe5\x95\x86\346\x88\267"], ["\x75\163\x65\162\x5f\x69\x64", "\x72\145\161\x75\x69\x72\145"], ["\x6f\x72\x64\145\x72\x5f\x69\x64", "\162\145\161\165\151\162\145"], ["\x72\145\x64\x75\143\145\x5f\x70\x72\151\143\x65", "\162\145\x71\165\151\x72\x65"], ["\164\x6f\x74\141\154", "\x72\145\161\165\x69\x72\x65"]]; goto MJDQV; kIl53: $json = Request::instance()->param("\157\162\144\145\x72\137\x64\x69\x73\150\x5f\152\163\157\156"); goto RAaI2; XgI4P: xo7Js: goto MDjCM; MDjCM: $order = new CateringService(); goto Y54CL; a4nTj: $rs["\143\157\144\145"] = 1; goto ZpA7y; U2nEt: } public function tuigoodslist() { goto KZ5Hb; chJFl: return json_encode($rs); goto UhwwN; bBXi1: return AjaxReturn($info); goto jLbY1; M3x4X: if (empty($result)) { goto YS9G7; } goto Cu_C2; Cu_C2: $rs["\x63\x6f\144\145"] = 1; goto Nynzr; BgEj0: $result = $this->checkParam($rule, $data); goto M3x4X; a_e0R: $mch_id = $this->getMchId($app_id); goto ZHuIO; ZHuIO: $rule = [["\155\x63\x68\137\151\144", "\x72\145\161\165\x69\162\x65", "\xe4\xb8\x8d\345\xad\230\345\x9c\250\xe5\x95\206\xe6\210\267"], ["\x6f\162\144\x65\x72\x5f\x69\144", "\x72\x65\161\165\151\x72\145"]]; goto VVofR; uWcxI: $order = new CateringService(); goto ATXc4; ATXc4: $info = $order->tuigoodslist($data); goto bBXi1; UhwwN: YS9G7: goto uWcxI; Nynzr: $rs["\x6d\163\x67"] = $result; goto chJFl; KZ5Hb: $app_id = Request::instance()->param("\151"); goto a_e0R; VVofR: $data = ["\x6d\x63\x68\137\151\x64" => $mch_id, "\157\x72\x64\145\162\137\x69\x64" => Request::instance()->param("\157\162\x64\145\x72\137\x69\x64")]; goto BgEj0; jLbY1: } public function getWxcode() { goto lSmeH; H_c9N: $post_data = json_encode($post_data); goto Ze21d; L2IjH: $ACCESS_TOKEN = $this->getWxAccessToken($appid, $appsecret); goto BHpnH; lSmeH: $appid = "\x77\x78\142\x63\146\x61\x61\60\x30\65\x64\x61\x37\142\x31\x36\61\143"; goto ZjwZd; s8PS_: $result = data_uri($data, "\x69\155\141\x67\x65\57\x70\x6e\x67"); goto b4hpD; Bfe_B: $post_data = array("\x70\x61\147\145" => "\160\141\x67\145\163\57\x63\141\162\145\147\157\x72\x79\x2f\x69\x6e\x64\x65\x78", "\x73\x63\145\x6e\x65" => "\63\64\54\x53\x38\65\x33\105\105\64\x51\122\120"); goto H_c9N; Ze21d: $data = $this->send_post($url, $post_data); goto s8PS_; BHpnH: $url = "\150\164\164\x70\163\72\x2f\57\141\x70\x69\56\x77\x65\151\x78\x69\156\x2e\x71\x71\56\x63\157\x6d\x2f\167\x78\x61\57\147\x65\x74\167\170\x61\x63\157\x64\145\x75\x6e\x6c\x69\x6d\x69\164\x3f\141\x63\143\x65\163\x73\137\x74\x6f\153\145\x6e\x3d" . $ACCESS_TOKEN["\x61\143\x63\145\163\163\x5f\164\x6f\x6b\x65\156"]; goto Bfe_B; b4hpD: return "\x3c\x69\155\141\147\145\x20\x73\162\143\x3d" . $result . "\76\74\x2f\x69\155\x61\x67\x65\x3e"; goto pN4Ew; ZjwZd: $appsecret = "\145\61\64\71\x65\x38\x31\62\66\x30\x37\x63\67\143\x64\x62\x65\61\x32\x39\x33\63\x36\x63\x61\63\142\142\x63\70\62\141"; goto L2IjH; pN4Ew: } protected function send_post($url, $post_data) { goto KsWaj; D81t7: return $result; goto J04Gu; xrdE1: $context = stream_context_create($options); goto hr7a5; hr7a5: $result = file_get_contents($url, false, $context); goto D81t7; KsWaj: $options = array("\150\164\x74\160" => array("\x6d\145\x74\150\157\x64" => "\x50\x4f\123\x54", "\150\145\141\144\145\x72" => "\103\157\x6e\x74\x65\x6e\164\x2d\x74\171\x70\x65\x3a\x61\160\160\x6c\151\x63\141\164\x69\x6f\x6e\57\152\x73\157\156", "\143\x6f\x6e\x74\145\156\164" => $post_data, "\x74\151\x6d\145\x6f\165\x74" => 60)); goto xrdE1; J04Gu: } }
