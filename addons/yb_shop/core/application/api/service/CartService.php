<?php
 namespace app\api\service; use think\Db; require_once BASE_ROOT . "\143\157\x72\x65\x2f\141\160\x70\x6c\x69\143\141\164\151\x6f\156\x2f\143\x6f\x6d\x6d\x6f\x6e\x2e\160\150\x70"; class CartService { private $g = "\171\142\163\143\x5f\x67\157\157\x64\163"; private $c = "\171\x62\163\x63\x5f\143\x61\162\164"; private $i = "\x79\x62\x73\143\x5f\x69\155\141\147\145\x73"; private $s = "\171\142\163\143\137\x67\157\x6f\x64\x73\x5f\163\x6b\165"; public function getCart($data, $page = 1) { goto cyhhB; cyhhB: $cart_goods_list = null; goto D04mm; y1DM4: dBAEe: goto sciS9; D04mm: $cart_goods_list = Db::name($this->c)->where($data)->page($page, PAGE_NUM)->order("\143\x72\145\x61\x74\145\137\x74\x69\x6d\145", "\x64\x65\x73\x63")->select(); goto ua5Wl; ua5Wl: foreach ($cart_goods_list as $key => $value) { goto WISJy; JljOu: $cart_goods_list[$key]["\x6d\x61\170\137\142\x75\x79"] = $goods_info["\x6d\141\x78\137\142\165\x79"]; goto QjUTt; WISJy: $pic = Db::name($this->i)->where("\x69\x6d\x67\x5f\x69\144", $value["\x67\157\x6f\144\x73\137\x69\x6d\x61\147\145\163"])->field("\x69\x6d\147\137\x63\157\x76\x65\162\54\x69\155\147\x5f\143\x6f\166\x65\162\137\x62\151\147\x2c\x69\x6d\x67\x5f\143\157\x76\x65\162\x5f\x6d\x69\x64\54\151\155\x67\137\143\157\166\145\162\137\163\x6d\141\154\x6c")->find(); goto Yz85y; nrWWd: goto wVUof; goto hvHEr; sUwZG: $cart_goods_list[$key]["\160\151\143"] = $pic; goto rOMDY; QjUTt: if (!empty($goods_info)) { goto OCmIS; } goto nrWWd; hvHEr: OCmIS: goto wRg6H; rOMDY: t23Er: goto FbWiI; zPwIY: wVUof: goto OmBIH; wRg6H: $cart_goods_list[$key]["\x73\x6b\165"] = Db::name($this->s)->where("\x73\x6b\x75\137\x69\x64", $value["\163\x6b\165\x5f\x69\144"])->field("\x70\162\x69\x63\145\54\163\x6b\x75\137\x6e\x61\x6d\x65\x2c\x73\x74\x6f\143\153\x2c\x61\x74\x74\162\x5f\166\141\x6c\x75\145\x5f\151\x74\x65\x6d\x73")->find(); goto ViChR; Yz85y: if (!$pic) { goto t23Er; } goto sUwZG; PALPa: $cart_goods_list[$key]["\x6d\151\x6e\137\x62\x75\171"] = $goods_info["\x6d\x69\x6e\137\142\165\x79"]; goto JljOu; FbWiI: $goods_info = Db::name($this->g)->field("\155\x69\x6e\x5f\x62\165\171\x2c\147\157\x6f\144\163\x5f\163\x70\x65\143\x5f\146\157\x72\x6d\x61\x74\x2c\x6d\x61\170\137\142\165\x79")->where("\x67\x6f\157\x64\x73\137\x69\144", $value["\147\157\x6f\x64\x73\137\x69\144"])->where("\x69\x73\137\144\145\154", 0)->find(); goto PALPa; ViChR: $cart_goods_list[$key]["\x61\x74\164\162\x5f\x6e\x61\x6d\145"] = getAttrName($goods_info["\x67\157\157\144\x73\137\163\x70\145\x63\x5f\x66\x6f\162\155\x61\x74"], $cart_goods_list[$key]["\x73\153\x75"]["\x61\x74\164\x72\x5f\x76\141\154\165\x65\x5f\x69\164\x65\155\163"]); goto zPwIY; OmBIH: } goto y1DM4; sciS9: return $cart_goods_list; goto JzQON; JzQON: } public function addCart($data) { goto Zqbkp; x6miq: $rs = Db::name($this->c)->where("\x63\141\162\x74\x5f\x69\x64", $info["\x63\141\x72\164\x5f\151\x64"])->setInc("\156\x75\155", $data["\156\165\155"]); goto vk_o_; l4ODE: if (!empty($info)) { goto qEV_T; } goto YjZXR; W1JEx: goto ku2HH; goto l53J3; ppZ80: rBQgV: goto l4ODE; YjZXR: $rs = Db::name($this->c)->insert($data); goto W1JEx; XLM9b: hmVzS: goto Pjf36; Zqbkp: $info = Db::name($this->c)->where("\x73\x6b\x75\x5f\x69\144", $data["\x73\153\x75\137\151\144"])->where("\147\x6f\x6f\x64\163\137\x69\144", $data["\x67\157\x6f\x64\x73\x5f\151\x64"])->where("\142\x75\171\145\x72\x5f\x69\144", $data["\142\165\x79\x65\162\137\151\x64"])->where("\155\143\x68\137\151\144", $data["\x6d\143\150\x5f\151\x64"])->find(); goto TohHj; ucPp1: return $rs; goto zuWQl; vk_o_: ku2HH: goto ucPp1; l53J3: qEV_T: goto x6miq; TohHj: $goods_info = Db::name("\171\142\163\143\x5f\x67\x6f\157\x64\x73")->field("\155\151\156\x5f\x62\x75\171\x2c\155\141\x78\x5f\x62\165\x79")->where("\147\x6f\157\144\163\137\151\x64", $data["\147\x6f\157\144\163\x5f\x69\x64"])->find(); goto R2Nk7; EUtLj: return 102; goto ppZ80; R2Nk7: if (!($info["\x6e\x75\155"] + $data["\156\165\155"] > $goods_info["\x6d\141\x78\137\x62\x75\x79"] && $goods_info["\x6d\x61\170\x5f\x62\x75\171"] != 0)) { goto hmVzS; } goto J6RhD; J6RhD: return 101; goto XLM9b; Pjf36: if (!($info["\156\x75\155"] + $data["\x6e\x75\x6d"] < $goods_info["\x6d\x69\156\x5f\x62\x75\171"] && $goods_info["\155\151\x6e\x5f\142\x75\171"] != 0)) { goto rBQgV; } goto EUtLj; zuWQl: } public function cartNum($data) { $rs = Db::name($this->c)->where("\143\x61\162\164\137\x69\144", $data["\x63\x61\162\x74\x5f\x69\x64"])->update(["\x6e\x75\155" => $data["\x6e\165\x6d"]]); return $rs; } public function delCart($data) { $rs = Db::name($this->c)->delete($data["\x63\141\x72\x74\x5f\x69\x64"]); return $rs; } public function delAllCart($data) { $rs = Db::name($this->c)->where($data)->delete(); return $rs; } }
