<?php
 namespace app\api\service; use think\Db; use think\Exception; class DistribeService { private $i = "\x79\x62\x73\143\137\x69\155\x61\147\145\x73"; private $og = "\x79\x62\163\x63\x5f\x6f\162\144\x65\x72\137\x67\157\x6f\x64\163"; private $u = "\171\142\x73\x63\137\x75\163\x65\162"; private $us = "\x79\142\x73\x63\137\x75\163\145\x72\137\x73\150\x61\162\x65"; public function user_info($data) { goto cvfqF; KV2D7: return null; goto wyOaI; Zv0Bc: $u["\165\x6e\137\x70\x61\171"] = Db::name("\171\142\x73\143\x5f\165\x73\145\x72\137\163\150\x61\x72\145\x5f\143\141\x73\150")->where(["\x6d\143\x68\x5f\x69\144" => $data["\x6d\143\x68\x5f\x69\x64"], "\x73\164\141\164\165\163" => "\x31", "\x75\163\145\x72\x5f\x69\144" => $data["\x75\x69\144"], "\151\x73\x5f\x64\145\x6c" => 1])->sum("\160\162\x69\x63\x65"); goto GJapb; Qqp3t: kHxxW: goto U4UkY; yXKOR: $info["\163\x65\143\x6f\x6e\x64"] = 0; goto Njtt5; v6Tzd: Db::name($this->u)->where(["\155\143\150\137\x69\144" => $data["\x6d\x63\150\x5f\x69\x64"], "\x75\151\x64" => $u["\x75\151\144"]])->update(["\x70\x69\144" => 0]); goto Ixjwd; aMV07: goto w_Uii; goto vV4UB; ZnEhz: if (!(count($a["\160\151\144\137\141\x72\162"]) > 0)) { goto aCoXG; } goto uUxZT; SdoIR: w_Uii: goto j1ojk; hvnn6: $u["\160\141\162\145\x6e\x74"] = "\xe6\x80\xbb\xe5\xba\x97"; goto kD_ap; GJapb: $u["\147\x65\x74\x5f\x70\162\x69\x63\145"] = sprintf("\x25\56\x32\146", $u["\164\x6f\164\141\x6c\x5f\160\x72\151\143\x65"] - $u["\x70\162\x69\143\x65"]); goto tpOiZ; IWvYB: goto C2bi_; goto u_54i; U4UkY: aCoXG: goto AYaPl; vLWLo: $u["\x74\145\141\x6d\x5f\143\157\165\x6e\164"] = $info["\146\x69\x72\x73\164"] + $info["\163\x65\143\157\156\144"]; goto aMV07; AYaPl: $share = Db::name("\x79\x62\x73\143\137\x75\163\145\x72\x5f\163\x68\141\x72\145\x5f\163\x65\164\x74\x69\x6e\x67")->where(["\155\x63\x68\137\151\x64" => $data["\x6d\143\150\137\151\x64"]])->value("\x6c\x65\166\145\x6c"); goto Vk6Wy; SNBnA: $u["\164\145\141\155\x5f\x63\157\x75\156\164"] = $info["\146\x69\x72\163\x74"]; goto B4VFq; vkoda: if (!(count($b["\160\151\144\x5f\x61\x72\162"]) > 0)) { goto kHxxW; } goto jH4c9; uUxZT: $b = $this->InfiniteClass($a["\x70\151\144\x5f\x61\x72\162"], $data["\155\x63\x68\x5f\151\x64"], 1); goto cNMOT; Njtt5: $info["\x74\150\151\x72\x64"] = 0; goto ZnEhz; dBzSj: if (empty($user_share)) { goto aPpzC; } goto Ig5yU; Vk6Wy: if ($share == 1) { goto GPgEg; } goto ocpaR; RPPIO: if ($u["\160\x69\x64"] == 0) { goto tGa1E; } goto eUU_0; tHizp: goto aWo77; goto m702W; ocpaR: if ($share == 2) { goto u1gYU; } goto zR9NH; LcL1f: $info["\164\x68\151\x72\144"] = $c["\x63\157\x75\156\164"]; goto Qqp3t; m702W: aPpzC: goto v6Tzd; Ig5yU: $u["\160\141\162\145\x6e\164"] = $user_share["\156\x61\x6d\x65"] ? $user_share["\x6e\x61\x6d\x65"] : "\346\200\273\345\xba\227"; goto tHizp; jH4c9: $c = $this->InfiniteClass($b["\160\151\x64\x5f\141\162\162"], $data["\x6d\143\x68\x5f\151\144"], 1); goto LcL1f; Ixjwd: $u["\160\x61\x72\145\156\164"] = "\xe6\x80\273\xe5\xba\227"; goto eMEor; AIQDM: GPgEg: goto SNBnA; eUU_0: $user_share = Db::name($this->us)->where(["\x6d\x63\x68\137\x69\144" => $data["\x6d\143\x68\137\151\x64"], "\165\x73\x65\162\x5f\x69\144" => $u["\x70\x69\144"], "\x73\164\x61\x74\165\163" => 1, "\151\163\137\144\x65\x6c" => 1])->find(); goto dBzSj; zR9NH: if ($share == 3) { goto Ask3e; } goto cFh84; eMEor: aWo77: goto IWvYB; vV4UB: Ask3e: goto YGw20; cvfqF: $u = Db::name($this->u)->where($data)->find(); goto xstZn; B4VFq: goto w_Uii; goto pod9U; FPhWZ: $info["\146\151\162\163\164"] = $a["\x63\x6f\165\156\164"]; goto yXKOR; j1ojk: return $u; goto h7aFw; xstZn: if (!empty($u)) { goto O5k2p; } goto KV2D7; YGw20: $u["\x74\145\x61\155\x5f\143\x6f\x75\x6e\x74"] = $info["\146\151\x72\x73\x74"] + $info["\163\145\x63\x6f\156\x64"] + $info["\164\x68\x69\162\x64"]; goto SdoIR; hwEnS: $u["\x6f\162\144\x65\162\x5f\x73\x68\141\x72\145\x5f\155\x6f\x6e\145\171"] = $this->get_share_money($data["\165\x69\144"], $data["\155\143\x68\137\151\x64"], ["\x69\x6e", "\60\54\61\x2c\x32\54\63"]); goto QgfNB; cFh84: $u["\164\x65\x61\155\137\x63\157\165\156\164"] = 0; goto E23SA; E23SA: goto w_Uii; goto AIQDM; kD_ap: C2bi_: goto GmxPz; wyOaI: O5k2p: goto RPPIO; QgfNB: $u["\157\x72\x64\x65\x72\x5f\x6d\x6f\156\145\x79\x5f\171\x6a"] = $this->get_share_money($data["\x75\151\x64"], $data["\x6d\x63\150\137\x69\144"], ["\151\x6e", "\60\54\61\x2c\x32"]); goto g5ftc; tpOiZ: $a = $this->InfiniteClass([$data["\165\151\x64"]], $data["\155\143\150\137\x69\x64"], 1); goto FPhWZ; GmxPz: $u["\x74\x6f\x64\141\x79\x5f\160\162\x69\143\145"] = Db::name("\171\x62\x73\143\x5f\165\x73\x65\162\137\163\x68\141\162\x65\x5f\x63\x61\x73\150")->where(["\155\143\150\x5f\x69\x64" => $data["\x6d\143\x68\137\x69\x64"], "\165\x73\145\x72\137\x69\x64" => $data["\x75\151\144"], "\x69\163\x5f\144\145\x6c" => 1])->whereTime("\143\162\145\141\164\x65\x5f\164\151\155\145", "\144")->sum("\x70\x72\151\143\x65"); goto hwEnS; pod9U: u1gYU: goto vLWLo; cNMOT: $info["\x73\145\143\157\156\144"] = $b["\x63\157\165\156\x74"]; goto vkoda; u_54i: tGa1E: goto hvnn6; g5ftc: $u["\157\x72\144\x65\162\x5f\x6d\x6f\156\145\171\x5f\x75\x6e"] = $this->get_share_money($data["\x75\x69\144"], $data["\x6d\143\x68\137\x69\x64"], ["\x69\156", "\61\54\x32"]); goto Zv0Bc; h7aFw: } public function get_share_money($uid, $mch_id, $status, $type = 0) { goto VM8QG; pwx5O: $fir2 = Db::name("\171\x62\x73\x63\137\x6f\x72\144\145\x72\x5f\163\x68\x61\162\x65")->alias("\x6f\x73")->join("\x79\142\x73\143\x5f\157\x72\144\145\162\40\157", "\157\x73\x2e\157\162\x64\145\x72\x5f\151\144\75\x6f\56\x6f\162\x64\x65\x72\137\151\x64")->where(["\157\x73\56\x70\141\x72\145\156\164\137\x69\144\x5f\61" => $uid, "\x6f\x73\56\x6d\x63\150\x5f\151\x64" => $mch_id, "\157\163\x2e\151\x73\137\x64\x65\154" => 1, "\157\x2e\157\x72\x64\x65\x72\137\163\164\x61\x74\165\x73" => $status])->count(); goto f9swq; f9swq: $sec2 = Db::name("\x79\x62\163\143\x5f\x6f\162\x64\145\x72\137\x73\x68\x61\x72\145")->alias("\157\163")->join("\x79\142\x73\143\x5f\157\x72\144\x65\x72\40\x6f", "\157\x73\56\157\x72\x64\145\x72\x5f\x69\x64\x3d\x6f\56\x6f\x72\144\145\162\137\x69\144")->where(["\x6f\163\x2e\x70\141\162\145\x6e\164\x5f\x69\x64\137\x32" => $uid, "\157\x73\56\155\x63\150\137\x69\144" => $mch_id, "\157\x73\x2e\151\163\x5f\x64\145\x6c" => 1, "\x6f\x2e\x6f\162\x64\145\x72\x5f\163\164\x61\164\165\x73" => $status])->count(); goto vlI0c; vlI0c: $thi2 = Db::name("\171\x62\163\x63\137\157\x72\144\x65\162\x5f\x73\x68\x61\x72\x65")->alias("\157\163")->join("\x79\x62\163\x63\137\157\x72\x64\x65\162\x20\157", "\x6f\x73\56\157\x72\144\145\162\x5f\x69\144\75\157\56\x6f\162\144\x65\x72\137\x69\x64")->where(["\157\163\56\x70\x61\162\145\x6e\x74\137\x69\x64\x5f\x33" => $uid, "\157\163\56\155\143\x68\137\x69\144" => $mch_id, "\x6f\x73\x2e\151\163\x5f\144\145\x6c" => 1, "\157\x2e\157\162\x64\145\x72\137\163\164\141\x74\x75\163" => $status])->count(); goto bbTmq; Q5wcE: lR50o: goto az5ME; bbTmq: $reb2 = Db::name("\171\x62\x73\143\x5f\x6f\x72\144\145\x72\x5f\163\150\141\162\x65")->alias("\157\x73")->join("\171\142\163\x63\137\157\x72\x64\145\x72\40\x6f", "\157\163\x2e\x6f\x72\x64\x65\x72\x5f\151\x64\x3d\157\x2e\x6f\x72\144\145\x72\x5f\x69\144")->where(["\x6f\163\56\x75\x73\x65\x72\x5f\151\x64" => $uid, "\x6f\x73\56\162\145\x62\141\164\x65" => ["\x3c\x3e", "\60\56\60\x30"], "\x6f\x73\x2e\151\x73\137\144\x65\154" => 1, "\157\x73\56\x6d\x63\x68\x5f\151\x64" => $mch_id, "\157\56\x6f\162\x64\145\162\x5f\163\164\141\164\x75\163" => $status])->count(); goto VNIe6; VM8QG: $fir = Db::name("\171\142\x73\x63\x5f\x6f\162\x64\145\x72\137\x73\x68\141\x72\x65")->alias("\157\x73")->join("\x79\142\163\x63\x5f\157\162\x64\x65\x72\x20\157", "\157\x73\56\157\x72\x64\x65\x72\x5f\151\144\x3d\x6f\56\157\162\144\145\162\137\x69\144")->where(["\157\163\x2e\160\x61\x72\x65\x6e\164\x5f\151\x64\x5f\61" => $uid, "\157\163\x2e\155\143\x68\x5f\x69\144" => $mch_id, "\x6f\163\x2e\151\163\x5f\x64\x65\154" => 1, "\157\56\157\x72\x64\x65\x72\137\x73\x74\x61\x74\165\x73" => $status])->sum("\157\x73\x2e\146\151\x72\x73\x74\x5f\x70\162\151\x63\x65"); goto TWsMA; jUopC: $reb = Db::name("\171\142\x73\143\x5f\157\x72\144\x65\x72\137\x73\x68\x61\x72\x65")->alias("\x6f\x73")->join("\x79\142\163\x63\x5f\157\162\x64\x65\x72\x20\157", "\x6f\163\56\x6f\x72\x64\145\x72\137\151\x64\x3d\157\56\x6f\162\x64\145\162\x5f\151\x64")->where(["\x6f\163\x2e\x75\163\x65\162\x5f\151\x64" => $uid, "\157\163\x2e\x6d\143\150\137\x69\144" => $mch_id, "\157\x73\x2e\x69\163\137\144\x65\154" => 1, "\157\56\157\x72\x64\145\162\137\163\x74\x61\x74\165\163" => $status])->sum("\x72\x65\142\x61\164\145"); goto yqlBC; TWsMA: $sec = Db::name("\171\x62\163\x63\x5f\157\x72\x64\145\162\137\163\150\x61\x72\x65")->alias("\x6f\163")->join("\x79\x62\163\143\137\157\x72\x64\x65\162\40\x6f", "\x6f\163\56\x6f\x72\x64\145\162\x5f\151\144\x3d\x6f\x2e\157\x72\x64\145\162\137\151\x64")->where(["\x6f\x73\56\x70\x61\x72\x65\x6e\x74\x5f\x69\144\137\x32" => $uid, "\157\163\56\x6d\x63\x68\137\151\144" => $mch_id, "\x6f\x73\56\x69\163\x5f\144\145\154" => 1, "\157\56\x6f\x72\144\145\162\137\x73\x74\141\x74\x75\163" => $status])->sum("\x6f\163\56\163\145\x63\157\x6e\x64\x5f\160\x72\151\143\x65"); goto DEgoN; DEgoN: $thi = Db::name("\x79\142\163\143\x5f\157\x72\x64\x65\x72\137\163\150\x61\162\x65")->alias("\x6f\163")->join("\x79\142\x73\x63\x5f\x6f\162\x64\145\x72\x20\x6f", "\x6f\163\x2e\157\x72\144\145\162\x5f\151\144\75\x6f\56\x6f\x72\x64\145\x72\137\151\144")->where(["\157\x73\x2e\160\x61\x72\145\x6e\x74\x5f\151\144\x5f\63" => $uid, "\157\163\x2e\155\x63\x68\x5f\x69\x64" => $mch_id, "\157\x73\x2e\151\163\x5f\x64\145\154" => 1, "\x6f\56\x6f\x72\144\x65\162\137\x73\x74\141\164\x75\x73" => $status])->sum("\x74\150\151\x72\x64\137\x70\162\151\143\145"); goto jUopC; nuGMV: return ["\x6f\x72\x64\x65\162\x5f\155\x6f\x6e\x65\171" => sprintf("\45\x2e\62\146", $money), "\x6f\162\x64\145\162\x5f\x63\157\165\156\x74" => $count]; goto Q5wcE; az5ME: return sprintf("\45\56\62\x66", $money); goto do03x; VNIe6: $count = intval($fir2) + intval($sec2) + intval($thi2) + intval($reb2); goto nuGMV; UwZVO: if (!($type == 1)) { goto lR50o; } goto pwx5O; yqlBC: $money = floatval($fir) + floatval($sec) + floatval($thi) + floatval($reb); goto UwZVO; do03x: } public function addman($data) { goto DoP7d; bmJub: KZ9bG: goto p4lfl; p4lfl: return $info; goto yZp6F; SLgZk: $info = Db::name("\171\x62\163\x63\137\165\163\x65\162")->where("\165\151\x64", $data["\165\x69\144"])->update(["\160\x69\144" => $data["\x70\151\x64"]]); goto bmJub; wf_V7: if (!(!empty($rs) && $data["\x70\x69\x64"] != 0 && $rs["\x70\x69\x64"] == 0 && $data["\x75\151\x64"] != $data["\160\x69\x64"] && $rs["\151\x73\137\x64\151\x73\x74\x72\151\x62\165\x74\157\162"] == 0)) { goto KZ9bG; } goto SLgZk; l2ClR: $rs = Db::name("\171\x62\163\143\x5f\x75\163\145\x72")->where(["\x75\151\x64" => $data["\165\x69\x64"], "\x6d\x63\x68\x5f\x69\x64" => $data["\155\x63\150\137\x69\x64"]])->find(); goto wf_V7; DoP7d: $info = null; goto l2ClR; yZp6F: } public function get_join($data) { goto omP8H; sSGgO: NifPT: goto BQUzQ; omP8H: $rs = array("\143\x6f\144\145" => 0, "\x69\x6e\146\x6f" => array()); goto f8hdS; f8hdS: $count = Db::name($this->us)->where(["\155\x63\x68\137\151\x64" => $data["\155\143\150\137\151\144"], "\x75\x73\145\x72\x5f\151\144" => $data["\x75\x73\x65\x72\137\x69\x64"], "\x69\163\137\x64\145\154" => 1])->count(); goto UKeRh; KeXGu: $data["\143\x72\145\x61\x74\x65\x5f\x74\x69\155\x65"] = time(); goto T9FhW; IBuAn: $rs["\x73\x68\x61\162\145\x5f\x63\157\156\144\151\x74\151\x6f\x6e"] = $share_condition; goto a68di; a68di: if ($share_condition == 1) { goto ya25B; } goto ZhjwO; T9FhW: Db::startTrans(); goto c55iB; OjWkN: return json_encode($rs); goto LTSTH; BQUzQ: $data["\x69\163\137\x64\145\x6c"] = 1; goto ml5sM; rtWpP: $data["\x73\164\141\x74\x75\163"] = 0; goto sSGgO; Mpqdn: goto NifPT; goto TO5H5; dYbZV: $rs["\x63\157\x64\x65"] = 1; goto I0XSX; ml5sM: $data["\163\145\x6c\154\x65\x72\x5f\x63\x6f\x6d\155\145\156\164\163"] = null; goto KeXGu; I0XSX: $rs["\155\x73\x67"] = "\347\224\250\346\x88\xb7\xe5\267\262\345\255\x98\xe5\234\xa8"; goto eRyS_; ZhjwO: $data["\163\164\x61\x74\165\163"] = 1; goto Mpqdn; UKeRh: if (!($count > 0)) { goto nOotn; } goto dYbZV; XeD0d: nOotn: goto CRT5v; CRT5v: $share_condition = Db::name("\x79\x62\163\143\x5f\165\163\145\162\137\x73\x68\x61\162\145\137\163\x65\x74\164\x69\x6e\x67")->where(["\155\143\150\137\151\x64" => $data["\x6d\x63\x68\137\151\144"]])->value("\163\150\141\162\145\x5f\143\x6f\x6e\x64\151\164\151\157\156"); goto IBuAn; c55iB: try { goto IMzXo; kQHQK: if ($share_condition == 1) { goto okCgy; } goto RwDLi; JUaNA: goto MIbcj; goto oQ25M; oQ25M: okCgy: goto qJhwc; qJhwc: $is_distributor = 2; goto dZmUV; IMzXo: $res = Db::name($this->us)->insertGetId($data); goto OIpy7; FHBjC: O9Lbt: goto kQHQK; tol2u: Db::name($this->u)->where(["\x6d\143\x68\137\151\x64" => $data["\155\x63\x68\137\x69\144"], "\x75\x69\144" => $data["\x75\163\145\x72\x5f\151\x64"]])->update(["\151\x73\137\x64\151\163\x74\162\x69\x62\165\164\157\x72" => $is_distributor]); goto yZKZG; yZKZG: Db::commit(); goto GeX2U; OIpy7: if (!empty($res)) { goto O9Lbt; } goto RbZsS; dZmUV: MIbcj: goto tol2u; RwDLi: $is_distributor = 1; goto JUaNA; RbZsS: throw new Exception("\xe6\x93\x8d\xe4\275\x9c\345\xa4\xb1\350\xb4\245"); goto FHBjC; GeX2U: } catch (\Exception $e) { goto BAVLF; qTw_7: $rs["\155\x73\147"] = $e->getMessage(); goto NY14S; vclPL: $rs["\x63\157\x64\x65"] = 1; goto qTw_7; NY14S: return json_encode($rs); goto xqukl; BAVLF: Db::rollback(); goto vclPL; xqukl: } goto WrJ22; eRyS_: return json_encode($rs); goto XeD0d; TO5H5: ya25B: goto rtWpP; WrJ22: $rs["\x69\x6e\x66\x6f"] = $res; goto OjWkN; LTSTH: } public function get_myteam($data, $page) { goto ziQz2; HVKQY: $info["\x66\151\162\163\x74"] = $a["\x63\x6f\165\156\164"]; goto yJtZD; HzIOO: tKjds: goto tIikR; mWAyG: JO6_2: goto heD74; heD74: return $info; goto CpmET; fgXa1: $info["\x73\145\x63\157\x6e\144"] = $b["\x63\157\x75\x6e\164"]; goto Sn5gQ; ziQz2: $a = $this->InfiniteClass([$data["\x75\151\144"]], $data["\x6d\143\x68\x5f\151\x64"], $page); goto HVKQY; q6OyN: goto JO6_2; goto Y59pD; OcyMH: $info["\x6c\151\163\164"] = $b["\154\x69\x73\x74"]; goto gP_3L; yJtZD: $info["\x6c\151\x73\x74"] = []; goto dzCPv; gP_3L: goto JO6_2; goto zbVYW; I9FMZ: goto JO6_2; goto lsR5h; W3CA2: eghiN: goto HzIOO; Y59pD: ojZBu: goto OcyMH; AXKku: $info["\x6c\x69\x73\164"] = $c["\154\x69\163\x74"]; goto mWAyG; zbVYW: P1J9G: goto AXKku; dzCPv: $info["\x73\145\x63\157\x6e\x64"] = 0; goto jiOvk; tIikR: if ($data["\163\x74\141\x74\x75\163"] == 1) { goto xXYc0; } goto ho8Bf; NWQvA: $b = $this->InfiniteClass($a["\160\x69\144\x5f\x61\x72\x72"], $data["\x6d\x63\150\137\151\144"], $page); goto fgXa1; v6d8C: if (!(count($a["\160\151\144\x5f\141\x72\x72"]) > 0)) { goto tKjds; } goto NWQvA; qSi0n: $info["\164\150\x69\x72\x64"] = $c["\x63\x6f\165\x6e\164"]; goto W3CA2; NREkp: $c = $this->InfiniteClass($b["\160\x69\x64\x5f\x61\162\x72"], $data["\155\143\x68\x5f\151\x64"], $page); goto qSi0n; DGp1i: $info["\154\x69\x73\164"] = $a["\154\x69\163\164"]; goto q6OyN; Sn5gQ: if (!(count($b["\x70\x69\x64\137\141\162\x72"]) > 0)) { goto eghiN; } goto NREkp; rffFr: $c["\154\151\163\164"] = []; goto v6d8C; jiOvk: $info["\164\x68\x69\162\144"] = 0; goto JQbfv; lsR5h: xXYc0: goto DGp1i; amK0M: if ($data["\163\x74\x61\x74\x75\x73"] == 3) { goto P1J9G; } goto I9FMZ; ho8Bf: if ($data["\163\x74\141\164\x75\163"] == 2) { goto ojZBu; } goto amK0M; JQbfv: $b["\x6c\151\x73\164"] = []; goto rffFr; CpmET: } public function InfiniteClass($pid, $mch_id, $page) { goto HnCY0; ToRpB: clBvH: goto BU91x; rsD3C: foreach ($list as $k => $v) { goto ML2po; wyueL: $list[$k]["\162\x65\147\x5f\x74\x69\x6d\145"] = date("\131\x2d\155\x2d\x64\40\110\72\x69\72\163", $list[$k]["\162\145\147\x5f\x74\x69\x6d\145"]); goto NGJxN; XBLyw: $list[$k]["\143\150\151\154\x64\137\143\x6f\165\156\164"] = Db::name($this->u)->where(["\x70\151\144" => $v["\x75\x69\x64"], "\155\143\x68\x5f\151\144" => $mch_id])->count(); goto wyueL; oxTs0: $list[$k]["\157\x72\x64\145\x72\x5f\x63\157\165\x6e\164"] = $a["\x6f\x72\x64\145\x72\x5f\143\x6f\165\156\x74"]; goto yVrly; yVrly: $list[$k]["\x6f\x72\144\x65\x72\x5f\155\157\156\x65\x79"] = $a["\157\x72\144\145\162\x5f\155\x6f\156\145\171"]; goto XBLyw; ML2po: $a = $this->get_share_money($v["\x75\151\x64"], $mch_id, ["\x69\156", "\x30\54\61\54\x32\54\x33"], 1); goto oxTs0; NGJxN: Q3paZ: goto acKEj; acKEj: } goto QPEc4; BU91x: $list = Db::name($this->u)->where(["\160\x69\x64" => ["\x69\156", $pid], "\x6d\x63\x68\x5f\151\x64" => $mch_id])->page($page, PAGE_NUM)->order("\165\x69\x64", "\x64\x65\163\x63")->select(); goto dv6gs; QPEc4: rhqlZ: goto Dzv1T; HnCY0: $rs = array("\143\157\x75\x6e\164" => 0, "\154\151\x73\164" => [], "\160\x69\144\137\x61\162\x72" => []); goto uK8be; nkeBh: return $rs; goto C3M6A; Dzv1T: $rs["\154\151\163\x74"] = $list; goto Aohyv; ElVoi: foreach ($li as $k1 => $v1) { array_push($rs["\160\151\144\137\141\x72\x72"], $v1["\x75\x69\x64"]); QWwYh: } goto PalTi; e77bF: if (!$li) { goto clBvH; } goto ElVoi; PalTi: CZqNF: goto ToRpB; dv6gs: if (!$list) { goto eM_rr; } goto rsD3C; s1wst: $li = Db::name($this->u)->where(["\x70\151\144" => ["\x69\x6e", $pid], "\x6d\x63\150\x5f\151\144" => $mch_id])->select(); goto e77bF; uK8be: $rs["\x63\x6f\165\156\x74"] = Db::name($this->u)->where(["\x70\151\144" => ["\151\156", $pid], "\155\143\150\x5f\151\x64" => $mch_id])->count(); goto s1wst; Aohyv: eM_rr: goto nkeBh; C3M6A: } public function get_shareOrder($data, $page) { goto JBnq_; tMbxJ: $where["\157\x2e\157\162\x64\145\162\x5f\x73\164\x61\x74\x75\163"] = ["\x69\156", "\x31\x2c\62"]; goto w53as; AZA3q: if ($status == 2) { goto s52oF; } goto U6vw6; sJXS3: cNUB_: goto p0dOl; U6vw6: $where["\157\x2e\x6f\x72\x64\145\162\137\x73\x74\x61\x74\x75\x73"] = ["\151\156", "\x30\54\x31\x2c\62\x2c\x33"]; goto Ct1NG; vHBtn: s52oF: goto NmonK; ITxMc: $where["\157\x2e\157\162\144\x65\162\x5f\163\x74\x61\164\165\x73"] = 0; goto H6Qup; yW1vc: $where["\157\163\x2e\151\x73\x5f\x64\x65\x6c"] = 1; goto zZBWG; xWA80: if (!empty($list)) { goto QwTil; } goto ofuLw; NmonK: $where["\157\56\157\x72\144\x65\x72\x5f\x73\164\x61\x74\165\163"] = 3; goto sJXS3; fMPSi: jFbYi: goto wZLEk; w53as: goto cNUB_; goto vHBtn; Mg3Fs: $list = Db::name("\x79\x62\x73\143\x5f\x6f\162\x64\145\x72\137\x73\150\141\x72\x65")->field("\x6f\163\56\52\x2c\x6f\x2e\157\x72\x64\145\162\137\163\164\141\x74\x75\x73\54\157\56\x6f\x72\144\x65\x72\x5f\x6e\157\54\165\x2e\165\x73\145\162\137\x68\145\141\x64\151\x6d\147\54\x75\56\156\151\143\153\137\x6e\141\155\145")->alias("\x6f\x73")->join("\171\x62\163\143\x5f\157\162\144\145\162\40\157", "\157\x73\x2e\x6f\x72\x64\145\x72\x5f\x69\x64\x3d\x6f\x2e\x6f\x72\144\x65\162\137\x69\x64")->join("\171\x62\163\x63\x5f\165\x73\145\162\x20\x75", "\165\56\x75\x69\144\x3d\x6f\x73\56\x75\x73\145\162\x5f\x69\x64")->where($where)->page($page, PAGE_NUM)->order("\157\163\x2e\151\x64", "\x64\x65\x73\x63")->select(); goto xWA80; rTv_7: foreach ($list as $key => $value) { goto kEPNf; H8Iue: foreach ($goods as $k => $v) { goto BIE2c; pVzd6: if (!$pic) { goto Whlj7; } goto iNZWi; iNZWi: $goods[$k]["\160\151\143"] = $pic; goto OAUpP; EY1vI: eLo9K: goto xPxzW; BIE2c: $pic = Db::name($this->i)->where("\x69\155\x67\x5f\x69\x64", $v["\x67\x6f\157\x64\163\x5f\151\155\x61\147\x65\163"])->value("\151\x6d\147\137\143\157\166\145\x72"); goto pVzd6; OAUpP: Whlj7: goto EY1vI; xPxzW: } goto Esrz8; rPJQu: goto pSA7T; goto xajPB; qHxcw: $money = 0.0; goto ZWwyQ; MvQfg: $list[$key]["\x73\150\141\162\145\x5f\164\x79\160\x65"] = $text; goto Kpmy5; ojvLX: $money = $value["\162\x65\142\141\164\x65"]; goto Gikkg; l9qdZ: goto wC28E; goto XB3SE; Esrz8: aXsvh: goto JMlnn; BDTsI: $text = "\xe4\xba\x8c\xe7\xba\247"; goto w1Dam; ZxmYP: if ($data["\165\x73\x65\162\x5f\151\144"] == $value["\x70\141\x72\x65\x6e\164\x5f\x69\144\137\x32"]) { goto qQxpE; } goto hkyu2; kEPNf: $text = ''; goto qHxcw; DMlUM: goto wC28E; goto wqLqh; kNT3E: goto wC28E; goto zNZs4; ar4Cj: goto wC28E; goto LlgCp; wHeRi: $money = $value["\x74\150\x69\162\144\x5f\x70\162\151\x63\145"]; goto T2tlk; xajPB: AWcXH: goto ojvLX; Gikkg: $text = "\350\207\xaa\xe8\264\xad\xe8\xbf\x94\xe7\x8e\xb0"; goto l9qdZ; NrVMB: $text = "\344\xb8\x80\347\272\247"; goto grItw; R1wQG: if (!(empty($value["\162\x65\142\x61\x74\145"]) || $value["\162\145\142\x61\164\145"] == "\x30\56\60\x30")) { goto AWcXH; } goto mp1JY; LlgCp: T7dY0: goto Q1wiJ; ByrcD: $goods = Db::name($this->og)->where("\157\x72\x64\x65\162\x5f\x69\x64", $value["\x6f\162\x64\145\162\137\x69\x64"])->select(); goto H8Iue; JMlnn: $list[$key]["\147\x6f\x6f\144\x73"] = $goods; goto Zbq9m; Zbq9m: pSA7T: goto MN2wB; T2tlk: wC28E: goto MvQfg; grItw: $money = $value["\146\x69\162\163\164\137\160\x72\x69\x63\145"]; goto kNT3E; Kpmy5: $list[$key]["\163\x68\141\x72\x65\x5f\155\157\x6e\145\x79"] = $money; goto iX5m_; iX5m_: $list[$key]["\143\x72\145\x61\164\x65\137\x74\x69\155\x65"] = date("\131\55\x6d\55\144\x20\110\72\151\72\163", $list[$key]["\143\162\145\x61\164\x65\x5f\x74\151\155\x65"]); goto ByrcD; NjUig: if ($data["\x75\x73\145\x72\137\151\x64"] == $value["\x70\141\x72\145\x6e\164\137\x69\x64\x5f\x31"]) { goto phOxT; } goto ZxmYP; mp1JY: unset($list[$key]); goto rPJQu; hkyu2: if ($data["\165\x73\x65\162\137\x69\x64"] == $value["\160\x61\x72\145\156\164\x5f\151\144\137\63"]) { goto T7dY0; } goto DMlUM; w1Dam: $money = $value["\163\x65\143\x6f\156\x64\x5f\x70\162\x69\143\x65"]; goto ar4Cj; Q1wiJ: $text = "\344\xb8\211\xe7\xba\xa7"; goto wHeRi; zNZs4: qQxpE: goto BDTsI; ZWwyQ: if ($data["\165\x73\145\162\137\x69\x64"] == $value["\x75\x73\145\x72\x5f\151\x64"]) { goto rQCIn; } goto NjUig; XB3SE: phOxT: goto NrVMB; wqLqh: rQCIn: goto R1wQG; MN2wB: } goto fMPSi; yV1SZ: $where["\157\163\56\155\143\x68\x5f\x69\x64"] = $data["\x6d\143\x68\137\x69\x64"]; goto yW1vc; wZLEk: return $list; goto oUIVT; ofuLw: return []; goto JLk3J; NU3kh: if ($status == 1) { goto hMvFc; } goto AZA3q; Ct1NG: goto cNUB_; goto Tp6xO; JBnq_: $status = $data["\163\x74\141\x74\x75\x73"]; goto yV1SZ; h4DIf: hMvFc: goto tMbxJ; H6Qup: goto cNUB_; goto h4DIf; Tp6xO: V25yz: goto ITxMc; JLk3J: QwTil: goto rTv_7; zZBWG: if ($status == 0) { goto V25yz; } goto NU3kh; p0dOl: $where["\157\163\56\x70\x61\162\x65\x6e\x74\137\x69\144\137\61\174\x6f\x73\56\x70\141\162\x65\156\x74\x5f\151\144\137\x32\174\x6f\163\56\160\x61\162\145\156\x74\137\151\144\137\63\x7c\157\163\x2e\x75\163\x65\162\x5f\x69\x64"] = $data["\165\x73\x65\162\x5f\151\x64"]; goto Mg3Fs; oUIVT: } public function get_shareSetting($mch_id) { goto fSBof; dLsWB: HDBFN: goto BG7BT; S73n3: $info["\157\164\150\145\x72"] = ["\x31" => "\xe5\217\257\346\217\x90\xe7\x8e\xb0\344\275\243\351\x87\x91", "\x32" => "\xe5\267\262\xe6\x8f\220\xe7\216\260\xe4\275\xa3\xe9\207\x91", "\63" => "\xe6\216\xa8\350\x8d\x90\344\272\272", "\64" => "\346\234\xaa\347\xbb\x93\347\256\x97\xe4\275\xa3\351\x87\221", "\65" => "\345\210\206\351\224\x80\xe4\xbd\xa3\xe9\x87\x91", "\66" => "\xe5\x88\206\351\224\x80\xe8\xae\242\345\x8d\x95", "\67" => "\xe6\217\x90\xe7\x8e\xb0\346\230\x8e\347\273\206", "\70" => "\346\210\221\xe7\x9a\204\xe5\x9b\242\351\230\x9f", "\x39" => "\xe6\216\xa8\xe5\xb9\xbf\344\272\x8c\xe7\xbb\264\347\240\x81", "\x31\x30" => "\345\217\221\345\xb1\x95\344\xb8\x8b\347\xba\277", "\x31\x31" => "\xe5\276\x85\346\211\x93\xe6\254\xbe\344\xbd\243\xe9\207\x91", "\61\62" => "\345\x88\x86\xe9\224\x80\xe4\xb8\xad\xe5\xbf\x83", "\61\x33" => "\xe5\x88\x86\351\224\200\345\225\x86"]; goto ScJ58; vM38g: Ez0vt: goto EkLBv; I7tOx: if (isset($info["\x6c\145\x76\x65\x6c"])) { goto ryJI9; } goto ZEJ21; x5IIl: dZ7b2: goto FlW61; wiZvO: if ($info && !empty($info["\160\141\171\x5f\x74\171\160\145"])) { goto Ez0vt; } goto Y211j; ScJ58: goto H71R9; goto x5IIl; EkLBv: $info["\160\141\x79\x5f\x74\x79\x70\x65"] = json_decode($info["\x70\141\x79\x5f\x74\x79\x70\145"], true); goto dLsWB; Ivuwm: ryJI9: goto Lx0Lz; Lx0Lz: return $info; goto O8f06; Y211j: $info["\160\141\x79\137\x74\171\160\145"] = []; goto VMHbG; ZEJ21: $info["\x6c\145\166\x65\x6c"] = 0; goto Ivuwm; VMHbG: goto HDBFN; goto vM38g; BG7BT: if ($info && !empty($info["\157\x74\150\145\162"])) { goto dZ7b2; } goto S73n3; CiU5a: H71R9: goto I7tOx; FlW61: $info["\157\164\x68\x65\x72"] = json_decode($info["\157\164\x68\145\162"], true); goto CiU5a; fSBof: $info = Db::name("\171\x62\163\x63\137\x75\x73\145\162\137\163\150\141\162\145\137\163\x65\x74\164\x69\156\x67")->where("\x6d\143\x68\137\151\144", $mch_id)->find(); goto wiZvO; O8f06: } public function get_addCash($data) { goto Q3ZVs; PgS0R: return json_encode($rs); goto ElPiG; MGCHJ: Db::startTrans(); goto mnyKH; o5gU8: $rs["\143\157\144\145"] = 0; goto Elcir; Q3ZVs: $rs = array("\143\157\144\x65" => 1); goto MGCHJ; Elcir: $rs["\151\x6e\x66\157"] = $res; goto PgS0R; mnyKH: try { goto WsXJb; RrIfZ: if (!$u) { goto ybVMV; } goto QZIu7; WsXJb: $u = Db::name($this->u)->where(["\x6d\x63\x68\x5f\x69\144" => $data["\155\x63\x68\x5f\x69\144"], "\x75\x69\144" => $data["\165\x73\x65\162\x5f\151\x64"]])->find(); goto RrIfZ; r0LhU: throw new Exception("\xe6\x8f\x90\347\216\260\346\223\215\xe4\275\234\345\xa4\xb1\xe8\264\245"); goto lYStJ; mReQY: ybVMV: goto fM_hE; bX7NM: vO9J3: goto bkNq2; QZIu7: if (!($data["\x70\162\151\x63\145"] > $u["\160\x72\x69\x63\x65"])) { goto qFzRg; } goto O88fc; sROlS: $setting = $this->get_shareSetting($data["\155\143\x68\x5f\x69\x64"]); goto ncH1p; i6cY2: qFzRg: goto mReQY; ncH1p: if (!$setting) { goto eJPmD; } goto FW7eU; O88fc: throw new Exception("\344\xbd\x99\xe9\xa2\x9d\344\xb8\215\350\xb6\263"); goto i6cY2; FW7eU: if (!($data["\160\162\151\x63\145"] < $setting["\x6d\x69\156\137\x6d\x6f\x6e\145\x79"])) { goto vO9J3; } goto B3Oky; i2L2B: if (!empty($res2)) { goto Uk9U4; } goto vcfCJ; ZWtJY: Db::commit(); goto Hdpfx; bkNq2: if (!($setting["\x6d\141\170\137\155\x6f\x6e\x65\171"] > 0 && $setting["\155\x61\170\x5f\155\157\156\145\x79"] - $today_price < $data["\160\162\151\x63\x65"])) { goto XAXAF; } goto qiCop; rPAER: $res = Db::name("\171\142\x73\x63\137\x75\163\145\x72\x5f\x73\150\141\162\x65\137\x63\x61\163\x68")->insertGetId($data); goto p2tQL; fM_hE: $today_price = Db::name("\171\x62\163\x63\137\165\x73\x65\162\137\163\x68\x61\x72\145\137\143\141\x73\150")->where(["\155\x63\x68\x5f\x69\x64" => $data["\155\143\150\137\x69\x64"], "\x75\163\145\162\x5f\151\x64" => $data["\x75\x73\x65\x72\137\x69\x64"], "\151\163\x5f\x64\145\154" => 1])->whereTime("\143\x72\x65\141\164\x65\x5f\164\151\x6d\145", "\144")->sum("\160\x72\151\x63\x65"); goto sROlS; TUwWI: $res2 = Db::name($this->u)->where(["\x6d\x63\x68\x5f\x69\x64" => $data["\155\143\150\x5f\151\x64"], "\165\151\x64" => $data["\x75\x73\x65\x72\x5f\x69\144"]])->setDec("\160\162\x69\143\145", $data["\160\x72\151\x63\x65"]); goto i2L2B; lYStJ: Xl3KU: goto TUwWI; p2tQL: if (!empty($res)) { goto Xl3KU; } goto r0LhU; qiCop: throw new Exception("\346\217\x90\xe7\x8e\260\xe9\207\221\xe9\242\x9d\344\xb8\215\350\203\275\xe9\253\230\344\272\216\344\273\212\346\227\xa5\xe9\xa2\x9d\xe5\xba\246"); goto oV9O0; vj1JO: eJPmD: goto rPAER; TTFZh: Uk9U4: goto ZWtJY; oV9O0: XAXAF: goto vj1JO; vcfCJ: throw new Exception("\346\x8f\x90\xe7\x8e\260\346\223\215\xe4\275\234\xe5\244\261\350\xb4\245"); goto TTFZh; B3Oky: throw new Exception("\346\217\220\347\x8e\260\351\x87\221\351\xa2\x9d\xe4\xb8\x8d\350\203\xbd\344\xbd\x8e\xe4\xba\216\346\234\200\345\260\x8f\346\217\220\347\216\260\xe9\242\x9d\345\272\xa6"); goto bX7NM; Hdpfx: } catch (\Exception $e) { goto FNX0n; IYCit: $rs["\155\163\x67"] = $e->getMessage(); goto iFXZx; iFXZx: return json_encode($rs); goto UGSDU; FNX0n: Db::rollback(); goto IYCit; UGSDU: } goto o5gU8; ElPiG: } public function get_CashList($data, $page) { goto cJtJK; cJtJK: if (!($data["\163\164\x61\164\165\x73"] == -1)) { goto byqML; } goto egrJs; vydxS: $data["\x69\163\x5f\144\x65\154"] = 1; goto zwjVe; uSjMP: return $list; goto OZxKV; QiJim: TBonr: goto uSjMP; egrJs: unset($data["\x73\164\x61\x74\x75\163"]); goto lqHLo; lqHLo: byqML: goto vydxS; hGrod: foreach ($list as $k => $v) { $list[$k]["\143\162\145\141\x74\x65\x5f\164\151\x6d\x65"] = date("\131\55\x6d\55\144\x20\110\x3a\x69\x3a\163", $list[$k]["\143\162\145\141\x74\x65\x5f\x74\x69\155\x65"]); rXsSy: } goto vQLpp; QQJkW: if (!$list) { goto TBonr; } goto hGrod; vQLpp: GT34G: goto QiJim; zwjVe: $list = Db::name("\171\x62\163\143\x5f\165\163\145\162\137\163\x68\141\x72\145\137\143\141\x73\150")->where($data)->page($page, PAGE_NUM)->order("\151\x64", "\x64\x65\x73\143")->select(); goto QQJkW; OZxKV: } }
