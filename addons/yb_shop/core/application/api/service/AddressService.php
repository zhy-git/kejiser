<?php
 namespace app\api\service; use think\Db; require_once BASE_ROOT . "\143\157\162\145\57\x61\160\160\154\x69\143\141\x74\151\157\156\57\x63\157\x6d\155\x6f\156\56\160\150\160"; class AddressService { private $a = "\x79\142\163\x63\137\x75\x73\x65\162\x5f\x61\x64\x64\x72\x65\x73\x73"; private $dq = "\x79\142\x73\x63\x5f\141\x72\x65\x61"; public function createAddress($data) { goto SczEe; SczEe: $num = Db::name($this->a)->where($data)->count(); goto KsNVT; e2yUo: $rs = Db::name($this->a)->insertGetId($data); goto BG0PA; WBJC8: Db::name($this->a)->where("\x69\163\137\144\x65\146\141\x75\154\x74", 1)->update(["\151\x73\137\144\x65\146\x61\x75\154\x74" => 0]); goto O3kaP; O3kaP: AL9E7: goto e2yUo; KsNVT: if (!($num > 0)) { goto quaDn; } goto bHaar; bHaar: return "\x66\141\151\154"; goto URMOA; KugJD: $data["\143\x72\x65\141\x74\x65\x5f\164\151\155\x65"] = time(); goto DplIB; DplIB: if (!($data["\151\x73\x5f\x64\x65\x66\x61\x75\x6c\164"] != 0)) { goto AL9E7; } goto WBJC8; URMOA: quaDn: goto KugJD; BG0PA: return $rs; goto uwI7l; uwI7l: } public function addressList($data, $page) { goto Bm6J0; Bm6J0: $rs = Db::name($this->a)->where($data)->page($page, PAGE_NUM)->select(); goto EovxL; PdHum: return $rs; goto wgvho; EovxL: foreach ($rs as $key => $value) { goto IutNO; hq3u2: $rs[$key]["\160\x72\x6f\x76\151\156\x63\x65"] = $pro["\x6e\x61\x6d\145"]; goto di1HS; cEu8R: R2CTg: goto jGfl6; AoY1z: $city = Db::name($this->dq)->where("\151\x64", $res["\x70\151\144"])->find(); goto ZWnIh; ZWnIh: $pro = Db::name($this->dq)->where("\151\x64", $city["\160\x69\x64"])->find(); goto hq3u2; Dj5bs: $rs[$key]["\x64\151\163\x74\162\x69\143\x74"] = $res["\156\141\155\x65"]; goto cEu8R; di1HS: $rs[$key]["\x63\x69\x74\171"] = $city["\156\141\155\x65"]; goto Dj5bs; IutNO: $res = Db::name($this->dq)->where("\151\x64", $value["\x61\x72\x65\141"])->find(); goto AoY1z; jGfl6: } goto OjTxI; OjTxI: ql2mr: goto PdHum; wgvho: } public function singleAddress($data) { goto IGybR; V1klc: $rs["\144\x69\x73\x74\162\151\143\x74"] = $res["\x6e\x61\x6d\x65"]; goto Cpy6X; jKg_e: $city = Db::name($this->dq)->where("\151\144", $res["\160\x69\144"])->find(); goto Gxii9; IGybR: $rs = Db::name($this->a)->where($data)->find(); goto ajzXr; Gxii9: $pro = Db::name($this->dq)->where("\x69\x64", $city["\x70\x69\x64"])->find(); goto krEIW; oVCN5: $rs["\143\151\x74\171"] = $city["\156\x61\x6d\145"]; goto V1klc; k6IUd: return $rs; goto ayDjL; krEIW: $rs["\x70\162\157\x76\x69\x6e\x63\x65"] = $pro["\x6e\x61\155\x65"]; goto oVCN5; ajzXr: if (empty($rs)) { goto J9zvB; } goto mJUGP; Cpy6X: J9zvB: goto k6IUd; mJUGP: $res = Db::name($this->dq)->where("\x69\x64", $rs["\141\x72\x65\x61"])->find(); goto jKg_e; ayDjL: } public function updateAddress($data) { goto yKb9A; D_XjV: if (!empty($res)) { goto bqDqr; } goto n0GEE; KQsu7: if (!($data["\151\x73\137\x64\145\x66\x61\x75\x6c\x74"] != 0)) { goto yCGH6; } goto dEVy5; rMA0H: yCGH6: goto wQ854; wQ854: $rs = Db::name($this->a)->update($data, ["\151\144" => $data["\x69\x64"]]); goto pzLRi; yKb9A: $res = Db::name($this->a)->where("\x69\144", $data["\151\x64"])->where("\x75\151\x64", $data["\x75\151\144"])->find(); goto D_XjV; pzLRi: return $rs; goto KyMsj; dEVy5: Db::name($this->a)->where("\151\163\x5f\x64\145\146\141\x75\x6c\164", 1)->update(["\x69\x73\137\x64\x65\x66\141\x75\x6c\164" => 0]); goto rMA0H; ZU1Fl: bqDqr: goto KQsu7; n0GEE: return "\106\x41\x49\x4c"; goto ZU1Fl; KyMsj: } public function delAddress($data) { $rs = Db::name($this->a)->delete($data["\x69\144"]); return $rs; } public function getArea() { goto Ojb4X; KDvbf: return $rs; goto mgsRk; Ojb4X: $rs = array(); goto yZK76; N87px: foreach ($province as $key => $value) { goto cBw43; yq0Um: PgBfP: goto vcjOq; e9eNT: foreach ($city as $k => $v) { goto GH3jB; GH3jB: $rs["\141\x72\145\x61\x73"][$key]["\143\x69\x74\171"][$k]["\156\x61\x6d\145"] = $v["\156\141\155\145"]; goto WiXkl; WiXkl: $area = Db::name($this->dq)->where("\x70\151\x64", $v["\151\144"])->select(); goto eiBGF; eiBGF: $rs["\141\x72\x65\141\163"][$key]["\143\x69\x74\171"][$k]["\x61\x72\x65\x61"] = $area; goto v7qf_; v7qf_: BdZ1R: goto W2N2J; W2N2J: } goto Gfxso; hk8B_: $city = Db::name($this->dq)->where("\x70\x69\144", $value["\151\144"])->select(); goto e9eNT; Gfxso: ozubZ: goto yq0Um; cBw43: $rs["\141\162\145\141\x73"][$key]["\x6e\x61\155\145"] = $value["\156\x61\x6d\145"]; goto hk8B_; vcjOq: } goto XI65J; yZK76: $province = Db::name($this->dq)->where("\x70\x69\x64", 1)->select(); goto N87px; XI65J: hJdm4: goto KDvbf; mgsRk: } public function getUserAddress($uid) { goto W30N7; ipUJ3: if (!empty($address)) { goto jOUDB; } goto t8AYt; F8awI: $address["\160\x72\x6f\x76\x69\156\143\145"] = $pro["\x6e\141\155\x65"]; goto cwp_6; kPY1O: $address["\144\151\x73\x74\162\151\143\164"] = $res["\x6e\x61\x6d\145"]; goto A0pHT; Gx3y3: jOUDB: goto Mi7wc; xKwur: $pro = Db::name($this->dq)->where("\x69\144", $city["\x70\x69\144"])->find(); goto F8awI; b3Eul: return $info; goto QjKTu; Mi7wc: $res = Db::name($this->dq)->where("\x69\144", $address["\141\x72\145\141"])->find(); goto wGc04; A0pHT: $info["\x61\x64\x64\x72\x65\x73\163"] = $address; goto b3Eul; wGc04: $city = Db::name($this->dq)->where("\151\x64", $res["\x70\x69\144"])->find(); goto xKwur; t8AYt: $address = Db::name("\x79\x62\163\143\137\165\x73\x65\x72\137\141\x64\144\x72\x65\x73\x73")->field("\143\x6f\156\x73\x69\147\156\145\x72\x2c\160\150\157\x6e\145\x2c\x61\144\144\162\x65\163\x73\x2c\141\x72\x65\141")->where("\165\x69\x64", $uid)->order("\143\162\x65\141\164\x65\x5f\164\x69\155\145", "\x64\x65\163\x63")->find(); goto Gx3y3; cwp_6: $address["\x63\151\164\171"] = $city["\156\x61\155\145"]; goto kPY1O; W30N7: $address = Db::name("\x79\x62\x73\x63\137\165\163\x65\162\x5f\141\144\x64\162\145\163\163")->field("\x63\157\156\x73\151\147\x6e\145\162\54\160\x68\x6f\156\x65\x2c\x61\x64\x64\x72\145\163\163\54\141\162\145\x61")->where("\165\151\x64", $uid)->where("\x69\x73\x5f\144\145\146\x61\165\154\164\x20", 1)->find(); goto ipUJ3; QjKTu: } public function getAreaByCode($areacode) { $area = Db::name("\171\142\x73\x63\x5f\141\162\x65\x61")->where("\143\x6f\144\145", $areacode)->find(); return $area; } }
