<?php
 namespace app\api\service; use think\Db; use think\Cache; class ArticleService { private $ac = "\171\142\163\x63\137\x61\162\x74\x69\143\154\x65\137\x63\x6c\x61\163\163"; private $a = "\x79\x62\163\143\x5f\141\x72\164\x69\143\x6c\x65"; private $g = "\x79\x62\x73\x63\x5f\147\157\x6f\x64\163"; private $i = "\x79\x62\x73\x63\x5f\x69\155\x61\x67\145\163"; public function getArticleClass($data) { $rs = Db::name($this->ac)->where("\155\143\x68\137\x69\144", $data["\x6d\143\x68\x5f\151\x64"])->where("\x69\x73\137\x64\145\154", 1)->order("\163\157\x72\164", "\x64\x65\163\x63")->order("\143\162\x65\141\x74\145\137\x74\x69\x6d\x65", "\144\145\x73\143")->select(); return $rs; } public static function InfiniteCate($class_id, $mch_id) { goto UvJUL; JVFtJ: $cate_list = null; goto AqYSt; TTntV: return $rs; goto oqRSk; IhhLF: if (!($rs != false)) { goto EPU8S; } goto TTntV; gIoqY: TrxXG: goto nJg0f; nJg0f: Cache::set($mch_id . "\x63\154\x61\163\x73\x3a" . $class_id, $rs, CACHE_TIME); goto BCv6k; AqYSt: $cate_list = Db::name("\x79\x62\163\x63\x5f\141\x72\164\x69\x63\154\x65\x5f\143\154\141\163\163")->where("\160\x69\x64", $class_id)->where("\155\x63\x68\137\151\144", $mch_id)->where("\151\163\137\x64\x65\x6c", 1)->order("\x73\157\162\x74", "\x64\145\x73\x63")->order("\x63\162\x65\141\x74\x65\137\x74\151\155\145", "\x64\x65\163\x63")->select(); goto ygoMc; BCv6k: return $rs; goto dUYQW; oqRSk: EPU8S: goto BPZO9; UvJUL: $rs = Cache::get($mch_id . "\143\154\x61\163\x73\x3a" . $class_id); goto IhhLF; ygoMc: foreach ($cate_list as $key => $value) { goto SRgPs; NuwTF: $rs[] = $value; goto Fn4ae; SRgPs: $value["\143\x61\x74\x65"] = self::InfiniteCate($value["\143\x6c\x61\x73\x73\137\x69\x64"], $mch_id); goto NuwTF; Fn4ae: nTknW: goto SaHmF; SaHmF: } goto gIoqY; BPZO9: $rs = array(); goto JVFtJ; dUYQW: } public static function InfiniteArticle($class_id, $mch_id) { goto BJT_u; ICSth: foreach ($cate_list as $key => $value) { $rs = array_merge($rs, self::InfiniteArticle($value["\143\154\141\163\x73\137\151\144"], $mch_id)); jUVic: } goto viUOG; viUOG: UMUuq: goto uVuEE; BJT_u: $rs = array(); goto mCV6S; Gb44b: $cate_list = Db::name("\x79\142\163\143\x5f\141\162\164\151\x63\154\x65\137\x63\x6c\141\163\163")->where("\160\x69\x64", $class_id)->where("\x6d\143\x68\x5f\151\x64", $mch_id)->where("\151\x73\137\x64\x65\x6c", 1)->field("\143\x6c\x61\x73\163\x5f\151\x64")->select(); goto ICSth; uVuEE: return $rs; goto rj7S8; mCV6S: $rs[] = $class_id; goto Gb44b; rj7S8: } public function getArticle($data, $page) { goto A62d4; cVjTv: $rs["\x63\154\141\x73\163\x5f\163\164\x79\x6c\x65"] = $class_id["\x63\x6c\141\x73\x73\x5f\163\x74\171\x6c\145"]; goto xYVcA; PGKHu: goto RrcVx; goto uW2Uz; qkebI: return $rs; goto ASoMS; IdY_f: $rs["\141\x72\164\151\x63\x6c\x65\137\156\x61\x6d\x65"] = "\xe6\226\x87\xe7\xab\xa0\345\210\x97\350\xa1\250"; goto uuCYu; u7p75: qf0s9: goto vHwfB; CZLT5: $new_data["\143\x6c\141\163\163\x5f\x69\144"] = ["\x69\x6e", self::InfiniteArticle($data["\x63\x6c\x61\x73\x73\x5f\x69\x64"], $data["\x6d\143\150\x5f\151\144"])]; goto ejTy3; gshV1: kWuCc: goto ioo2b; Sr8Gw: $rs["\141\x72\x74\x69\143\x6c\145\137\x6e\x61\155\x65"] = $class_id["\156\x61\x6d\x65"]; goto cVjTv; F5abe: if (isset($data["\143\154\141\163\163\137\151\x64"])) { goto PftKU; } goto IdY_f; zZtf5: $info = Db::name($this->a)->where($new_data)->where(["\x73\164\x61\x74\x75\163" => 2, "\x74\x79\160\145" => 1])->page($page, PAGE_NUM)->order("\x69\163\x5f\x74\x6f\160", "\x64\145\x73\x63")->order("\x73\x6f\x72\164", "\144\x65\163\143")->order("\x63\x72\145\141\x74\145\137\164\151\x6d\x65", "\144\145\163\x63")->select(); goto Ekcdt; vHwfB: RrcVx: goto zZtf5; bb7p2: $rs["\x61\x72\164\151\x63\x6c\x65\x5f\x6e\x61\x6d\x65"] = "\346\x96\x87\347\253\xa0\xe5\x88\x97\350\xa1\xa8"; goto frPZO; GzsjQ: return $rs; goto KRhtp; Jc0A2: we33f: goto bb7p2; t_Umk: foreach ($info as $key => $value) { $info[$key]["\x63\162\x65\x61\164\x65\x5f\x74\x69\x6d\145"] = date("\131\x2d\x6d\55\144\x20\110\72\x69\72\163", $value["\143\162\x65\x61\164\x65\x5f\x74\151\x6d\145"]); BXQF0: } goto gshV1; ASoMS: Sb_ss: goto t_Umk; xYVcA: goto qf0s9; goto Jc0A2; uuCYu: $one_ac = Db::name($this->ac)->where(["\x6d\x63\150\x5f\x69\144" => $data["\155\143\x68\x5f\151\144"], "\x69\x73\137\144\x65\x6c" => 1])->order("\x63\154\141\163\x73\x5f\151\144\40\x61\x73\x63")->find(); goto IehxY; ejTy3: $class_id = Db::name($this->ac)->where($data)->where("\151\x73\x5f\x64\x65\154", 1)->find(); goto Zj9_8; ioo2b: $rs["\151\156\146\157"] = $info; goto GzsjQ; IehxY: $rs["\143\x6c\141\163\x73\137\163\x74\171\x6c\x65"] = $one_ac["\x63\154\x61\x73\x73\137\x73\164\171\154\145"] ? $one_ac["\x63\x6c\x61\x73\x73\137\x73\x74\171\154\145"] : 2; goto PGKHu; uW2Uz: PftKU: goto CZLT5; frPZO: $rs["\x63\x6c\141\163\163\x5f\x73\x74\x79\x6c\x65"] = 2; goto u7p75; A62d4: unset($data["\x69\144\145\156\164"]); goto TsgLe; TsgLe: $new_data = ["\x6d\x63\150\137\x69\144" => $data["\x6d\143\150\x5f\151\x64"]]; goto F5abe; Ekcdt: if (!empty($info)) { goto Sb_ss; } goto qkebI; Zj9_8: if (empty($class_id)) { goto we33f; } goto Sr8Gw; KRhtp: } public function getArticleInfo($data) { goto jMY8W; tTr5_: $goods_info = array(); goto aKfu4; jMY8W: if (isset($data["\x69\144\145\156\x74"])) { goto Y13LW; } goto Q0wE_; BVSyx: fzsg5: goto Y5uFy; YUDgW: return $rs; goto PyZ4m; Y5uFy: $rs["\x67\157\157\x64\163"] = $goods_info; goto YUDgW; UAb82: Ajqf2: goto ejUyo; ejUyo: if (!empty($rs)) { goto NJgu5; } goto oHHIV; ziS1F: $rs = Db::name($this->a)->where("\x6d\143\x68\137\151\144", $data["\155\143\x68\137\151\x64"])->where("\151\144\145\x6e\x74", $data["\x69\144\x65\156\164"])->find(); goto UAb82; fylzK: $rs["\143\162\145\141\x74\145\137\164\151\155\x65"] = date("\131\55\x6d\55\144\40\x48\x3a\x69\x3a\x73", $rs["\143\162\x65\141\x74\x65\x5f\164\151\155\145"]); goto Q77SK; oHHIV: return $rs; goto sgh0g; J9XfN: goto Ajqf2; goto Esli0; Q77SK: $goods_id = explode("\x2c", $rs["\147\157\157\144\163\137\141\162\x72\x61\171"]); goto tTr5_; o_wPd: Db::name($this->a)->where("\x61\162\x74\x69\x63\154\145\137\x69\x64", $data["\141\x72\x74\151\x63\154\145\137\151\x64"])->setInc("\143\x6c\x69\143\153"); goto fylzK; aKfu4: foreach ($goods_id as $key => $value) { goto JCaxO; RaCur: $pic = Db::name($this->i)->where("\x69\155\x67\137\x69\144", $goods_info[$key]->images)->field("\151\x6d\x67\x5f\x63\x6f\x76\x65\x72\54\151\x6d\x67\137\143\x6f\x76\145\x72\137\x62\x69\147\x2c\x69\155\x67\x5f\143\x6f\166\x65\162\x5f\155\151\x64\x2c\151\x6d\147\x5f\143\x6f\166\145\x72\137\x73\x6d\141\x6c\154")->find(); goto EjaKs; NyTyG: Z2XX_: goto RaCur; CpDBh: unset($goods_info[$key]); goto pfPgZ; LeAOD: e_c1q: goto p3oVc; pfPgZ: goto e_c1q; goto NyTyG; ywmYQ: if (!empty($goods_info[$key])) { goto Z2XX_; } goto CpDBh; EjaKs: $goods_info[$key]["\160\x69\x63"] = $pic; goto LeAOD; JCaxO: $goods_info[$key] = Db::name($this->g)->field("\x67\157\157\x64\163\137\151\144\54\147\x6f\x6f\144\x73\137\x6e\x61\155\x65\x2c\x70\x72\151\x63\x65\x2c\151\x6d\141\147\x65\x73\x2c\151\x6e\x74\162\x6f\144\165\143\x74\x69\x6f\156")->where("\147\x6f\157\x64\x73\137\151\144", $value)->where("\151\163\x5f\144\x65\154", 0)->find(); goto ywmYQ; p3oVc: } goto BVSyx; sgh0g: NJgu5: goto o_wPd; Esli0: Y13LW: goto ziS1F; Q0wE_: $rs = Db::name($this->a)->where("\141\162\x74\x69\x63\154\x65\x5f\x69\144", $data["\141\x72\x74\x69\143\x6c\145\137\x69\144"])->find(); goto J9XfN; PyZ4m: } }
