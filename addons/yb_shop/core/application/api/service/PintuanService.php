<?php
 namespace app\api\service; use think\Db; use think\log; use think\Exception; require_once BASE_ROOT . "\143\157\x72\145\x2f\x65\x78\164\145\x6e\x64\x2f\127\170\160\141\x79\57\x57\x78\120\x61\171\56\x41\160\x69\x2e\x70\x68\x70"; require_once BASE_ROOT . "\x63\x6f\162\x65\x2f\141\160\x70\x6c\x69\143\x61\164\151\x6f\156\57\143\x6f\155\155\x6f\156\56\160\x68\x70"; require_once BASE_ROOT . "\x63\x6f\162\145\57\141\x70\160\154\x69\x63\x61\164\151\x6f\x6e\57\x61\160\151\x2f\163\145\162\166\x69\143\x65\x2f\122\145\x66\165\x6e\x64\123\145\162\x76\151\143\145\x2e\x70\150\160"; use app\api\service\RefundService; class PintuanService { private $o = "\171\142\163\x63\x5f\160\164\137\157\x72\x64\145\162\x73"; private $g = "\x79\142\x73\x63\137\x70\x74\137\x67\157\157\x64\163"; private $c = "\x79\x62\x73\143\x5f\160\164\137\x63\141\x74\145\147\x6f\162\171"; private $a = "\171\x62\163\143\137\160\164\137\x61\x64\x76\x65\162\164"; private $i = "\171\142\x73\143\x5f\x69\155\141\147\145\x73"; private $dq = "\171\x62\163\x63\137\141\x72\x65\141"; private $ad = "\171\142\x73\143\x5f\x75\163\x65\x72\x5f\x61\x64\x64\x72\x65\x73\163"; public function get_ptIndex($data) { goto sWgdP; ZQs0x: $rs["\x61\x64\166\145\162\x74"] = Db::name($this->a)->where($data)->order("\163\157\x72\164", "\144\145\x73\143")->order("\151\144", "\x64\145\x73\x63")->select(); goto f2lnV; f2lnV: $rs["\x63\141\164\x65"] = Db::name($this->c)->where($data)->order("\163\157\162\164", "\x64\x65\163\143")->order("\x69\144", "\x64\x65\163\x63")->select(); goto U6E0z; sWgdP: $data["\x65\156\141\142\154\x65\x64"] = 1; goto ZQs0x; U6E0z: return $rs; goto OT3dB; OT3dB: } public function get_ptGoodsList($data, $page) { goto MD_Pl; lEutL: $time = time(); goto uZIbn; WZyVy: kd9S0: goto SDb3M; WYYwP: foreach ($list as $k => $v) { goto urkk5; aispn: dNVsG: goto AsSw6; Lycvb: $pia_arr = $list[$k]["\x61\154\142\x75\155"]; goto L5Dhx; jqBPb: $pia_arr = explode("\54", $pia_arr); goto WdRX6; C6mKm: b8lIs: goto QWwKK; kYan3: $list[$k]["\147\x72\x6f\165\160\x4c\x69\x73\x74"] = Db::name($this->o)->alias("\x6f")->field("\155\56\165\163\145\162\137\x68\145\x61\x64\151\x6d\147")->join("\x79\142\x73\143\137\165\163\x65\x72\40\x6d", "\x6d\x2e\165\151\144\x3d\x6f\x2e\165\x69\144")->where(["\157\x2e\x67\151\x64" => $v["\151\x64"], "\157\56\x65\x6e\144\x54\x69\x6d\145" => ["\76", $time], "\x6f\56\160\x69\x64" => 0, "\157\x2e\151\163\x47\162\x6f\x75\x70" => 1, "\x6f\56\x69\x73\x50\x61\x79" => 1, "\157\56\147\162\157\165\x70\124\x69\x6d\145" => 0, "\157\x2e\x6d\143\x68\137\x69\x64" => $data["\x6d\x63\x68\x5f\151\x64"]])->order("\157\x2e\145\x6e\144\x54\151\155\145\40\141\x73\143\54\157\56\x69\x64\40\x61\x73\143")->limit(2)->select(); goto aispn; Rynas: BpiPj: goto Oo8uL; QWwKK: if (!($i < count($pia_arr))) { goto BpiPj; } goto QCOzu; ByY5C: goto b8lIs; goto Rynas; pAcG4: $i++; goto ByY5C; vleMu: $list[$k]["\x61\x6c\x62\x75\x6d"] = $pia_arr; goto kYan3; Oo8uL: Hv0aF: goto vleMu; L5Dhx: if ($pia_arr) { goto sCirj; } goto sWG0W; JP5I2: bQlON: goto pAcG4; WdRX6: $i = 0; goto C6mKm; QCOzu: $pia_arr[$i] = $this->get_pic_path($pia_arr[$i]); goto JP5I2; bTE7u: $list[$k]["\x69\x6e\x64\x65\170\111\155\147"] = $this->get_pic_path($list[$k]["\x69\156\144\x65\x78\111\155\x67"]); goto Lycvb; sWG0W: $pia_arr = []; goto E7QSp; urkk5: $list[$k]["\x69\x6d\147"] = $this->get_pic_path($list[$k]["\x69\155\147"]); goto bTE7u; KaPqs: sCirj: goto jqBPb; E7QSp: goto Hv0aF; goto KaPqs; AsSw6: } goto WZyVy; Wdy64: if (empty($list)) { goto RxQyc; } goto WYYwP; SDb3M: RxQyc: goto JzQsG; MD_Pl: $data["\151\x73\123\150\157\x77"] = 1; goto lEutL; uZIbn: $list = Db::name($this->g)->where($data)->page($page, 10)->order("\163\x6f\162\x74", "\144\145\163\143")->order("\151\144", "\144\145\x73\x63")->select(); goto Wdy64; JzQsG: return $list; goto zGOK1; zGOK1: } public function get_ptGoodsmodel($data) { goto cLmfr; oXSoi: bjE3g: goto UPmJ2; Jmc6Z: foreach ($list as $k => $v) { goto n6zfu; YU0l0: goto V6T7v; goto yq5c3; eMI2T: $list[$k]["\141\x6c\142\165\x6d"] = $pia_arr; goto z6YK7; GYcad: l8cP8: goto eMI2T; z6YK7: $list[$k]["\147\162\x6f\x75\x70\114\151\163\x74"] = Db::name($this->o)->alias("\157")->field("\155\56\x75\x73\x65\x72\x5f\150\x65\141\144\151\x6d\147")->join("\x79\x62\x73\x63\137\165\x73\145\x72\x20\155", "\x6d\56\x75\151\144\75\157\x2e\x75\151\144")->where(["\157\56\147\x69\x64" => $v["\x69\x64"], "\157\x2e\x65\156\x64\124\x69\x6d\145" => ["\76", $time], "\x6f\x2e\160\x69\144" => 0, "\157\x2e\x69\x73\x47\162\157\165\x70" => 1, "\x6f\56\151\163\120\141\171" => 1, "\157\56\147\162\x6f\x75\x70\x54\x69\155\x65" => 0, "\x6f\56\155\143\x68\x5f\151\x64" => $data["\155\x63\x68\137\151\144"]])->order("\x6f\56\145\156\144\x54\x69\155\x65\40\x61\x73\143\x2c\157\56\x69\x64\x20\141\163\x63")->limit(2)->select(); goto ZLGVE; yq5c3: IrO7t: goto GYcad; aGv00: V6T7v: goto SSkTA; Xsoj0: $list[$k]["\151\x6e\x64\145\x78\111\155\147"] = $this->get_pic_path($list[$k]["\x69\156\x64\x65\170\x49\155\x67"]); goto IHWdu; wVWSL: $i = 0; goto aGv00; n6zfu: $list[$k]["\151\155\x67"] = $this->get_pic_path($list[$k]["\x69\155\x67"]); goto Xsoj0; EQLrV: $i++; goto YU0l0; taW4a: $pia_arr[$i] = $this->get_pic_path($pia_arr[$i]); goto OQ3ii; xUn6K: goto l8cP8; goto fa3aI; IHWdu: $pia_arr = $list[$k]["\141\154\x62\x75\x6d"]; goto PNJuW; ZLGVE: NsTxX: goto CkVAH; KBYyd: $pia_arr = explode("\54", $pia_arr); goto wVWSL; PNJuW: if ($pia_arr) { goto eyHZS; } goto CLjmA; SSkTA: if (!($i < count($pia_arr))) { goto IrO7t; } goto taW4a; OQ3ii: fPKUk: goto EQLrV; fa3aI: eyHZS: goto KBYyd; CLjmA: $pia_arr = []; goto xUn6K; CkVAH: } goto oXSoi; pf9Pl: return $list; goto BvBbY; nyJYI: $time = time(); goto oPpf3; r5iJm: if (empty($list)) { goto mmnEG; } goto Jmc6Z; oPpf3: $list = Db::name($this->g)->where($data)->select(); goto r5iJm; UPmJ2: mmnEG: goto pf9Pl; cLmfr: $data["\151\x73\123\x68\157\167"] = 1; goto nyJYI; BvBbY: } public function get_ptGoodsDetail($data) { goto ihW1h; wmdhs: sj3hm: goto SL4Za; rEzMQ: qceHl: goto mQkyg; awV3A: sk_ew: goto uaKpF; wLarP: $aa["\x74\x65\x6c\x4e\x75\x6d\x62\x65\162"] = $address["\x70\x68\x6f\x6e\x65"]; goto WNiyT; TcNrR: $goodsInfo["\x67\162\x6f\x75\x70\114\x69\x73\x74"] = $groupList; goto cwCH8; yAxtj: goto uLfdV; goto bvrHe; bw05H: goto zJ4js; goto rEzMQ; eKTjg: $pia_arr = []; goto bw05H; no_e_: UKqM4: goto TcNrR; PXhLx: if (!empty($address)) { goto sk_ew; } goto oJOT0; mQkyg: $pia_arr = explode("\54", $pia_arr); goto k6UR3; WNiyT: $aa["\x61\144\x64\x72\145\163\163"] = $address["\x61\144\144\162\145\163\163"]; goto YDbYT; N_ygA: $goodsInfo["\x61\x6c\142\x75\155"] = $pia_arr; goto R23Xt; ihW1h: $goodsInfo = Db::name($this->g)->where(["\151\144" => $data["\x69\x64"], "\155\143\x68\137\151\x64" => $data["\x6d\143\x68\x5f\151\x64"], "\151\163\x53\150\x6f\x77" => 1])->find(); goto KPXyq; oJOT0: $address = Db::name($this->ad)->field("\x63\157\x6e\x73\151\x67\x6e\145\x72\54\x70\x68\157\x6e\x65\54\141\x64\144\162\x65\x73\x73\x2c\x61\162\x65\141")->where("\165\151\144", $data["\x75\x69\x64"])->order("\x63\x72\x65\141\x74\145\137\164\151\155\145", "\x64\x65\163\x63")->find(); goto awV3A; qohUR: $i++; goto yAxtj; hFPOm: if ($pia_arr) { goto qceHl; } goto eKTjg; hVB3h: if (!$groupList) { goto UKqM4; } goto gT_zH; SWtU6: $pia_arr = $goodsInfo["\x61\x6c\x62\x75\155"]; goto hFPOm; hwn8H: uLfdV: goto WNUyq; AqBfk: XQe4H: goto qohUR; bvrHe: mn7bd: goto ef0_v; YDbYT: $aa["\160\162\x6f\x76\151\156\x63\145"] = $pro["\156\x61\155\145"]; goto rNs2l; GIQJB: $pia_arr[$i] = $this->get_pic_path($pia_arr[$i]); goto AqBfk; YfdJd: $pro = Db::name($this->dq)->where("\x69\x64", $city["\160\151\144"])->find(); goto lNdlg; WNUyq: if (!($i < count($pia_arr))) { goto mn7bd; } goto GIQJB; QAQ78: $groupList = Db::name($this->o)->alias("\157")->field("\x6f\x2e\x69\144\x20\x61\163\x20\157\151\x64\x2c\157\56\145\x6e\x64\124\x69\155\x65\x2c\155\56\x6e\x69\143\x6b\x5f\x6e\141\155\x65\54\x6d\56\x75\x73\145\162\x5f\x68\145\x61\144\x69\x6d\x67")->join("\171\142\163\143\137\165\x73\x65\162\40\x6d", "\155\x2e\165\x69\x64\75\x6f\x2e\165\x69\x64")->where(["\157\56\147\x69\144" => $data["\x69\144"], "\x6f\56\x70\151\144" => 0, "\157\56\151\163\x47\162\x6f\165\160" => 1, "\x6f\56\151\163\120\x61\x79" => 1, "\x6f\x2e\x67\162\157\x75\x70\x54\x69\155\x65" => 0, "\x6f\56\x6d\143\x68\137\x69\144" => $data["\155\143\x68\137\x69\144"], "\x6f\x2e\x65\x6e\x64\x54\x69\x6d\145" => ["\76", $time], "\155\56\165\x69\x64" => ["\74\x3e", $data["\x75\151\144"]]])->limit(3)->select(); goto hVB3h; SL4Za: $goodsInfo["\151\155\x67"] = $this->get_pic_path($goodsInfo["\x69\x6d\147"]); goto ac9j0; uaKpF: if (!$address) { goto w0HEE; } goto Uj_kz; ef0_v: zJ4js: goto N_ygA; KPXyq: if ($goodsInfo) { goto sj3hm; } goto vNASo; cwCH8: $address = Db::name($this->ad)->field("\143\157\156\163\x69\147\x6e\x65\x72\x2c\x70\x68\157\156\145\x2c\x61\x64\144\x72\145\x73\x73\54\141\x72\145\x61")->where("\x75\151\144", $data["\x75\151\x64"])->where("\x69\x73\137\144\145\146\x61\x75\154\x74\40", 1)->find(); goto PXhLx; rNs2l: $aa["\143\x69\164\171"] = $city["\156\x61\155\145"]; goto YWTCf; Uj_kz: $res = Db::name($this->dq)->where("\151\144", $address["\x61\x72\145\x61"])->find(); goto PsisK; C6_wn: w0HEE: goto ZfX8b; lNdlg: $aa["\165\163\x65\162\x4e\141\155\x65"] = $address["\143\x6f\x6e\x73\x69\x67\156\x65\162"]; goto wLarP; vNASo: return null; goto wmdhs; gT_zH: foreach ($groupList as $key => $value) { goto aQ_Nu; VnECu: ar52O: goto nb1tr; aQ_Nu: $groupList[$key]["\154\145\x66\x74\116\165\155"] = Db::name($this->o)->where(["\x70\151\x64" => $value["\x6f\151\x64"]])->count(); goto hJLJS; hJLJS: $groupList[$key]["\x6c\145\x66\x74\124\151\155\x65"] = $value["\145\x6e\144\124\151\x6d\145"] - $time; goto VnECu; nb1tr: } goto s4H4c; R23Xt: $time = time(); goto QAQ78; PsisK: $city = Db::name($this->dq)->where("\x69\x64", $res["\x70\151\144"])->find(); goto YfdJd; ZfX8b: return $goodsInfo; goto wWp3V; k6UR3: $i = 0; goto hwn8H; bMVFi: $goodsInfo["\x61\x64\x64\162\145\x73\163"] = $aa; goto C6_wn; YWTCf: $aa["\x63\157\165\x6e\164\x79"] = $res["\156\141\155\x65"]; goto bMVFi; ac9j0: $goodsInfo["\151\x6e\x64\145\x78\x49\155\147"] = $this->get_pic_path($goodsInfo["\151\x6e\144\145\x78\111\x6d\147"]); goto SWtU6; s4H4c: ajvxs: goto no_e_; wWp3V: } public function get_ptCreateOrder($data) { goto LlF9j; bZ5pv: goto bBNYa; goto gXCO9; lJftH: $pay_data = array("\x6f\x75\164\x5f\164\x72\x61\144\145\137\156\157" => $data["\x6f\162\x64\x65\162\x4e\165\x6d"], "\160\x61\171\x5f\164\171\160\x65" => 1, "\160\x61\x79\137\x62\157\x64\x79" => "\xe7\224\250\346\x88\267\xe6\x94\xaf\xe4\273\230", "\160\x61\x79\x5f\x64\145\164\141\x69\x6c" => "\347\224\250\xe6\x88\xb7\xe8\264\xad\xe4\xb9\260\345\x95\x86\xe5\223\x81", "\x70\x61\x79\137\x6d\x6f\156\145\x79" => $data["\x74\x6f\164\x61\154\120\162\151\143\145"], "\x70\141\x79\x5f\x73\x74\141\164\x75\163" => 0, "\x70\x61\x79\x5f\164\151\x6d\x65" => 0, "\x63\x72\x65\x61\x74\145\x5f\x74\151\x6d\145" => time()); goto xeoGJ; Uub3x: $data["\x6f\162\x64\x65\x72\x5f\163\164\x61\x74\x75\163"] = 1; goto Jew0H; hBK56: if (!($count > 0)) { goto p5f7W; } goto MbQH_; SbwzH: $new_data["\x70\151\144"] = $data["\x70\x69\x64"]; goto UONUo; FpNFb: bBNYa: goto lJftH; NZa4M: $new_data["\147\151\x64"] = $data["\147\151\x64"]; goto TLwbN; YVcK5: tEf1Y: goto jmxvT; lkk6s: CiqjU: goto dfEcD; XKhwU: return ["\x65\162\x72\x5f\143\157\144\x65" => 1, "\x6d\x73\x67" => "\345\272\x93\345\255\x98\344\270\x8d\xe8\xb6\xb3", "\151\156\146\x6f" => []]; goto YVcK5; JsaUW: $new_data["\147\162\157\165\160\124\151\155\x65"] = 0; goto SbwzH; FSPs5: $data["\151\x73\120\x61\x79"] = 0; goto Uub3x; q5VzP: $new_data["\147\151\144"] = $data["\147\151\144"]; goto lvjeW; j7gx7: try { goto raFZj; xPbkv: if (!($data["\x70\151\x64"] != 0)) { goto cMTih; } goto vgnqa; Z6mW9: if (!empty($id)) { goto a9Cs9; } goto M3myh; ksHd5: a9Cs9: goto TxijK; PrrDR: QUcwn: goto WTv3W; PFBar: if (!($count + 1 >= $groupNum)) { goto QUcwn; } goto dMY3Y; M3myh: throw new Exception("\345\210\x9b\xe5\xbb\272\350\xae\xa2\xe5\x8d\x95\345\244\xb1\350\xb4\245"); goto ksHd5; sK7Sq: Db::name("\171\x62\x73\x63\137\160\x74\x5f\x6f\162\x64\145\162\x5f\160\141\171\155\145\x6e\x74")->insert($pay_data); goto L1sAs; dMY3Y: throw new Exception("\xe5\210\x9b\xe5\273\272\xe8\xae\xa2\345\x8d\225\345\244\xb1\xe8\264\xa5"); goto PrrDR; aIy_p: $id = Db::name($this->o)->insertGetId($data); goto Z6mW9; TxijK: $pay_data["\x74\x79\160\145\137\x61\154\151\163\137\x69\x64"] = $id; goto sK7Sq; vgnqa: $count = Db::name($this->o)->where(["\x70\x69\144" => $data["\160\x69\x64"], "\151\x73\120\141\x79" => 1])->count(); goto PFBar; raFZj: $groupNum = Db::name($this->g)->where("\151\x64", $data["\x67\x69\x64"])->value("\x67\x72\x6f\x75\160\116\x75\155"); goto xPbkv; L1sAs: Db::name($this->g)->where("\x69\x64", $data["\x67\x69\x64"])->setInc("\163\141\x6c\145\x4e\165\x6d", $data["\147\157\x6f\x64\163\116\x75\155"]); goto TJUN5; WTv3W: cMTih: goto aIy_p; VkMQ8: Db::commit(); goto TwsBI; TJUN5: Db::name($this->g)->where("\151\144", $data["\147\x69\144"])->setDec("\x73\x74\x6f\x63\x6b", $data["\x67\x6f\157\x64\163\116\165\155"]); goto VkMQ8; TwsBI: } catch (\Exception $e) { goto Ar3St; Ar3St: Db::rollback(); goto l42w9; l42w9: Log::write("\347\x94\x9f\xe6\210\x90\350\xae\242\345\x8d\x95\345\244\xb1\xe8\xb4\245\40\x2d\55\x28\347\224\250\346\210\267\151\144\357\xbc\232" . $data["\165\x69\144"] . "\x29\x20\xe9\224\231\xe8\257\xaf\344\277\xa1\xe6\201\xaf\357\274\x9a" . $e->getMessage(), "\x70\164\x5f\143\x72\145\x61\164\x65\137\x6f\162\144\x65\162\x5f\145\x72\162\157\162"); goto IaHOv; IaHOv: return ["\145\x72\x72\137\143\157\x64\x65" => 1, "\155\x73\147" => $e->getMessage()]; goto qfis1; qfis1: } goto ehzg3; C3IHd: $limitTime = $data["\154\151\155\x69\164\124\x69\155\145"]; goto mbdlg; TLwbN: $new_data["\155\x63\150\x5f\x69\144"] = $data["\x6d\x63\150\x5f\151\x64"]; goto iSN9H; lvjeW: $new_data["\x6d\x63\150\x5f\151\x64"] = $data["\155\143\150\137\x69\144"]; goto n7ttl; iSN9H: $new_data["\145\156\x64\x54\151\155\x65"] = ["\x3e", $time]; goto JsaUW; mOdN4: p5f7W: goto lkk6s; rwWdV: $new_data["\165\151\144"] = $data["\x75\151\144"]; goto NZa4M; QMrDj: $new_data["\160\x69\144"] = $data["\x70\151\144"]; goto b2h1v; mbdlg: unset($data["\x6c\x69\x6d\x69\x74\124\151\x6d\x65"]); goto o72M3; MbQH_: ["\145\x72\x72\137\143\157\144\x65" => 1, "\x6d\163\147" => "\xe6\x82\xa8\345\xb7\262\xe5\217\202\344\270\216\350\257\245\xe5\x95\x86\xe5\223\201\xe7\x9a\x84\xe5\233\242\350\xb4\xad\xef\xbc\214\xe8\xaf\267\345\211\215\345\276\200\346\210\221\347\x9a\x84\346\213\xbc\345\233\242\xe6\x9f\245\347\234\x8b"]; goto mOdN4; RjvD9: return ["\x65\x72\162\137\143\157\144\x65" => 1, "\155\x73\x67" => "\350\xaf\xa5\xe5\x95\206\xe5\x93\x81\346\202\xa8\345\267\xb2\xe4\xb8\x8b\xe5\215\225\357\274\x8c\xe8\xaf\xb7\345\211\215\xe5\xbe\200\xe6\210\x91\347\x9a\204\xe6\213\274\345\233\242\350\xae\xa2\345\215\x95\346\237\245\xe7\234\213"]; goto t9Fod; t9Fod: yqDzn: goto C3IHd; hgteu: if (!($data["\x69\163\x47\162\157\165\160"] == 1)) { goto CiqjU; } goto rwWdV; jmxvT: $time = time(); goto hgteu; LlF9j: $pt_good_info = Db::name($this->g)->where("\151\144", $data["\147\151\144"])->field("\x73\x74\x6f\x63\153")->find(); goto VNaRN; b2h1v: $count = Db::name($this->o)->where($new_data)->count(); goto j_X8c; Kdr8r: $data["\145\x6e\144\124\x69\155\x65"] = Db::name($this->o)->where("\151\x64", $data["\x70\x69\144"])->value("\145\x6e\x64\124\151\155\x65"); goto bZ5pv; gXCO9: SMaim: goto PagID; UONUo: $count = Db::name($this->o)->where($new_data)->count(); goto hBK56; PagID: $data["\145\x6e\x64\x54\151\x6d\x65"] = $time + $limitTime * 3600; goto FpNFb; o72M3: $data["\x63\162\145\141\164\145\x54\x69\x6d\145"] = $time; goto FSPs5; ehzg3: return ["\145\162\x72\x5f\x63\157\x64\x65" => 0, "\x69\156\x66\157" => $id]; goto NSlds; j_X8c: if (!($count > 0)) { goto yqDzn; } goto RjvD9; VNaRN: if (!($pt_good_info["\163\164\157\x63\153"] <= 0)) { goto tEf1Y; } goto XKhwU; dfEcD: $new_data["\x75\x69\144"] = $data["\165\x69\144"]; goto q5VzP; xeoGJ: Db::startTrans(); goto j7gx7; Jew0H: if ($data["\x70\151\x64"] == 0) { goto SMaim; } goto Kdr8r; n7ttl: $new_data["\x69\163\x50\x61\171"] = 0; goto QMrDj; NSlds: } public function get_ptOrderList($data, $page) { goto RWo6j; HWNnY: VM6ZC: goto dKGzp; dPhID: if (empty($list)) { goto tDC0a; } goto qjSYd; RTC74: return $list; goto n7zA4; RWo6j: $list = Db::name($this->o)->where($data)->page($page, 10)->order("\x69\144", "\x64\x65\x73\143")->select(); goto dPhID; dKGzp: tDC0a: goto RTC74; qjSYd: foreach ($list as $k => $v) { goto g8oNO; fpmHz: $list[$k]["\150\x61\x76\x65\x5f\154\157\x67"] = $this->check_log($v["\151\144"]); goto HOWil; wTtkD: $list[$k]["\147\x6f\157\144\x73"] = $goods; goto fpmHz; V84S7: goto ujG5o; goto L8tHO; SFoqZ: goto ujG5o; goto p1IAO; l7JTX: $orderStatus = "\xe5\xbe\x85\346\224\xb6\xe8\264\247"; goto V84S7; uebhu: $orderStatus = "\351\200\200\346\254\276\344\270\xad"; goto Hup_I; k714F: if ($v["\x6f\x72\x64\x65\x72\137\163\x74\x61\164\x75\163"] == 2) { goto Jv1MS; } goto rr0gu; lbp4m: ujG5o: goto dBpTO; p1IAO: Jv1MS: goto O4cTD; J9M9b: goto ujG5o; goto asbzH; dBpTO: $list[$k]["\x6f\x72\144\x65\x72\x53\x74\141\x74\165\x73"] = $orderStatus; goto f1L9J; L8tHO: pO7aw: goto uebhu; QvrQi: GYefG: goto J9M9b; H2vGv: if ($v["\x6f\x72\x64\x65\162\x5f\163\164\x61\164\165\163"] == 4) { goto Af03s; } goto cMaIq; O4cTD: if ($v["\147\162\x6f\x75\160\x54\x69\x6d\x65"] == 0 && $v["\145\x6e\x64\124\x69\155\145"] < time()) { goto SHl0p; } goto eGDj0; F9nra: IUadP: goto wTtkD; cMaIq: if ($v["\x6f\x72\144\145\162\137\163\164\x61\x74\165\x73"] == 5) { goto pO7aw; } goto vvfPS; eGDj0: $orderStatus = "\xe5\276\x85\346\x88\220\345\x9b\242"; goto kslQk; FL8Zp: $orderStatus = "\345\xbe\205\xe4\273\x98\346\xac\xbe"; goto SFoqZ; MIgbi: NIa0p: goto MoAX7; c_oGJ: $orderStatus = "\346\x8b\274\345\233\xa2\345\244\xb1\xe8\264\xa5"; goto QvrQi; g8oNO: $orderStatus = ''; goto NXetz; xyBwc: goto IUadP; goto nPRB5; rr0gu: if ($v["\x6f\162\144\145\x72\137\163\164\141\164\165\x73"] == 3) { goto uQxOe; } goto H2vGv; nPRB5: OJsvs: goto zcqn5; MoAX7: $orderStatus = "\xe5\xb7\262\345\256\x8c\xe6\210\x90"; goto mISk0; Hup_I: goto ujG5o; goto MIgbi; nNg0s: hqdIZ: goto SnJ0g; vvfPS: if ($v["\x6f\x72\144\145\162\x5f\163\x74\141\164\165\163"] == 6) { goto NIa0p; } goto emqBV; f1L9J: $goods = Db::name($this->g)->where("\x69\144", $v["\147\x69\144"])->field("\x6e\x61\155\145\x2c\x69\x6d\x67\x2c\165\x6e\151\164\54\147\160\162\x69\x63\145")->find(); goto J_jtD; mISk0: goto ujG5o; goto nNg0s; kslQk: goto GYefG; goto cwJKz; aGjco: Mkpgz: goto FL8Zp; SnJ0g: $orderStatus = "\345\267\262\351\200\200\346\254\xbe"; goto lbp4m; woN8t: goto ujG5o; goto B10Av; NXetz: if ($v["\157\162\144\x65\162\137\163\x74\141\x74\165\x73"] == 1) { goto Mkpgz; } goto k714F; JpyGF: $goods = []; goto xyBwc; aak9x: $orderStatus = "\xe5\xbe\205\345\x8f\221\xe8\xb4\247"; goto woN8t; J_jtD: if ($goods) { goto OJsvs; } goto JpyGF; zcqn5: $goods["\x69\x6d\x67"] = $this->get_pic_path($goods["\151\155\x67"]); goto F9nra; ALFrY: goto ujG5o; goto aGjco; emqBV: if ($v["\157\162\144\x65\162\x5f\x73\x74\141\x74\165\x73"] == 7) { goto hqdIZ; } goto ALFrY; cwJKz: SHl0p: goto c_oGJ; B10Av: Af03s: goto l7JTX; HOWil: b6uEh: goto G395Y; asbzH: uQxOe: goto aak9x; G395Y: } goto HWNnY; n7zA4: } public function check_log($order, $type = 3) { goto Nq7d4; Nq7d4: $res = Db::name("\x79\x62\163\143\x5f\157\162\144\x65\162\x5f\162\x65\146\x75\x6e\x64")->field("\162\145\146\x75\156\x64\137\163\x74\141\x74\x75\x73")->where(["\x6f\x72\x64\x65\162\x5f\151\x64" => $order, "\164\171\160\x65" => $type])->order("\x69\144", "\144\145\163\x63")->find(); goto TNWx1; C_bFl: $count = 1; goto spGWo; Qcy0T: goto lpsnv; goto sHOAH; TNWx1: if (!empty($res) && $res["\162\x65\x66\x75\156\x64\137\163\164\141\164\x75\x73"] != 3) { goto NXeS5; } goto td432; spGWo: lpsnv: goto WoSkG; td432: $count = 0; goto Qcy0T; WoSkG: return $count; goto C0c2M; sHOAH: NXeS5: goto C_bFl; C0c2M: } public function get_ptOrderDetail($data) { goto XX1RX; juQkA: $info["\x65\x6e\x64\x5f\x74\x69\155\145"] = $this->get_time($info["\x65\156\x64\x54\x69\x6d\145"]); goto kJkoK; eLXPH: euym4: goto Q7Qko; NFNlP: goto ICbi7; goto eLXPH; kJkoK: $info["\x67\162\157\165\x70\137\x74\151\x6d\x65"] = $this->get_time($info["\147\x72\x6f\165\160\x54\x69\155\145"]); goto pxwSr; o5XLh: if (!$goods) { goto uW9vg; } goto AJqc_; osTjK: $orderStatus = "\xe5\267\xb2\351\200\200\346\xac\xbe"; goto Wl_cx; SjVyS: if ($info["\157\x72\144\145\162\x5f\x73\164\141\x74\165\x73"] == 6) { goto KMNeA; } goto f6T97; NN6wZ: if ($info["\147\x72\157\x75\x70\124\151\155\x65"] == 0 && $info["\145\156\x64\124\x69\x6d\145"] < time()) { goto pNUt2; } goto qZ_VT; W52ua: goto ICbi7; goto kTG7a; MmpbX: goto XNv2y; goto z3lnH; rV1Jk: if (!$info["\141\x64\x64\162\x65\163\163"]) { goto fESar; } goto jDD32; QVOn_: goto ICbi7; goto Z4VRy; y2Dda: JuDDU: goto PEpiL; YRsgl: goto ICbi7; goto y2Dda; eewOp: fESar: goto U87Mp; f6T97: if ($info["\157\162\144\x65\162\137\x73\x74\141\x74\x75\163"] == 7) { goto JuDDU; } goto LmFn6; QwJXc: $goods = Db::name($this->g)->where("\151\x64", $info["\x67\x69\x64"])->field("\156\x61\155\145\x2c\x69\155\147\54\x75\156\x69\164\x2c\147\x70\162\x69\143\x65")->find(); goto o5XLh; rMu93: if ($info["\x6f\162\x64\145\x72\137\x73\x74\141\164\165\x73"] == 4) { goto evomv; } goto V3Njr; ALCcC: if ($info["\157\162\x64\x65\162\137\x73\164\x61\164\165\x73"] == -1) { goto dzJsw; } goto ozbye; Oeunf: $orderStatus = "\345\276\x85\345\x8f\x91\350\xb4\xa7"; goto noVgP; jw3_9: $orderStatus = ''; goto y8OoB; ulN9t: j5s03: goto qM0ni; sTfa_: $orderStatus = "\xe6\213\xbc\345\x9b\242\xe5\xa4\xb1\xe8\264\245"; goto qttcJ; iKilt: $info["\x6f\x72\144\145\162\x53\164\141\x74\165\x73"] = $orderStatus; goto gp24d; l_yG6: evomv: goto dXLDr; kTG7a: dzJsw: goto yV10S; auJzO: iIjTp: goto Oeunf; GlUs8: goto MJFCp; goto a59eG; qZ_VT: $orderStatus = "\xe5\xbe\205\346\210\220\345\233\xa2"; goto GlUs8; qJ3ML: $info["\143\162\145\x61\164\x65\124\x69\155\x65"] = $this->get_time($info["\143\x72\145\x61\x74\x65\x54\x69\155\145"]); goto juQkA; Z4VRy: awjNc: goto NN6wZ; XX1RX: $info = Db::name($this->o)->where($data)->find(); goto flWWL; u_8zA: uW9vg: goto pp3Oq; PEpiL: if ($info["\147\162\157\165\x70\124\151\155\145"] > 0) { goto lxhsw; } goto ItGCR; pxwSr: $info["\143\x6f\x6d\160\154\x65\x74\145\x54\151\155\145"] = $this->get_time($info["\x63\x6f\155\x70\154\x65\164\x65\x54\x69\155\145"]); goto gHvS5; gp24d: $info["\x70\x61\x79\x54\151\x6d\x65"] = $this->get_time($info["\160\x61\x79\124\x69\x6d\x65"]); goto qJ3ML; AJqc_: $goods["\151\x6d\x67"] = $this->get_pic_path($goods["\x69\155\x67"]); goto u_8zA; jDD32: $info["\141\144\144\x72\145\163\163"] = json_decode($info["\141\144\144\x72\x65\x73\163"], true); goto eewOp; wiCcS: goto ICbi7; goto auJzO; U87Mp: Iu8nl: goto D0LUR; V3Njr: if ($info["\x6f\162\x64\x65\x72\137\x73\x74\x61\164\165\163"] == 5) { goto euym4; } goto SjVyS; HZanW: goto ICbi7; goto sbO61; ozbye: if ($info["\x6f\162\144\x65\162\x5f\x73\164\141\164\x75\x73"] == 3) { goto iIjTp; } goto rMu93; LmFn6: goto ICbi7; goto ulN9t; OJUqy: $orderStatus = "\345\xb7\262\xe5\xae\214\346\210\220"; goto YRsgl; z3lnH: lxhsw: goto osTjK; gHvS5: $info["\x64\x65\154\x69\x76\145\162\171\124\151\x6d\145"] = $this->get_time($info["\144\x65\x6c\151\x76\x65\x72\171\x54\151\x6d\145"]); goto QwJXc; ItGCR: $orderStatus = "\xe5\xb7\262\xe9\x80\x80\xe6\254\xbe\x28\xe6\234\252\346\x88\x90\xe5\x9b\242\x29"; goto MmpbX; a59eG: pNUt2: goto sTfa_; pp3Oq: $info["\x67\157\157\x64\x73"] = $goods; goto rV1Jk; sbO61: KMNeA: goto OJUqy; y8OoB: if ($info["\157\162\x64\x65\162\x5f\x73\x74\x61\x74\x75\163"] == 1) { goto j5s03; } goto Oe3YX; Q7Qko: $orderStatus = "\xe9\200\200\xe6\254\xbe\344\xb8\255"; goto HZanW; riGWN: ICbi7: goto iKilt; qM0ni: $orderStatus = "\xe5\xbe\205\344\xbb\230\xe6\254\276"; goto QVOn_; noVgP: goto ICbi7; goto l_yG6; Oe3YX: if ($info["\x6f\162\x64\145\x72\137\x73\x74\x61\164\x75\163"] == 2) { goto awjNc; } goto ALCcC; dXLDr: $orderStatus = "\xe5\276\x85\xe6\224\266\xe8\264\247"; goto NFNlP; yV10S: $orderStatus = "\xe5\xb7\xb2\xe5\x8f\x96\346\266\210"; goto wiCcS; D0LUR: return $info; goto oJLlw; qttcJ: MJFCp: goto W52ua; Wl_cx: XNv2y: goto riGWN; flWWL: if (!$info) { goto Iu8nl; } goto jw3_9; oJLlw: } public function get_ptGroupList($data, $page, $status) { goto rhRC7; TqKVD: goto jalV_; goto h1Dzu; mcO_N: $list = Db::name($this->o)->where($data)->page($page, 10)->order("\151\144", "\144\145\x73\x63")->select(); goto I7kg9; h1Dzu: Ak5FW: goto AgwMo; seHGW: jalV_: goto mcO_N; RdQll: Ywnl7: goto nVjwW; TWjgn: if ($status == 3) { goto vx1rE; } goto TqKVD; Qbboz: $data["\x67\162\x6f\x75\x70\x54\x69\x6d\145"] = 0; goto Z39t0; OoTh4: goto jalV_; goto iUK7Y; Z39t0: goto jalV_; goto RdQll; FEmun: foreach ($list as $k => $v) { goto PRcQ3; KAQgN: goto jJQeA; goto KnFlY; dBbJ9: $list[$k]["\147\x72\157\165\160\x53\x74\x61\x74\165\x73"] = $orderStatus; goto u3wRG; W8SCu: $orderStatus = "\xe6\x8b\xbc\345\x9b\242\345\xa4\261\xe8\264\245"; goto KAQgN; R2suY: uL84q: goto OPKYz; Dz_Jc: goto bvr2b; goto bVXqC; t43Wl: $orderStatus = "\xe5\xb7\xb2\xe6\210\x90\345\233\242"; goto hiS1c; OIIyq: $orderStatus = "\xe5\xbe\x85\346\x88\x90\xe5\x9b\242"; goto ySqqv; bVXqC: zSmB0: goto t43Wl; Cp4Cm: $list[$k]["\x67\157\157\x64\x73"] = $goods; goto Sy9t5; JaJsl: goto k189l; goto R2suY; vHBNu: if ($v["\x65\156\x64\124\151\155\x65"] >= time()) { goto VRi02; } goto W8SCu; ySqqv: jJQeA: goto Dz_Jc; QPoEI: $goods = []; goto JaJsl; Hrs1H: if ($v["\x67\x72\x6f\165\160\x54\151\155\145"] > 0) { goto zSmB0; } goto vHBNu; PRcQ3: $orderStatus = ''; goto Hrs1H; u3wRG: $goods = Db::name($this->g)->where("\151\144", $v["\147\151\144"])->field("\x6e\x61\x6d\x65\54\x69\x6d\147\54\x75\x6e\151\164\54\147\x70\x72\x69\143\x65\54\x67\x72\x6f\x75\x70\x4e\165\155\x2c\x6c\151\155\x69\x74\124\x69\x6d\145\54\163\x61\154\x65\116\165\155")->find(); goto xL9Z7; OPKYz: $goods["\x69\x6d\147"] = $this->get_pic_path($goods["\x69\155\147"]); goto FpG3X; xL9Z7: if ($goods) { goto uL84q; } goto QPoEI; FpG3X: k189l: goto Cp4Cm; KnFlY: VRi02: goto OIIyq; hiS1c: bvr2b: goto dBbJ9; Sy9t5: FQ7Oe: goto EzoUP; EzoUP: } goto x5znP; QOQ2e: $data["\145\x6e\x64\124\x69\155\x65"] = ["\x3c", time()]; goto Gtrv2; x5znP: C9UKK: goto Nk1do; I7kg9: if (empty($list)) { goto HzYTY; } goto FEmun; gJ_3Q: return $list; goto DpoTd; Nk1do: HzYTY: goto gJ_3Q; sDT6B: if ($status == 2) { goto Ywnl7; } goto TWjgn; Gtrv2: $data["\147\162\157\165\x70\124\x69\x6d\145"] = 0; goto seHGW; rhRC7: $data["\x69\163\120\x61\171"] = 1; goto K5olV; nVjwW: $data["\x67\162\x6f\x75\x70\x54\x69\x6d\145"] = ["\76", 0]; goto OoTh4; iBYwN: if ($status == 1) { goto Ak5FW; } goto sDT6B; K5olV: $data["\151\163\x47\162\x6f\x75\160"] = 1; goto iBYwN; AgwMo: $data["\145\x6e\144\x54\x69\155\x65"] = ["\76\75", time()]; goto Qbboz; iUK7Y: vx1rE: goto QOQ2e; DpoTd: } public function get_ptGroupDetail($data, $uid) { goto HYTP7; PSPWR: $orderStatus = "\346\213\xbc\345\233\242\345\244\261\xe8\264\xa5"; goto svIKf; NGw4u: if (!$info["\141\144\x64\162\x65\163\163"]) { goto ALlmF; } goto zt5z2; uDvjw: $aa["\143\151\164\171"] = $city["\156\x61\x6d\145"]; goto qEPEc; vTpVr: $map = "\157\56\160\151\x64\x3d" . $info["\151\144"] . "\x20\157\x72\40\x6f\56\151\x64\75" . $info["\151\x64"]; goto EoZ_M; bUk_3: if ($info["\147\162\x6f\165\160\124\x69\x6d\x65"] > 0) { goto bBo9H; } goto KFXp4; zSJbI: $info["\154\145\x66\x74\x4e\165\x6d"] = count($info["\x67\x72\x6f\165\160\115\x65\155\x62\145\x72"]); goto LfMYv; d257i: foreach ($info["\147\162\x6f\x75\160\115\x65\155\142\x65\162"] as $val) { goto aGb7l; aGb7l: if (!($val["\165\151\144"] == $uid)) { goto eTuzr; } goto P4VZW; a1eTp: eTuzr: goto b0YKy; b0YKy: Bj98V: goto ifd0T; P4VZW: $info["\151\163\x53\x65\x6c\146"] = 1; goto a1eTp; ifd0T: } goto LSQkb; dJCGL: $info["\143\x72\x65\141\x74\145\x54\x69\x6d\145"] = $this->get_time($info["\x63\162\145\x61\164\x65\x54\x69\155\x65"]); goto zoZdJ; HDFej: $aa["\165\163\145\162\116\x61\x6d\x65"] = $address["\x63\x6f\x6e\x73\151\x67\x6e\x65\x72"]; goto EFGCT; zoZdJ: $info["\x65\x6e\144\x5f\164\x69\155\x65"] = $this->get_time($info["\x65\x6e\144\x54\151\x6d\x65"]); goto L6F5o; cYPPx: if (!$goods) { goto zGIku; } goto vm9aV; QGfbs: $city = Db::name($this->dq)->where("\x69\144", $res["\x70\151\x64"])->find(); goto TbJOj; RpTiK: I4T9O: goto p9Mw8; EFGCT: $aa["\x74\145\154\116\x75\x6d\142\145\x72"] = $address["\160\x68\x6f\x6e\145"]; goto Bdt_7; svIKf: goto I4T9O; goto UoDo0; nwwi2: Iez3o: goto vTpVr; sUYAd: $orderStatus = "\xe6\213\274\345\233\242\xe6\x88\220\345\x8a\x9f"; goto YdxZC; omEEG: $info["\143\x6f\x6d\160\x6c\145\x74\x65\x54\x69\155\x65"] = $this->get_time($info["\143\x6f\155\160\x6c\x65\164\145\124\151\155\x65"]); goto iUHUy; LfMYv: $info["\154\145\146\164\124\151\155\x65"] = $info["\145\x6e\x64\124\151\x6d\x65"] - time(); goto XsSgW; fx1GK: $info["\147\x6f\157\144\x73"] = $goods; goto NGw4u; hmx83: if (!$info) { goto UBmXQ; } goto MitWe; xkxLS: $goods["\141\x64\x64\162\145\x73\163"] = $aa; goto JuCgU; L6F5o: $info["\147\x72\x6f\165\x70\137\164\151\155\x65"] = $this->get_time($info["\x67\162\157\165\x70\x54\x69\155\x65"]); goto omEEG; JuCgU: zGIku: goto fx1GK; EoZ_M: zaJ9p: goto B5pP7; aaMXp: $address = Db::name($this->ad)->field("\x63\157\x6e\163\x69\147\x6e\145\162\54\160\x68\x6f\x6e\145\54\x61\144\144\162\x65\163\163\x2c\x61\x72\145\141")->where("\165\151\x64", $uid)->where("\x69\x73\x5f\144\145\146\141\x75\x6c\x74\x20", 1)->find(); goto JupPC; gIpbA: UBmXQ: goto hBNff; s2x2z: $data["\151\163\x47\x72\x6f\x75\x70"] = 1; goto Mz4ON; UoDo0: QFvrP: goto lZtIt; KyFRY: $info["\147\x72\x6f\165\x70\x53\164\x61\x74\x75\163"] = $orderStatus; goto kJfH0; qEPEc: $aa["\143\157\165\156\164\171"] = $res["\x6e\x61\x6d\145"]; goto xkxLS; YdxZC: CfLWw: goto KyFRY; B50oB: $address = Db::name($this->ad)->field("\143\157\156\163\x69\147\x6e\145\x72\x2c\x70\x68\x6f\x6e\x65\54\141\x64\144\162\145\x73\163\54\141\162\145\x61")->where("\x75\x69\x64", $uid)->order("\x63\x72\145\x61\164\x65\137\164\x69\155\145", "\144\145\163\x63")->find(); goto irgRk; gZkH9: $map = "\157\56\x70\151\x64\x3d" . $info["\x70\x69\144"] . "\x20\157\162\40\x6f\56\x69\144\75" . $info["\160\151\144"]; goto S9NwO; HYTP7: $data["\x69\163\x50\141\171"] = 1; goto s2x2z; B5pP7: $info["\147\162\x6f\x75\x70\x4d\145\155\x62\145\x72"] = Db::name($this->o)->alias("\157")->field("\157\x2e\x70\151\x64\x2c\157\56\151\144\54\155\56\165\x69\x64\54\155\56\165\163\145\x72\x5f\150\145\141\144\x69\155\x67")->join("\x79\142\x73\x63\x5f\x75\x73\145\162\40\x6d", "\155\x2e\165\x69\144\75\x6f\56\x75\151\144")->where($map)->where(["\157\56\151\x73\x50\141\171" => 1, "\x6f\x2e\x69\163\107\x72\x6f\165\160" => 1])->order("\157\x2e\x70\151\144\x20\141\163\143")->select(); goto d257i; hBNff: return $info; goto XbqWO; S9NwO: goto zaJ9p; goto nwwi2; irgRk: Fkyrn: goto g1Om0; kJfH0: if ($info["\160\151\144"] == 0) { goto Iez3o; } goto gZkH9; lZtIt: $orderStatus = "\xe6\x8b\274\xe5\x9b\242\344\270\255"; goto RpTiK; g1Om0: $res = Db::name($this->dq)->where("\151\144", $address["\141\162\x65\141"])->find(); goto QGfbs; MitWe: $orderStatus = ''; goto bUk_3; Bdt_7: $aa["\x61\x64\144\x72\x65\163\x73"] = $address["\141\144\144\x72\x65\163\163"]; goto R4SZV; LSQkb: OwVWr: goto zSJbI; vEfi4: bBo9H: goto sUYAd; vm9aV: $goods["\151\155\147"] = $this->get_pic_path($goods["\x69\x6d\147"]); goto aaMXp; iUHUy: $info["\x64\145\154\x69\166\145\x72\171\x54\x69\155\145"] = $this->get_time($info["\x64\x65\x6c\x69\x76\145\162\171\124\151\155\x65"]); goto CzsT3; JupPC: if (!empty($address)) { goto Fkyrn; } goto B50oB; zt5z2: $info["\141\144\144\x72\145\x73\163"] = json_decode($info["\x61\144\144\x72\x65\x73\x73"], true); goto aCHHb; CzsT3: $goods = Db::name($this->g)->where("\x69\x64", $info["\147\151\144"])->field("\151\144\x2c\156\141\155\145\x2c\151\x6d\147\54\165\x6e\x69\x74\54\x67\160\x72\x69\x63\x65\x2c\x67\x72\157\165\x70\x4e\165\155\x2c\154\x69\155\x69\x74\x54\x69\x6d\x65\x2c\x73\x61\154\x65\116\x75\x6d")->find(); goto cYPPx; KFXp4: if ($info["\x65\156\144\x54\x69\155\x65"] >= time()) { goto QFvrP; } goto PSPWR; XsSgW: $info["\160\141\x79\124\151\x6d\x65"] = $this->get_time($info["\x70\x61\x79\x54\151\x6d\x65"]); goto dJCGL; Mz4ON: $info = Db::name($this->o)->where($data)->find(); goto hmx83; aCHHb: ALlmF: goto gIpbA; p9Mw8: goto CfLWw; goto vEfi4; TbJOj: $pro = Db::name($this->dq)->where("\x69\144", $city["\160\x69\144"])->find(); goto HDFej; R4SZV: $aa["\160\x72\x6f\x76\151\x6e\143\145"] = $pro["\x6e\x61\x6d\x65"]; goto uDvjw; XbqWO: } public function signOrder($data) { goto zmA3x; zmA3x: $info = Db::name($this->o)->where($data)->find(); goto mCwt6; ek_vx: $res = Db::name($this->o)->where(["\151\144" => $data["\x69\144"]])->update($new_data); goto RYOFH; mCwt6: if (!empty($info)) { goto lR2uC; } goto MoWNp; vGhFU: $new_data = array("\x6f\162\144\x65\162\137\163\x74\x61\x74\165\x73" => 6, "\143\157\x6d\160\x6c\x65\164\x65\x54\151\155\x65" => time()); goto ek_vx; RYOFH: return $res; goto jhEGw; MoWNp: return null; goto nY1tm; nY1tm: lR2uC: goto vGhFU; jhEGw: } public function refundOrder($data, $apply_refund) { goto maIb7; soDDv: return null; goto GHxfd; Ev9xS: $res = Db::name($this->o)->where(["\x69\x64" => $data["\x69\x64"]])->update($new_data); goto njn5g; YyGgI: $refund->refundLog($info["\x6d\x63\150\x5f\x69\144"], $info["\165\x69\144"], $apply_refund, $info["\151\x64"], 3); goto mn0pO; maIb7: $info = Db::name($this->o)->where($data)->find(); goto HjYQL; njn5g: if (!($res && $apply_refund)) { goto pW1co; } goto XDQjb; HjYQL: if (!empty($info)) { goto RuxXe; } goto soDDv; pmYMd: $new_data = array("\x6f\162\144\x65\x72\x5f\x73\164\141\x74\x75\x73" => 5, "\162\x65\x66\165\x6e\144\x5f\163\164\141\164\x75\163" => $info["\x6f\x72\144\145\x72\x5f\163\164\141\x74\165\x73"]); goto Ev9xS; f3S4W: return $res; goto Pjalu; XDQjb: $refund = new RefundService(); goto YyGgI; GHxfd: RuxXe: goto pmYMd; mn0pO: pW1co: goto f3S4W; Pjalu: } public function orderPay($data) { goto lJUz8; AYCzo: if (!($info["\160\151\x64"] != 0)) { goto l9ZA1; } goto q0JxI; RZ0fs: gARTc: goto qmCD3; EhE6C: if (!($count + 1 >= $ginfo["\x67\x72\x6f\165\160\116\x75\x6d"])) { goto YOtmD; } goto wVOtt; fMd6A: $input->SetTotal_fee($info["\164\x6f\x74\x61\154\x50\x72\151\143\145"] * 100); goto cNuwL; uLq7o: if (!($unifiedorder["\x72\145\163\165\154\164\x5f\143\157\x64\x65"] == "\106\101\x49\x4c")) { goto W0VaL; } goto tjdkR; adU80: YOtmD: goto d9uim; rzMP0: M0K8h: goto edw4_; UqHsL: $rs["\x6d\x73\x67"] = "\xe8\256\242\345\215\225\xe4\270\x8d\xe5\xad\x98\345\234\250"; goto GMXNL; t3mxl: get_url_content($url); goto yMGb9; YZ5St: $rs["\x63\157\x64\x65"] = 1; goto bkLWf; P69Im: $rs["\143\x6f\144\145"] = 1; goto UqHsL; qmCD3: if (!($info["\151\x73\107\x72\157\x75\160"] == 1)) { goto M0K8h; } goto SD1sC; U_mbb: $send = true; goto D8vgw; SV1Fa: $input = new \WxPayUnifiedOrder(); goto OlyZN; rnFYJ: $info = Db::name($this->o)->where(["\x69\x64" => $data["\x69\x64"], "\x6f\162\144\145\162\x5f\163\164\141\x74\165\x73" => 1])->find(); goto cD56q; edw4_: $ginfo = Db::name("\x79\x62\x73\x63\x5f\x70\164\137\147\157\157\144\x73")->field("\147\162\x6f\165\160\116\x75\155\x2c\156\141\x6d\145")->where("\151\144", $info["\147\x69\x64"])->find(); goto AYCzo; D8vgw: ocuW8: goto D6Bve; ukmgv: return $rs; goto mKqIo; mKqIo: eNpCd: goto rzMP0; wAwHW: $good_name_str = mb_substr($ginfo["\156\141\155\145"], 0, 20, "\x75\164\x66\x2d\x38"); goto xC6bj; z8bZ3: $rs["\155\x73\x67"] = "\345\x9b\242\350\xb4\xad\xe5\xb7\262\xe6\273\241\xe5\x91\230"; goto cLvLx; wf2am: $rs["\x6d\163\147"] = $unifiedorder["\162\145\164\x75\x72\x6e\137\155\163\x67"]; goto EWbrc; gXb3H: return $rs; goto V6Gxh; N39ja: $GLOBALS["\153\x65\x79"] = "\x70\151\156\164\165\141\156"; goto SV1Fa; Mw69k: $rs["\x6d\163\147"] = "\345\233\242\350\xb4\xad\345\xb7\262\xe8\xbf\x87\346\234\x9f"; goto ukmgv; YgIaE: $rs["\x63\x6f\144\145"] = 1; goto Mw69k; igsYH: $rs["\155\163\147"] = $unifiedorder["\x65\x72\x72\137\143\x6f\x64\x65\x5f\144\145\x73"]; goto Yo6w0; tjdkR: $rs["\143\157\x64\x65"] = 1; goto igsYH; XstB7: utt2V: goto uLq7o; RrcaY: if (!($unifiedorder["\162\x65\x74\x75\162\156\x5f\143\x6f\144\x65"] == "\106\101\111\x4c")) { goto utt2V; } goto YEczc; xl7d3: $unifiedorder = \WxPayApi::unifiedOrder($input); goto RrcaY; lJUz8: $send = false; goto GN4ZL; Cu8Et: Db::name($this->o)->where("\x69\x64", $data["\x69\x64"])->update(["\160\162\x65\160\x61\x79\111\x64" => $unifiedorder["\x70\x72\145\x70\x61\171\x5f\x69\x64"]]); goto ux_Ie; hu265: return $rs; goto RZ0fs; GMXNL: return $rs; goto k6ozT; wVOtt: $rs["\143\x6f\x64\145"] = 1; goto z8bZ3; SD1sC: if (!($info["\x69\163\107\162\x6f\165\x70"] > time())) { goto eNpCd; } goto YgIaE; D6Bve: l9ZA1: goto wAwHW; ux_Ie: $res = $this->weixinapp($unifiedorder); goto D2R9H; YEczc: $rs["\x63\x6f\144\x65"] = 1; goto wf2am; EWbrc: return $rs; goto XstB7; bkLWf: $rs["\155\163\x67"] = "\xe8\256\xa2\xe5\215\x95\xe4\270\273\xe9\xa2\230\345\xb7\xb2\346\x94\xb9\xe5\217\230"; goto hu265; cLvLx: return $rs; goto adU80; xC6bj: $GLOBALS["\x6d\143\150\x5f\x69\x64"] = $data["\155\143\150\x5f\x69\x64"]; goto N39ja; ci22B: $rs["\x69\x6e\146\x6f"] = $res; goto gXb3H; GN4ZL: $rs = array("\143\x6f\x64\x65" => 0, "\151\x6e\x66\157" => array()); goto rnFYJ; k6ozT: vtH_Z: goto uJAwl; y5Icm: $input->SetTrade_type("\x4a\123\101\120\111"); goto xl7d3; yMGb9: fbaHb: goto ci22B; cNuwL: $input->SetOut_trade_no($info["\157\162\144\x65\x72\116\165\155"]); goto y5Icm; D2R9H: if (!$send) { goto fbaHb; } goto LJmoi; q0JxI: $count = Db::name("\x79\x62\x73\143\137\160\x74\137\x6f\x72\144\x65\x72\163")->where(["\x70\x69\x64" => $info["\x70\151\x64"], "\x69\x73\x50\141\x79" => 1])->count(); goto EhE6C; LpSzB: $input->SetOpenid($data["\157\160\145\156\x69\x64"]); goto liQE3; LJmoi: $url = get_child_url(false) . "\x61\x70\160\x2f\151\x6e\144\145\x78\56\x70\150\160\x3f\151\75" . $info["\x6d\143\x68\x5f\x69\144"] . "\46\164\x3d\165\156\x64\145\x66\x69\156\145\144\46\x76\75\x31\56\x30\56\x39\x36\x26\146\x72\157\155\x3d\167\170\141\160\x70\46\x63\75\x65\156\x74\x72\x79\46\x61\x3d\x77\x78\x61\x70\x70\46\x64\157\75\127\170\160\165\163\x68\137\120\x74\123\x75\x63\x63\x65\x73\163\120\x75\x73\x68\x26\155\75\x79\x62\x5f\163\x68\157\160\x26\x73\151\x67\156\75\146\60\142\x36\x39\x37\144\143\142\145\144\x38\x36\63\x65\142\x63\65\x30\x36\x30\x66\61\x30\x38\66\x38\x35\x36\67\x32\x34\46\160\151\144\x3d" . $info["\160\x69\x64"]; goto t3mxl; d9uim: if (!($count + 2 == $ginfo["\x67\x72\x6f\x75\x70\x4e\x75\155"])) { goto ocuW8; } goto U_mbb; OlyZN: $input->SetBody($good_name_str); goto LpSzB; uJAwl: if (!($info["\x69\163\120\x61\171"] != 0)) { goto gARTc; } goto YZ5St; Yo6w0: return $rs; goto edglC; cD56q: if (!empty($info)) { goto vtH_Z; } goto P69Im; liQE3: $input->SetDetail("\xe7\x94\250\xe6\210\267\xe8\264\255\344\271\260\345\x95\206\345\223\201"); goto fMd6A; edglC: W0VaL: goto Cu8Et; V6Gxh: } public function orderPaywap($data) { goto PfClW; ul7If: veY5C: goto QT3zd; L2T7I: $input->SetOut_trade_no($info["\x6f\x72\144\145\162\116\165\x6d"]); goto MmdPt; dhW8Q: $rs["\x6d\x73\147"] = "\345\x9b\xa2\xe8\264\xad\xe5\267\262\350\xbf\x87\346\234\237"; goto qkqNP; t3g1y: if (!($unifiedorder["\x72\x65\164\165\x72\156\137\x63\x6f\x64\145"] == "\x46\101\x49\114")) { goto s6m_X; } goto mFrT0; Ial0c: ViRxD: goto iosBL; etxGG: return $rs; goto RoLcZ; fCJso: $rs["\155\x73\147"] = $unifiedorder["\x65\162\x72\x5f\143\157\x64\145\137\x64\x65\x73"]; goto i9KOQ; coE8Q: $rs = array("\x63\x6f\x64\145" => 0, "\x69\x6e\x66\x6f" => array()); goto q1Xt0; cJ77r: $rs["\x6d\163\147"] = $unifiedorder["\x72\x65\164\x75\162\x6e\137\x6d\x73\147"]; goto BIAuF; yS6Qc: tkXc_: goto lsBpX; qkqNP: return $rs; goto OJw2u; x82a5: if (!($info["\151\163\x47\x72\x6f\165\x70"] == 1)) { goto pBA1v; } goto l6Skj; QT3zd: if (!($count + 2 == $groupNum)) { goto kD1ed; } goto hErVY; Q4uz2: $rs["\x63\x6f\x64\145"] = 1; goto QHZLi; IHs8t: pBA1v: goto NPASM; YwVZJ: return $rs; goto yS6Qc; l6Skj: if (!($info["\151\163\107\x72\157\165\x70"] > time())) { goto cwTlU; } goto BLM2r; jm4h0: if (!($unifiedorder["\x72\145\x73\x75\x6c\164\137\143\x6f\144\x65"] == "\x46\101\x49\x4c")) { goto rM2up; } goto D0t5D; OJw2u: cwTlU: goto IHs8t; x20L5: return $unifiedorder; goto nFX6w; yizYS: $rs["\x63\x6f\144\x65"] = 1; goto jNRav; AZhjX: return $rs; goto ul7If; JWmrt: $input = new \WxPayUnifiedOrder(); goto vhIwS; MmdPt: $input->SetTotal_fee($info["\164\157\x74\x61\154\120\x72\151\143\x65"] * 100); goto AdwjM; oBnbX: $rs["\x6d\163\147"] = "\xe5\x9b\242\350\264\xad\345\xb7\xb2\xe6\273\xa1\345\x91\230"; goto AZhjX; lsBpX: if (!($info["\151\x73\x50\141\x79"] != 0)) { goto wU3v5; } goto yizYS; AdwjM: $input->SetSpbill_create_ip($spbill_create_ip); goto DhlRm; uRieW: $spbill_create_ip = get_client_ip($type = 0, $adv = true); goto JWmrt; iosBL: $GLOBALS["\155\143\150\x5f\151\144"] = $data["\x6d\x63\150\x5f\x69\x64"]; goto T7nZV; T7nZV: $GLOBALS["\x6b\x65\x79"] = "\160\151\156\x74\x75\141\156"; goto uRieW; Xh2ee: $count = Db::name("\171\x62\163\143\137\160\x74\x5f\x6f\162\144\x65\162\163")->where(["\160\151\144" => $info["\x70\151\x64"], "\x69\x73\120\141\171" => 1])->count(); goto iTES9; QHZLi: $rs["\155\163\x67"] = "\350\xae\xa2\345\x8d\225\344\xb8\x8d\xe5\xad\x98\345\234\250"; goto YwVZJ; xv2q1: $unifiedorder = \WxPayApi::unifiedOrder($input); goto t3g1y; i9KOQ: return $rs; goto uB9p_; yYvtW: if (!($info["\x70\x69\x64"] != 0)) { goto ViRxD; } goto Xh2ee; vhIwS: $input->SetBody("\xe6\213\xbc\xe5\x9b\242\xe8\xae\xa2\345\x8d\225"); goto L2T7I; jNRav: $rs["\155\x73\x67"] = "\350\256\242\345\215\x95\344\xb8\273\xe9\xa2\x98\345\267\262\346\x94\271\xe5\217\x98"; goto etxGG; q1Xt0: $info = Db::name($this->o)->where(["\x69\144" => $data["\x69\144"], "\157\x72\x64\x65\162\137\x73\164\141\x74\x75\x73" => 1])->find(); goto HJXyC; NPASM: $groupNum = Db::name("\171\142\163\143\x5f\x70\164\137\x67\x6f\x6f\144\163")->where("\x69\x64", $info["\147\151\144"])->value("\x67\162\157\165\x70\x4e\x75\155"); goto yYvtW; zMuT7: s6m_X: goto jm4h0; DhlRm: $input->SetTrade_type("\x4d\127\105\102"); goto YAnXo; BLM2r: $rs["\143\x6f\144\145"] = 1; goto dhW8Q; mFrT0: $rs["\x63\157\144\145"] = 1; goto cJ77r; RoLcZ: wU3v5: goto x82a5; PfClW: $send = false; goto coE8Q; hErVY: $send = true; goto c0b68; BIAuF: return $rs; goto zMuT7; c0b68: kD1ed: goto Ial0c; D0t5D: $rs["\x63\x6f\x64\145"] = 1; goto fCJso; uP9Cw: $rs["\143\157\x64\x65"] = 1; goto oBnbX; YAnXo: $input->SetScene_info("\x7b\42\x68\65\137\x69\156\146\157\42\x3a\40\x7b\x22\164\171\160\x65\42\x3a\x22\x57\x61\160\x22\x2c\x22\167\x61\x70\x5f\x75\162\x6c\x22\x3a\x20\42\150\164\164\x70\163\x3a\x5c\57\134\x2f\167\161\56\x73\x73\x73\x76\x69\x70\x2e\x6e\145\164\42\54\x22\167\x61\160\137\156\x61\x6d\x65\42\72\x20\42\xe5\xa3\xb9\xe4\275\xb0\xe5\x95\x86\xe5\x9f\216\x22\x7d\175"); goto xv2q1; uB9p_: rM2up: goto x20L5; iTES9: if (!($count + 1 >= $groupNum)) { goto veY5C; } goto uP9Cw; HJXyC: if (!empty($info)) { goto tkXc_; } goto Q4uz2; nFX6w: } private function weixinapp($unifiedorder) { goto pqMvm; BUjSb: $input->SetAppid($param["\x41\x50\120\x5f\x49\x44"]); goto ez2yW; Wo8Fz: $input->SetSign(); goto dz4s3; dz4s3: return $input; goto BTnvl; eCZbj: $input->SetNonceStr($this->createNoncestr()); goto CErFa; nvW7I: $param = json_decode($param, true); goto KScyr; WgwCN: $input->SetSignType("\x4d\x44\65"); goto Wo8Fz; ez2yW: $input->SetTimeStamp('' . time() . ''); goto eCZbj; pqMvm: $param = Db::name("\171\142\163\143\x5f\x63\157\156\x66\151\x67")->where("\x6b\x65\171", "\127\130\120\101\131")->where("\x6d\143\x68\137\151\x64", $GLOBALS["\x6d\x63\x68\137\151\x64"])->where("\151\163\137\x75\x73\145", 1)->value("\x76\141\154\x75\x65"); goto nvW7I; KScyr: $input = new \WxPayJsApiPay(); goto BUjSb; CErFa: $input->SetPackage("\160\x72\x65\160\141\171\137\x69\144\75" . $unifiedorder["\160\162\x65\160\x61\x79\x5f\x69\144"]); goto WgwCN; BTnvl: } private function createNoncestr($length = 32) { goto GbYU5; mMZ2e: if (!($i < $length)) { goto vmz_7; } goto gMaSQ; yj3Wb: $i++; goto Y9nU0; PZQEq: uSj5Z: goto yj3Wb; q2wcm: PPkhy: goto mMZ2e; OWAcP: vmz_7: goto EgZCb; EgZCb: return $str; goto vHt2G; pcVZb: $i = 0; goto q2wcm; gMaSQ: $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1); goto PZQEq; GbYU5: $chars = "\x61\142\143\144\145\x66\147\x68\x69\x6a\153\x6c\x6d\156\x6f\x70\161\162\x73\x74\165\x76\x77\x78\x79\x7a\60\61\x32\x33\64\65\x36\67\70\71"; goto aLluW; Y9nU0: goto PPkhy; goto OWAcP; aLluW: $str = ''; goto pcVZb; vHt2G: } public function get_pic_path($id) { goto d9oVM; XHWEE: goto T_X21; goto G7QNn; Tl2LN: $img = Db::name($this->i)->where("\x69\x6d\147\137\x69\144", $id)->value("\151\155\x67\x5f\x63\157\x76\x65\x72"); goto EGR2I; d9oVM: if ($id) { goto B0iiS; } goto VfaYU; G7QNn: B0iiS: goto Tl2LN; VfaYU: return null; goto XHWEE; G_Gb0: T_X21: goto VDvRY; EGR2I: return $img; goto G_Gb0; VDvRY: } public function get_time($t) { goto s8Krs; ySLMd: return null; goto Q3TcS; Q3TcS: goto AwmEn; goto Bgovq; QtZl4: AwmEn: goto puxtz; s8Krs: if ($t) { goto UY8V3; } goto ySLMd; Bgovq: UY8V3: goto qSPou; qSPou: return date("\131\55\x6d\55\144\40\110\x3a\151\72\x73", $t); goto QtZl4; puxtz: } }
