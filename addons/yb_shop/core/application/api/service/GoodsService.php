<?php
 namespace app\api\service; use think\Cache; use think\Db; require_once BASE_ROOT . "\143\157\x72\145\x2f\x61\160\x70\x6c\151\x63\141\x74\x69\x6f\156\57\x63\157\155\x6d\157\x6e\x2e\160\150\160"; class GoodsService { private $g = "\171\x62\163\143\137\147\157\x6f\x64\163"; private $c = "\x79\142\163\143\x5f\x63\141\x72\x74"; private $f = "\x79\x62\163\143\x5f\165\x73\x65\x72\137\146\x61\x76\x6f\x72\151\x74\x65\x73"; private $b = "\171\x62\x73\143\x5f\x67\x6f\x6f\144\163\x5f\142\x72\x61\x6e\144"; private $i = "\171\142\163\x63\137\x69\155\141\x67\145\x73"; private $s = "\171\x62\x73\143\x5f\x67\x6f\x6f\x64\x73\137\163\x6b\x75"; private $cate = "\x79\142\163\x63\x5f\x67\x6f\157\x64\163\137\143\x61\x74\145"; private $a = "\x79\142\163\143\137\x75\x73\145\x72\137\x61\x64\144\162\145\163\x73"; private $hd = "\x79\x62\x73\143\137\142\x75\x73\x69\156\145\163\x73\137\x61\x63\x74\x69\166\151\x74\x79"; private $dq = "\x79\x62\163\143\x5f\141\162\x65\141"; private $attr = "\171\142\163\143\137\147\157\x6f\x64\163\x5f\141\164\164\x72"; private $spec = "\171\x62\163\143\137\x67\x6f\157\144\x73\x5f\163\160\145\x63\x5f\146\x6f\x72\155\x61\164"; public function getGoodsList($data, $order, $by, $page = 1) { goto eDQRa; ioqXu: foreach ($goods_list as $k => $value) { goto LgiQ3; uM1uA: iXXYi: goto cLHHN; aYUn_: $goods_list[$k]["\160\x69\143"] = $pic; goto uM1uA; LgiQ3: $pic = Db::name($this->i)->where("\x69\x6d\x67\x5f\151\x64", $value["\151\x6d\141\x67\x65\163"])->field("\x69\x6d\x67\x5f\x63\157\x76\x65\162\x2c\x69\155\147\137\x63\x6f\x76\145\162\x5f\x62\151\x67\x2c\x69\155\x67\x5f\x63\x6f\x76\145\162\x5f\x6d\151\144\x2c\x69\155\x67\x5f\143\x6f\166\x65\162\x5f\x73\155\141\154\x6c")->find(); goto d7uox; cLHHN: i2auO: goto U8db1; d7uox: if (!$pic) { goto iXXYi; } goto aYUn_; U8db1: } goto dq3Ky; KClGV: B708F: goto ioqXu; nWlNW: $data["\143\x61\x74\x65\x5f\151\144"] = ["\151\156", self::InfiniteGoods($data["\143\x61\x74\x65\137\151\144"], $data["\155\x63\x68\137\151\x64"])]; goto JV04J; C0Wc9: return $goods_list; goto KClGV; ppjyX: $goods_list = Db::name($this->g)->field("\x67\x6f\157\x64\163\137\151\x64\x2c\x67\x6f\157\x64\163\x5f\156\x61\155\x65\54\160\x72\x69\143\x65\54\x69\x6e\164\162\157\x64\165\143\164\151\x6f\x6e\x2c\151\155\141\x67\x65\x73\54\143\141\x74\145\x5f\x69\144\x2c\155\141\x72\x6b\x65\x74\x5f\160\162\x69\143\x65\x2c\147\157\x6f\x64\163\137\164\171\160\x65")->where($data)->where("\x73\x74\x61\164\x65", 1)->where("\151\163\137\144\145\x6c", 0)->page($page, PAGE_NUM)->order($order, $by)->order("\x73\157\162\164\40\x64\x65\x73\x63\x2c\x63\162\x65\141\x74\145\137\164\x69\x6d\145\x20\144\145\163\x63")->select(); goto gf0OZ; JV04J: tTlHI: goto Fpibc; eDQRa: if (!isset($data["\143\x61\164\x65\137\x69\x64"])) { goto tTlHI; } goto nWlNW; oMP03: return $goods_list; goto byv3m; gf0OZ: if (!empty($goods_list)) { goto B708F; } goto C0Wc9; Fpibc: $goods_list = null; goto ppjyX; dq3Ky: nwMgY: goto oMP03; byv3m: } public function getGoodsDetail($data, $uid) { goto AVnM4; fx9Nt: $goods_pic = []; goto g8Oxo; RQhWc: foreach ($pic as $k => $v) { $goods_pic[$k] = Db::name($this->i)->field("\x69\155\147\x5f\143\x6f\x76\145\162\54\151\155\147\x5f\143\157\x76\x65\x72\x5f\x62\x69\x67\x2c\151\155\147\137\x63\x6f\x76\145\162\x5f\155\151\x64\54\x69\x6d\147\x5f\x63\157\166\x65\162\137\163\x6d\x61\154\154")->where("\x69\155\147\137\151\144", $v)->find(); pIlLJ: } goto rbxPI; VlzMI: VLyUQ: goto omSf6; Ab69H: uBZtt: goto gHuUq; Hgi8R: $g_attr = ''; goto BuXHC; BuXHC: if (empty($goods_detail["\147\157\x6f\x64\x73\x5f\x73\160\145\x63\x5f\146\157\x72\x6d\141\x74"])) { goto ShXsm; } goto mMSjx; nQ7nT: $pic = explode("\x2c", $goods_detail["\151\155\147\137\151\x64\137\141\x72\x72\x61\171"]); goto RQhWc; dfPZ_: pqc16: goto FYlX2; Q67R9: $goods_detail["\x67\157\157\144\163\x5f\163\160\145\143\x5f\146\x6f\x72\x6d\x61\x74"] = json_decode($goods_detail["\147\157\157\144\x73\x5f\163\160\145\143\x5f\x66\x6f\162\x6d\141\x74"], true); goto Hgi8R; djtY2: $goods_detail["\160\157\163\164\x5f\146\x65\145"] = $post_fee; goto m1rHw; omSf6: if (!empty($goods_detail["\147\157\157\x64\x73\x5f\141\x74\x74\162\151\x62\165\x74\145"])) { goto ydmip; } goto itkGx; JO4yU: uBMUI: goto ShpwQ; E3iL0: tj6n7: goto p5M7z; ShpwQ: $shipping_fee_id = $goods_detail["\x73\150\x69\160\x70\151\x6e\x67\137\x66\145\x65\x5f\x69\144"]; goto drd1U; Jyi6z: TffxK: goto AlAjV; yyqer: QJxcC: goto C0mXO; UBY1V: foreach ($goods_detail["\147\157\x6f\x64\x73\x5f\x61\164\164\162"] as $attr_item) { goto IRuE7; KasGR: $attrs[$attr_item["\x61\164\x74\x72\x5f\166\141\x6c\165\145\137\x69\x64"]] = $attr_item["\x61\164\x74\x72\x5f\166\x61\x6c\165\145\x5f\x6e\x61\x6d\x65"]; goto VHgAD; x8baX: BwIlD: goto RJLjv; PCcRV: $attrs[$attr_item["\141\164\x74\162\x5f\x76\x61\154\165\x65\x5f\x69\x64"]] .= "\x2c" . $attr_item["\x61\164\x74\x72\137\166\x61\x6c\165\x65\x5f\x6e\x61\155\x65"]; goto aiqyN; ECrMP: $attrs_name[$attr_item["\x61\164\164\162\137\166\141\154\x75\145\137\151\144"]] = $attr_item["\141\x74\x74\162\137\x76\x61\x6c\165\x65"]; goto KasGR; aiqyN: goto XyLcF; goto PcMTb; IRuE7: if (empty($attrs[$attr_item["\141\164\x74\162\137\x76\x61\x6c\x75\x65\x5f\151\x64"]])) { goto Cwj0W; } goto PCcRV; VHgAD: XyLcF: goto x8baX; PcMTb: Cwj0W: goto ECrMP; RJLjv: } goto Ab69H; myafZ: goto pqc16; goto ydEIn; m1rHw: frR92: goto oEPiY; UQptT: rJ18w: goto OWch4; MWjOt: return null; goto JO4yU; Fjmnh: ydmip: goto yFJqK; AVnM4: Db::name($this->g)->where("\x67\157\x6f\144\163\x5f\x69\x64", $data["\147\x6f\157\x64\163\137\x69\144"])->setInc("\x63\154\x69\x63\x6b\163"); goto YfVOL; unEDk: if (!empty($fav_c)) { goto ohBBK; } goto s2TVC; D_mcv: $goods_detail["\163\x6b\x75"] = Db::name($this->s)->where("\147\157\157\144\163\x5f\151\x64", $data["\x67\x6f\x6f\x64\163\x5f\151\x64"])->order("\163\x6b\x75\x5f\151\144")->select(); goto Q67R9; kVblm: goto F_nWK; goto Fjmnh; rz_Zi: $goods_detail["\160\151\x63"] = $goods_pic; goto D_mcv; T7oJf: foreach ($attrs as $ak => $av) { goto fzKK5; fzKK5: $aitem = array(); goto XflVC; wjZkI: $aitem["\x61\x74\164\x72\137\x76\141\154\x75\x65"] = $attrs_name[$ak]; goto s01kS; XflVC: $aitem["\x61\164\x74\x72\137\166\141\154\x75\145\x5f\x69\144"] = $ak; goto wjZkI; t5vbX: WeIge: goto M32I2; s01kS: $aitem["\141\x74\x74\x72\137\x76\x61\154\x75\145\137\x6e\141\155\145"] = $av; goto tbIWX; tbIWX: $goods_detail["\x67\157\157\144\163\x5f\x61\x74\164\x72"][] = $aitem; goto t5vbX; M32I2: } goto UQptT; ax440: foreach ($goods_detail["\x73\153\x75"] as $key => $value) { goto yDqDy; bDQrL: $pic = Db::name($this->i)->where("\151\x6d\147\x5f\151\x64", $value["\x69\155\x61\x67\145\163"])->field("\x69\x6d\147\137\x63\157\166\145\x72\54\151\155\x67\x5f\143\x6f\166\145\x72\137\142\151\147\54\151\155\x67\137\143\x6f\166\x65\162\137\x6d\151\144\54\x69\x6d\147\137\143\x6f\166\x65\162\137\163\x6d\x61\154\154")->find(); goto UGEhx; UGEhx: $goods_detail["\x73\x6b\x75"][$key]["\160\x69\143"] = $pic; goto J2I1w; j1MoM: $goods_detail["\x63\x75\162\x72\137\143\x68\x6f\x73\145\137\141\164\x74\x72\x5f\163\164\157\x63\153"] = $value["\163\x74\157\143\x6b"]; goto GPJ44; yDqDy: if (!($value["\141\x74\x74\162\137\x76\x61\x6c\165\x65\137\x69\x74\145\155\x73"] == $g_attr)) { goto hR8LO; } goto LwOis; LwOis: $goods_detail["\x63\165\x72\162\137\143\150\x6f\163\x65\137\x61\x74\164\x72\137\x70\x72\151\143\145"] = $value["\x70\x72\151\x63\145"]; goto j1MoM; GPJ44: $goods_detail["\x63\165\162\162\137\143\x68\x6f\163\x65\x5f\x61\164\x74\x72\137\151\x64"] = $value["\163\153\165\x5f\151\x64"]; goto P4dAI; J2I1w: BuGLR: goto ZXL9Q; P4dAI: hR8LO: goto bDQrL; ZXL9Q: } goto VlzMI; h5Wu_: foreach ($activity_info as $act_k => $act_v) { goto x0bOu; U96zq: $activity_info[$act_k]["\145\x6e\144\x5f\x74\151\155\145"] = date("\131\x2d\155\55\x64", $act_v["\145\156\x64\x5f\164\x69\155\145"]); goto uWVqd; uWVqd: $activity_info[$act_k]["\163\x61\x74\151\x73\x66\x79\x5f\155\x6f\156\145\x79"] = intval($act_v["\163\141\164\x69\x73\146\x79\x5f\x6d\x6f\156\145\171"]); goto oUTOV; oUTOV: $activity_info[$act_k]["\x64\x69\x73\x63\x6f\165\156\x74\137\x6d\x6f\x6e\x65\x79"] = intval($act_v["\x64\x69\x73\x63\x6f\165\156\164\137\x6d\x6f\156\x65\171"]); goto F2oVK; F2oVK: VzjKC: goto NbqQM; x0bOu: $activity_info[$act_k]["\x73\x74\x61\x72\137\164\151\x6d\x65"] = date("\131\55\155\55\144", $act_v["\x73\x74\x61\x72\x5f\164\x69\x6d\145"]); goto U96zq; NbqQM: } goto yyqer; mMSjx: foreach ($goods_detail["\147\x6f\157\x64\163\137\x73\160\x65\x63\x5f\146\157\x72\155\141\164"] as $spec_format) { $g_attr = $g_attr . $spec_format["\x76\x61\x6c\165\x65"][0]["\163\160\x65\143\x5f\x69\144"] . "\x3a" . $spec_format["\166\141\x6c\x75\145"][0]["\x73\x70\145\x63\137\x76\141\x6c\165\x65\x5f\151\144"] . "\x3b"; YdHHP: } goto E3iL0; oEPiY: if (!($uid != '')) { goto TffxK; } goto lsXk9; itkGx: $goods_detail["\147\x6f\x6f\x64\x73\137\141\164\164\x72"] = []; goto kVblm; rbxPI: xzcob: goto y0zVj; lmRPE: return $goods_detail; goto ht0rc; szgh0: if (!empty($goods_detail)) { goto uBMUI; } goto MWjOt; OWch4: F_nWK: goto EDXi2; C0mXO: $goods_detail["\x61\143\164\151\x76\x69\164\x79"] = $activity_info; goto lmRPE; FYlX2: $goods_detail["\143\x61\162\x74"] = Db::name($this->c)->where("\x62\165\171\145\162\x5f\151\144", $uid)->where("\155\143\150\x5f\x69\144", $data["\x6d\x63\x68\x5f\151\x64"])->sum("\156\x75\155"); goto Jyi6z; g8Oxo: if (!$goods_detail["\151\x6d\x67\x5f\151\x64\137\141\162\162\x61\x79"]) { goto aSU9q; } goto nQ7nT; YfVOL: $goods_detail = Db::name($this->g)->where($data)->where("\x73\x74\141\164\x65", 1)->where("\x69\x73\x5f\x64\x65\154", 0)->find(); goto szgh0; UqPLs: $attrs = array(); goto dD2gU; ydEIn: ohBBK: goto nLZJT; nLZJT: $goods_detail["\146\x61\166\157\x72\x69\x74\145\163"] = true; goto dfPZ_; gJqtZ: ShXsm: goto YVNId; yFJqK: $goods_detail["\147\157\157\x64\163\x5f\141\164\164\162"] = json_decode($goods_detail["\x67\x6f\x6f\x64\x73\137\x61\164\x74\x72\151\142\x75\x74\145"], true); goto UqPLs; y0zVj: aSU9q: goto rz_Zi; f8j0e: $goods_detail["\x63\x75\162\162\x5f\x63\150\x6f\x73\x65\x5f\141\164\x74\162\137\x73\x74\x6f\143\x6b"] = 0; goto ggBLK; lsXk9: $fav_c = Db::name($this->f)->where("\x66\x61\x76\x5f\x69\144", $data["\147\157\157\144\x73\x5f\151\144"])->where("\165\151\x64", $uid)->find(); goto unEDk; ggBLK: $goods_detail["\143\165\x72\162\137\143\150\x6f\163\x65\137\141\x74\164\x72\x5f\x69\144"] = 0; goto ax440; M61N2: $post_fee = Db::name("\x79\x62\163\143\137\145\x78\160\x72\145\163\x73\x5f\163\150\x69\x70\160\x69\156\x67")->where(["\x73\150\151\160\x70\151\x6e\147\137\146\x65\145\137\151\x64" => $shipping_fee_id])->field("\x62\171\156\165\x6d\137\163\x6e\x75\x6d\x2c\x62\171\156\165\155\x5f\163\160\x72\151\143\x65\54\x62\171\156\165\x6d\x5f\x78\156\x75\155\x2c\142\x79\156\x75\x6d\137\170\x70\162\151\x63\145")->find(); goto djtY2; YVNId: $goods_detail["\x63\165\x72\162\x5f\143\150\157\x73\145\x5f\141\x74\x74\162\x5f\160\x72\151\143\145"] = 0; goto f8j0e; AlAjV: $goods_detail["\x67\157\157\x64\x73\137\142\162\x61\156\x64"] = Db::name($this->b)->where("\x62\x72\x61\x6e\x64\x5f\151\x64", $goods_detail->brand_id)->select(); goto fx9Nt; s2TVC: $goods_detail["\146\x61\x76\x6f\162\x69\164\145\163"] = false; goto myafZ; gHuUq: $goods_detail["\x67\157\157\144\x73\x5f\x61\x74\164\162"] = array(); goto T7oJf; EDXi2: $activity_info = Db::name($this->hd)->where("\155\x63\x68\137\151\x64", $data["\155\x63\150\137\151\x64"])->order("\x73\141\x74\151\x73\x66\x79\137\x6d\x6f\x6e\x65\x79", "\144\145\x73\143")->where("\151\x73\x5f\x75\163\145", 1)->where("\x73\x74\141\x72\137\164\151\x6d\145", "\74", time())->where("\x65\156\144\x5f\164\151\155\x65", "\76", time())->select(); goto h5Wu_; p5M7z: $g_attr = rtrim($g_attr, "\73"); goto gJqtZ; drd1U: if (empty($shipping_fee_id)) { goto frR92; } goto M61N2; dD2gU: $attrs_name = array(); goto UBY1V; ht0rc: } public function cateGoods($mch_id) { goto zLVoN; zP2kF: rvxXg: goto jLOq1; zLVoN: $cate_info = Db::name($this->cate)->where("\x70\x69\x64", 0)->where("\155\x63\x68\x5f\x69\144", $mch_id)->where("\x69\x73\137\166\x69\x73\x69\142\x6c\x65", 1)->order("\163\157\162\x74\40\x61\163\143")->select(); goto uTuEF; jLOq1: return $cate_info; goto yHQWL; uTuEF: foreach ($cate_info as $key => $value) { goto VbCH_; akswR: foreach ($second_info as $citem) { goto wYNhZ; I2And: $cid[] = $citem["\x63\141\164\x65\137\x69\x64"]; goto SZZmp; wYNhZ: $carr[] = $citem["\143\x61\164\x65\x5f\x69\144"]; goto I2And; SZZmp: HbhUG: goto QQpAD; QQpAD: } goto q_YMe; DHDvC: $cid = array(); goto akswR; Nczxx: LDNKE: goto jjpY0; XDmIe: $carr[] = $value["\143\x61\164\x65\x5f\x69\144"]; goto CDAvY; Vn4xJ: nOWoF: goto qY9Rc; ku96o: $cate_info[$key]["\x67\157\x6f\x64\x73\137\154\x69\x73\164"] = $goods_list; goto Nczxx; qY9Rc: hqH89: goto f0Pht; M1X29: $cid = array(); goto qeKwC; VbCH_: $carr = array(); goto RON20; W0Z8g: $cid[] = $value["\143\141\164\x65\137\x69\x64"]; goto XDmIe; q_YMe: HWFKx: goto QqCRg; STiS1: foreach ($goods_list as $k1 => $g_v) { goto G2rRk; G2rRk: $pic = Db::name($this->i)->where("\x69\x6d\147\x5f\151\x64", $g_v["\x69\155\141\x67\145\163"])->field("\151\155\147\137\143\x6f\166\145\x72\x2c\151\x6d\x67\x5f\143\157\166\x65\162\137\x62\x69\x67\x2c\151\x6d\147\137\x63\x6f\166\145\x72\137\x6d\x69\x64\x2c\151\x6d\147\x5f\143\x6f\x76\x65\x72\137\163\155\141\154\x6c")->find(); goto WS5hZ; WS5hZ: if (!$pic) { goto z6g0n; } goto AgIwg; aK33k: z6g0n: goto VN2Zx; AgIwg: $goods_list[$k1]["\160\151\143"] = $pic; goto aK33k; VN2Zx: nJCVU: goto vCbd8; vCbd8: } goto KHCGF; CDAvY: $second_info = Db::name($this->cate)->where(["\x70\151\144" => ["\151\156", $cid]])->where("\155\x63\150\137\x69\144", $mch_id)->select(); goto DHDvC; sXcms: $third_info = Db::name($this->cate)->where(["\x70\x69\144" => ["\x69\x6e", $cid]])->where("\155\143\x68\x5f\x69\144", $mch_id)->select(); goto M1X29; TYKpV: if (empty($goods_list)) { goto klaYT; } goto STiS1; RON20: $cid = array(); goto W0Z8g; QqCRg: if (empty($cid)) { goto hqH89; } goto sXcms; KHCGF: L6xa5: goto SiNTb; SiNTb: klaYT: goto ku96o; qeKwC: foreach ($third_info as $citem2) { $carr[] = $citem2["\143\141\x74\145\137\x69\144"]; Oj0uR: } goto Vn4xJ; f0Pht: $goods_list = Db::name($this->g)->field("\x67\x6f\157\x64\163\137\x69\144\54\x67\x6f\x6f\144\x73\x5f\x6e\141\x6d\x65\x2c\160\x72\151\x63\145\54\x69\x6e\x74\162\157\x64\165\143\164\x69\x6f\x6e\x2c\151\x6d\x61\147\x65\163\x2c\163\x61\154\x65\163\54\155\x69\156\x5f\142\x75\x79\x2c\x73\x74\157\143\x6b")->where("\143\141\164\x65\137\151\x64", "\151\x6e", $carr)->where("\155\x63\x68\137\151\x64", $mch_id)->where("\163\x74\141\164\145", 1)->where("\x69\163\x5f\x64\x65\154", 0)->order("\x73\157\x72\x74\40\144\x65\163\143\54\143\x72\145\x61\x74\145\137\x74\151\155\x65\x20\144\145\x73\143")->limit(7)->select(); goto TYKpV; jjpY0: } goto zP2kF; yHQWL: } public function goodsClicks($data) { $rs = Db::name($this->g)->where("\x67\157\x6f\144\x73\x5f\x69\144", $data)->setInc("\x63\x6c\151\143\153\x73"); return $rs; } public function Favorites($data) { goto FdaUd; FdaUd: $info = Db::name($this->f)->where($data)->find(); goto Tnq64; shf8Z: $res["\x73\x74\x61\x74\x75\163"] = 0; goto D0O2_; N8I9o: $rs = Db::name($this->f)->where($data)->delete(); goto shf8Z; D0O2_: $res["\162\163"] = $rs; goto MykmK; Tnq64: if (!empty($info)) { goto TF0mo; } goto PNNN0; ExKHc: return $res; goto iszzG; zh8XA: goto bZ2AA; goto LmjqU; MykmK: bZ2AA: goto ExKHc; PNNN0: $data["\146\141\166\137\164\x69\x6d\x65"] = time(); goto DVfMw; BZxsP: $res["\163\x74\x61\164\x75\x73"] = 1; goto pdK14; DVfMw: $rs = Db::name($this->f)->insert($data); goto BZxsP; LmjqU: TF0mo: goto N8I9o; pdK14: $res["\x72\x73"] = $rs; goto zh8XA; iszzG: } public function delFavorites($data) { $rs = Db::name($this->f)->delete($data["\154\157\147\x5f\151\x64"]); return $rs; } public function getFavorites($data, $page) { goto b2ERQ; Z0FOC: return $fav_list; goto kmTQt; kmTQt: PGMUR: goto njnzv; c2c9P: if (!empty($fav_list)) { goto PGMUR; } goto Z0FOC; al5C2: $fav_list = Db::name($this->f)->where($data)->page($page, PAGE_NUM)->select(); goto c2c9P; b2ERQ: $fav_list = null; goto al5C2; Qif0m: DQgPu: goto noUEX; njnzv: foreach ($fav_list as $key => $value) { goto QBjQh; I5pGH: LozCD: goto CDPq3; P_39e: $fav_list[$key]["\147\x6f\x6f\x64\163"] = $goods_info; goto EUrDe; QBjQh: $goods_info = Db::name($this->g)->where("\x67\x6f\x6f\x64\163\x5f\151\144", $value["\x66\141\x76\x5f\151\x64"])->where("\x69\163\137\x64\145\154", 0)->find(); goto lj_Uy; CDPq3: VQ2xo: goto K62XE; lj_Uy: if (!empty($goods_info)) { goto eFZd8; } goto lyFFE; EUrDe: $pic = Db::name($this->i)->where("\151\155\147\137\x69\x64", $goods_info["\151\x6d\x61\147\x65\x73"])->field("\151\x6d\x67\137\x63\157\x76\145\162\x2c\151\155\x67\x5f\x63\157\x76\145\162\x5f\142\151\147\54\151\155\147\x5f\143\157\x76\145\x72\137\155\x69\x64\54\x69\155\147\137\x63\x6f\166\x65\162\137\163\155\x61\154\x6c")->find(); goto It7gu; lyFFE: Db::name($this->f)->delete($value["\154\157\147\137\151\x64"]); goto yWerj; uPcd3: goto VQ2xo; goto Lr8tK; It7gu: if (!$pic) { goto LozCD; } goto zPBqj; Lr8tK: eFZd8: goto P_39e; zPBqj: $fav_list[$key]["\x70\151\x63"] = $pic; goto I5pGH; yWerj: unset($fav_list[$key]); goto uPcd3; K62XE: } goto Qif0m; noUEX: return $fav_list; goto c0xBg; c0xBg: } public function getGoods($data) { goto xQqlz; B_SJ2: goto iknOF; goto WHs12; BewUm: $activity_info = Db::name($this->hd)->where("\155\143\x68\137\151\x64", $data["\155\x63\150\x5f\151\144"])->where("\x69\163\x5f\x75\163\x65", 1)->order("\x73\x61\x74\151\x73\146\x79\137\155\157\x6e\x65\x79", "\144\x65\163\143")->where("\163\x74\x61\162\137\x74\151\x6d\145", "\x3c", time())->where("\x65\156\144\137\164\x69\155\x65", "\x3e", time())->select(); goto IlqNJ; Pu2xV: m6ser: goto SUA2t; ZQgi1: $info = Db::name($this->s)->where($map)->find(); goto bg6yE; tzMCA: $pic = Db::name($this->i)->where("\151\x6d\x67\137\151\x64", $info["\x69\155\x61\x67\145\x73"])->field("\x69\x6d\147\137\143\x6f\166\x65\162\54\151\155\x67\137\143\157\166\x65\x72\x5f\x62\151\147\x2c\151\x6d\147\137\143\157\166\145\x72\137\155\151\144\54\151\155\147\x5f\143\157\166\x65\162\x5f\163\x6d\141\x6c\x6c")->find(); goto B_SJ2; BGvSE: $pro = Db::name($this->dq)->where("\151\144", $city["\x70\x69\144"])->find(); goto aI4p2; nvtNg: $pic = Db::name($this->i)->where("\x69\155\x67\137\x69\x64", $info["\147\157\x6f\144\x73"]["\151\155\141\147\145\163"])->field("\x69\x6d\x67\x5f\x63\x6f\166\145\162\x2c\151\x6d\x67\137\143\157\x76\145\162\x5f\x62\151\147\54\151\x6d\x67\137\143\157\166\x65\x72\137\x6d\x69\x64\54\151\155\147\x5f\x63\157\166\145\162\x5f\x73\x6d\x61\x6c\154")->find(); goto e51zk; DXoIQ: $city = Db::name($this->dq)->where("\x69\x64", $res["\160\x69\144"])->find(); goto BGvSE; SoCfD: if (empty($shipping_fee_id)) { goto zx19L; } goto V7nse; JlxLb: $address = Db::name($this->a)->field("\x63\157\156\163\x69\x67\156\x65\162\54\160\150\157\x6e\145\54\x61\x64\x64\x72\145\163\x73\54\141\x72\x65\141")->where("\x75\x69\x64", $data["\x75\151\x64"])->where("\151\163\x5f\x64\145\x66\x61\x75\154\x74\40", 1)->find(); goto vkx30; SSi85: $address["\143\151\x74\x79"] = $city["\156\x61\155\x65"]; goto aYNtI; Sz3BQ: $info["\160\157\163\164\x5f\x66\x65\145"] = $post_fee; goto XYO4p; ZRcbA: if (!$pic) { goto Q2Xit; } goto QK5Sv; u1pd1: if (empty($info->images)) { goto vJnVd; } goto tzMCA; cq50j: return null; goto TeXqC; KsMMX: Q6IF4: goto Hl8Nw; qrn_Z: $shipping_fee_id = $info["\x67\x6f\x6f\144\x73"]["\x73\150\151\x70\x70\x69\x6e\x67\x5f\146\145\145\x5f\151\x64"]; goto SoCfD; QK5Sv: $info["\160\x69\x63"] = $pic; goto Mm1qg; IlqNJ: foreach ($activity_info as $act_k => $act_v) { goto BoOFn; BoOFn: $activity_info[$act_k]["\163\164\141\x72\x5f\x74\x69\x6d\145"] = $this->__TIME($act_v["\x73\164\141\x72\x5f\x74\x69\155\x65"]); goto RSbOi; DpZZW: oQH9q: goto xthsx; RSbOi: $activity_info[$act_k]["\145\x6e\x64\137\x74\x69\x6d\x65"] = $this->__TIME($act_v["\145\x6e\x64\137\x74\151\155\145"]); goto DpZZW; xthsx: } goto Pu2xV; Vrxoa: return null; goto KsMMX; aI4p2: $address["\160\x72\157\166\x69\x6e\143\145"] = $pro["\156\141\155\x65"]; goto SSi85; BcMDA: $info["\x61\144\x64\162\x65\x73\163"] = $address; goto BewUm; JScU4: $address = Db::name($this->a)->field("\143\x6f\156\163\x69\x67\156\x65\x72\54\160\150\157\x6e\145\54\141\x64\144\162\145\x73\x73\54\x61\x72\145\141")->where("\x75\151\144", $data["\x75\x69\x64"])->order("\x63\x72\x65\141\164\x65\x5f\164\x69\x6d\x65", "\144\145\x73\x63")->find(); goto D3bKb; bg6yE: if (!empty($info)) { goto IXXDy; } goto cq50j; TvG04: $res = Db::name($this->dq)->where("\x69\144", $address["\141\162\145\x61"])->find(); goto DXoIQ; HU16b: return $info; goto hjQXM; SUA2t: $info["\141\143\x74\151\166\151\x74\171"] = $activity_info; goto HU16b; Hl8Nw: $info["\x61\x74\x74\x72\x5f\x6e\x61\x6d\x65"] = getAttrName($info["\147\x6f\x6f\144\x73"]["\x67\x6f\157\x64\163\137\163\x70\145\x63\x5f\x66\157\162\155\141\x74"], $info["\x61\x74\x74\162\x5f\x76\x61\x6c\165\145\x5f\x69\164\145\155\163"]); goto qrn_Z; V7nse: $post_fee = Db::name("\171\142\163\x63\x5f\145\170\x70\162\145\x73\163\137\x73\x68\151\x70\160\x69\156\147")->where(["\163\150\151\160\160\x69\156\x67\x5f\146\145\145\x5f\151\x64" => $shipping_fee_id])->field("\x62\171\x6e\x75\x6d\x5f\163\156\165\x6d\54\142\x79\156\x75\155\x5f\x73\160\x72\151\143\x65\x2c\x62\x79\x6e\x75\x6d\137\170\156\165\155\x2c\x62\x79\156\x75\x6d\x5f\170\160\x72\x69\143\x65")->find(); goto Sz3BQ; TeXqC: IXXDy: goto w0gON; xQqlz: $map = ["\147\x6f\x6f\x64\x73\137\151\x64" => $data["\147\x6f\x6f\x64\x73\x5f\x69\144"], "\x73\153\165\x5f\151\144" => $data["\163\x6b\x75\x5f\x69\144"]]; goto ZQgi1; aYNtI: $address["\x64\x69\x73\164\162\x69\x63\x74"] = $res["\156\141\x6d\x65"]; goto BcMDA; XYO4p: zx19L: goto u1pd1; WkZjs: if (!empty($info["\147\x6f\157\144\x73"])) { goto Q6IF4; } goto Vrxoa; vkx30: if (!empty($address)) { goto qrLk9; } goto JScU4; w0gON: $info["\147\x6f\157\x64\163"] = Db::name($this->g)->field("\x67\157\157\x64\x73\137\156\141\155\x65\54\151\155\x61\147\145\x73\x2c\x73\150\151\x70\160\151\156\x67\x5f\x66\145\x65\x5f\x69\144\54\163\x68\151\x70\x70\151\x6e\147\137\x66\145\x65\54\x67\x6f\157\144\163\137\163\x70\145\x63\x5f\x66\157\x72\x6d\x61\x74")->where("\147\x6f\x6f\144\163\x5f\151\x64", $info["\147\157\157\144\163\137\151\x64"])->where("\151\163\137\x64\145\154", 0)->find(); goto WkZjs; WHs12: vJnVd: goto nvtNg; Mm1qg: Q2Xit: goto JlxLb; D3bKb: qrLk9: goto TvG04; e51zk: iknOF: goto ZRcbA; hjQXM: } public function cartGoods($data) { goto B77LH; PhvW2: if (!empty($info)) { goto Nxnbb; } goto SCAaW; cwn1K: $activity_info = Db::name($this->hd)->where("\x6d\143\x68\137\x69\x64", $data["\155\x63\150\x5f\151\x64"])->order("\x73\x61\164\x69\163\146\171\x5f\x6d\x6f\x6e\x65\171", "\x64\x65\163\x63")->where("\x69\x73\137\x75\163\145", 1)->where("\163\x74\141\162\137\164\x69\155\x65", "\74", time())->where("\x65\x6e\144\x5f\x74\151\155\145", "\76", time())->select(); goto SX63h; bTih7: Nxnbb: goto ktxGZ; SCAaW: return null; goto bTih7; hYBFM: $address["\160\162\x6f\x76\x69\156\143\x65"] = $pro["\x6e\141\155\145"]; goto nh89x; nh89x: $address["\143\151\164\x79"] = $city["\156\x61\155\145"]; goto hSHBd; O8Y0i: $city = Db::name($this->dq)->where("\x69\144", $res["\x70\x69\144"])->find(); goto O_9Nf; xT9gf: if (!empty($address)) { goto PY_Lu; } goto hHlP2; B77LH: $data["\x63\141\x72\x74\x5f\151\144"] = rtrim($data["\x63\141\162\x74\137\151\144"], "\x2c"); goto DBBzK; iowMi: foreach ($cart_id as $key => $value) { goto A8RtJ; BR_Ff: $cart_info["\160\x72\151\143\x65"] = Db::name($this->s)->where("\x73\153\x75\137\151\x64", $cart_info["\x73\x6b\165\x5f\x69\x64"])->field("\x70\162\151\143\145\54\155\141\x72\x6b\145\164\137\x70\162\151\x63\x65\54\160\162\x6f\155\x6f\x74\x65\137\x70\162\151\143\x65\54\143\x6f\163\x74\x5f\x70\x72\151\143\145\x2c\163\x6b\165\x5f\156\141\155\x65\54\x61\164\x74\x72\137\166\141\154\x75\145\x5f\151\164\x65\155\x73")->find(); goto xQMAW; wCIqq: goto LYqjV; goto uVmN5; gdmwi: $post_fee = Db::name("\171\x62\163\143\137\145\170\160\162\x65\x73\x73\137\163\150\151\x70\160\151\x6e\x67")->where(["\163\x68\151\x70\160\151\x6e\x67\137\146\x65\145\x5f\151\144" => $shipping_fee_id])->field("\x62\x79\x6e\x75\155\137\163\156\165\x6d\x2c\142\x79\156\165\x6d\x5f\163\160\x72\151\143\145\x2c\x62\171\156\x75\155\x5f\x78\x6e\165\155\x2c\x62\171\x6e\x75\x6d\137\x78\x70\162\x69\x63\x65")->find(); goto nOWWR; UKeZH: if (!empty($cart_info["\x67\157\157\144\x73"])) { goto vNvnp; } goto wCIqq; aqFDB: $cart_info["\x67\157\157\x64\x73"] = Db::name($this->g)->field("\x67\157\157\144\163\137\x6e\141\x6d\145\54\x69\x6d\141\x67\145\163\54\163\x68\x69\x70\x70\151\156\x67\137\146\x65\145\137\151\x64\x2c\x73\150\151\160\x70\151\156\147\x5f\146\x65\x65\54\147\157\x6f\144\x73\137\163\160\145\143\137\x66\x6f\x72\155\141\164")->where("\x67\157\x6f\x64\x73\x5f\x69\144", $cart_info["\147\x6f\x6f\144\163\137\151\144"])->where("\151\x73\137\144\145\x6c", 0)->find(); goto UKeZH; CuDAR: goto LYqjV; goto yItOW; BZejt: if (empty($shipping_fee_id)) { goto NRGv_; } goto gdmwi; etStB: $info["\151\x6e\146\157"][$key]["\x61\164\164\x72\x5f\156\141\x6d\x65"] = getAttrName($cart_info["\147\x6f\157\144\x73"]["\147\157\157\144\x73\137\x73\x70\x65\x63\x5f\x66\x6f\162\155\141\164"], $cart_info["\160\x72\x69\143\x65"]["\x61\164\x74\x72\x5f\x76\x61\x6c\x75\145\137\x69\x74\x65\155\x73"]); goto QxUQY; uVmN5: vNvnp: goto mm1a_; A8RtJ: $cart_info = Db::name($this->c)->where("\143\x61\x72\x74\137\151\144", $value)->where("\x62\165\x79\145\x72\137\x69\x64", $data["\x75\151\x64"])->find(); goto ELsWk; QxUQY: LYqjV: goto TjLzO; mm1a_: $shipping_fee_id = $cart_info["\x67\157\x6f\144\163"]["\163\x68\151\160\x70\151\156\147\x5f\146\145\145\x5f\x69\144"]; goto BZejt; ELsWk: if (!empty($cart_info)) { goto MJXte; } goto CuDAR; DKrqx: wICLa: goto BR_Ff; xQMAW: $info["\151\156\x66\157"][$key] = $cart_info; goto etStB; yItOW: MJXte: goto aqFDB; CwrpZ: NRGv_: goto H20mm; bkNrr: $cart_info["\160\151\x63"] = $pic; goto DKrqx; nOWWR: $cart_info["\x70\x6f\163\164\x5f\146\x65\145"] = $post_fee; goto CwrpZ; H20mm: $pic = Db::name($this->i)->where("\151\x6d\147\x5f\x69\x64", $cart_info["\x67\x6f\157\x64\x73\137\151\155\141\147\145\163"])->field("\151\155\x67\x5f\x63\157\x76\x65\162\54\x69\x6d\147\137\x63\157\x76\x65\x72\x5f\x62\151\147\54\151\x6d\147\137\143\x6f\x76\x65\162\x5f\155\x69\x64\x2c\x69\155\147\x5f\x63\157\166\x65\162\x5f\x73\x6d\x61\154\x6c")->find(); goto bPwCw; bPwCw: if (!$pic) { goto wICLa; } goto bkNrr; TjLzO: } goto nadYz; EAHh9: $info["\x61\x64\144\162\x65\163\x73"] = $address; goto cwn1K; nadYz: RyBt3: goto PhvW2; Uqnan: PY_Lu: goto M4KuP; DBBzK: $cart_id = explode("\54", $data["\143\x61\x72\164\x5f\151\144"]); goto iowMi; O_9Nf: $pro = Db::name($this->dq)->where("\151\x64", $city["\x70\151\144"])->find(); goto hYBFM; hHlP2: $address = Db::name($this->a)->field("\x63\x6f\156\x73\151\147\x6e\x65\x72\x2c\160\x68\157\156\145\54\141\x64\x64\162\x65\x73\x73\54\x61\162\x65\x61")->where("\x75\151\144", $data["\165\x69\144"])->order("\143\x72\145\x61\164\x65\x5f\x74\x69\155\145", "\144\x65\163\x63")->find(); goto Uqnan; ktxGZ: $address = Db::name($this->a)->field("\x63\157\x6e\163\x69\147\156\145\x72\x2c\160\x68\x6f\x6e\x65\x2c\141\144\x64\162\x65\x73\x73\x2c\x61\162\145\141")->where("\165\x69\144", $data["\x75\151\144"])->where("\x69\163\x5f\144\145\x66\x61\165\154\164\x20", 1)->find(); goto xT9gf; SX63h: foreach ($activity_info as $act_k => $act_v) { goto zQM3o; zQM3o: $activity_info[$act_k]["\163\x74\x61\162\137\164\x69\x6d\x65"] = $this->__TIME($act_v["\163\x74\x61\x72\137\x74\151\155\145"]); goto dWWwC; dWWwC: $activity_info[$act_k]["\145\x6e\144\x5f\x74\x69\155\x65"] = $this->__TIME($act_v["\x65\x6e\144\137\164\151\x6d\x65"]); goto Yarwy; Yarwy: htTiD: goto dYK9W; dYK9W: } goto tamo_; hSHBd: $address["\144\x69\x73\x74\162\151\x63\x74"] = $res["\x6e\x61\155\x65"]; goto EAHh9; vIRB0: return $info; goto Tm87t; NDnSV: $info["\x61\x63\164\151\166\151\x74\171"] = $activity_info; goto vIRB0; tamo_: AKl3K: goto NDnSV; M4KuP: $res = Db::name($this->dq)->where("\x69\x64", $address["\141\162\x65\141"])->find(); goto O8Y0i; Tm87t: } public static function InfiniteCate($cate_id, $mch_id) { goto rjp0g; UyzJm: $rs = array(); goto I7p4M; D_UkH: HbvYf: goto UyzJm; nuntp: foreach ($cate_list as $key => $value) { goto BpeA7; yGvYO: $item = array(); goto hl7Hd; hl7Hd: $item["\x63\x61\x74\145\x5f\x69\x64"] = $value["\x63\x61\164\x65\x5f\151\x64"]; goto crVH1; crVH1: $item["\143\141\164\x65\137\156\141\x6d\x65"] = "\345\205\xa8\351\203\xa8"; goto go1bm; EnKcj: array_unshift($value["\143\141\x74\145"], $item); goto NEmtY; CzCkC: $value["\x63\x61\164\x65"] = self::InfiniteCate($value["\x63\x61\x74\x65\137\x69\144"], $mch_id); goto ipM1m; go1bm: $item["\154\x65\x76\145\x6c"] = $value["\x6c\x65\166\145\154"] + 1; goto nuKVv; NEmtY: j5Wfz: goto Y710v; Y710v: $rs[] = $value; goto nV7SR; BpeA7: $value["\x63\141\164\x65\x5f\160\151\143"] = self::__IMG($value["\143\141\164\x65\137\x70\151\143"]); goto CzCkC; nV7SR: cgBjK: goto zhbVz; ipM1m: if (empty($value["\x63\141\164\x65"])) { goto j5Wfz; } goto yGvYO; nuKVv: $item["\143\x61\164\x65"] = array(); goto EnKcj; zhbVz: } goto ihmSS; rjp0g: $rs = Cache::get($mch_id . "\x63\141\164\x65\72" . $cate_id); goto hteJ5; mil88: return $rs; goto XT9Oy; zbl7i: $cate_list = Db::name("\x79\x62\163\143\137\147\x6f\x6f\x64\x73\137\x63\x61\x74\x65")->where("\x70\151\x64", $cate_id)->where("\x6d\143\x68\137\x69\x64", $mch_id)->where("\x69\x73\137\166\151\x73\x69\142\154\145", 1)->order("\x73\157\162\164\40\141\163\x63")->select(); goto nuntp; I7p4M: $cate_list = null; goto zbl7i; nj_1s: Cache::set($mch_id . "\x63\141\164\145\x3a" . $cate_id, $rs, CACHE_TIME); goto mil88; hteJ5: if (!($rs != false)) { goto HbvYf; } goto DH384; DH384: return $rs; goto D_UkH; ihmSS: B8uhF: goto nj_1s; XT9Oy: } public static function InfiniteGoods($pid, $mch_id, $all = array(), $res = '') { goto JtCLf; jut70: return substr($res, 0, strlen($res) - 1); goto MYhjz; hxSFQ: foreach ($cate_list as $key => $value) { goto CC5o6; XH7p1: $s = self::InfiniteGoods($value["\143\141\164\x65\x5f\x69\x64"], $mch_id, $all) . "\54"; goto xcTij; SQgQF: ryBVR: goto um3Yi; xcTij: if (!(strlen($s) > 1)) { goto ryBVR; } goto FVUIc; qlUfO: rwniF: goto KvoYJ; um3Yi: goto upN8A; goto qlUfO; xtBS4: array_push($all, $value); goto XH7p1; KvoYJ: goto GQx87; goto b7ALo; b7ALo: upN8A: goto At3HY; FVUIc: $res .= $s; goto SQgQF; CC5o6: if (in_array($value["\x63\141\x74\x65\x5f\151\x64"], $all)) { goto rwniF; } goto xtBS4; At3HY: GQx87: goto WAq0m; WAq0m: } goto Hhlsq; JtCLf: $res .= $pid . "\x2c"; goto vdlV_; Hhlsq: oFlXc: goto jut70; vdlV_: $cate_list = Db::name("\x79\x62\163\x63\x5f\147\x6f\x6f\x64\x73\x5f\x63\x61\x74\x65")->where("\160\151\144", $pid)->where("\x6d\143\150\137\x69\x64", $mch_id)->where("\x69\x73\137\x76\151\x73\151\142\154\x65", 1)->field("\x63\x61\164\x65\137\x69\x64")->select(); goto hxSFQ; MYhjz: } public function __IMG($img_path) { goto hEwM8; Ff_bZ: if (empty($img_path)) { goto NjiPA; } goto kOzXN; KMpRm: goto QAo8W; goto ZeAZ1; BmZ_C: QAo8W: goto Gcz_g; hEwM8: $path = ''; goto Ff_bZ; Ax__w: $path = $img_path; goto KMpRm; uzPdP: $path = "\x68\164\x74\x70\72\57\x2f" . $_SERVER["\110\x54\x54\120\x5f\x48\x4f\x53\124"] . "\57" . $img_path; goto BmZ_C; ZeAZ1: IhYPU: goto uzPdP; pbq7o: return $path; goto vXjWe; Gcz_g: NjiPA: goto pbq7o; kOzXN: if (stristr($img_path, "\150\164\164\160\x3a\x2f\x2f") === false && stristr($img_path, "\150\x74\x74\x70\163\x3a\57\57") === false) { goto IhYPU; } goto Ax__w; vXjWe: } public function __TIME($time) { goto BtXF7; LTuVh: if (!(!empty($time) && $time != 0)) { goto s_1Pm; } goto ZuTxg; BtXF7: $date = ''; goto LTuVh; jdrKQ: return $date; goto cuaE7; w38BF: s_1Pm: goto jdrKQ; ZuTxg: $date = date("\131\x2d\x6d\x2d\x64\40\110\72\x69\x3a\163", $time); goto w38BF; cuaE7: } }
