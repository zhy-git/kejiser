<?php
 namespace app\api\service; use think\Db; use think\Exception; use think\log; require_once BASE_ROOT . "\143\x6f\162\145\x2f\x61\160\160\x6c\151\143\x61\x74\x69\x6f\156\x2f\143\157\x6d\155\157\x6e\56\160\x68\x70"; require_once BASE_ROOT . "\x63\x6f\x72\145\x2f\x61\x70\160\154\x69\143\x61\164\151\157\x6e\57\x61\x64\155\x69\156\x2f\x73\x65\162\x76\151\143\x65\x2f\120\162\151\156\x74\x65\x72\123\145\x72\166\151\143\145\x2e\x70\x68\160"; require_once BASE_ROOT . "\x63\157\x72\x65\x2f\x61\x70\160\x6c\x69\143\141\164\x69\x6f\156\x2f\141\160\151\x2f\163\x65\x72\x76\x69\x63\x65\x2f\x52\x65\146\165\156\144\123\145\x72\x76\x69\x63\145\x2e\160\x68\x70"; use app\api\service\RefundService; use app\admin\service\PrinterService; class OrderService { private $o = "\x79\142\x73\143\x5f\157\x72\x64\145\x72"; private $kj = "\171\142\x73\143\137\142\x61\162\147\x61\x69\156\x5f\x6f\x72\144\145\x72"; private $pt = "\x79\x62\x73\143\x5f\x70\164\137\157\162\x64\145\x72\x73"; private $ms = "\x79\x62\163\x63\137\141\143\x74\151\x76\151\164\x79\137\x6f\162\x64\145\162"; private $uc = "\171\142\x73\143\x5f\165\163\x65\162\137\143\x6f\x75\x70\157\156"; private $s = "\x79\x62\x73\143\137\147\157\x6f\x64\x73\x5f\163\153\165"; private $g = "\171\x62\163\x63\137\147\157\157\x64\x73"; private $op = "\171\x62\x73\x63\137\x6f\162\x64\145\162\137\160\x61\171\155\145\x6e\164"; private $i = "\171\142\163\143\x5f\151\155\x61\147\x65\x73"; private $og = "\171\142\x73\143\x5f\x6f\x72\144\x65\162\137\x67\157\x6f\x64\x73"; private $ptg = "\x79\142\x73\143\137\160\x74\137\x67\157\157\144\163"; private $dq = "\171\142\163\143\x5f\141\x72\145\141"; private $u = "\171\x62\x73\x63\137\165\163\145\x72"; private $os = "\x79\142\163\143\137\157\x72\144\145\162\137\163\150\141\162\x65"; private $usm = "\171\x62\163\x63\x5f\165\x73\145\x72\x5f\x73\x68\x61\x72\x65\137\x6d\x6f\x6e\x65\x79"; public function Print_test($mch_id, $oid) { goto t5rur; t5rur: $pp = new PrinterService($mch_id, $oid, "\157\162\x64\145\162", 0); goto yGJJS; yGJJS: $info = $pp->print_order(); goto lyXqc; lyXqc: return json_encode($info); goto mhqWQ; mhqWQ: } public function createOrder($data, $share_data) { goto gZuY6; gZuY6: Db::startTrans(); goto obapr; obapr: try { goto nLE2O; LmNFi: if (!($pid_db != 1)) { goto z4kli; } goto NwOMX; NIo9Q: unset($data_new["\x73\153\x75\137\151\144"]); goto fujF6; k9hc1: if (!(count($sku) == 1)) { goto MSqL0; } goto dQqQZ; VSR7P: if (!($u["\151\163\137\x64\x69\x73\x74\x72\x69\x62\165\x74\x6f\x72"] && $setting["\151\x73\x5f\x72\145\142\141\164\x65"] == 1)) { goto sq13m; } goto MLa4X; ZcsaJ: $pid2 = 0; goto wVYua; Oh_uI: a9Jcd: goto q1OEG; kBI4S: sq13m: goto rTwPK; gw0WM: $pp = new PrinterService($data["\x6d\x63\150\x5f\151\x64"], $order_id, "\157\x72\x64\145\x72", 0); goto xgKgv; hLSPL: $pid_db2 = $this->is_distributor($pid2); goto dRMEp; DOYII: $pay_data = array("\x6f\x75\164\x5f\x74\162\x61\x64\145\137\156\x6f" => $data["\157\x75\x74\137\164\162\141\144\145\137\x6e\x6f"], "\x70\141\x79\137\x74\x79\160\145" => $data["\160\141\x79\137\x74\x79\x70\145"], "\164\x79\x70\x65\x5f\x61\x6c\151\x73\x5f\x69\144" => $order_id, "\x70\x61\171\x5f\x62\157\x64\171" => rtrim($good_name_str, "\x2b"), "\160\x61\x79\x5f\x64\x65\x74\x61\x69\154" => "\347\x94\xa8\xe6\210\267\xe8\xb4\xad\344\xb9\260\345\x95\x86\xe5\223\x81", "\x70\x61\x79\137\x6d\x6f\x6e\145\171" => $data["\x70\x61\x79\137\x6d\157\156\145\171"], "\x70\x61\x79\x5f\163\164\141\x74\x75\x73" => 0, "\x70\141\x79\137\x74\151\155\145" => 0, "\143\x72\x65\x61\164\x65\137\164\x69\x6d\x65" => time()); goto toftx; nrtZA: $order_id = Db::name($this->o)->insertGetId($data_new); goto V1OLn; M6jlN: $u = Db::name($this->u)->where("\165\151\x64", $data["\x62\x75\171\145\162\137\151\144"])->find(); goto mRSTG; n7pt4: z4kli: goto Rqs94; aAHdI: $pid3 = 0; goto CN23S; T61Q4: $sku_id = rtrim($data["\x73\153\165\137\x69\144"], "\x2c"); goto Z4l66; g3Rp5: Db::name($this->os)->insert($fx_data); goto d9Kw6; Rqs94: $setting = Db::name("\171\x62\163\x63\137\x75\163\145\162\137\163\150\141\x72\x65\137\163\x65\x74\x74\x69\x6e\147")->where("\155\x63\x68\x5f\151\x64", $data["\155\x63\150\x5f\151\x64"])->find(); goto ufZtf; b601O: B2gGr: goto DOYII; toftx: Db::name($this->op)->insert($pay_data); goto M6jlN; KW6DM: foreach ($sku as $key => $value) { goto c1FZW; eXqQf: NG9RI: goto g7kjA; ma74p: Kw1XT: goto PZtZ_; VgwGZ: HTap_: goto IHmHP; g7kjA: if (!($goods_num == 1)) { goto yGxne; } goto SxM39; CZaVt: Db::name($this->s)->where("\163\x6b\x75\137\151\144", $value_data[0])->setDec("\163\x74\x6f\x63\x6b", $value_data[1]); goto LSaiw; wI0FS: if (!($key < 3)) { goto skHf_; } goto SDn1m; angFU: H5_hZ: goto H_KWP; wYm1t: $data_goods = Db::name($this->g)->where("\147\x6f\157\x64\163\x5f\151\144", $data_sku["\x67\157\x6f\x64\163\137\151\x64"])->find(); goto fNyR5; EmLuP: $goods_data = ["\157\x72\144\145\162\x5f\x69\144" => $order_id, "\163\x6b\x75\137\x69\x64" => $value_data[0], "\x73\x6b\165\137\x6e\141\x6d\145" => $data_sku["\163\x6b\165\137\x6e\141\155\145"], "\x67\x6f\x6f\144\x73\x5f\151\144" => $data_sku["\147\x6f\x6f\144\x73\x5f\x69\144"], "\147\157\157\144\x73\x5f\156\x61\x6d\x65" => $data_goods["\147\x6f\x6f\x64\x73\137\156\141\x6d\145"], "\x70\162\x69\143\x65" => $value_data[1] * $data_sku["\x70\162\x69\x63\x65"], "\x6e\x75\155" => $value_data[1], "\147\157\x6f\144\x73\137\155\x6f\x6e\145\171" => $data_sku["\x70\162\x69\143\145"], "\x67\157\x6f\x64\163\137\151\x6d\141\147\x65\x73" => $images, "\142\x75\x79\x65\162\137\x69\144" => $data["\142\165\171\145\162\x5f\x69\144"]]; goto QVCaR; SDn1m: $good_name_str .= mb_substr($data_goods["\147\157\157\x64\163\x5f\x6e\141\155\145"], 0, 10, "\165\x74\146\55\x38") . "\53"; goto zLcpI; MwL0g: PYozE: goto EmLuP; zLcpI: skHf_: goto VgwGZ; mvkWc: Db::name($this->g)->where("\x67\157\x6f\144\163\x5f\151\144", $data_sku["\x67\157\x6f\x64\x73\137\x69\144"])->setDec("\x73\x74\x6f\x63\x6b", $value_data[1]); goto CZaVt; QVCaR: Db::name($this->og)->insert($goods_data); goto ma74p; TzSAe: goto PYozE; goto angFU; H_KWP: $images = $data_goods["\151\x6d\x61\147\145\163"]; goto MwL0g; SxM39: $share_goods_id = $data_sku["\147\157\157\x64\x73\137\151\144"]; goto JbQiA; qEAdu: goto HTap_; goto B2zPQ; a33FX: if (!($data_sku["\x73\164\157\143\x6b"] <= 0)) { goto NG9RI; } goto lHGDP; oj4R1: $images = $data_sku["\151\155\x61\147\145\163"]; goto TzSAe; FNnvL: $data_sku = Db::name($this->s)->where("\163\153\x75\137\151\x64", $value_data[0])->find(); goto a33FX; lHGDP: throw new Exception("\xe5\272\x93\345\xad\x98\xe4\270\x8d\350\xb6\263"); goto eXqQf; c1FZW: $value_data = explode("\72", $value); goto FNnvL; IHmHP: Db::name($this->g)->where("\x67\x6f\157\144\x73\x5f\151\x64", $data_sku["\147\x6f\157\144\x73\x5f\x69\x64"])->setInc("\x72\145\x61\x6c\137\163\141\154\145\163", $value_data[1]); goto Ta9n3; JbQiA: yGxne: goto wYm1t; B2zPQ: bJ8dm: goto wI0FS; fNyR5: if (count($sku) > 1) { goto bJ8dm; } goto o_nEB; LSaiw: if ($data_sku->images == 0) { goto H5_hZ; } goto oj4R1; Ta9n3: Db::name($this->g)->where("\x67\x6f\x6f\x64\163\x5f\x69\x64", $data_sku["\x67\x6f\x6f\x64\163\137\151\x64"])->setInc("\x73\141\x6c\x65\163", $value_data[1]); goto mvkWc; o_nEB: $good_name_str .= mb_substr($data_goods["\147\x6f\157\144\163\x5f\156\x61\x6d\x65"], 0, 20, "\x75\x74\146\x2d\x38") . "\53"; goto qEAdu; PZtZ_: } goto b601O; z0clk: if (!($pid_db3 != 1)) { goto kFErE; } goto aAHdI; GujCC: goto hPPcp; goto BkMgf; qxHsy: $pid_db3 = $this->is_distributor($pid3); goto Nt2Bn; ufZtf: $fx_data = array("\165\163\x65\x72\137\x69\144" => $data["\x62\165\171\145\162\137\151\x64"], "\x6f\x72\144\145\x72\137\x69\x64" => $order_id, "\x66\x69\162\163\164\137\x70\162\x69\x63\x65" => 0, "\163\x65\143\x6f\156\144\137\x70\162\151\143\x65" => 0, "\164\x68\151\x72\144\x5f\160\162\151\x63\145" => 0, "\x70\141\162\x65\156\164\137\x69\144\x5f\61" => $pid1, "\160\141\x72\145\x6e\x74\137\x69\144\x5f\x32" => 0, "\160\141\x72\145\x6e\164\x5f\151\144\x5f\x33" => 0, "\151\x73\137\144\x65\154" => 1, "\x72\x65\142\x61\x74\x65" => 0, "\155\143\x68\x5f\151\x64" => $data["\155\143\150\x5f\151\x64"], "\143\162\x65\x61\x74\x65\137\164\151\155\x65" => time()); goto nH9c9; WlvyP: $share_goods_id = 0; goto k9hc1; Nt2Bn: if (!($pid_db2 != 1)) { goto svXsv; } goto ZcsaJ; dRMEp: if (!($pid_db2 != 1)) { goto fgUB0; } goto RFDEf; xpvwY: fgUB0: goto jbe2y; HI1xJ: $fx_data["\x70\141\162\x65\x6e\164\137\151\144\137\x33"] = $pid3; goto yH6zB; Z4l66: $sku = explode("\54", $sku_id); goto EDgqo; lcVqG: $good_name_str = ''; goto KW6DM; d9GCy: tAhuE: goto GujCC; Twuhi: $data_new["\143\157\x6e\163\x69\147\156\137\x74\x69\x6d\145"] = 0; goto jFYhl; EDgqo: $goods_num = 0; goto WlvyP; WBgOH: fiUNU: goto dqGTi; jbe2y: if (!($pid1 != 0 || $pid2 != 0 || $fx_data["\x72\145\x62\x61\x74\145"] != 0)) { goto tAhuE; } goto cPp1_; uY9Rq: $fx_data["\146\x69\162\163\x74\x5f\x70\x72\x69\143\x65"] = round(floatval($share_price["\146\x69\162\163\x74\x5f\x70\x72\151\x63\x65"]), 2); goto a5m5w; vbaRO: if (!($pid1 != 0 || $fx_data["\x72\x65\x62\x61\x74\x65"] != 0)) { goto oEVd1; } goto g3Rp5; dQqQZ: $goods_num = 1; goto DUvjX; nLE2O: $data_new = $data; goto NIo9Q; cPp1_: $fx_data["\x70\x61\x72\145\x6e\x74\x5f\151\x64\x5f\x32"] = $pid2; goto osgxN; fujF6: $data_new["\146\x69\156\x69\x73\150\x5f\164\151\155\145"] = 0; goto at5pF; nH9c9: if (!($setting && $setting["\x6c\145\x76\x65\x6c"] != 0)) { goto Gx8RM; } goto bWm_c; osgxN: Db::name($this->os)->insert($fx_data); goto d9GCy; BkMgf: BkySx: goto iXd8D; ivx2K: $fx_data["\164\150\x69\162\144\x5f\160\x72\151\143\x65"] = round(floatval($share_price["\164\150\151\x72\x64\x5f\x70\x72\x69\143\x65"]), 2); goto VSR7P; jFYhl: $data_new["\163\145\x6c\x6c\x65\x72\x5f\x6d\145\x6d\157"] = ''; goto nrtZA; jHIGF: if ($setting["\154\145\x76\145\154"] == 2) { goto dyeSg; } goto jNIs3; RLldF: $pid_db = $this->is_distributor($pid); goto XUgRX; q1OEG: if (!($data["\x63\157\x75\x70\157\x6e\137\151\x64"] != 0)) { goto ji819; } goto VHhmq; Tq4TW: dyeSg: goto cf8t_; uiCOR: Db::name($this->uc)->where("\151\144", $data["\x63\157\x75\160\157\x6e\x5f\151\144"])->update($coupon_data); goto h1pTE; at5pF: $data_new["\x72\145\146\165\x6e\x64\x5f\164\151\x6d\x65"] = 0; goto Twuhi; d9Kw6: oEVd1: goto boxPc; XUgRX: $pid1 = $pid; goto LmNFi; DUvjX: MSqL0: goto lcVqG; boxPc: goto hPPcp; goto Tq4TW; VdO1D: $pid_db2 = $this->is_distributor($pid2); goto CDKoE; rTwPK: if ($setting["\154\145\166\145\154"] == 1) { goto iRjdS; } goto jHIGF; mRSTG: $pid = $u["\160\x69\x64"] ? $u["\160\x69\x64"] : 0; goto RLldF; V1OLn: if (!$order_id) { goto a9Jcd; } goto gw0WM; dqGTi: hPPcp: goto uawJM; MLa4X: $fx_data["\x72\145\142\141\164\x65"] = $fx_data["\146\x69\x72\163\164\x5f\160\162\x69\143\145"]; goto kBI4S; V7nL2: $fx_data["\160\141\x72\x65\x6e\164\x5f\151\x64\x5f\x32"] = $pid2; goto z0clk; CDKoE: $pid3 = $this->get_user_uid($pid2); goto qxHsy; uawJM: Gx8RM: goto HiCZz; RFDEf: $pid2 = 0; goto xpvwY; VHhmq: $coupon_data = array("\x73\x74\141\164\x75\x73" => 1, "\165\163\145\137\164\151\x6d\145" => time()); goto uiCOR; CN23S: kFErE: goto Dfdg4; a5m5w: $fx_data["\163\x65\x63\x6f\x6e\x64\137\160\162\x69\x63\x65"] = round(floatval($share_price["\x73\145\143\x6f\156\x64\x5f\x70\x72\151\143\145"]), 2); goto ivx2K; C0zGD: goto hPPcp; goto ECEtk; NwOMX: $pid1 = 0; goto n7pt4; cf8t_: $pid2 = $this->get_user_uid($pid); goto hLSPL; xgKgv: $pp->print_order(); goto Oh_uI; jNIs3: if ($setting["\x6c\145\166\x65\154"] == 3) { goto BkySx; } goto C0zGD; iXd8D: $pid2 = $this->get_user_uid($pid); goto VdO1D; h1pTE: ji819: goto T61Q4; Dfdg4: if (!($pid1 != 0 || $pid2 != 0 || $pid3 != 0 || $fx_data["\x72\145\x62\141\164\x65"] != 0)) { goto fiUNU; } goto HI1xJ; wVYua: svXsv: goto V7nL2; ECEtk: iRjdS: goto vbaRO; yH6zB: Db::name($this->os)->insert($fx_data); goto WBgOH; HiCZz: Db::commit(); goto SR_Rm; bWm_c: $share_price = $this->get_share_price($setting, $share_data); goto uY9Rq; SR_Rm: } catch (\Exception $e) { goto d0f4r; d0f4r: Db::rollback(); goto qON5q; WDdjl: return ["\x65\162\162\137\x63\157\144\x65" => 1, "\155\163\147" => $e->getMessage()]; goto HCZyG; qON5q: Log::write("\347\x94\237\346\x88\220\xe8\256\242\345\x8d\225\xe5\244\xb1\350\xb4\245\40\55\x2d\x28\347\224\250\346\x88\xb7\x69\x64\xef\274\x9a" . $data["\142\x75\x79\145\162\x5f\151\x64"] . "\x29\x20\351\224\x99\350\xaf\xaf\xe4\277\241\346\x81\257\xef\274\232" . $e->getMessage(), "\x6f\162\144\145\162\137\145\x72\x72\157\x72"); goto WDdjl; HCZyG: } goto xHwKI; xHwKI: return ["\145\162\162\137\x63\157\x64\145" => 0, "\x69\x6e\x66\x6f" => $order_id]; goto SSp87; SSp87: } public function get_share_price($share_setting, $share_data) { goto mhmrx; Q0ul5: $share_price_data["\164\150\151\162\x64\x5f\160\x72\x69\143\x65"] = 0; goto L3fuR; xEaVS: $share_price_data["\146\x69\162\x73\x74\137\160\x72\x69\143\x65"] = 0; goto uGztg; fm8QW: return $share_price_data; goto OIxBk; YwMID: $order_goods = $share_data["\157\162\x64\145\162\137\x67\x6f\157\144\x73"]; goto hwHmS; L9tNC: foreach ($order_goods_arr as $v) { goto OJ2du; OJ2du: $v_data = explode("\x3a", $v); goto zrb8J; XfHQL: tQ9Gi: goto oVwxY; zrb8J: $sku_data = Db::name($this->s)->where("\x73\x6b\165\137\x69\144", $v_data[0])->find(); goto ypg_n; J0l7m: if (!($discount_money > 0)) { goto tEt8Z; } goto Gykjn; pTd6T: $share_price_data["\x73\x65\x63\x6f\x6e\144\x5f\160\162\x69\143\x65"] = $share_money * floatval($goods_share_setting["\x73\145\143\157\x6e\x64"]) / 100; goto qIWfh; D5X2B: $share_price_data["\146\x69\162\163\164\137\160\162\151\143\145"] = $share_setting["\x66\151\162\163\x74"]; goto maYOA; qDpCW: h82ik: goto io7dB; xzEUk: if (empty($goods_share_setting)) { goto Fq1VL; } goto C2iT2; VU9jS: $share_price_data["\x74\150\x69\x72\x64\137\x70\162\151\x63\x65"] = floatval(floatval($share_price_data["\x74\x68\x69\x72\x64\x5f\x70\162\151\143\145"]) + floatval($goods_price) * floatval($goods_share_setting["\164\150\151\x72\x64"]) / 100); goto oY17g; WgtCw: eGqU9: goto QQDlR; gttvK: $share_price_data["\x74\x68\x69\162\x64\x5f\x70\162\x69\143\x65"] = floatval(floatval($share_price_data["\164\x68\151\x72\144\137\160\162\x69\x63\x65"]) + floatval($share_setting["\x74\150\x69\x72\144"]) * $v_data[1]); goto IPyFE; FTQ3b: $share_price_data["\x73\145\143\x6f\156\144\137\160\x72\x69\x63\145"] = floatval(floatval($share_price_data["\163\x65\143\x6f\x6e\144\137\x70\162\151\143\145"]) + floatval($goods_share_setting["\x73\145\143\x6f\156\144"]) * $v_data[1]); goto ZWb1W; nV0Rr: $share_price_data["\x74\x68\x69\162\144\137\x70\x72\151\x63\145"] = $share_money * floatval($share_setting["\x74\150\x69\x72\x64"]) / 100; goto WgtCw; fjXdr: Fq1VL: goto jbPDU; qZe8f: $share_price_data["\163\145\x63\x6f\x6e\144\x5f\160\x72\151\143\x65"] = floatval(floatval($share_price_data["\163\145\143\157\x6e\x64\137\160\162\151\x63\x65"]) + floatval($goods_price) * floatval($share_setting["\x73\x65\143\x6f\156\144"]) / 100); goto Df0t5; WEo0c: tEt8Z: goto eu1o1; pDQB3: OKBmS: goto Wh7J9; YRwzN: $share_price_data["\146\151\162\163\x74\x5f\x70\x72\x69\x63\x65"] = floatval(floatval($share_price_data["\146\x69\x72\163\x74\137\x70\162\x69\x63\145"]) + floatval($goods_price) * floatval($goods_share_setting["\x66\x69\162\163\x74"]) / 100); goto PhBKM; L5gLt: $share_price_data["\x66\151\162\x73\164\x5f\160\162\151\x63\145"] = floatval(floatval($share_price_data["\x66\x69\x72\x73\x74\x5f\160\162\151\x63\x65"]) + floatval($goods_share_setting["\x66\x69\x72\x73\164"]) * $v_data[1]); goto FTQ3b; qIWfh: $share_price_data["\x74\150\151\x72\x64\137\160\162\x69\143\145"] = $share_money * floatval($goods_share_setting["\164\x68\151\x72\144"]) / 100; goto pDQB3; iz1fT: if ($goods_share_setting["\160\x72\x69\143\x65\x5f\164\x79\160\145"] == 0) { goto Gtq2Y; } goto L5gLt; jAXig: $goods_price = floatval($sku_data["\x70\162\151\143\x65"]) * $v_data[1]; goto J0l7m; jbPDU: if ($share_setting["\160\x72\151\x63\x65\x5f\x74\x79\x70\145"] == 0) { goto h82ik; } goto D5X2B; MHTRe: goto eGqU9; goto qDpCW; io7dB: $share_price_data["\146\x69\162\x73\x74\137\x70\x72\x69\143\x65"] = $share_money * floatval($share_setting["\146\151\x72\163\164"]) / 100; goto n0H6d; oY17g: BcnqE: goto u5i4o; JBDG5: TqVIK: goto ZXHHX; PhBKM: $share_price_data["\163\x65\x63\157\156\x64\x5f\x70\162\151\143\145"] = floatval(floatval($share_price_data["\163\x65\143\157\x6e\144\x5f\160\x72\151\143\x65"]) + floatval($goods_price) * floatval($goods_share_setting["\x73\x65\x63\x6f\x6e\144"]) / 100); goto VU9jS; Elpke: $share_price_data["\164\150\151\162\144\137\x70\x72\151\143\145"] = $share_setting["\x74\x68\x69\162\144"]; goto MHTRe; Df0t5: $share_price_data["\164\x68\151\162\144\x5f\160\162\151\143\x65"] = floatval(floatval($share_price_data["\x74\150\x69\x72\x64\x5f\160\x72\151\143\145"]) + floatval($goods_price) * floatval($share_setting["\164\150\151\162\x64"]) / 100); goto AxUFJ; aqnqH: $share_price_data["\164\x68\x69\162\144\137\x70\x72\x69\x63\145"] = $goods_share_setting["\x74\x68\x69\x72\144"]; goto kxvew; QRbjC: $share_price_data["\x73\x65\143\157\156\144\x5f\x70\162\x69\143\145"] = floatval(floatval($share_price_data["\163\145\x63\157\x6e\144\137\160\162\x69\x63\145"]) + floatval($share_setting["\163\x65\x63\x6f\x6e\x64"]) * $v_data[1]); goto gttvK; qFcaA: Gtq2Y: goto YRwzN; u5i4o: goto tQ9Gi; goto PBqqS; AxUFJ: tnjS4: goto XfHQL; n0H6d: $share_price_data["\x73\145\x63\x6f\x6e\144\x5f\160\162\151\143\x65"] = $share_money * floatval($share_setting["\x73\145\143\x6f\156\x64"]) / 100; goto nV0Rr; e1VUL: if ($share_setting["\x70\162\151\143\x65\137\x74\x79\160\145"] == 0) { goto A1gsJ; } goto Crh1D; PBqqS: rxLKD: goto e1VUL; SXoHO: goto BcnqE; goto qFcaA; q8Wq3: $share_price_data["\146\x69\x72\x73\x74\137\x70\162\x69\143\x65"] = floatval(floatval($share_price_data["\x66\151\x72\x73\x74\x5f\160\x72\151\143\x65"]) + floatval($goods_price) * floatval($share_setting["\146\x69\162\163\x74"]) / 100); goto qZe8f; ypg_n: $goods_share_setting = Db::name("\171\142\163\143\x5f\147\157\x6f\144\163\x5f\x73\x68\141\162\145\137\x73\x65\164\164\151\156\x67")->where(["\x6d\x63\x68\137\x69\144" => $share_setting["\155\143\x68\x5f\x69\x64"], "\x67\157\x6f\144\163\137\x69\x64" => $sku_data["\x67\x6f\x6f\x64\x73\x5f\151\144"], "\x73\x74\141\164\165\163" => 1])->find(); goto HK3w7; oVwxY: AVZXh: goto Ie5dA; kxvew: goto OKBmS; goto JBDG5; zhTUF: $share_price_data["\163\145\x63\x6f\156\x64\x5f\x70\x72\151\x63\145"] = $goods_share_setting["\x73\145\x63\x6f\x6e\144"]; goto aqnqH; ZXHHX: $share_price_data["\146\x69\x72\x73\164\137\160\x72\x69\143\x65"] = $share_money * floatval($goods_share_setting["\146\x69\x72\163\164"]) / 100; goto pTd6T; ZWb1W: $share_price_data["\x74\150\x69\162\x64\137\x70\x72\151\143\145"] = floatval(floatval($share_price_data["\164\x68\151\162\144\x5f\x70\162\151\x63\145"]) + floatval($goods_share_setting["\164\x68\x69\x72\x64"]) * $v_data[1]); goto SXoHO; jkxSx: $share_price_data["\146\x69\x72\x73\x74\137\160\162\x69\143\145"] = $goods_share_setting["\146\x69\162\163\x74"]; goto zhTUF; QQDlR: yVDz4: goto m0ELx; Crh1D: $share_price_data["\x66\x69\162\x73\x74\137\x70\x72\151\x63\145"] = floatval(floatval($share_price_data["\146\151\162\x73\x74\x5f\160\x72\151\143\x65"]) + floatval($share_setting["\146\151\162\x73\164"]) * $v_data[1]); goto QRbjC; ORjZV: V33cb: goto jAXig; zUiHu: A1gsJ: goto q8Wq3; IPyFE: goto tnjS4; goto zUiHu; Gykjn: $goods_price = floatval($goods_price - $goods_price / $order_money * $discount_money); goto WEo0c; eu1o1: if (empty($goods_share_setting)) { goto rxLKD; } goto iz1fT; m0ELx: goto gvpAS; goto ORjZV; HK3w7: if (!($order_goods_count == 1)) { goto V33cb; } goto xzEUk; Wh7J9: goto yVDz4; goto fjXdr; C2iT2: if ($goods_share_setting["\x70\x72\x69\x63\x65\x5f\164\x79\x70\x65"] == 0) { goto TqVIK; } goto jkxSx; maYOA: $share_price_data["\163\x65\x63\x6f\156\144\x5f\x70\162\x69\143\145"] = $share_setting["\163\145\143\157\156\x64"]; goto Elpke; Ie5dA: } goto Yw2kd; hwHmS: $order_goods_arr = explode("\x2c", $order_goods); goto xEaVS; uGztg: $share_price_data["\163\x65\143\x6f\x6e\144\x5f\x70\162\x69\143\145"] = 0; goto Q0ul5; L3fuR: $order_goods_count = count($order_goods_arr); goto L9tNC; PtUwk: $order_money = floatval($share_money + $discount_money); goto YwMID; Yw2kd: gvpAS: goto fm8QW; hKtKp: $discount_money = floatval($share_data["\144\151\x73\x63\157\165\156\164\137\155\x6f\x6e\145\x79"]); goto PtUwk; mhmrx: $share_money = floatval($share_data["\163\150\141\162\x65\x5f\155\x6f\156\x65\x79"]); goto hKtKp; OIxBk: } public function get_shareSetting($mch_id, $share_goods_id) { goto g9jnq; J6Uak: MeiTR: goto uUEaa; JvfyO: XFx0b: goto J6Uak; qGw6s: $info["\x74\150\151\x72\x64"] = $goods_share["\x74\x68\151\x72\x64"]; goto JvfyO; AMlJz: if (!($share_goods_id != 0)) { goto MeiTR; } goto BZWS_; uUEaa: return $info; goto uvaLN; K1Vhm: $info["\163\x65\143\x6f\156\x64"] = $goods_share["\163\x65\143\x6f\x6e\x64"]; goto qGw6s; bJmL0: $info["\146\151\162\163\164"] = $goods_share["\146\151\x72\163\x74"]; goto K1Vhm; BZWS_: $goods_share = Db::name("\x79\142\x73\x63\137\147\157\157\144\163\137\x73\150\141\162\145\x5f\x73\x65\164\164\x69\x6e\x67")->where(["\155\143\150\x5f\151\x64" => $mch_id, "\147\157\157\x64\x73\137\x69\x64" => $share_goods_id, "\163\164\141\x74\x75\163" => 1])->find(); goto cBFzE; cBFzE: if (!$goods_share) { goto XFx0b; } goto PEzBn; g9jnq: $info = Db::name("\171\142\x73\143\x5f\x75\x73\145\162\x5f\x73\x68\141\162\145\x5f\x73\x65\x74\164\151\156\x67")->where("\155\143\x68\137\x69\x64", $mch_id)->find(); goto AMlJz; PEzBn: $info["\x70\x72\x69\x63\x65\137\164\171\160\145"] = $goods_share["\x70\162\151\x63\145\137\164\171\160\145"]; goto bJmL0; uvaLN: } public function is_distributor($uid) { goto OJFBB; ioQwH: KU2NX: goto G_d3G; G_d3G: $a = Db::name($this->u)->where(["\165\x69\x64" => $uid])->value("\151\163\137\x64\x69\163\x74\x72\151\x62\x75\164\157\x72"); goto y9n66; M2GXo: return 0; goto ioQwH; S_yuG: RgFiH: goto io_Mh; y9n66: if ($a) { goto zeRjW; } goto fIYyi; OAmAv: return $a; goto S_yuG; OJFBB: if (!($uid == 0)) { goto KU2NX; } goto M2GXo; MuKAG: zeRjW: goto OAmAv; Xrx_z: goto RgFiH; goto MuKAG; fIYyi: return 0; goto Xrx_z; io_Mh: } public function get_user_uid($uid) { goto J2g7w; zyaqX: oPu07: goto DV7ZP; n536m: goto Fn0ah; goto Xxa1v; hNmrR: return $pid; goto Wtyle; VkOL7: return 0; goto zyaqX; DV7ZP: $pid = Db::name($this->u)->where(["\x75\151\x64" => $uid])->value("\160\151\x64"); goto nlowb; J2g7w: if (!($uid == 0)) { goto oPu07; } goto VkOL7; Xxa1v: wMsQE: goto hNmrR; Wtyle: Fn0ah: goto jwMAv; nlowb: if ($pid) { goto wMsQE; } goto AQvhQ; AQvhQ: return 0; goto n536m; jwMAv: } public function orderList($data, $page = 1) { goto c7tCH; pdkIF: return $order_list; goto jobg3; j5Qgf: foreach ($order_list as $key => $value) { goto l4rsy; lLtYs: foreach ($goods as $k => $v) { goto THu61; Idj0k: if (!$pic) { goto cQtzk; } goto eGrhs; eGrhs: $goods[$k]["\160\151\x63"] = $pic; goto Hncu9; tVbZL: hnFmB: goto i7n67; Hncu9: cQtzk: goto tVbZL; THu61: $pic = Db::name($this->i)->where("\x69\x6d\147\137\151\x64", $v["\147\x6f\x6f\x64\x73\x5f\151\x6d\141\x67\x65\163"])->field("\x69\x6d\x67\137\x63\157\x76\145\x72\54\151\x6d\x67\x5f\x63\x6f\x76\145\162\137\142\151\x67\x2c\151\155\147\x5f\x63\x6f\x76\145\x72\x5f\x6d\151\x64\x2c\x69\155\x67\137\143\x6f\166\x65\x72\x5f\x73\155\x61\154\154")->find(); goto Idj0k; i7n67: } goto SeKBL; l4rsy: $order_list[$key]["\x70\141\x79\x74\x69\x6d\x65"] = $this->LTIME($value["\x70\141\171\x5f\x74\151\155\x65"]); goto PmtJ8; XA95_: $order_list[$key]["\147\157\157\144\x73"] = $goods; goto Gr2tu; m312x: $order_list[$key]["\150\141\x76\x65\x5f\x6c\x6f\x67"] = $this->check_log($value["\x6f\x72\x64\x65\x72\x5f\x69\144"], 1); goto XA95_; Gr2tu: fj_75: goto IlvGZ; SeKBL: tu9nI: goto m312x; PmtJ8: $goods = Db::name($this->og)->where("\x6f\x72\144\x65\162\137\x69\x64", $value["\157\162\x64\x65\x72\137\151\x64"])->select(); goto lLtYs; IlvGZ: } goto J_ZYw; Z0MaJ: $order_list = Db::name($this->o)->where($data)->where("\151\163\x5f\144\145\x6c\x65\164\x65\144", 0)->page($page, PAGE_NUM)->order("\x63\162\145\141\x74\x65\137\164\x69\155\145", "\144\145\x73\x63")->select(); goto WFA57; c7tCH: $order_list = null; goto Z0MaJ; SIrae: return $order_list; goto Et06f; WFA57: if (!empty($order_list)) { goto v5mrW; } goto SIrae; J_ZYw: j45Gd: goto pdkIF; Et06f: v5mrW: goto j5Qgf; jobg3: } public function check_log($order, $type = 1) { goto umQ2H; Cunt9: if (!empty($res) && $res["\x72\x65\x66\165\x6e\144\x5f\163\x74\x61\x74\x75\x73"] != 3) { goto JIU7K; } goto xc9jS; xc9jS: $count = 0; goto zFMsF; umQ2H: $res = Db::name("\x79\x62\163\143\137\157\x72\144\145\x72\x5f\162\x65\x66\x75\x6e\x64")->field("\162\145\146\165\156\x64\137\x73\164\141\x74\165\x73")->where(["\x6f\162\x64\x65\x72\x5f\151\x64" => $order, "\x74\x79\x70\x65" => $type])->order("\151\x64", "\x64\x65\x73\143")->find(); goto Cunt9; zFMsF: goto qu22e; goto nGHDF; nGHDF: JIU7K: goto JEz4K; xqFMB: return $count; goto qqsfp; JEz4K: $count = 1; goto GMf7t; GMf7t: qu22e: goto xqFMB; qqsfp: } public function LTIME($time) { goto T07SY; GNl7a: if (empty($time)) { goto ZHxDn; } goto F2Moc; YaX3T: ZHxDn: goto h5y5b; F2Moc: $date = date("\x59\x2d\155\55\x64\x20\x48\x3a\x69\72\x73", $time); goto YaX3T; T07SY: $date = ''; goto GNl7a; h5y5b: return $date; goto p40pW; p40pW: } public function getOrder($data) { goto jk6ci; a4hU6: $order_info["\x63\162\x65\x61\164\x65\137\164\x69\155\145"] = __TIME($order_info["\143\x72\x65\141\x74\x65\137\164\151\155\145"]); goto rR220; SAB8L: $order_info = Db::name($this->o)->where($data)->where("\151\x73\x5f\144\x65\x6c\x65\x74\x65\x64", 0)->find(); goto o7c5y; e0QV7: $city = Db::name($this->dq)->where("\x69\x64", $res["\160\x69\144"])->find(); goto hFQN_; gM8md: $order_info["\145\x78\160\162\145\x73\x73"] = 0; goto nCJye; pbAWH: $order_info["\147\x6f\157\x64\163"] = Db::name($this->og)->where("\x6f\162\x64\x65\x72\137\x69\144", $order_info["\157\x72\x64\x65\162\x5f\151\144"])->select(); goto VFvOk; nzIza: $order_info["\145\170\x70\162\145\x73\x73"] = 1; goto TnT1i; YRbne: return $order_info; goto bsSpi; tjzgs: if (!(!empty($express) && $express["\145\170\x70\162\x65\163\x73\137\x63\x6f\x6d\160\141\156\171"] && $express["\x65\x78\160\x72\145\x73\x73\x5f\156\x6f"])) { goto Brgdd; } goto nzIza; jk6ci: $order_info = null; goto SAB8L; ZQ4G6: return $order_info; goto ntZPc; HVDvm: Brgdd: goto ZQ4G6; WCeTz: $res = Db::name($this->dq)->where("\151\x64", $order_info["\162\x65\x63\x65\x69\166\x65\x72\x5f\x61\x72\x65\x61"])->find(); goto e0QV7; VFvOk: foreach ($order_info["\147\x6f\157\144\163"] as $k => $v) { goto WCAh1; MpDkI: $order_info["\147\157\x6f\144\163"][$k]["\x70\151\143"] = $pic; goto CgIPx; WCAh1: $pic = Db::name($this->i)->where("\x69\x6d\x67\x5f\151\x64", $v["\147\157\x6f\x64\x73\137\151\155\141\147\145\x73"])->field("\151\x6d\x67\137\143\157\x76\x65\x72\54\151\x6d\147\x5f\143\157\166\145\162\137\142\151\x67\x2c\x69\x6d\x67\x5f\x63\157\166\x65\x72\137\155\x69\144\x2c\151\155\147\137\x63\157\x76\x65\162\x5f\163\x6d\141\154\x6c")->find(); goto g4xad; CgIPx: AOYs0: goto Ps_4G; Ps_4G: fsNBl: goto OMm_Y; g4xad: if (!$pic) { goto AOYs0; } goto MpDkI; OMm_Y: } goto WlS9K; yOrV7: $address["\144\x69\x73\x74\x72\151\143\164"] = $res["\156\141\155\145"]; goto ZUjlq; J5tag: $address["\x63\x69\x74\171"] = $city["\156\x61\x6d\145"]; goto yOrV7; TnT1i: $order_info["\x65\x78\x70\162\x65\x73\163\x5f\143\157\x6d\x70\141\x6e\x79"] = $express["\x65\x78\x70\x72\x65\x73\x73\137\x63\157\155\x70\141\156\171"]; goto aWOeR; ZUjlq: $order_info["\x61\x64\x64\162\145\163\163"] = $address; goto pbAWH; hFQN_: $pro = Db::name($this->dq)->where("\151\144", $city["\160\151\144"])->find(); goto tWlAj; WlS9K: DVhxl: goto gM8md; nCJye: $express = Db::name("\171\x62\x73\143\137\x6f\x72\x64\x65\162\137\x65\x78\160\x72\x65\163\163")->where(["\x73\150\151\x70\160\151\156\x67\137\164\x79\160\x65" => 1, "\157\x72\x64\x65\162\137\164\x79\160\145" => 0, "\x6f\162\x64\x65\x72\x5f\151\144" => $order_info["\157\x72\144\145\162\x5f\x69\144"]])->find(); goto tjzgs; tWlAj: $address["\x70\162\157\x76\151\156\143\145"] = $pro["\x6e\141\x6d\x65"]; goto J5tag; rR220: $order_info["\155\x65\156\164\x69\157\x6e\x5f\164\151\x6d\145"] = __TIME($order_info["\155\x65\156\x74\x69\157\156\137\164\151\155\145"]); goto WCeTz; IaywX: $order_info["\163\151\x67\x6e\x5f\164\151\x6d\x65"] = __TIME($order_info["\x73\x69\x67\156\x5f\x74\151\155\x65"]); goto CihXy; bsSpi: jVXu8: goto IaywX; aWOeR: $order_info["\145\170\x70\162\x65\x73\x73\x5f\156\157"] = $express["\145\x78\x70\162\x65\163\x73\137\156\157"]; goto HVDvm; o7c5y: if (!empty($order_info)) { goto jVXu8; } goto YRbne; FlwP6: $order_info["\x63\x6f\x6e\x73\x69\x67\x6e\x5f\164\151\x6d\145"] = __TIME($order_info["\x63\x6f\156\x73\151\147\x6e\x5f\x74\x69\x6d\145"]); goto a4hU6; CihXy: $order_info["\x70\141\171\x5f\164\x69\155\x65"] = __TIME($order_info["\160\141\171\137\x74\x69\155\145"]); goto FlwP6; ntZPc: } public function getOrderDetail($data) { goto gw7X8; y0QSj: $return["\157\162\x64\x65\x72\137\x69\x64"] = $order_info["\x69\x64"]; goto pLZxt; MMFhl: $return["\x62\165\x79\145\162\x5f\x6d\145\163\x73\x61\x67\145"] = $order_info["\x62\165\171\145\x72\137\x6d\x65\x73\163\x61\x67\145"]; goto e2L19; nJFFD: $order_info["\160\x61\171\137\164\x69\155\x65"] = __TIME($order_info["\160\x61\x79\137\164\151\155\145"]); goto LoboA; lRRYL: foreach ($return["\147\157\x6f\x64\x73"] as $k => $v) { goto tCGzA; lh3RT: oDMV4: goto ghpHQ; AJU3q: $return["\147\157\157\144\x73"][$k]["\160\151\x63"] = $pic["\151\x6d\x67\137\143\x6f\x76\x65\x72"]; goto lh3RT; tCGzA: $pic = Db::name($this->i)->where("\151\155\147\x5f\x69\x64", $v["\147\x6f\x6f\144\163\137\151\x6d\141\x67\x65\163"])->field("\x69\x6d\x67\137\x63\x6f\x76\145\162\54\x69\x6d\147\137\x63\x6f\166\145\162\x5f\142\x69\147\x2c\x69\155\x67\x5f\x63\x6f\x76\145\x72\x5f\x6d\x69\144\54\151\x6d\147\x5f\x63\157\x76\145\162\x5f\163\155\x61\x6c\x6c")->find(); goto AJU3q; ghpHQ: } goto Cr7GP; ML2Hc: $res["\155\x73\x67"] = "\xe8\256\242\345\x8d\225\xe7\212\266\xe6\x80\x81\xe9\224\231\350\xaf\257"; goto qkeAb; gw7X8: $res = ["\x69\x6e\x66\157" => [], "\x6d\x73\147" => '']; goto jLSYg; iZ5Zp: $return["\160\x61\171\137\164\171\160\145"] = $order_info["\160\141\171\137\x74\x79\x70\x65"]; goto A7GM_; TOj0d: ocLoV: goto A0F1g; jxdNP: $return["\x70\141\x79\x5f\164\171\x70\x65"] = 1; goto y0QSj; GCYmr: return $res; goto BV4A9; IZ1qt: if ($data["\x74\x79\160\145"] != "\x70") { goto XWb3j; } goto ODp9j; AaLyg: x8VG2: goto V68GM; uO6lw: $order_info["\x63\162\x65\141\x74\145\x5f\x74\x69\155\x65"] = __TIME($order_info["\x63\x72\x65\141\x74\x65\124\x69\155\145"]); goto jxdNP; SzzqS: $return["\157\162\144\145\x72\137\x70\162\x69\143\x65"] = $data["\x74\171\x70\x65"] == "\x70" ? $order_info["\164\x6f\x74\x61\x6c\x50\162\151\143\145"] : $order_info["\x6f\x72\x64\x65\162\x5f\x6d\157\156\x65\x79"]; goto Eqxp8; o3EGy: Ow_PR: goto RuO4N; LoboA: $order_info["\x63\162\145\x61\x74\x65\x5f\164\151\155\145"] = __TIME($order_info["\x63\x72\145\x61\x74\x65\x5f\164\x69\x6d\145"]); goto iZ5Zp; Xs8sq: $order_info = Db::name($tabke)->where($cond)->find(); goto Sg3hD; qgIBN: $pic = Db::name($this->i)->where("\151\155\x67\137\x69\x64", $order_info["\142\x61\162\147\x61\151\x6e\x5f\160\151\143"])->field("\151\x6d\x67\137\x63\x6f\166\x65\x72\x2c\x69\155\x67\x5f\143\157\x76\145\162\137\x62\151\147\x2c\x69\x6d\x67\x5f\143\157\x76\145\x72\x5f\x6d\151\144\54\x69\x6d\147\x5f\x63\x6f\x76\145\162\137\x73\x6d\141\x6c\x6c")->find(); goto V9asA; RuO4N: $return["\143\157\x6d\160\154\145\x74\145"] = true; goto OsBA_; I52iW: $return["\x67\x6f\x6f\144\x73"][0]["\x70\151\x63"] = $pic["\x69\x6d\147\137\143\157\166\145\x72"]; goto AoSPP; Rkm3G: $return["\147\x6f\157\144\163"][0]["\160\151\x63"] = $pic["\151\x6d\x67\x5f\x63\157\166\145\x72"]; goto LaYLO; e2L19: $return["\x6f\162\x64\145\162\x5f\151\144"] = $order_info["\157\x72\144\145\x72\137\151\144"]; goto un2ch; C6iax: $return["\x6f\x72\144\145\162\x5f\163\x74\x61\164\x75\163"] = $order_info["\x6f\x72\x64\x65\162\137\163\x74\x61\x74\165\163"]; goto BzW7S; NN6gN: $return["\143\x72\145\141\x74\x65\x5f\x74\151\155\145"] = $order_info["\143\162\145\141\164\145\x5f\164\151\x6d\145"]; goto UZa8V; HUd0A: $return["\147\x6f\157\144\163"] = Db::name($this->og)->field("\147\157\157\144\163\137\151\144\54\147\157\x6f\144\x73\137\x69\x6d\141\147\145\163\x2c\x67\x6f\x6f\144\163\137\155\x6f\x6e\x65\171\54\147\x6f\x6f\144\x73\137\x6e\x61\155\145\54\x6e\165\155")->where("\x6f\x72\144\x65\x72\137\151\x64", $order_info["\157\162\144\x65\162\x5f\x69\144"])->select(); goto lRRYL; lvCIl: if (!($data["\x74\x79\x70\145"] == "\x74")) { goto ocLoV; } goto HUd0A; ejz8s: $return["\162\x65\143\x65\x69\166\145\162\x5f\x6e\141\x6d\145"] = $address["\165\x73\x65\162\116\141\x6d\145"]; goto l4GFf; Nn7Eq: goto y0MC1; goto VgluX; l4GFf: $return["\x72\x65\x63\145\151\166\145\x72\x5f\x6d\157\x62\151\154\145"] = $address["\164\145\x6c\x4e\165\155\142\145\162"]; goto TK1DB; d5rfT: $return["\147\157\157\x64\163"][0]["\160\x69\143"] = $order_info["\x62\x61\x72\x67\x61\151\156\x5f\x70\151\x63"]; goto f0u6J; YLElG: if (!($data["\x74\x79\x70\145"] == "\x70" && $order_info["\157\x72\144\x65\x72\137\163\x74\x61\164\165\x73"] != 3 || $data["\x74\171\x70\145"] != "\x70" && $order_info["\157\x72\x64\x65\x72\x5f\x73\164\x61\164\x75\x73"] != 1)) { goto Do2KP; } goto ML2Hc; uHp3c: EBbbB: goto kleoE; O569Q: $return["\x63\157\165\x70\x6f\156\137\x6d\157\x6e\145\171"] = isset($order_info["\143\157\x75\160\x6f\156\x5f\x6d\x6f\156\145\171"]) ? $order_info["\x63\x6f\165\160\x6f\x6e\137\155\x6f\156\145\x79"] : 0; goto qaXUb; XVsN3: $return["\147\x6f\157\144\163"][0] = Db::name($this->ptg)->field("\x69\155\x67\54\x69\144\40\x61\163\x20\x67\x6f\x6f\x64\163\x5f\151\x64\x2c\156\x61\x6d\x65\x20\x61\163\40\x67\157\157\144\x73\x5f\x6e\x61\155\x65\x2c\x70\162\151\x63\x65\40\141\163\40\157\162\x69\147\x69\x6e\141\154\137\155\157\x6e\x65\x79\54\147\160\162\x69\143\x65\x20\x61\163\40\147\x6f\x6f\144\163\137\155\x6f\x6e\145\x79")->where("\151\x64", $order_info["\x67\151\144"])->find(); goto EiLhE; EiLhE: $pic = Db::name($this->i)->where("\x69\155\147\x5f\x69\144", $return["\x67\x6f\x6f\144\163"][0]["\x69\155\147"])->field("\151\x6d\147\x5f\x63\157\x76\145\162\x2c\x69\x6d\147\137\143\x6f\x76\145\162\137\142\151\147\x2c\151\155\147\x5f\x63\157\x76\x65\162\x5f\155\151\x64\54\x69\x6d\x67\x5f\143\157\166\x65\162\137\163\x6d\141\154\154")->find(); goto I52iW; A0F1g: if (!($data["\164\x79\x70\145"] == "\153")) { goto v08CC; } goto qgIBN; Q2E81: $cond = $data["\164\x79\x70\x65"] == "\x70" ? ["\x6f\162\144\145\x72\116\x75\155" => $data["\157\x72\x64\x65\162\x5f\x6e\x6f"]] : ["\x6f\162\144\x65\162\137\x6e\157" => $data["\157\162\x64\145\162\137\x6e\x6f"], "\151\163\x5f\x64\x65\154\x65\164\145\144" => 0]; goto Xs8sq; Cr7GP: O8eQN: goto TOj0d; f0u6J: eJNxv: goto V922x; evcYN: fdtOR: goto Z2ybn; jLSYg: switch ($data["\x74\171\160\145"]) { case "\164": $tabke = $this->o; goto El2LT; case "\x6b": $tabke = $this->kj; goto El2LT; case "\160": $tabke = $this->pt; goto El2LT; case "\155": $tabke = $this->ms; goto El2LT; } goto AaLyg; AoSPP: $return["\x67\157\157\144\x73"][0]["\156\165\155"] = $order_info["\147\x6f\x6f\x64\163\116\x75\155"]; goto uHp3c; Hs0q2: $return = ["\x63\x6f\x6d\160\154\145\x74\x65" => false]; goto Q2E81; OsBA_: $return["\143\157\155\160\154\x65\164\x65\x5f\x74\151\155\x65"] = $data["\164\171\160\x65"] == "\160" ? date("\x59\55\x6d\55\144\x20\110\x3a\x69\x3a\x73", $order_info["\143\x6f\x6d\x70\x6c\145\x74\x65\124\x69\155\145"]) : date("\131\55\x6d\x2d\x64\40\110\x3a\151\x3a\x73", $order_info["\163\151\147\156\137\x74\x69\x6d\145"]); goto evcYN; aCpwU: y0MC1: goto SzzqS; qaXUb: $return["\162\145\142\x61\x74\145\x5f\x6d\x6f\156\145\171"] = isset($order_info["\x72\145\x62\x61\x74\x65\x5f\155\157\x6e\145\x79"]) ? $order_info["\x72\145\142\141\x74\145\x5f\x6d\x6f\156\x65\x79"] : 0; goto HXQVz; eQpQX: $address = json_decode($order_info["\x61\144\x64\x72\x65\x73\x73"], true); goto ejz8s; GtxT2: $res["\155\x73\x67"] = "\350\xae\xa2\345\x8d\225\344\270\x8d\345\xad\230\345\234\xa8"; goto GCYmr; V68GM: El2LT: goto Hs0q2; DbaSd: if ($data["\164\171\160\145"] == "\160" && $order_info["\157\x72\144\145\x72\x5f\x73\x74\x61\x74\165\163"] == 6 || $data["\164\171\160\x65"] != "\x70" && $order_info["\x6f\x72\144\x65\162\137\x73\x74\x61\164\165\x73"] == 3) { goto Ow_PR; } goto YLElG; PmFsp: Do2KP: goto Tvw5X; Eqxp8: $return["\160\x61\171\x5f\155\157\156\x65\171"] = $data["\x74\171\x70\145"] == "\160" ? $order_info["\164\157\x74\x61\154\x50\x72\x69\143\x65"] : $order_info["\x70\x61\171\x5f\155\157\156\145\x79"]; goto nm3KT; HXQVz: $return["\147\x72\x6f\165\x70\x54\x69\x6d\x65"] = empty($return["\147\162\x6f\165\160\124\x69\x6d\145"]) ? 0 : $return["\x67\162\x6f\x75\160\x54\x69\x6d\145"]; goto lvCIl; un2ch: $return["\147\x72\157\x75\x70\124\151\155\145"] = 0; goto aCpwU; UZa8V: $return["\x64\151\163\143\x6f\x75\x6e\164\x5f\155\157\x6e\145\x79"] = isset($order_info["\x64\151\x73\143\157\165\x6e\x74\137\x6d\x6f\156\145\x79"]) ? $order_info["\x64\151\163\143\157\x75\156\x74\137\155\157\x6e\x65\171"] : 0; goto O569Q; KtFU3: if (!($data["\x74\171\x70\145"] == "\160")) { goto EBbbB; } goto XVsN3; LaYLO: v08CC: goto KtFU3; A7GM_: $return["\x72\145\143\145\x69\166\x65\x72\137\156\x61\155\x65"] = $order_info["\x72\145\x63\145\x69\166\145\162\137\x6e\x61\x6d\x65"]; goto XSDFn; TK1DB: $return["\142\x75\x79\145\162\137\155\145\x73\x73\x61\x67\x65"] = ''; goto Nn7Eq; pLZxt: $return["\147\x72\157\165\160\x54\x69\155\x65"] = $order_info["\x69\x73\107\x72\157\x75\160"] == 1 ? __TIME($order_info["\147\x72\157\165\160\124\151\155\145"]) : 0; goto eQpQX; XSDFn: $return["\162\x65\x63\x65\x69\x76\x65\162\137\x6d\x6f\x62\151\x6c\145"] = $order_info["\x72\145\143\145\x69\166\145\x72\137\155\x6f\x62\151\154\145"]; goto MMFhl; BvIB9: $return["\147\x6f\x6f\144\163"][0] = ["\147\x6f\x6f\144\163\x5f\x69\x64" => $order_info["\142\141\x72\x67\141\151\x6e\137\x69\x64"], "\x67\157\157\144\163\137\x6e\141\155\x65" => $order_info["\x62\x61\162\147\x61\151\x6e\x5f\x6e\141\155\145"], "\147\157\x6f\x64\163\x5f\155\x6f\156\x65\x79" => $order_info["\157\x72\151\x67\151\x6e\141\154\137\x70\x72\151\x63\x65"], "\156\x75\x6d" => $order_info["\164\157\x74\x61\x6c"]]; goto d5rfT; VgluX: XWb3j: goto nJFFD; qkeAb: return $res; goto PmFsp; BV4A9: TialA: goto DbaSd; V9asA: $return["\147\157\x6f\144\x73"][0] = ["\x67\157\157\x64\x73\x5f\151\x64" => $order_info["\142\141\x72\147\141\x69\x6e\x5f\x69\144"], "\147\157\x6f\x64\x73\x5f\x6e\141\x6d\145" => $order_info["\x62\x61\x72\x67\141\151\156\x5f\x6e\x61\x6d\145"], "\x67\x6f\157\x64\x73\x5f\x6d\157\156\145\171" => $order_info["\x6f\162\144\145\162\x5f\155\157\x6e\145\x79"], "\x6e\165\155" => $order_info["\x74\x6f\164\x61\x6c"]]; goto Rkm3G; kleoE: if (!($data["\x74\171\x70\145"] == "\x6d")) { goto eJNxv; } goto BvIB9; tdi43: $return["\x70\141\171\137\x74\x69\155\x65"] = $order_info["\160\141\171\137\164\151\155\x65"]; goto NN6gN; Sg3hD: if (!empty($order_info)) { goto TialA; } goto GtxT2; BzW7S: $return["\155\x65\x6e\x74\151\x6f\x6e\x5f\164\x69\155\x65"] = $order_info["\155\x65\156\x74\x69\157\x6e\137\164\x69\x6d\145"]; goto tdi43; V922x: return $return; goto RR2No; ODp9j: $order_info["\x70\x61\171\137\x74\x69\x6d\x65"] = __TIME($order_info["\x70\x61\171\x54\151\155\145"]); goto uO6lw; Tvw5X: goto fdtOR; goto o3EGy; Z2ybn: $order_info["\155\x65\156\164\151\157\x6e\x5f\x74\151\x6d\145"] = __TIME($order_info["\x6d\x65\x6e\x74\151\x6f\x6e\137\164\x69\155\x65"]); goto IZ1qt; nm3KT: $return["\x6f\x72\144\x65\162\137\x6e\157"] = $data["\x74\171\x70\145"] == "\160" ? $order_info["\157\162\144\145\162\116\x75\x6d"] : $order_info["\x6f\x72\x64\x65\162\x5f\156\157"]; goto C6iax; RR2No: } public function heXiaoOrder($data) { goto mdsKP; P8HAE: $arr_info = json_decode($json_info, true); goto osb7b; EJo8A: return $res; goto pE8Mw; qBMIQ: $ret = Db::name($tabke)->where($cond)->update($update_data); goto qyZHw; ea_Eb: U9fR9: goto nNA9o; D2Q27: $res["\155\x73\x67"] = "\350\256\242\345\x8d\x95\346\xa0\270\351\x94\200\345\xa4\xb1\xe8\xb4\245"; goto bXGkH; pzjZJ: return $res; goto VhQdK; osb7b: if (!($arr_info["\x63\157\144\x65"] != 0)) { goto cYX95; } goto D2Q27; fNb4Y: cAuF7: goto ea_Eb; Q4Hxp: XRg7m: goto U2eGX; TH2oF: $update_data = ["\157\162\x64\145\162\137\163\x74\141\x74\x75\163" => 3, "\146\x69\x6e\151\163\150\x5f\164\151\155\145" => $time, "\163\151\x67\156\x5f\x74\151\155\145" => $time]; goto k0UXJ; Mfxd0: ssCZe: goto AvAQZ; XChyV: if (!($data["\164\171\160\x65"] == "\x70" && $order_info["\157\162\144\x65\162\137\x73\164\141\x74\165\163"] != 3 || $data["\164\171\160\x65"] != "\x70" && $order_info["\x6f\162\x64\145\x72\x5f\163\164\x61\x74\165\163"] != 1)) { goto YFQ9W; } goto O4Bhd; Pf75u: $res["\x74\x69\x6d\145"] = date("\131\x2d\x6d\55\x64\x20\x48\72\151\72\x73", $time); goto g88ES; g88ES: return $res; goto k4Kn9; i2md3: MDpZB: goto fFJWo; aFMsr: $res["\x6d\x73\x67"] = "\346\xb2\xa1\xe6\234\x89\xe6\x9d\x83\351\231\x90"; goto HzlBH; vCcyj: $json_info = $this->signOrder($params); goto P8HAE; p5Lbh: $order_info = Db::name($tabke)->where($cond)->find(); goto oJGlk; pE8Mw: YeOte: goto XChyV; mdsKP: $res = ["\x6d\x73\x67" => '', "\164\x69\155\x65" => '']; goto JNF5B; GRi_B: YFQ9W: goto poRez; oJGlk: if (!empty($order_info)) { goto YeOte; } goto NeqF3; g_vBs: goto g9Lu_; goto Mfxd0; U2eGX: $cond = $data["\164\x79\x70\145"] == "\160" ? ["\x69\x64" => $data["\157\x72\144\145\x72\x5f\151\x64"]] : ["\157\162\x64\145\162\137\151\144" => $data["\157\x72\x64\x65\162\137\151\144"]]; goto p5Lbh; HzlBH: return $res; goto Q4Hxp; PXSMu: cYX95: goto FPXbO; nNA9o: $user_info = Db::name($this->u)->where("\165\151\x64", $data["\x75\x69\144"])->field("\151\x73\137\167\x72\151\x74\x65\x6f\x66\146")->find(); goto m5Swp; m5Swp: if (!(empty($user_info) || $user_info["\x69\x73\x5f\167\x72\151\164\145\x6f\146\146"] != 1)) { goto XRg7m; } goto aFMsr; balFD: return $res; goto GRi_B; NeqF3: $res["\155\x73\x67"] = "\350\xae\xa2\345\215\225\344\270\215\xe5\255\x98\345\x9c\xa8"; goto EJo8A; AvAQZ: $params = ["\157\162\144\x65\162\x5f\x69\x64" => $data["\x6f\x72\144\x65\x72\137\x69\x64"], "\x6d\143\150\x5f\151\144" => $data["\155\x63\150\137\151\x64"], "\142\165\x79\x65\162\137\151\x64" => $order_info["\x62\165\x79\x65\162\137\x69\x64"]]; goto vCcyj; O4Bhd: $res["\155\x73\x67"] = "\xe8\xae\242\345\x8d\225\xe7\x8a\xb6\346\x80\201\351\224\231\350\257\xaf"; goto balFD; poRez: $time = time(); goto fmvvA; gXJbE: if ($data["\x74\x79\x70\145"] == "\x70") { goto MDpZB; } goto TH2oF; FPXbO: g9Lu_: goto Pf75u; VhQdK: osVwP: goto g_vBs; k0UXJ: goto xITD7; goto i2md3; fFJWo: $update_data = ["\157\162\x64\x65\162\x5f\163\164\x61\x74\x75\x73" => 6, "\143\x6f\155\x70\x6c\145\x74\145\124\151\155\x65" => $time]; goto L861B; L861B: xITD7: goto qBMIQ; QoH_H: $res["\155\163\147"] = "\346\240\270\351\224\x80\345\244\xb1\xe8\xb4\245"; goto pzjZJ; bXGkH: return $res; goto PXSMu; fmvvA: if ($data["\164\171\x70\145"] == "\164") { goto ssCZe; } goto gXJbE; JNF5B: switch ($data["\x74\x79\x70\145"]) { case "\164": $tabke = $this->o; goto U9fR9; case "\153": $tabke = $this->kj; goto U9fR9; case "\160": $tabke = $this->pt; goto U9fR9; case "\x6d": $tabke = $this->ms; goto U9fR9; } goto fNb4Y; qyZHw: if ($ret) { goto osVwP; } goto QoH_H; k4Kn9: } public function signOrder($data) { goto TtrHn; PPc_T: Db::startTrans(); goto W8d3V; W8d3V: try { goto J7Vqv; BHUqG: $share_data["\155\157\156\145\171"] = $us["\162\x65\142\141\x74\145"]; goto gs5yT; mQbjS: if (!empty($info)) { goto DmqaE; } goto AiCm9; BTx4O: Pxdei: goto S8q7i; JgLJV: $share_data["\x6d\157\x6e\x65\x79"] = $us["\146\151\162\x73\164\137\x70\162\151\x63\x65"]; goto FnYLs; N0Cov: v0Obs: goto jY1BX; jY1BX: if (!($us["\x70\141\x72\x65\x6e\164\x5f\151\x64\x5f\62"] && $us["\160\x61\162\145\x6e\x74\137\x69\144\137\62"] != 0)) { goto F7bnd; } goto mD4zn; LaNd5: Db::name($this->u)->where("\x75\151\144", $us["\x70\141\162\x65\x6e\x74\x5f\x69\144\137\x33"])->setInc("\x70\162\151\143\145", $us["\164\x68\151\x72\144\x5f\160\162\151\143\x65"]); goto o8oMc; imUaT: if (!$us) { goto Pxdei; } goto K0nx1; KwpzC: DmqaE: goto UHLnk; R_B_X: $pp = new PrinterService($data["\155\x63\150\x5f\x69\144"], $data["\x6f\x72\144\145\x72\x5f\x69\144"], "\x63\x6f\156\x66\151\162\x6d", 0); goto r1Jk4; mD4zn: $share_data["\x75\x73\x65\162\137\151\x64"] = $us["\x70\141\x72\145\x6e\164\x5f\x69\x64\x5f\62"]; goto Yndmx; UHLnk: $us = Db::name($this->os)->where(["\x75\x73\145\x72\x5f\151\144" => $data["\x62\165\171\145\x72\137\x69\144"], "\157\162\x64\x65\162\x5f\151\144" => $data["\x6f\x72\144\145\162\137\151\x64"]])->find(); goto imUaT; Bvc4i: ybBpS: goto BTx4O; Nz2RC: Db::name($this->usm)->insert($share_data); goto wDOkl; J7Vqv: $new_data = array("\x6f\x72\144\145\162\x5f\x73\x74\x61\164\165\x73" => 3, "\x73\x69\147\x6e\137\x74\151\x6d\145" => time()); goto v7xtM; L6rOP: Db::name($this->u)->where("\x75\x69\144", $us["\x75\x73\x65\162\137\151\x64"])->setInc("\x74\x6f\164\141\154\137\160\x72\x69\143\x65", $us["\x72\x65\142\141\164\145"]); goto FW13_; XoEwT: $share_data["\163\157\165\x72\x63\x65"] = 3; goto LzykL; CD4HF: $share_data["\x73\x6f\165\162\x63\145"] = 2; goto UK5Sx; S7z0z: Db::name($this->u)->where("\165\151\144", $us["\160\141\x72\x65\156\164\137\151\144\137\63"])->setInc("\164\157\x74\x61\154\137\x70\x72\x69\143\x65", $us["\164\x68\x69\162\144\x5f\160\162\151\143\x65"]); goto LaNd5; FW13_: Db::name($this->u)->where("\165\151\x64", $us["\165\163\145\x72\x5f\x69\144"])->setInc("\160\162\x69\x63\x65", $us["\162\145\142\x61\x74\x65"]); goto Bvc4i; K5gbY: $share_data["\x6d\157\156\145\171"] = $us["\164\x68\x69\x72\144\x5f\x70\162\x69\x63\x65"]; goto XoEwT; cToRr: $share_data["\x75\163\145\162\137\151\144"] = $us["\x75\x73\145\162\x5f\x69\144"]; goto BHUqG; BEG5I: $share_data["\x75\163\x65\162\x5f\x69\x64"] = $us["\160\x61\x72\145\156\x74\x5f\151\144\137\x33"]; goto K5gbY; xVRfD: if (!($us["\160\141\x72\x65\156\x74\x5f\151\x64\x5f\x31"] && $us["\x70\x61\162\x65\x6e\x74\x5f\x69\144\x5f\x31"] != 0)) { goto v0Obs; } goto LQUHA; S8q7i: Db::commit(); goto R_B_X; FnYLs: $share_data["\x73\x6f\x75\x72\143\145"] = 1; goto Nz2RC; o8oMc: H2jXQ: goto ckGwu; lDFxf: Db::name($this->usm)->insert($share_data); goto L6rOP; wDOkl: Db::name($this->u)->where("\x75\x69\x64", $us["\160\141\x72\145\156\x74\x5f\151\144\x5f\61"])->setInc("\x74\x6f\164\141\154\x5f\160\162\151\143\x65", $us["\x66\151\162\x73\164\x5f\x70\x72\x69\143\145"]); goto eqUYf; Yndmx: $share_data["\155\157\156\x65\x79"] = $us["\x73\145\143\157\x6e\144\137\x70\x72\x69\143\145"]; goto CD4HF; gs5yT: $share_data["\x73\x6f\x75\162\143\145"] = 1; goto lDFxf; LzykL: Db::name($this->usm)->insert($share_data); goto S7z0z; AiCm9: throw new Exception("\xe6\223\x8d\344\275\234\345\244\261\350\264\245"); goto KwpzC; LQUHA: $share_data["\x75\163\x65\x72\x5f\151\x64"] = $us["\x70\x61\x72\145\156\x74\137\151\x64\137\61"]; goto JgLJV; A1xjD: Db::name($this->u)->where("\165\151\x64", $us["\160\x61\x72\x65\x6e\164\137\151\x64\137\x32"])->setInc("\164\x6f\x74\141\154\137\160\x72\x69\x63\x65", $us["\163\145\143\157\156\x64\x5f\x70\x72\x69\143\145"]); goto n9IuH; eqUYf: Db::name($this->u)->where("\x75\x69\x64", $us["\x70\141\x72\145\156\x74\137\x69\144\x5f\x31"])->setInc("\x70\162\x69\x63\145", $us["\146\151\162\x73\164\137\x70\162\151\x63\145"]); goto N0Cov; v7xtM: $info = Db::name($this->o)->where($data)->update($new_data); goto mQbjS; GwjSm: if (!($us["\160\141\162\x65\156\164\137\x69\x64\137\x33"] && $us["\x70\x61\x72\145\x6e\164\137\151\144\x5f\x33"] != 0)) { goto H2jXQ; } goto BEG5I; ckGwu: if (!($us["\x72\x65\142\141\x74\x65"] && $us["\162\145\142\141\x74\145"] != 0)) { goto ybBpS; } goto cToRr; NpaNF: F7bnd: goto GwjSm; UK5Sx: Db::name($this->usm)->insert($share_data); goto A1xjD; n9IuH: Db::name($this->u)->where("\x75\x69\x64", $us["\x70\x61\162\x65\156\x74\137\151\x64\137\x32"])->setInc("\x70\162\x69\143\145", $us["\163\x65\143\157\156\144\137\160\162\151\x63\145"]); goto NpaNF; K0nx1: $share_data = ["\x6d\x63\x68\137\x69\144" => $data["\155\143\150\137\x69\144"], "\157\162\144\145\162\x5f\151\x64" => $data["\x6f\x72\144\x65\x72\137\x69\x64"], "\x63\x72\x65\141\x74\x65\137\x74\151\155\x65" => time(), "\151\163\x5f\x64\x65\154" => 1]; goto xVRfD; r1Jk4: $pp->print_order(); goto aKJDs; aKJDs: } catch (\Exception $e) { goto BJui0; g5arf: return json_encode($rs); goto adiJP; AST88: $rs["\x6d\x73\147"] = $e->getMessage(); goto g5arf; dp8A7: $rs["\x63\x6f\144\145"] = 1; goto AST88; BJui0: Db::rollback(); goto dp8A7; adiJP: } goto mVlUw; mVlUw: $rs["\x69\x6e\x66\157"] = $info; goto oiPDK; TtrHn: $rs = array("\143\157\x64\x65" => 0, "\151\156\x66\157" => array()); goto PPc_T; oiPDK: return json_encode($rs); goto NCbUW; NCbUW: } public function cancelOrder($data) { goto PvZwy; kJfTa: zbyPY: goto ED8Tc; PvZwy: $info = Db::name($this->o)->where($data)->find(); goto N4fkO; q8yxI: Db::startTrans(); goto LItEz; N4fkO: if (!empty($info)) { goto zbyPY; } goto P9P0_; ED8Tc: $order_goods_info = Db::name($this->og)->where("\157\x72\144\x65\162\x5f\151\144", $data["\x6f\x72\144\x65\162\x5f\151\144"])->select(); goto q8yxI; K3zOk: return $res; goto ZTdFi; P9P0_: return null; goto kJfTa; LItEz: try { goto ZEUjs; tXQx3: $res = Db::name($this->o)->where(["\x6f\162\x64\x65\x72\137\x69\x64" => $data["\157\x72\x64\145\162\x5f\x69\x64"]])->update($new_data); goto rrXd1; ZEUjs: $new_data = array("\x6f\x72\144\x65\162\137\x73\x74\141\164\165\163" => -1); goto tXQx3; UXxfi: Db::commit(); goto FzKOg; NXmdN: fotuI: goto UXxfi; rrXd1: foreach ($order_goods_info as $key => $value) { goto aCQj9; JR20u: Db::name($this->s)->where("\x73\x6b\165\x5f\x69\144", $value["\163\153\165\137\x69\144"])->setInc("\x73\164\x6f\143\153", $value["\x6e\165\155"]); goto shdrr; aCQj9: Db::name($this->g)->where("\x67\x6f\x6f\144\x73\137\x69\144", $value["\147\x6f\157\x64\x73\x5f\x69\x64"])->setInc("\163\164\x6f\143\153", $value["\x6e\x75\155"]); goto JR20u; shdrr: Pjt4o: goto rfb3i; rfb3i: } goto NXmdN; FzKOg: } catch (\Exception $e) { Db::rollback(); return $e->getMessage(); } goto K3zOk; ZTdFi: } public function delOrder($data) { goto zx7fX; o_Tsb: return null; goto RoUDR; PJXnW: return $res; goto I38zI; nnFnG: if (!empty($info)) { goto DDMUP; } goto o_Tsb; RoUDR: DDMUP: goto Tiub6; zx7fX: $info = Db::name($this->o)->where($data)->find(); goto nnFnG; Tiub6: $new_data = array("\x69\163\137\144\x65\x6c\x65\x74\145\x64" => 1); goto Ck8my; Ck8my: $res = Db::name($this->o)->where(["\157\x72\144\145\162\137\x69\x64" => $data["\x6f\162\x64\x65\162\137\x69\x64"]])->update($new_data); goto PJXnW; I38zI: } public function refundOrder($data, $apply_refund) { goto qIVjy; IjBUH: $refund->refundLog($info["\155\143\150\x5f\x69\144"], $info["\x62\165\x79\145\x72\137\151\144"], $apply_refund, $info["\157\x72\x64\145\162\137\151\x64"], 1); goto r25zC; r25zC: rzj4o: goto VaLe7; tAcDE: if (!($res && $apply_refund)) { goto rzj4o; } goto uvQSa; N_CNK: $new_data = array("\x6f\x72\144\x65\162\137\163\164\x61\164\x75\163" => 4, "\162\x65\146\165\x6e\x64\x5f\x74\x69\x6d\145" => time(), "\x72\x65\x66\165\x6e\144\x5f\163\x74\141\164\165\163" => $info["\157\x72\x64\145\162\x5f\x73\164\141\164\x75\163"]); goto mRmxh; G0o2o: if (!empty($info)) { goto UmmGD; } goto CQjxk; uvQSa: $refund = new RefundService(); goto IjBUH; qIVjy: $info = Db::name($this->o)->where($data)->find(); goto G0o2o; CQjxk: return null; goto itGTO; itGTO: UmmGD: goto N_CNK; VaLe7: return $res; goto db1ZM; mRmxh: $res = Db::name($this->o)->where(["\x6f\162\144\145\162\x5f\151\144" => $data["\x6f\x72\x64\x65\162\x5f\151\144"]])->update($new_data); goto tAcDE; db1ZM: } public function RefundList($data) { goto UsFOo; Ao8lv: unset($data["\x74\171\160\145"]); goto hOzUc; BnOqr: unset($data["\164\x79\160\x65"]); goto fV0KX; mb2W1: return $list; goto nOc_p; IlLZ1: foreach ($list as $k => $v) { goto WFpt7; WFpt7: $list[$k]["\160\141\x79\x5f\155\x6f\x6e\x65\x79"] = $list1["\x70\141\x79\137\x6d\x6f\156\145\x79"]; goto NtIFR; aZCid: ag67x: goto aYp0F; NtIFR: if (!$v["\141\160\160\154\171\x5f\164\151\155\x65"]) { goto SBvzM; } goto pJwOM; FtCpH: SBvzM: goto Ke0uN; pJwOM: $list[$k]["\x61\x70\160\x6c\x79\137\164\151\155\x65"] = Date("\x59\55\155\55\x64\40\x48\72\x69", $v["\x61\160\x70\x6c\x79\x5f\164\151\x6d\145"]); goto FtCpH; Ke0uN: if (!$v["\x63\x72\145\141\164\145\x5f\x74\x69\155\145"]) { goto ag67x; } goto LAOr_; LAOr_: $list[$k]["\x63\x72\x65\x61\164\x65\137\164\151\x6d\x65"] = Date("\x59\x2d\x6d\55\144\x20\x48\x3a\151", $v["\x63\162\145\141\x74\x65\137\164\151\x6d\145"]); goto aZCid; aYp0F: BG5XK: goto lM8Zl; lM8Zl: } goto AZFwe; g4gp_: unset($data["\x75\x69\x64"]); goto TEKjW; RcNPu: $list2 = Db::name("\x79\x62\163\x63\x5f\x70\164\137\x6f\162\144\145\162\163")->field("\151\x64")->where($data)->find(); goto glZR2; sUWaB: pAr6d: goto mb2W1; Zv3jb: if (!($data["\x74\x79\x70\145"] == 3)) { goto JLs5i; } goto yNnzU; r8WIH: unset($data["\164\x79\160\145"]); goto fsC_i; TCNSq: oOMAk: goto H_BAk; glZR2: $list1 = Db::name("\x79\x62\163\143\137\160\164\x5f\157\x72\144\145\x72\x5f\x70\x61\x79\x6d\x65\156\164")->field("\160\141\x79\x5f\155\x6f\156\x65\171")->where("\164\171\160\x65\137\x61\154\x69\x73\137\151\x64", $list2["\x69\144"])->find(); goto WlRRH; UsFOo: $list = Db::name("\x79\x62\x73\143\x5f\x6f\162\x64\145\162\x5f\162\145\146\x75\156\144")->where($data)->order("\151\x64\x20\144\145\x73\143")->limit(1)->select(); goto g4gp_; H_BAk: if (empty($list)) { goto pAr6d; } goto IlLZ1; hOzUc: $list1 = Db::name("\171\x62\x73\143\x5f\142\141\162\x67\141\x69\156\137\x6f\x72\144\x65\x72")->field("\x70\x61\x79\137\x6d\x6f\156\145\x79")->where($data)->find(); goto KIdPq; H8NLM: unset($data["\x6f\162\144\x65\162\137\x69\144"]); goto Nf9ji; tovpR: hnkiO: goto AAP7t; AZFwe: QcrvJ: goto sUWaB; fV0KX: $list1 = Db::name("\171\142\163\x63\137\157\162\144\145\x72")->field("\x70\x61\171\x5f\155\x6f\156\145\171")->where($data)->find(); goto tovpR; AAP7t: if (!($data["\x74\171\160\x65"] == 2)) { goto L6TI8; } goto Ao8lv; tB14m: if (!($data["\164\x79\160\145"] == 4)) { goto oOMAk; } goto r8WIH; Nf9ji: unset($data["\164\171\160\145"]); goto RcNPu; KIdPq: L6TI8: goto Zv3jb; fsC_i: $list1 = Db::name("\171\142\x73\x63\137\x61\x63\x74\151\166\151\x74\x79\137\157\162\144\145\x72")->field("\160\141\x79\x5f\155\157\156\145\171")->where($data)->find(); goto TCNSq; TEKjW: if (!($data["\164\x79\160\145"] == 1)) { goto hnkiO; } goto BnOqr; yNnzU: $data["\x69\144"] = $data["\x6f\x72\x64\145\x72\137\x69\144"]; goto H8NLM; WlRRH: JLs5i: goto tB14m; nOc_p: } }
