<?php
 namespace app\api\service; use think\Db; use think\Cache; use think\Exception; use think\log; class IndexService { private $bb = "\x79\x62\163\143\137\x62\x75\x73\137\142\157\157\153"; private $bc = "\x79\x62\163\x63\x5f\x62\165\x73\x5f\x63\x6f\x6d\155\x65\156\x74"; private $u = "\x79\142\x73\143\x5f\165\x73\145\x72"; private $ut = "\x79\x62\x73\x63\137\x75\163\145\x72\137\x74\x6d\160\x6c"; private $bt = "\171\142\x73\143\137\x62\x75\163\137\x74\155\160\154"; private $bf = "\x79\x62\163\143\x5f\x62\165\163\x5f\x66\x6f\162\155"; public function getGoodList($data, $ids) { goto lJ5yY; ZjP1v: kDAhV: goto MKAPQ; JfP7h: if (empty($list)) { goto y6_BK; } goto wu_w6; lJ5yY: $list = Db::name("\x79\142\163\x63\x5f\x67\157\x6f\x64\163")->where($data)->field("\147\x6f\x6f\x64\x73\x5f\156\x61\155\x65\40\x61\163\x20\156\x61\x6d\x65\54\x69\x6d\141\x67\145\x73\x2c\x70\x72\x69\x63\x65\x2c\x67\x6f\157\x64\x73\137\x69\144")->order("\146\151\145\x6c\144\50\147\x6f\x6f\144\x73\137\151\144\54" . $ids . "\51")->select(); goto JfP7h; MKAPQ: y6_BK: goto dx5Qx; dx5Qx: return $list; goto Mdh2p; wu_w6: foreach ($list as $k => $v) { goto sY0s4; sY0s4: $list[$k]["\151\x6d\x67\x75\162\x6c"] = Db::name("\x79\142\163\x63\137\151\155\x61\x67\145\x73")->where("\151\155\147\137\151\x64", $v["\x69\155\141\x67\145\x73"])->value("\151\155\x67\137\x63\x6f\166\x65\162"); goto DwrC5; yEs4_: lCzVA: goto d7a0K; DwrC5: $list[$k]["\165\x72\154"] = "\57\x79\x62\x5f\x73\x68\157\x70\57\x70\x61\147\x65\163\57\147\x6f\157\x64\163\57\144\145\x74\141\x69\x6c\57\x69\156\144\145\170\x3f\x69\x64\x3d" . $v["\x67\x6f\157\x64\163\x5f\151\x64"]; goto yEs4_; d7a0K: } goto ZjP1v; Mdh2p: } public function getArticleList($data) { goto JOk9l; KrAr9: ZH20l: goto BK08K; uBFny: foreach ($list as $k => $v) { goto JcsL8; HPejA: $list[$k]["\165\x72\x6c"] = "\x2f\x79\142\137\x73\x68\x6f\160\57\160\141\x67\145\163\57\x66\x69\x6e\144\x5f\x69\x6e\x66\x6f\x2f\x69\156\x64\x65\x78\x3f\x69\x64\75" . $v["\x61\162\x74\x69\143\154\x65\137\x69\144"]; goto voL3l; waNSl: akP7R: goto yZxR_; voL3l: glh60: goto waNSl; FWa1k: TpDZo: goto HPejA; COfeR: $list[$k]["\x75\162\154"] = "\x2f\x79\x62\x5f\163\150\x6f\160\57\x70\141\147\145\163\57\x77\145\142\57\151\156\144\x65\170\77\165\162\x6c\x3d" . $this->escape($v["\x6c\151\x6e\153"]) . "\46\x6e\141\x6d\x65\75" . $v["\x6e\141\155\145"]; goto q6Oqi; JcsL8: if (empty($v["\x6c\151\156\153"])) { goto TpDZo; } goto COfeR; q6Oqi: goto glh60; goto FWa1k; yZxR_: } goto KrAr9; BK08K: iVNCG: goto fxtJ7; O2h4K: if (empty($list)) { goto iVNCG; } goto uBFny; fxtJ7: return $list; goto NBJww; JOk9l: $list = Db::name("\x79\x62\163\x63\x5f\141\162\164\151\143\x6c\x65")->where($data)->field("\x74\x69\x74\x6c\x65\x20\141\x73\40\x6e\141\x6d\145\x2c\163\x68\x6f\x72\x74\137\164\x69\x74\154\145\x20\x61\x73\40\x64\145\163\143\x72\x69\160\164\151\x6f\156\x2c\151\155\141\147\145\x20\141\163\40\151\x6d\x67\165\162\154\54\141\x72\x74\151\x63\x6c\x65\137\151\144\54\x6c\151\x6e\153")->select(); goto O2h4K; NBJww: } public function getProductList($data) { goto KSSWr; RhwQj: return $list; goto te2WU; rSwqr: foreach ($list as &$v) { $v["\165\162\x6c"] = "\57\x79\142\x5f\163\x68\157\x70\57\160\x61\147\145\163\57\160\x72\x6f\x64\165\x63\x74\x2f\151\x6e\x66\157\x2f\151\156\x64\145\170\77\151\144\75" . $v["\x69\x64"]; QJ1t2: } goto SWBkc; SWBkc: uk8Y_: goto Yqn5_; KSSWr: $list = Db::name("\x79\x62\x73\143\137\x70\162\x6f\x64\x75\x63\x74")->where($data)->field("\x69\144\54\164\x69\164\154\145\x20\x61\163\40\156\x61\155\145\54\151\155\x61\x67\x65\40\141\163\x20\x69\x6d\147\165\162\154")->select(); goto mZu8v; Yqn5_: dFDn_: goto RhwQj; mZu8v: if (empty($list)) { goto dFDn_; } goto rSwqr; te2WU: } function escape($string, $in_encoding = "\125\x54\x46\55\70", $out_encoding = "\125\103\x53\55\x32") { goto gwhhk; Mrnha: OLKPP: goto D1NOe; EqrJ3: $return .= "\45" . strtoupper(bin2hex($str)); goto lwNND; pRgvs: if (strlen($str) > 1) { goto uTYA7; } goto EqrJ3; vccfs: $x++; goto GtM8F; maqLv: return $return; goto Iyk0K; D1NOe: yO2m8: goto maqLv; gwhhk: $return = ''; goto h3HaG; uk0c3: if (!($x < mb_strlen($string, $in_encoding))) { goto OLKPP; } goto Q7lsb; h3HaG: if (!function_exists("\155\142\137\147\x65\164\137\x69\x6e\x66\x6f")) { goto yO2m8; } goto HY98R; gZM7M: $return .= "\45\x75" . strtoupper(bin2hex(mb_convert_encoding($str, $out_encoding, $in_encoding))); goto Tukyr; GtM8F: goto sFGNp; goto Mrnha; qYgXO: uTYA7: goto gZM7M; Tukyr: ynySM: goto DZ1IQ; Q7lsb: $str = mb_substr($string, $x, 1, $in_encoding); goto pRgvs; HY98R: $x = 0; goto EQyaA; EQyaA: sFGNp: goto uk0c3; lwNND: goto ynySM; goto qYgXO; DZ1IQ: YfukG: goto vccfs; Iyk0K: } public function WriteBook($data) { goto mGreU; mGreU: $a = Db::name($this->bb)->where($data)->count(); goto NL8yl; FyicN: return -1; goto g5vJs; Wr5t3: $info = Db::name($this->bb)->insert($data); goto gmeyv; SGpAY: $data["\x63\162\145\x61\x74\145\137\164\x69\155\145"] = time(); goto Wr5t3; NL8yl: if (!($a > 0)) { goto n46qA; } goto FyicN; gmeyv: return $info; goto t2hLN; g5vJs: n46qA: goto SGpAY; t2hLN: } public function WriteComment($data) { goto Extfq; Oma1g: IjHgQ: goto J25h3; b235K: return $info; goto cumf6; Extfq: $a = Db::name($this->bc)->where($data)->count(); goto FtQnC; J25h3: $data["\143\162\x65\141\x74\x65\137\x74\151\155\x65"] = time(); goto u2eW6; ajMni: return -1; goto Oma1g; FtQnC: if (!($a > 0)) { goto IjHgQ; } goto ajMni; u2eW6: $info = Db::name($this->bc)->update($data); goto b235K; cumf6: } public function CommentList($data, $page, $num) { goto TvNxm; pUxWl: P7XKU: goto CI0mI; u37pM: $rs["\x69\x6e\146\157"] = $info; goto OUChf; pGaFt: TnB42: goto u37pM; o2iSe: $info = Db::name($this->bc)->where($data)->limit($num)->order("\x63\162\x65\x61\x74\x65\x5f\164\151\155\x65", "\x64\x65\x73\143")->select(); goto n9UyH; qqL0E: return json_encode($rs); goto m0RjA; adXn9: if (!empty($info)) { goto DAP9s; } goto xsRmK; ymktk: $rs["\x63\x6f\x75\x6e\164"] = Db::name($this->bc)->where($data)->count(); goto cWB_2; cWB_2: $num = Db::name($this->bc)->where($data)->avg("\146\x72\x61\x63\164\151\x6f\156") * 2; goto pTYXV; F0zt6: goto TFzBA; goto c3Ki0; mTjmS: foreach ($info as $key => $value) { goto PUQry; mwWKt: UY8U6: goto ZKvi5; UPCLq: $pic = explode("\x2c", rtrim($value->array_pic, "\x2c")); goto kmW4N; WshO_: Tv8b_: goto fSboy; JvdcX: $value->create_time = date("\131\55\155\x2d\x64", $value->create_time); goto WPwOh; QIZZQ: gWZLF: goto JvdcX; PUQry: if (!($value->array_pic != '')) { goto gWZLF; } goto UPCLq; kmW4N: $i = 0; goto QTuy9; LAlEr: dH6Yt: goto X7kyi; TMdcf: $value->username = $username["\x6e\x69\143\x6b\137\x6e\141\155\145"]; goto A7_s9; WPwOh: $username = $this->getUserInfo($value->user_id); goto TMdcf; kQeKJ: goto uRQBN; goto WshO_; fSboy: $value->pic = $pic; goto QIZZQ; X7kyi: $i++; goto kQeKJ; yG883: if (!($i < count($pic))) { goto Tv8b_; } goto G12XX; G12XX: $pic[$i] = "\x68\164\x74\160\x73\x3a\x2f\x2f" . $_SERVER["\110\124\124\120\x5f\x48\x4f\x53\124"] . "\x2f\141\x70\151\x2f" . $pic[$i]; goto LAlEr; QTuy9: uRQBN: goto yG883; A7_s9: $value->user_headimg = $username["\x75\163\145\x72\137\x68\145\141\144\151\x6d\x67"]; goto mwWKt; ZKvi5: } goto pGaFt; CI0mI: $info = Db::name($this->bc)->where($data)->page($page, PAGESIZE)->order("\x63\x72\x65\x61\x74\145\137\164\151\x6d\x65", "\144\x65\x73\143")->select(); goto cNhl_; c3Ki0: DAP9s: goto mTjmS; TvNxm: if ($num == 0) { goto P7XKU; } goto o2iSe; xsRmK: $rs["\x69\x6e\x66\x6f"] = array(); goto F0zt6; OUChf: TFzBA: goto ymktk; pTYXV: $rs["\x73\x72\x6f\x63\145"] = round($num, 2); goto qqL0E; cNhl_: IKTIG: goto adXn9; n9UyH: goto IKTIG; goto pUxWl; m0RjA: } public function getUserInfo($uid) { $info = Db::name($this->u)->where("\165\x69\x64", $uid)->find(); return $info; } public function mod_index($uid = '') { goto KTIjf; LqXFu: Cache::set($uid . "\x6d\157\x64\x69\x6e\144\145\170", $rs, CACHE_TIME); goto vJxFl; aRFfI: $m = Db::name($this->ut)->where("\x6d\143\150\137\x69\x64\x3d" . $uid)->find(); goto ucOBA; GtVpw: $rs = array(); goto aRFfI; KTIjf: $rs = Cache::get($uid . "\x6d\x6f\144\x69\156\144\x65\x78"); goto wpFJg; gkB8I: return $rs; goto RKRy3; vJxFl: return json_decode($rs); goto BtqHO; tTfPZ: foreach ($a["\141\154\154\x5f\144\x61\164\x61"] as $k => $v) { goto rp83N; HmwmU: if (!($v["\164\x79\x70\x65"] == "\145\144\x69\x74\x5f\x76\151\144\x65\157")) { goto mcx2d; } goto laW_s; XgGWH: cMs5r: goto TF9tQ; laW_s: if (!($v["\x76\x69\x64\x65\157\137\164\x79\x70\x65"] == 0)) { goto AkH9O; } goto v1yLk; TYO1K: foreach ($v["\x6c\151\163\x74"] as $k1 => $v2) { goto aHEo2; aHEo2: $goods_info = Db::name("\171\142\x73\x63\137\x67\157\157\x64\163")->field("\x67\157\x6f\144\163\x5f\156\141\155\x65\54\x70\162\x69\x63\145\x2c\x69\x6e\x74\162\157\144\165\x63\x74\x69\x6f\x6e\x2c\151\x6d\x67\137\151\x64\137\141\x72\x72\x61\x79")->where(["\155\143\x68\x5f\x69\144" => $uid, "\x67\x6f\157\144\163\137\x69\144" => $v2["\x70\141\162\x61\155"]])->find(); goto HV0Bp; dALkg: $v["\x6c\151\x73\164"][$k1]["\x64\145\163\143\x72\x69\x70\x74\151\x6f\x6e"] = $goods_info["\151\x6e\164\x72\x6f\x64\x75\143\164\151\157\156"]; goto dbbog; UjhUP: $v["\x6c\151\163\164"][$k1]["\156\141\155\145"] = $goods_info["\x67\x6f\157\144\x73\137\x6e\141\x6d\145"]; goto miaTt; HV0Bp: if (!empty($goods_info)) { goto TpEH0; } goto cxQg9; miaTt: $v["\154\151\163\x74"][$k1]["\x70\x72\x69\x63\x65"] = $goods_info["\160\x72\x69\143\x65"]; goto dALkg; cxQg9: goto Qp1y_; goto JQ2Nn; uXbI2: Qp1y_: goto ewcP3; JQ2Nn: TpEH0: goto JSOEM; dbbog: $v["\x6c\151\163\x74"][$k1]["\151\155\147\x75\162\x6c"] = $goods_image["\x69\x6d\x67\137\x63\157\x76\x65\162"]; goto uXbI2; ysm3i: $str1 = explode("\54", $str); goto VZiC0; JSOEM: $str = $goods_info["\151\x6d\x67\x5f\x69\x64\137\141\162\162\x61\171"]; goto ysm3i; VZiC0: $goods_image = Db::name("\x79\142\163\143\137\151\155\141\147\145\163")->field("\151\x6d\147\137\x63\x6f\166\x65\162")->where(["\151\x6d\147\x5f\x69\x64" => $str1[0]])->find(); goto UjhUP; ewcP3: } goto hIKU3; rp83N: if (!($v["\x74\171\160\x65"] == "\x67\157\x6f\x64\x73")) { goto xqhOM; } goto TYO1K; TF9tQ: $a["\141\154\x6c\137\x64\x61\x74\x61"][$k]["\x6c\151\163\x74"] = $v["\x6c\151\163\x74"]; goto KBep7; wRnpV: $rs = json_encode($a); goto lxrrY; NkVNo: $rs = json_encode($a); goto QupUR; cDe5p: q2XGl: goto FYOM6; KBep7: $rs = json_encode($a); goto yFmq1; yFmq1: uHEdv: goto CbiEk; CbiEk: if (!($v["\164\x79\160\145"] == "\160\162\157\144\165\x63\164\x5f\x6c\x69\163\x74")) { goto T_ryV; } goto iXwrM; mLRXp: foreach ($v["\x6c\x69\x73\164"] as $k1 => $v2) { goto WTk1F; q_RPu: iNNL6: goto YL36t; YL36t: $v["\x6c\x69\163\x74"][$k1]["\x6e\141\x6d\x65"] = $goods_info["\x74\151\164\x6c\x65"]; goto NyFR0; YY7so: goto q16Ur; goto q_RPu; WTk1F: $goods_info = Db::name("\171\x62\x73\x63\137\141\162\x74\151\x63\154\x65")->field("\x74\x69\x74\x6c\145\54\x73\150\157\x72\x74\x5f\164\151\x74\x6c\x65\x2c\151\x6d\141\x67\x65")->where(["\155\143\150\x5f\151\x64" => $uid, "\141\x72\164\x69\x63\x6c\x65\x5f\151\x64" => $v2["\160\141\x72\141\155"]])->find(); goto nELET; NyFR0: $v["\x6c\151\163\164"][$k1]["\144\145\163\x63\x72\151\160\164\151\157\156"] = $goods_info["\x73\150\157\162\x74\x5f\x74\151\164\154\145"]; goto pM6JJ; lXDYC: q16Ur: goto g4uV2; nELET: if (!empty($goods_info)) { goto iNNL6; } goto YY7so; pM6JJ: $v["\x6c\x69\x73\x74"][$k1]["\151\x6d\147\165\x72\x6c"] = $goods_info["\151\155\141\147\x65"]; goto lXDYC; g4uV2: } goto XgGWH; v1yLk: if (!array_key_exists("\164\170\x5f\165\162\x6c", $v)) { goto Sib3m; } goto zVsii; N4HfB: $rs = json_encode($a); goto gx5TS; zVsii: $tx_video = $this->get_tx_video($v["\164\170\x5f\x75\x72\x6c"]); goto GcESI; QupUR: xqhOM: goto wOSwN; wOSwN: if (!($v["\164\x79\160\145"] == "\141\162\x74\x69\143\x6c\145\x5f\x6c\151\x73\164")) { goto uHEdv; } goto mLRXp; gjlWn: $a["\x61\154\x6c\x5f\144\x61\x74\141"][$k]["\x6c\151\x73\x74"] = $v["\x6c\151\x73\x74"]; goto NkVNo; YZd8G: $a["\x61\x6c\x6c\137\x64\141\164\x61"][$k]["\154\151\x73\164"] = $v["\154\x69\163\164"]; goto N4HfB; GcESI: if (!($tx_video["\143\x6f\x64\145"] == 0)) { goto q2XGl; } goto e3gLy; FYOM6: $a["\141\154\x6c\137\144\141\x74\141"][$k] = $v; goto wRnpV; w8alG: Roqdd: goto miVY2; lxrrY: Sib3m: goto laCol; gx5TS: T_ryV: goto HmwmU; iXwrM: foreach ($v["\x6c\151\x73\x74"] as $k1 => $v2) { goto tIGVB; tIGVB: $goods_info = Db::name("\171\142\163\x63\137\160\x72\x6f\x64\x75\x63\164")->field("\164\151\x74\x6c\x65\54\x69\x6d\x61\147\145")->where(["\x6d\x63\x68\x5f\x69\x64" => $uid, "\151\x64" => $v2["\x70\x61\x72\141\x6d"]])->find(); goto fsVCB; op20V: goto IbE7P; goto EaJFJ; ogb10: IbE7P: goto EqE_C; QPcWP: $v["\x6c\151\x73\x74"][$k1]["\151\155\147\165\162\154"] = $goods_info["\151\x6d\141\x67\145"]; goto ogb10; c_nkW: $v["\x6c\x69\163\x74"][$k1]["\x6e\x61\155\x65"] = $goods_info["\164\x69\x74\154\145"]; goto QPcWP; fsVCB: if (!empty($goods_info)) { goto mlHuD; } goto op20V; EaJFJ: mlHuD: goto c_nkW; EqE_C: } goto k045v; laCol: AkH9O: goto pQ3YA; pQ3YA: mcx2d: goto w8alG; e3gLy: $v["\x75\162\154"] = $tx_video["\x72\145\141\154\137\165\162\x6c"]; goto cDe5p; k045v: UnE6O: goto YZd8G; hIKU3: tRMjp: goto gjlWn; miVY2: } goto AiFkM; AiFkM: qaz9J: goto LqXFu; ucOBA: if (!empty($m)) { goto Tv_SF; } goto ru844; wpFJg: if (!($rs != false)) { goto ub0Im; } goto gkB8I; yTnx4: $a = json_decode($rs, true); goto tTfPZ; ru844: return $m; goto nWzaP; nWzaP: Tv_SF: goto jS6mE; jS6mE: $rs = $m["\151\156\x64\x65\x78\137\x76\141\x6c\165\145\163"]; goto yTnx4; RKRy3: ub0Im: goto GtVpw; BtqHO: } public function get_tx_video($url) { goto Ce6e5; Ce6e5: $res = array("\143\x6f\x64\145" => 1); goto fzIhB; FOA9p: if (!empty($match)) { goto oRA3q; } goto EPrLB; mQFPl: oRA3q: goto I7I6m; I7I6m: $vid = $match[1]; goto KJPCw; EPrLB: $res["\155\163\x67"] = "\xe5\234\260\345\x9d\200\346\240\xbc\345\xbc\217\344\270\x8d\xe6\255\xa3\xe7\xa1\xae"; goto HIa6V; HIa6V: return $res; goto mQFPl; l4cQu: Wev8I: goto HrkXg; PBeab: preg_match("\x2f\134\x2f\x28\x5b\x30\x2d\71\141\x2d\172\x41\x2d\132\x5d\x2b\x29\x2e\150\164\x6d\154\x2f", $url, $match); goto FOA9p; fzIhB: if (!(strpos($url, "\166\56\161\161\x2e\143\x6f\155") !== false)) { goto Wev8I; } goto PBeab; KJPCw: try { goto HlG1l; d3IJK: if (isset($fi[1])) { goto di7T2; } goto XIMl6; OcHTE: $video_url = $url . $filename . "\77\166\153\x65\171\x3d" . $key; goto nf6TJ; wPI5T: $res["\x72\145\x61\154\x5f\165\x72\154"] = $video_url; goto hJZap; RpHrU: H0Wdg: goto VYdJP; PZNYk: $getinfo = "\x68\x74\164\160\x3a\x2f\x2f\166\x76\x2e\166\151\144\145\x6f\x2e\x71\161\x2e\x63\x6f\x6d\x2f\x67\x65\164\151\x6e\x66\x6f\x3f\166\x69\x64\163\x3d{$vid}\x26\x70\x6c\x61\164\x66\157\x72\155\x3d\61\x31\46\x63\150\x61\162\147\145\75\x30\46\x6f\164\171\160\x65\75\x78\x6d\x6c"; goto ySsEu; ff_1I: $info = $this->request2($getinfo); goto tlmQL; RBSrF: if (strlen($format_id) >= 5) { goto e7brV; } goto IGk32; VYdJP: $fi = $info_arr["\146\154"]["\146\x69"]; goto d3IJK; opOLf: goto q84df; goto DLTCP; IGk32: $mp4 = $vid . "\56\x6d\160\x34"; goto opOLf; HlG1l: set_time_limit(0); goto PZNYk; VK7Nw: $info_arr = $this->xmlToArray($info); goto nqqip; nk52U: $key = $info_arr["\x76\x6c"]["\x76\151"]["\x66\x76\153\x65\x79"]; goto a3ejb; ztm2N: $fmt = $fi[1]["\156\x61\155\x65"]; goto aAeHa; tlmQL: $info_arr = $this->xmlToArray($info); goto fHES9; fHES9: if (!(isset($info_arr["\155\x73\147"]) && $info_arr["\x6d\x73\147"] == "\166\x69\x64\40\151\163\x20\167\162\157\156\147")) { goto Y43ll; } goto eXJNu; aAeHa: $format = "\160" . substr($format_id, -3, 3); goto aYCQU; aYCQU: $key = $info_arr["\166\x6c"]["\x76\151"]["\x66\166\153\x65\171"]; goto Vac9Y; h_K2G: $video_url = $url . $mp4 . "\77\166\x6b\145\171\x3d" . $key . "\46\146\155\x74\x3d" . $fmt; goto EAjyp; AUAMa: di7T2: goto rM7TR; nqqip: if (!($info_arr["\x6d\x73\147"] == "\166\x69\x64\x20\151\x73\40\x77\x72\157\x6e\x67")) { goto H0Wdg; } goto Mph43; XIMl6: $getinfo = "\150\x74\x74\x70\72\57\57\x76\x76\56\166\151\144\x65\x6f\x2e\161\161\x2e\143\157\155\57\x67\145\x74\151\x6e\x66\157\x3f\166\x69\144\x73\75{$vid}\x26\160\x6c\141\x74\146\x6f\162\155\75\61\x30\x31\x30\x30\x31\46\143\x68\141\162\147\x65\x3d\60\46\157\x74\x79\160\x65\75\170\x6d\154"; goto ff_1I; BLtlF: $mp4 = $vid . "\56" . $format . "\56\61\x2e\155\160\x34"; goto IDAn7; rM7TR: $format_id = $fi[1]["\151\x64"]; goto ztm2N; Vac9Y: $vid = $info_arr["\166\x6c"]["\166\x69"]["\x76\151\x64"]; goto C1vWf; zKPMM: $filename = $info_arr["\166\154"]["\166\151"]["\146\156"]; goto nk52U; C1vWf: $url = $info_arr["\x76\x6c"]["\x76\151"]["\165\x6c"]["\165\x69"][0]["\165\x72\154"]; goto RBSrF; a3ejb: $url = $info_arr["\x76\154"]["\x76\151"]["\165\154"]["\x75\x69"][0]["\x75\162\154"]; goto OcHTE; Mph43: $res["\155\x73\x67"] = "\xe8\247\206\351\242\x91\345\207\xba\xe9\224\x99"; goto iZ7NB; EAjyp: HZRGP: goto ZLarV; eXJNu: $res["\x6d\163\147"] = "\350\xa7\206\xe9\242\221\345\x87\272\351\224\x99"; goto hsOhL; Px5H2: Y43ll: goto zKPMM; hsOhL: return $res; goto Px5H2; iZ7NB: return $res; goto RpHrU; DLTCP: e7brV: goto BLtlF; hJZap: return $res; goto oKerb; ySsEu: $info = $this->request2($getinfo); goto VK7Nw; IDAn7: q84df: goto h_K2G; nf6TJ: goto HZRGP; goto AUAMa; MwU6_: $res["\143\x6f\x6d\160\x61\x6e\x79"] = "\350\205\xbe\350\xae\257"; goto wPI5T; ZLarV: $res["\143\157\144\145"] = 0; goto MwU6_; oKerb: } catch (\Exception $e) { $res["\x6d\x73\147"] = "\xe8\xa7\x86\xe9\xa2\221\350\247\243\xe6\x9e\x90\xe5\244\261\xe8\264\245\xef\xbc\x8c\350\xaf\267\xe9\207\215\xe8\xaf\225"; return $res; } goto l4cQu; HrkXg: } public function request2($url, $param = array()) { goto lSfsn; DFidD: if (empty($param)) { goto QjI81; } goto ZNjaQ; Yj8N1: $ch = curl_init(); goto yjEws; aSLbn: foreach ($param as $k => $v) { $o .= "{$k}\x3d" . urlencode($v) . "\x26"; eOeqM: } goto l5gxt; yjEws: curl_setopt($ch, CURLOPT_URL, $url); goto s8zNc; Deazy: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); goto M8XJd; m7pXT: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); goto Deazy; REi29: curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data); goto Ojdc1; p0l2C: return false; goto tF833; CkOxX: curl_setopt($ch, CURLOPT_HEADER, 0); goto WD22H; Ojdc1: QjI81: goto Q58kS; s8zNc: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto CkOxX; Ur8An: $post_data = substr($o, 0, -1); goto J_n7v; lSfsn: if (!empty($url)) { goto zvIN0; } goto p0l2C; GwJoG: curl_close($ch); goto zUldv; J_n7v: curl_setopt($ch, CURLOPT_POST, 1); goto REi29; l5gxt: em_NH: goto Ur8An; M8XJd: lj1RQ: goto DFidD; Q58kS: $output = curl_exec($ch); goto GwJoG; WD22H: if (!(substr($url, 0, 8) == "\x68\164\x74\160\163\x3a\57\x2f")) { goto lj1RQ; } goto m7pXT; zUldv: return $output; goto FBBJz; ZNjaQ: $o = ''; goto aSLbn; tF833: zvIN0: goto Yj8N1; FBBJz: } public function xmlToArray($xml) { goto JXHAz; JXHAz: libxml_disable_entity_loader(true); goto xgjYC; xgjYC: $values = json_decode(json_encode(simplexml_load_string($xml, "\x53\151\x6d\x70\x6c\145\x58\115\114\105\x6c\x65\x6d\x65\156\x74", LIBXML_NOCDATA)), true); goto cn7hg; cn7hg: return $values; goto HbGkK; HbGkK: } public function get_power($data) { goto l5vGG; n2I0I: $rs = json_decode($m["\151\x6e\144\x65\x78\x5f\x76\141\154\165\x65\x73"], true); goto VPb0H; pfD1D: TvDcA: goto n2I0I; jMTKK: return $rs; goto A3jg8; cT71a: return $m; goto pfD1D; l5vGG: $m = Db::name($this->bt)->where($data)->where("\151\x73\137\144\145\x6c", 1)->find(); goto c7t1q; VPb0H: $rs["\156\x61\x6d\x65"] = $m["\x6e\x61\155\145"]; goto jMTKK; c7t1q: if (!empty($m)) { goto TvDcA; } goto cT71a; A3jg8: } public function get_menu($uid = '') { goto gVw3Y; tB9B4: if (!empty($m)) { goto ap1X6; } goto pZg_Y; pZg_Y: return $m; goto MFzai; MFzai: ap1X6: goto ezEFl; ezEFl: $rs = $m["\166\141\154\165\x65\163"]; goto QImH9; QImH9: return json_decode($rs); goto WNXWN; gVw3Y: $m = Db::name($this->ut)->where("\155\143\150\x5f\x69\144\x3d" . $uid)->find(); goto tB9B4; WNXWN: } public function get_tabbar($uid = '', $config_page = 0) { goto o3t6o; sPFCP: $info = Db::name("\171\x62\x73\143\137\143\157\156\x66\x69\x67")->where($condition)->find(); goto fKaml; o3t6o: $m = Db::name($this->ut)->where("\x6d\x63\x68\x5f\x69\144\x3d" . $uid)->find(); goto qQnVg; qQnVg: if (!empty($m)) { goto tMApa; } goto JMao0; Y0EU7: $index_values = $m["\x69\x6e\x64\145\170\x5f\x76\141\x6c\x75\145\x73"]; goto bFFSb; aDNT7: if (empty($index_values["\160\x61\147\145"])) { goto G2i3H; } goto ZCxDN; oclTR: return $rs; goto CZJQh; bFFSb: $index_values = json_decode($index_values, true); goto aDNT7; fKaml: $info["\x76\141\154\x75\x65"] = json_decode($info["\166\x61\x6c\165\145"], true); goto qHKnb; wb0FA: tMApa: goto BTzE7; JMao0: return $m; goto wb0FA; ZCxDN: $rs = $config_page == 0 ? $index_values : $index_values["\160\x61\147\145"]; goto loTo1; GRlLK: $condition["\155\x63\150\x5f\x69\144"] = array("\145\x71", $uid); goto ajI1P; qHKnb: $rs["\x68\x6f\x6d\145\137\x70\x6f\167\x65\162"] = isset($info["\x76\141\x6c\x75\145"]["\x48\117\115\x45\137\120\117\127\x45\122"]) ? $info["\x76\141\x6c\165\x65"]["\x48\117\x4d\105\x5f\120\x4f\x57\105\x52"] : "\60"; goto oclTR; ajI1P: $condition["\153\x65\171"] = array("\145\161", "\127\130\120\x41\x59"); goto sPFCP; loTo1: G2i3H: goto GRlLK; BTzE7: $rs = array(); goto Y0EU7; CZJQh: } public function get_form($data) { goto v3P2W; P3VYv: return $m; goto j22Rq; As02T: return $rs; goto QEaBH; M5sIo: $rs["\x6c\x69\163\164"] = json_decode($m["\x76\141\154\x75\x65"]); goto UClQQ; bpbdp: $m = Db::name($this->bf)->where($data)->find(); goto d9yPZ; v3P2W: $data["\151\163\x5f\144\x65\154"] = 1; goto bpbdp; d9yPZ: if (!empty($m)) { goto Vv5k1; } goto P3VYv; UClQQ: $rs["\164\151\164\154\145"] = $m["\x74\151\x74\x6c\145"]; goto As02T; j22Rq: Vv5k1: goto M5sIo; QEaBH: } function in_form($form, $name) { goto iJXTG; Lmtyf: tuCCN: goto CAx38; szx21: if (!($form[$i]["\156\141\155\x65"] == $name)) { goto b7nHZ; } goto T1Yx6; a2bmW: return $title; goto bVyxO; pF7v1: sFqx6: goto cTB_N; cTB_N: if (!($i < count($form))) { goto RIElk; } goto szx21; m3RbA: RIElk: goto a2bmW; iJXTG: $title = ''; goto tx2MY; e3zid: goto RIElk; goto HTP99; a7MZU: goto sFqx6; goto m3RbA; HTP99: b7nHZ: goto Lmtyf; tx2MY: $i = 0; goto pF7v1; T1Yx6: $title = $form[$i]["\164\151\x74\154\x65"]; goto e3zid; CAx38: $i++; goto a7MZU; bVyxO: } public function submit_form($data) { goto RTjeJ; RTjeJ: $time = time(); goto a1PoL; nM6Sq: $where = ["\142\x75\163\x5f\x66\157\162\x6d\x5f\x69\x64" => $data["\142\x75\x73\x5f\x66\x6f\x72\x6d\137\151\x64"], "\x75\163\x65\x72\137\151\144" => $data["\165\x73\x65\162\x5f\151\144"], "\x6d\x63\150\137\x69\144" => $data["\155\x63\x68\137\x69\x64"], "\x70\x61\x72\141\155" => json_encode($arr)]; goto Ye4sN; qZJZu: foreach ($param as $k => $v) { goto flzZt; jC5i2: $arr[$n]["\164\151\164\154\x65"] = $this->in_form($form, $k); goto QRHWK; QRHWK: $n++; goto WcsNA; W2HVp: $arr[$n]["\166\141\x6c\x75\x65"] = $v; goto jC5i2; WcsNA: clfRh: goto r63p5; flzZt: $arr[$n]["\x6e\x61\155\x65"] = $k; goto W2HVp; r63p5: } goto VpDV8; a1PoL: $form = json_decode($data["\146\157\162\155"], true); goto pLw8p; yNGlI: $arr = array(); goto N4ZXp; er8RZ: $form_id = Db::name("\171\142\x73\x63\x5f\x75\163\x65\x72\137\146\157\x72\155")->insertGetId($where); goto xpRip; Ye4sN: $a = Db::name("\x79\x62\163\143\137\x75\163\x65\162\137\146\x6f\x72\x6d")->where($where)->count(); goto zvq1S; l5d9d: if (!(count($param) == 0)) { goto OpAi6; } goto o_hcQ; xpRip: return $form_id; goto fopK1; zvq1S: $where["\143\162\x65\x61\x74\145\137\x74\x69\155\x65"] = $time; goto er8RZ; VpDV8: lEOK2: goto nM6Sq; N4ZXp: $n = 0; goto qZJZu; o_hcQ: return null; goto C6jwb; C6jwb: OpAi6: goto yNGlI; pLw8p: $param = json_decode($data["\x70\x61\162\141\x6d"], true); goto l5d9d; fopK1: } public function get_ucenter($mch_id, $uid) { goto KI_zn; UPc3U: $array = json_decode($m["\x69\x6e\x64\145\x78\x5f\x76\x61\x6c\165\145\163"], true); goto MISP6; k3N9O: $rs = json_encode($center_values_array); goto Nztba; KI_zn: $m = Db::name($this->ut)->where("\155\x63\150\x5f\151\144\x3d" . $mch_id)->find(); goto kB6Gw; Nztba: return $rs; goto On03B; mpJM9: $center_values_array["\x6c\x6f\x67\151\x6e\x5f\x69\x6d\x67"] = $array_img; goto k3N9O; MISP6: $array_img = $array["\160\x61\147\145"]["\x6c\x6f\x67\x69\x6e\x5f\151\x6d\x67"]; goto pF0tU; kB6Gw: if (!empty($m)) { goto c9gef; } goto UgtJo; pF0tU: $center_values_array = json_decode($m["\x63\x65\156\x74\x65\x72\137\x76\141\154\165\145\x73"], true); goto mpJM9; UsdJ7: c9gef: goto UPc3U; UgtJo: return $m; goto UsdJ7; On03B: } }
