<?php
 namespace app\web\controller; require_once APP_PATH . "\167\145\142\x2f\163\x65\162\x76\151\x63\x65\57\x55\163\145\162\127\145\x62\56\160\150\x70"; use think\Controller; use think\Session; use app\web\service\Wechat; use app\web\service\UserWeb; class User extends Controller { public function Login($code) { goto KJ5X2; ju3p9: $result = $userWeb->checkUserByOpenid($we_chat_user_info["\x6f\x70\145\x6e\x69\x64"]); goto Bcc2V; X6pcl: uaGR5: goto fpjSc; bxyqX: $uid = $userWeb->addUser($data); goto olI9Y; scN6B: $result = $userWeb->checkUser($unionid); goto FZKsR; qAc70: goto Kj3JO; goto pADOI; VkLab: w3y2P: goto Bh12H; E5sBZ: if (!empty($page)) { goto V2FGR; } goto MFHRE; gbLEV: V2FGR: goto t78rz; olI9Y: goto cpGH2; goto bIAzK; G3nNT: $unionid = ''; goto p7eHW; O9D2V: if (!empty($pid)) { goto uaGR5; } goto MzMyb; p7eHW: if (!in_array("\x75\x6e\151\157\x6e\151\144", $we_chat_user_info_key)) { goto w3y2P; } goto GTDcx; KJ5X2: $we_chat = new Wechat(); goto k2tCv; Bcc2V: goto sTCN5; goto FRlFx; kg0rv: Kj3JO: goto LBQ5r; gMa0o: if (!empty($result)) { goto kiUh0; } goto h9B5O; h9B5O: $pid = Session::get("\x70\151\144"); goto O9D2V; FRlFx: FTLbw: goto scN6B; GTDcx: $unionid = $we_chat_user_info["\x75\x6e\151\157\x6e\x69\x64"]; goto VkLab; LBQ5r: $page = Session::get("\160\141\x67\x65"); goto E5sBZ; Bh12H: if (!empty($unionid)) { goto FTLbw; } goto ju3p9; MFHRE: $page = "\171\x62\137\163\x68\x6f\x70\57\160\x61\147\145\x73\57\x69\156\144\145\x78\57\x69\156\x64\145\x78"; goto gbLEV; s6AbA: $host = $_SERVER["\x48\124\124\x50\137\x48\117\123\124"]; goto qAc70; L4U3D: $uid = $result; goto PM_RS; pADOI: t5DgR: goto Qq1ZY; k2tCv: $access_token = $we_chat->getAccessToken($code); goto GWNgn; GWNgn: $we_chat_user_info = $we_chat->getWeChatUserInfo($access_token["\141\x63\143\145\x73\163\137\x74\x6f\x6b\x65\x6e"], $access_token["\x6f\x70\x65\x6e\151\144"]); goto EjY2i; lq0FE: $we_chat_user_info_key = array_keys($we_chat_user_info); goto G3nNT; MsoYz: header("\114\x6f\143\141\x74\x69\x6f\156\x3a{$url}"); goto wF1wM; dZ7tp: if (isset($_SERVER["\110\x54\124\x50\x5f\130\137\122\x45\101\x4c\x5f\110\x4f\123\x54"])) { goto t5DgR; } goto s6AbA; fpjSc: $data = ["\165\x73\145\x72\137\150\x65\141\x64\x69\155\147" => $we_chat_user_info["\x68\145\x61\144\x69\x6d\x67\165\x72\x6c"], "\156\x69\143\153\137\156\x61\155\145" => $we_chat_user_info["\156\x69\143\153\156\141\155\x65"], "\167\x78\x5f\157\x70\145\x6e\x69\144" => $we_chat_user_info["\x6f\x70\145\156\x69\144"], "\x6d\143\x68\137\151\144" => $mch_id, "\x72\145\147\137\x74\151\155\145" => time(), "\151\163\x5f\x64\151\x73\x74\x72\151\x62\x75\164\157\162" => 0, "\160\x69\x64" => $pid, "\167\170\137\165\x6e\x69\x6f\x6e\x69\x64" => $unionid]; goto bxyqX; uv1t4: $mch_id = Session::get("\155\x63\x68\137\x69\144"); goto gMa0o; Qq1ZY: $host = $_SERVER["\x48\x54\x54\120\x5f\130\x5f\x52\105\101\x4c\137\x48\117\123\x54"]; goto kg0rv; MzMyb: $pid = 0; goto X6pcl; EjY2i: $userWeb = new UserWeb(); goto lq0FE; t78rz: $url = "\150\164\164\160\163\72\57\x2f" . $host . "\x2f\141\x64\x64\x6f\156\x73\57\171\142\x5f\x73\150\157\x70\x2f\x63\x6f\x72\x65\x2f\167\x65\142\x2f\151\156\x64\145\170\x2e\150\164\155\x6c\x3f\x23\41{$page}\46\x6d\x63\150\137\x69\x64\75{$mch_id}\x26\x75\x69\144\75{$uid}"; goto MsoYz; PM_RS: cpGH2: goto dZ7tp; FZKsR: sTCN5: goto uv1t4; bIAzK: kiUh0: goto L4U3D; wF1wM: } }
