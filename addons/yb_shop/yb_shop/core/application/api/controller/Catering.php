<?php
 namespace app\api\controller; use think\Request; use think\Db; use think\Log; use app\api\service\CateringService; use think\Session; use think\Cache; class Catering extends BaseController { public function VoiceCall() { goto vDHZ1; vQzqE: FRMI5: goto F2Vai; FrVZj: x6SaS: goto z9OHh; otRPz: Ox5Ge: goto pn3dF; vxRCr: Cache::set("\x65\170\x70\151\x72\145\137\x74\151\x6d\x65\x5f" . $data["\x64\x65\x73\153\137\151\x64"] . "\137" . $data["\143\x61\154\x6c\137\164\171\x70\x65"], time() + 300); goto rxyuU; z9OHh: $rs["\x63\x6f\144\x65"] = 1; goto RRe3R; Gduv6: $result = $this->checkParam($rule, $data); goto Qk6xj; tMm1q: $rs["\143\x6f\144\145"] = 1; goto D6gTq; Qk6xj: if (empty($result)) { goto Ox5Ge; } goto tMm1q; vDHZ1: $rs = array("\143\x6f\x64\145" => 0, "\x69\x6e\x66\157" => array()); goto vyQua; D6gTq: $rs["\155\x73\x67"] = $result; goto Ojzuy; joyu7: $info = $order->VoiceCall($data); goto H9bH2; VrG0a: $rule = [["\144\145\x73\x6b\137\x69\x64", "\162\145\161\x75\x69\162\x65\174\156\x75\x6d\x62\x65\162"], ["\143\x61\x6c\154\x5f\x74\x79\x70\145", "\x72\x65\161\165\151\x72\145\174\x6e\165\155\x62\145\x72"], ["\x6d\143\x68\137\x69\x64", "\162\x65\161\165\x69\x72\145", "\xe4\xb8\x8d\345\255\x98\xe5\x9c\xa8\345\225\x86\xe6\210\267"]]; goto Gduv6; zRUcA: goto FRMI5; goto FrVZj; bXVCX: $data = ["\x64\145\x73\x6b\x5f\151\x64" => Request::instance()->param("\x64\x65\163\153\137\151\x64"), "\155\x63\150\x5f\151\144" => $mch_id, "\143\x61\x6c\x6c\137\164\171\x70\x65" => Request::instance()->param("\x63\x61\x6c\154\x5f\x74\x79\160\145")]; goto VrG0a; H9bH2: return AjaxReturn($info); goto zRUcA; RRe3R: $rs["\155\x73\147"] = "\xe6\x82\250\346\223\215\xe4\xbd\234\xe5\244\252\351\xa2\x91\xe7\271\201\357\274\214\xe8\xaf\xb7\xe4\xba\216\65\xe5\210\206\xe9\x92\x9f\345\220\x8e\xe9\x87\215\xe8\xaf\x95"; goto aEtve; vyQua: $app_id = Request::instance()->param("\151"); goto xSp7q; xSp7q: $mch_id = $this->getMchId($app_id); goto bXVCX; pn3dF: if (Cache::get("\145\x78\x70\151\162\x65\137\164\x69\x6d\145\137" . $data["\144\x65\x73\x6b\x5f\151\x64"] . "\x5f" . $data["\143\x61\154\x6c\x5f\x74\171\160\145"]) && Cache::get("\x65\170\160\151\x72\x65\137\164\x69\155\x65\137" . $data["\x64\x65\163\x6b\x5f\151\x64"] . "\x5f" . $data["\143\141\154\x6c\x5f\164\x79\160\x65"]) > time()) { goto x6SaS; } goto vxRCr; rxyuU: $order = new CateringService(); goto joyu7; Ojzuy: return json_encode($rs); goto otRPz; aEtve: return json_encode($rs); goto vQzqE; F2Vai: } public function CreateOrder() { goto oQxPJ; tEJJQ: if (empty($result)) { goto oxxhQ; } goto StKcE; B1Mkx: ESRU6: goto flQg5; hggEp: if (!($data["\x64\x69\163\x63\157\x75\156\164\x5f\155\157\x6e\145\x79"] != "\x30\x2e\60\x30" && $data["\x63\x6f\x75\160\157\156\137\155\x6f\156\145\x79"] != "\x30\x2e\x30\60")) { goto iP3kE; } goto FOK9N; VGEEj: $info = $order->createOrder($data); goto vLxBm; Jre0Y: $rs["\x6d\x73\147"] = $result; goto P0zAQ; qrJZu: $rs["\143\157\144\145"] = 1; goto g3Dcp; StKcE: $rs["\x63\x6f\x64\x65"] = 1; goto Jre0Y; Z0Xz8: return json_encode($rs); goto N4nMJ; g3Dcp: $rs["\x6d\163\147"] = "\347\x94\237\346\x88\x90\350\xae\xa2\xe5\215\x95\xe5\xa4\xb1\xe8\xb4\xa5"; goto LFC86; PG9Ej: iP3kE: goto keKpw; flQg5: $rs["\151\156\x66\x6f"] = $info; goto Z0Xz8; Mjqyj: $mch_id = $this->getMchId($app_id); goto Uv4aD; fYsRg: Log::write("\347\224\237\346\210\220\350\xae\242\xe5\x8d\225\345\244\261\xe8\264\245\40\55\x2d" . $data["\165\163\145\x72\x5f\x69\144"], "\x6f\162\144\x65\162\x5f\x63\162\x65\141\x74\145\x5f\x65\x72\162\157\x72"); goto qrJZu; oQxPJ: $rs = array("\x63\x6f\144\x65" => 0, "\151\x6e\x66\x6f" => array()); goto X7pik; PL2I7: oxxhQ: goto eD2VW; eD2VW: $order = new CateringService(); goto VGEEj; X7pik: $app_id = Request::instance()->param("\151"); goto Mjqyj; Uv4aD: $data = ["\x6f\162\x64\145\x72\137\x6e\157" => $this->createOrderNo(), "\157\165\164\137\164\x72\x61\144\x65\137\x6e\157" => $this->createOutTradeNo(), "\x62\x75\171\x65\162\x5f\x6d\x65\163\163\x61\x67\145" => Request::instance()->param("\142\x75\x79\x65\162\x5f\x6d\x65\163\163\x61\147\x65", ''), "\144\x69\x73\143\157\x75\x6e\164\137\x6d\x6f\156\145\x79" => Request::instance()->param("\x64\x69\163\x63\x6f\165\x6e\164\137\x6d\x6f\156\145\171", "\x30\56\x30\60"), "\x63\157\165\x70\x6f\x6e\137\151\x64" => Request::instance()->param("\143\x6f\x75\160\157\156\x5f\151\x64", 0), "\x63\157\165\x70\157\156\x5f\x6d\157\x6e\x65\x79" => Request::instance()->param("\143\x6f\x75\x70\x6f\156\137\155\x6f\x6e\x65\171", "\60\x2e\x30\60"), "\x63\x72\145\x61\x74\145\x5f\x74\x69\x6d\x65" => time(), "\165\x73\x65\x72\x5f\151\144" => Request::instance()->param("\x62\165\x79\145\x72\137\151\x64"), "\x64\145\x73\153\x5f\151\144" => Request::instance()->param("\x64\x65\163\153\137\151\144"), "\x6f\162\x64\145\162\137\x6d\x6f\x6e\x65\171" => Request::instance()->param("\157\162\144\145\x72\137\155\157\x6e\145\171"), "\160\x61\171\137\155\x6f\156\x65\171" => Request::instance()->param("\x70\141\x79\137\x6d\157\156\x65\x79"), "\157\162\x64\x65\x72\137\x64\x69\x73\x68\x5f\x6a\x73\x6f\x6e" => Request::instance()->param("\x6f\x72\x64\x65\x72\x5f\x64\x69\x73\x68\137\152\x73\x6f\156"), "\141\143\164\x69\166\x69\x74\171\x5f\157\162\144\x65\162\137\x74\171\x70\x65" => Request::instance()->param("\141\143\164\151\x76\x69\164\x79\x5f\157\x72\144\145\162\137\164\x79\x70\145", 0), "\155\x63\x68\137\x69\144" => $mch_id, "\160\x61\x79\x5f\x74\171\x70\x65" => Request::instance()->param("\x70\x61\x79\137\164\x79\x70\x65", 1), "\x74\x6f\x74\x61\x6c" => Request::instance()->param("\x74\157\x74\141\154")]; goto hggEp; FOK9N: $data["\141\143\x74\x69\x76\151\x74\171\137\x6f\162\144\x65\x72\137\164\x79\x70\145"] = 4; goto PG9Ej; keKpw: $rule = [["\165\163\x65\162\x5f\151\x64", "\162\145\x71\165\151\162\145\174\156\x75\155\x62\x65\x72"], ["\x6f\162\x64\145\x72\x5f\x6d\157\156\x65\171", "\162\145\x71\x75\x69\162\145\174\x6e\x75\x6d\142\x65\x72"], ["\160\141\x79\137\x6d\157\156\x65\171", "\x72\x65\161\x75\151\162\145\x7c\156\x75\x6d\142\145\162"], ["\157\162\x64\x65\x72\x5f\x64\151\x73\150\137\152\163\157\x6e", "\x72\x65\161\x75\151\162\145"], ["\155\143\150\x5f\151\x64", "\162\145\x71\x75\151\162\145", "\xe4\270\x8d\xe5\255\x98\345\234\250\345\x95\206\xe6\210\267"]]; goto trs9m; trs9m: $result = $this->checkParam($rule, $data); goto tEJJQ; P0zAQ: return json_encode($rs); goto PL2I7; LFC86: return json_encode($rs); goto B1Mkx; vLxBm: if (!empty($info)) { goto ESRU6; } goto fYsRg; N4nMJ: } public function OrderList() { goto yJYcS; rUToC: $mch_id = $this->getMchId($app_id); goto IFI5e; U4LKQ: alB5k: goto eALXg; Hsjvb: $page = Request::instance()->param("\x70\141\x67\x65", 1); goto wNEtD; wNEtD: $app_id = Request::instance()->param("\151"); goto rUToC; abHth: $uid = Request::instance()->param("\x75\x69\144"); goto k_jVX; pzR39: if ($status != null) { goto alB5k; } goto lAqDb; mfstl: $info = $order->orderList($data, $page); goto DxDnk; DxDnk: $rs["\x69\x6e\x66\x6f"] = $info; goto ndxY5; S_421: $rs["\x6d\163\x67"] = $result; goto DTb13; k_jVX: $status = Request::instance()->param("\163\x74\141\164\x75\x73", null); goto Hsjvb; dCAqf: if (empty($result)) { goto bDGYB; } goto z62Gy; pqxI4: Iplh5: goto S2a_v; u6TBm: $data = ["\x75\x73\x65\x72\x5f\x69\x64" => $uid, "\x6d\143\x68\137\151\x64" => $mch_id]; goto pzR39; ndxY5: return json_encode($rs); goto Dn5AG; IFI5e: $rule = [["\x75\x73\x65\x72\137\x69\144", "\x72\x65\161\165\151\162\145", "\165\151\x64\344\270\215\xe8\x83\275\344\xb8\xba\xe7\xa9\272"], ["\155\x63\150\137\151\x64", "\x72\145\161\x75\151\162\145", "\344\270\x8d\xe5\xad\x98\345\234\250\345\225\206\xe6\x88\267"]]; goto u6TBm; yJYcS: $rs = array("\143\x6f\x64\145" => 0, "\151\x6e\146\x6f" => array()); goto abHth; Qx_LD: vLsaP: goto pqxI4; wTB05: uYHJw: goto yc6uq; yc6uq: $data["\157\162\x64\145\x72\x5f\x73\164\141\x74\165\x73"] = ["\151\156", [4, 5]]; goto Qx_LD; S2a_v: $result = $this->checkParam($rule, $data); goto dCAqf; VXjEQ: bDGYB: goto xC1G1; z62Gy: $rs["\x63\x6f\144\x65"] = 1; goto S_421; eALXg: if ($status == 4) { goto uYHJw; } goto P3Msm; xC1G1: $order = new CateringService(); goto mfstl; xSsOv: goto vLsaP; goto wTB05; lAqDb: $data["\157\162\x64\145\162\137\163\x74\x61\x74\165\x73"] = ["\74\76", "\x2d\61"]; goto ZiOFY; DTb13: return json_encode($rs); goto VXjEQ; P3Msm: $data["\157\x72\x64\x65\162\x5f\163\x74\x61\164\x75\x73"] = $status; goto xSsOv; ZiOFY: goto Iplh5; goto U4LKQ; Dn5AG: } public function GetOrder() { goto sGjAt; sGjAt: $rs = array("\x63\x6f\144\145" => 0, "\x69\x6e\146\157" => array()); goto L9jjG; poCoP: $rs["\x6d\x73\x67"] = $result; goto fx1Xc; Xqn7S: YUEP_: goto OgxkD; FiQqk: return json_encode($rs); goto ntqOD; LnN9X: $result = $this->checkParam($rule, $data); goto P3LCr; QC_Om: $mch_id = $this->getMchId($app_id); goto CBHtM; CBHtM: $rule = [["\165\163\x65\162\x5f\x69\x64", "\162\x65\x71\x75\x69\x72\145", "\165\x69\x64\xe4\xb8\215\xe8\x83\275\xe4\270\xba\xe7\251\xba"]]; goto to8KF; U5Wq4: $rs["\x63\x6f\144\145"] = 1; goto poCoP; Qdlnw: $info = $order->getOrder($data); goto jxFaB; fx1Xc: return json_encode($rs); goto Xqn7S; OgxkD: $order = new CateringService(); goto Qdlnw; jxFaB: $rs["\151\x6e\x66\157"] = $info; goto FiQqk; L9jjG: $app_id = Request::instance()->param("\x69"); goto QC_Om; to8KF: $data = ["\165\163\x65\x72\x5f\x69\144" => Request::instance()->param("\x62\x75\171\145\x72\137\151\144"), "\157\x72\144\x65\162\x5f\x69\x64" => Request::instance()->param("\157\162\x64\145\162\x5f\x69\x64"), "\x6d\x63\150\x5f\151\x64" => $mch_id]; goto LnN9X; P3LCr: if (empty($result)) { goto YUEP_; } goto U5Wq4; ntqOD: } public function SignOrder() { goto aTEBF; y1PnO: $result = $this->checkParam($rule, $data); goto LjMTN; ok6ix: return json_encode($rs); goto b1wc5; GpB6y: $data = ["\165\163\x65\162\x5f\x69\x64" => Request::instance()->param("\142\x75\x79\145\162\x5f\151\x64"), "\157\162\x64\x65\162\137\x69\144" => Request::instance()->param("\157\x72\144\x65\162\x5f\x69\144"), "\157\x72\144\x65\162\x5f\163\x74\141\x74\165\x73" => 2]; goto y1PnO; idVhA: nnrMs: goto YnAsC; GAukP: $rs["\143\x6f\x64\145"] = 1; goto VIJRl; aTEBF: $rs = array("\x63\x6f\x64\x65" => 0, "\x69\156\146\x6f" => array()); goto JrBUF; e8Kpw: $info = $order->signOrder($data); goto bqS6K; LjMTN: if (empty($result)) { goto nnrMs; } goto GAukP; bqS6K: $rs["\x69\x6e\146\157"] = $info; goto ok6ix; VIJRl: $rs["\155\163\147"] = $result; goto Iby74; YnAsC: $order = new CateringService(); goto e8Kpw; Iby74: return json_encode($rs); goto idVhA; JrBUF: $rule = [["\165\x73\145\162\x5f\151\x64", "\x72\x65\x71\x75\151\x72\145"], ["\x6f\162\144\x65\x72\x5f\x69\144", "\162\x65\161\165\x69\x72\x65"]]; goto GpB6y; b1wc5: } public function CancelOrder() { goto rpSr_; P1Qvk: $info = $order->cancelOrder($data); goto uKW7M; aghQJ: return json_encode($rs); goto aW2Rc; TzQZh: $rule = [["\x75\163\145\162\x5f\151\144", "\x72\x65\x71\x75\151\x72\x65"], ["\x6f\162\x64\145\162\137\151\x64", "\162\x65\x71\x75\x69\162\145"]]; goto o6yZb; aW2Rc: CzLGN: goto sUPh2; o6yZb: $data = ["\165\x73\x65\x72\x5f\x69\144" => Request::instance()->param("\x62\165\x79\145\x72\x5f\x69\x64"), "\x6f\x72\x64\x65\x72\x5f\x69\144" => Request::instance()->param("\157\162\x64\x65\162\x5f\x69\144"), "\157\x72\144\x65\162\137\163\x74\141\164\x75\x73" => 1]; goto fE9xP; pP0Nr: return json_encode($rs); goto J7r23; HbQde: $rs["\155\163\x67"] = "\xe8\256\242\345\x8d\225\xe5\217\226\346\266\x88\xe5\xa4\261\xe8\xb4\xa5"; goto pP0Nr; VtweB: $rs["\143\157\144\x65"] = 1; goto Ax3CU; pogoI: $rs["\143\157\x64\x65"] = 1; goto HbQde; r2q72: $rs["\x69\x6e\x66\x6f"] = $info; goto vf_OB; J7r23: zgucB: goto r2q72; rpSr_: $rs = array("\143\157\144\x65" => 0, "\151\x6e\146\157" => array()); goto TzQZh; fE9xP: $result = $this->checkParam($rule, $data); goto YIVZu; YIVZu: if (empty($result)) { goto CzLGN; } goto VtweB; Ax3CU: $rs["\x6d\x73\x67"] = $result; goto aghQJ; vf_OB: return json_encode($rs); goto NpWrz; sUPh2: $order = new CateringService(); goto P1Qvk; uKW7M: if (!empty($info)) { goto zgucB; } goto pogoI; NpWrz: } public function RefundOrder() { goto Mb9jT; sb035: return json_encode($rs); goto s21TT; V3umW: $rs["\143\157\x64\x65"] = 1; goto zojlv; WbNkm: $rs["\x69\x6e\146\x6f"] = $info; goto A0y6a; usFyo: if (!empty($info)) { goto kJZ0m; } goto qZxvs; qjl52: $order = new CateringService(); goto phD2c; s21TT: kJZ0m: goto WbNkm; jQpuD: NVIV1: goto qjl52; phD2c: $info = $order->refundOrder($data); goto usFyo; J4ZxE: $rs["\155\163\147"] = "\350\256\242\xe5\x8d\225\xe9\200\x80\346\xac\xbe\xe5\xa4\261\350\xb4\245"; goto sb035; A0y6a: return json_encode($rs); goto txeW6; qOBYf: $rule = [["\x75\x73\145\x72\x5f\151\144", "\162\x65\x71\165\x69\162\x65"], ["\x6f\162\x64\x65\162\x5f\x69\144", "\x72\x65\x71\x75\151\x72\x65"]]; goto Y7wdB; qZxvs: $rs["\x63\157\144\145"] = 1; goto J4ZxE; SuZ5C: if (empty($result)) { goto NVIV1; } goto V3umW; Ah1iJ: return json_encode($rs); goto jQpuD; zojlv: $rs["\155\x73\x67"] = $result; goto Ah1iJ; Mb9jT: $rs = array("\143\x6f\144\145" => 0, "\x69\x6e\146\157" => array()); goto qOBYf; S92OC: $result = $this->checkParam($rule, $data); goto SuZ5C; Y7wdB: $data = ["\165\x73\145\162\137\x69\144" => Request::instance()->param("\142\165\171\x65\162\x5f\x69\144"), "\157\x72\x64\x65\162\137\151\144" => Request::instance()->param("\157\x72\x64\x65\x72\137\151\x64"), "\x6f\x72\144\x65\x72\137\x73\164\x61\164\x75\x73" => ["\x69\x6e", [2, 3]]]; goto S92OC; txeW6: } public function Book() { goto ARhfj; sOQYK: return json_encode($rs); goto EEurz; wR1kh: $rule = [["\x6e\141\155\145", "\162\x65\161\x75\x69\162\x65"], ["\160\150\157\156\145", "\x72\x65\x71\x75\x69\162\145"], ["\x6d\143\150\x5f\x69\x64", "\162\x65\x71\165\x69\x72\145", "\xe4\270\x8d\345\xad\230\345\x9c\250\xe5\225\x86\xe6\210\xb7"], ["\x62\157\157\153\145\144\137\164\x69\155\x65", "\162\x65\x71\165\x69\x72\x65"], ["\156\165\x6d\142\145\x72\x5f\160\145\x6f\x70\154\145", "\162\x65\161\165\151\x72\145"], ["\165\163\145\162\137\x69\144", "\162\145\x71\x75\x69\x72\145"]]; goto IA046; JjfLS: $rs["\155\x73\147"] = $result; goto mpGqm; xgOCF: $rs["\x63\157\x64\x65"] = 1; goto sIBdR; IA046: $data = ["\156\x61\155\145" => Request::instance()->param("\156\141\155\x65"), "\160\x68\x6f\156\x65" => Request::instance()->param("\160\x68\157\x6e\x65"), "\142\157\x6f\153\145\x64\137\x74\151\155\x65" => Request::instance()->param("\x62\157\157\x6b\145\x64\137\x74\x69\155\x65"), "\x6e\165\x6d\142\x65\x72\137\160\x65\x6f\160\x6c\x65" => Request::instance()->param("\x6e\165\x6d\142\x65\x72\x5f\x70\145\157\x70\154\x65"), "\155\x65\x73\163\141\147\145" => Request::instance()->param("\x6d\x65\163\163\x61\x67\145"), "\163\164\141\164\165\163" => 1, "\x6d\143\x68\137\151\x64" => $mch_id, "\x75\x73\145\162\137\x69\x64" => Request::instance()->param("\165\163\x65\x72\x5f\x69\144"), "\x63\162\x65\x61\164\145\137\x74\151\155\x65" => time()]; goto ahqxy; PIWUk: $rs["\151\156\146\157"] = $info; goto KfoQg; cXDlO: if (!empty($info)) { goto qr90O; } goto xgOCF; cnKu0: $rs["\143\157\144\145"] = 1; goto JjfLS; EEurz: qr90O: goto PIWUk; xJUmL: $info = $order->Book($data); goto cXDlO; Uco5h: if (empty($result)) { goto kZNCI; } goto cnKu0; tUR7M: $app_id = Request::instance()->param("\x69"); goto wnmVl; ahqxy: $result = $this->checkParam($rule, $data); goto Uco5h; wnmVl: $mch_id = $this->getMchId($app_id); goto wR1kh; sIBdR: $rs["\155\x73\x67"] = "\xe6\x8f\x90\344\272\244\xe5\xa4\261\xe8\264\245"; goto sOQYK; ARhfj: $rs = array("\143\x6f\x64\145" => 0, "\x69\156\x66\157" => array()); goto tUR7M; z8rPf: kZNCI: goto mT9nB; KfoQg: return json_encode($rs); goto uV0bX; mT9nB: $order = new CateringService(); goto xJUmL; mpGqm: return json_encode($rs); goto z8rPf; uV0bX: } public function Booklist() { goto fVEHA; fVEHA: $rs = array("\x63\157\144\145" => 0, "\151\x6e\x66\157" => array()); goto jQTu7; Fylgz: $rs["\155\x73\147"] = $result; goto CCKlX; t6Hr5: $page = Request::instance()->param("\160\x61\147\145", 1); goto mFMLk; wweQ7: $rs["\151\156\146\x6f"] = $info; goto Thodi; kYKoP: $mch_id = $this->getMchId($app_id); goto t6Hr5; feSMd: if (empty($result)) { goto fdaxT; } goto wxmBV; jQTu7: $app_id = Request::instance()->param("\151"); goto kYKoP; wxmBV: $rs["\143\157\144\x65"] = 1; goto Fylgz; Thodi: return json_encode($rs); goto U3nwI; CCKlX: return json_encode($rs); goto sz5WJ; AH_2u: $info = $order->Booklist($data, $page); goto wweQ7; KbyKR: $result = $this->checkParam($rule, $data); goto feSMd; SeaBg: $data = ["\x6d\143\x68\x5f\x69\x64" => $mch_id, "\x75\163\145\162\x5f\151\144" => Request::instance()->param("\x75\x73\145\162\x5f\151\x64")]; goto KbyKR; sz5WJ: fdaxT: goto efw_e; efw_e: $order = new CateringService(); goto AH_2u; mFMLk: $rule = [["\155\x63\150\137\151\x64", "\162\x65\161\165\x69\162\145", "\344\xb8\x8d\xe5\255\x98\345\234\xa8\xe5\225\x86\346\x88\xb7"], ["\165\163\x65\x72\x5f\x69\144", "\x72\x65\161\165\151\x72\x65"]]; goto SeaBg; U3nwI: } public function CancelBook() { goto JUjzN; I2Rns: DfaxM: goto XBCLm; KLQG6: $result = $this->checkParam($rule, $data); goto hiyXQ; tnK9B: $rule = [["\x75\x73\145\162\137\x69\x64", "\162\x65\161\165\151\162\145"], ["\151\144", "\162\x65\161\165\151\x72\x65"]]; goto VJqx2; XBCLm: $rs["\151\x6e\x66\157"] = $info; goto m7mCs; CIbLl: $rs["\143\157\144\x65"] = 1; goto ZaXNk; sQxoS: $rs["\155\163\x67"] = "\351\242\204\xe8\256\242\xe5\217\x96\xe6\xb6\210\xe5\244\xb1\350\xb4\245"; goto jmRtS; jmRtS: return json_encode($rs); goto I2Rns; tBLzA: ErOKj: goto mJDKA; JUjzN: $rs = array("\143\157\144\x65" => 0, "\x69\156\x66\x6f" => array()); goto tnK9B; dg8GC: $rs["\143\x6f\144\145"] = 1; goto sQxoS; m7mCs: return json_encode($rs); goto q_FIk; hiyXQ: if (empty($result)) { goto ErOKj; } goto CIbLl; mJDKA: $order = new CateringService(); goto wqMyo; qWnmQ: return json_encode($rs); goto tBLzA; ZaXNk: $rs["\155\163\x67"] = $result; goto qWnmQ; IJu0P: if (!empty($info)) { goto DfaxM; } goto dg8GC; VJqx2: $data = ["\165\163\x65\162\137\151\144" => Request::instance()->param("\165\x73\145\x72\x5f\x69\144"), "\151\x64" => Request::instance()->param("\x69\144"), "\163\x74\141\x74\165\x73" => 0]; goto KLQG6; wqMyo: $info = $order->cancelBook($data); goto IJu0P; q_FIk: } public function ShopService() { goto w73zf; Ag51z: $order = new CateringService(); goto dr_dU; DdwEI: $rule = [["\155\143\150\137\x69\144", "\x72\x65\x71\x75\x69\162\145", "\xe4\270\x8d\xe5\255\230\345\234\250\345\225\206\346\x88\xb7"]]; goto OjLvD; OjLvD: $data = ["\x6d\143\x68\137\151\x64" => $mch_id]; goto TQ71f; VI7U4: $rs["\x63\x6f\144\x65"] = 1; goto ykix7; G5YmQ: if (empty($info)) { goto DQWFj; } goto kaA_B; TQ71f: $result = $this->checkParam($rule, $data); goto G5kB3; nnowx: return json_encode($rs); goto CjUyE; yVDxn: DQWFj: goto v5W5Q; dr_dU: $info = $order->ShopService($data); goto G5YmQ; ZNORj: QBH8j: goto Ag51z; OHTm6: return json_encode($rs); goto ZNORj; A3gS3: $app_id = Request::instance()->param("\x69"); goto X72eL; X72eL: $mch_id = $this->getMchId($app_id); goto DdwEI; v5W5Q: $rs["\x69\x6e\146\x6f"] = $info; goto nnowx; ykix7: $rs["\155\x73\147"] = $result; goto OHTm6; G5kB3: if (empty($result)) { goto QBH8j; } goto VI7U4; w73zf: $rs = array("\143\157\144\x65" => 0, "\151\x6e\x66\x6f" => array()); goto A3gS3; kaA_B: $info = explode("\x2c", $info); goto yVDxn; CjUyE: } public function uploadFile() { goto YmV0y; YmV0y: $rs = array("\143\x6f\144\145" => 0, "\151\156\146\157" => array()); goto XCopC; Q6KFP: $file_name_explode = explode("\56", $file_name); goto Wh2cL; W8ppE: goto iccS2; goto cLJLR; uIxTP: if ($ok["\x63\x6f\144\145"]) { goto v2zpW; } goto pBuyk; BexRR: return null; goto PtA9N; lOBk5: mkdir($file_path, $mode, true); goto iyrs_; onik0: $mode = intval("\60\x37\x37\67", 8); goto lOBk5; cLJLR: v2zpW: goto vqLtp; Vt6R0: return null; goto de2Qn; pBuyk: return null; goto W8ppE; sVOET: return $ok["\x70\141\164\150"]; goto xMFXi; no1YQ: $mch_id = $this->getMchId($app_key); goto ygZMl; C8Eg9: $file_name = $_FILES["\146\x69\154\x65\x5f\165\x70\x6c\x6f\141\x64"]["\x6e\141\155\x65"]; goto hpGso; xMFXi: iccS2: goto j9gX0; FZ15b: Xr_Yv: goto iYRHy; Wh2cL: $suffix = count($file_name_explode) - 1; goto ltwbI; iYRHy: $guid = time() . rand(10000, 99999); goto Q6KFP; ygZMl: $file_path = "\x70\x75\x62\x6c\151\x63\x2f\165\160\x6c\x6f\x61\144\x2f" . $mch_id . "\x2f\x63\157\x6d\x6d\145\156\164\x5f\x70\151\x63\57"; goto MkRjw; XCopC: $app_key = Request::instance()->param("\x61\160\160\137\x6b\x65\x79"); goto no1YQ; hpGso: $file_size = $_FILES["\146\x69\x6c\145\137\x75\160\x6c\157\x61\x64"]["\x73\151\x7a\145"]; goto ZOi9L; SDoZ4: $ok = $this->moveUploadFile($_FILES["\146\151\x6c\x65\137\165\160\x6c\157\141\144"]["\164\x6d\160\x5f\156\141\x6d\x65"], $file_path . $newfile); goto uIxTP; pwyWO: $rs["\x63\157\x64\145"] = 1; goto CsIYY; ltwbI: $ext = "\56" . $file_name_explode[$suffix]; goto BwdLK; PtA9N: QHhiu: goto YxZA2; MkRjw: if (!($file_path == '')) { goto vdU0t; } goto Vt6R0; s4qb0: if (file_exists($file_path)) { goto CfPt3; } goto onik0; vqLtp: @unlink($_FILES["\x66\151\x6c\x65\x5f\165\160\x6c\x6f\x61\x64"]); goto sVOET; iyrs_: CfPt3: goto C8Eg9; de2Qn: vdU0t: goto s4qb0; YxZA2: if (!($file_type != "\151\155\x61\x67\x65\x2f\x67\x69\146" && $file_type != "\x69\x6d\141\147\145\x2f\x70\156\147" && $file_type != "\x69\155\x61\147\145\x2f\x6a\160\x65\147" && $file_size > 5000000)) { goto Xr_Yv; } goto pwyWO; NI3gf: return json_encode($rs); goto FZ15b; OtGV4: if (!($file_size == 0)) { goto QHhiu; } goto BexRR; ZOi9L: $file_type = $_FILES["\x66\151\x6c\145\137\165\x70\x6c\157\141\144"]["\164\x79\160\145"]; goto OtGV4; BwdLK: $newfile = $guid . $ext; goto SDoZ4; CsIYY: $rs["\x6d\x73\147"] = "\346\226\x87\xe4\273\xb6\344\xb8\x8a\xe4\xbc\240\345\244\261\350\264\xa5\54\xe8\257\xb7\xe6\243\200\xe6\x9f\245\346\x82\xa8\xe4\270\212\xe4\274\xa0\347\232\x84\xe6\226\207\xe4\xbb\xb6\347\xb1\273\345\x9e\213\x2c\xe6\226\207\344\xbb\266\xe5\244\247\xe5\xb0\217\xe4\xb8\215\350\x83\xbd\350\266\x85\xe8\277\x87\65\115\x42"; goto NI3gf; j9gX0: } private $upload_type = 1; private function moveUploadFile($file_path, $key) { goto HacGd; CyvGJ: $result = ["\x63\x6f\144\x65" => $ok, "\x70\141\164\x68" => $key, "\x64\x6f\155\141\151\156" => '', "\142\x75\x63\153\x65\164" => '']; goto Xrk1j; HacGd: if (!($this->upload_type == 1)) { goto H1Akz; } goto yyGC5; Xrk1j: return $result; goto Qe3dG; Qe3dG: H1Akz: goto eAbpJ; yyGC5: $ok = @move_uploaded_file($file_path, $key); goto CyvGJ; eAbpJ: } public function WriteComment() { goto Bie0B; QigkE: FCNa5: goto iW2Y6; YK7kB: $info = $order->WriteComment($data); goto JZs2v; Uh7K4: return json_encode($rs); goto qu42I; iW2Y6: $rs["\x69\156\146\157"] = $info; goto Uh7K4; b2QX1: $mch_id = $this->getMchId($app_id); goto wjemc; eoOnQ: $rs["\155\x73\x67"] = $result; goto XlFmN; Hb4gR: $order = new CateringService(); goto Z3g1E; dAHUR: foreach ($data["\x61\x72\162\141\x79\137\x70\x69\143"] as $v) { $array_pic .= $v . "\54"; CwE4_: } goto cWtAq; Bie0B: $rs = array("\143\x6f\144\x65" => 0, "\x69\156\146\x6f" => array()); goto tI1po; j7Wna: return json_encode($rs); goto QigkE; HsTNv: $rs["\x63\157\x64\x65"] = 1; goto eoOnQ; wjemc: $rule = [["\x6d\143\150\137\151\144", "\162\145\x71\165\x69\x72\x65", "\344\270\215\xe5\255\x98\345\x9c\xa8\345\225\x86\346\210\267"], ["\146\x72\x61\143\164\151\x6f\156", "\x72\x65\x71\165\151\162\x65"], ["\x69\x6e\x66\x6f", "\162\145\161\x75\151\162\x65"], ["\x75\163\x65\x72\137\151\144", "\x72\145\161\165\x69\162\x65"]]; goto pZGqu; hinL6: vVaP1: goto Hb4gR; P6sN3: $rs["\155\163\x67"] = "\346\x8f\x90\xe4\272\xa4\xe5\xa4\xb1\350\264\xa5"; goto j7Wna; OSy5k: if (empty($result)) { goto vVaP1; } goto HsTNv; pZGqu: $data = ["\151\x6e\146\x6f" => Request::instance()->param("\151\156\x66\x6f"), "\146\x72\141\x63\164\x69\157\156" => Request::instance()->param("\x66\162\x61\x63\x74\x69\x6f\x6e"), "\x61\162\162\x61\x79\137\x70\x69\x63" => Request::instance()->post("\141\162\x72\141\171\x5f\160\x69\x63\57\141", []), "\x6d\x63\150\137\x69\144" => $mch_id, "\x75\163\x65\x72\x5f\x69\144" => Request::instance()->param("\x75\x73\145\x72\137\x69\144"), "\143\162\x65\141\164\x65\x5f\164\x69\155\x65" => time(), "\144\145\154" => 1]; goto SdL6A; JZs2v: if (!empty($info)) { goto FCNa5; } goto ZMOu5; SdL6A: $result = $this->checkParam($rule, $data); goto OSy5k; u9QFe: $data["\141\162\162\141\x79\x5f\x70\151\x63"] = $array_pic; goto YK7kB; Z3g1E: $array_pic = ''; goto dAHUR; XlFmN: return json_encode($rs); goto hinL6; cWtAq: KEgdm: goto u9QFe; ZMOu5: $rs["\x63\157\x64\x65"] = 1; goto P6sN3; tI1po: $app_id = Request::instance()->param("\151"); goto b2QX1; qu42I: } public function CommentList() { goto rHZfY; DJLkr: $rs["\143\157\x64\145"] = 1; goto xNF9a; m69vi: if (empty($result)) { goto h0KWT; } goto DJLkr; rV_EX: $result = $this->checkParam($rule, $data); goto m69vi; a28M2: return json_encode($rs); goto VQ50u; DoEJH: $order = new CateringService(); goto BnqxD; rHZfY: $rs = array("\x63\157\144\145" => 0, "\151\156\146\157" => array()); goto pMwI0; ArGPO: $rule = [["\155\143\x68\137\x69\x64", "\162\x65\161\x75\x69\162\x65", "\xe4\xb8\x8d\345\xad\x98\345\x9c\xa8\xe5\x95\x86\346\x88\xb7"]]; goto h1ePZ; pzd6X: $mch_id = $this->getMchId($app_id); goto goaUp; goaUp: $page = Request::instance()->param("\x70\141\147\x65", 1); goto ArGPO; VQ50u: h0KWT: goto DoEJH; xNF9a: $rs["\x6d\163\147"] = $result; goto a28M2; h1ePZ: $data = ["\x6d\x63\150\137\x69\x64" => $mch_id, "\x64\x65\154" => 1]; goto rV_EX; pMwI0: $app_id = Request::instance()->param("\x69"); goto pzd6X; BnqxD: $info = $order->CommentList($data, $page); goto GpRSE; w3e1f: $rs["\x69\x6e\146\157"] = $info; goto OS5dY; OS5dY: return json_encode($rs); goto DdIZQ; GpRSE: $info = json_decode($info, true); goto w3e1f; DdIZQ: } public function addOrder() { goto c54ir; c54ir: $app_id = Request::instance()->param("\151"); goto D9Vdi; FtGWt: $rs["\155\x73\x67"] = $result; goto rv2UM; S9Pxt: $rs["\143\x6f\x64\x65"] = 1; goto FtGWt; SE5L5: $rule = [["\x6d\x63\x68\x5f\151\144", "\162\x65\x71\x75\x69\162\145", "\xe4\xb8\x8d\xe5\xad\x98\345\x9c\250\xe5\225\x86\xe6\x88\267"], ["\165\x73\x65\162\x5f\151\144", "\162\x65\x71\x75\x69\162\x65"], ["\157\162\144\145\x72\x5f\151\x64", "\x72\145\x71\x75\x69\x72\145"], ["\141\144\144\137\160\x72\151\143\x65", "\162\x65\x71\x75\x69\162\145"], ["\164\x6f\164\141\154", "\162\x65\x71\x75\151\162\x65"]]; goto e5eZ2; Xf27P: return AjaxReturn($info); goto uzkY2; e5eZ2: $data = ["\155\x63\x68\x5f\151\144" => $mch_id, "\157\162\144\x65\162\x5f\x69\x64" => Request::instance()->param("\x6f\162\x64\x65\x72\x5f\x69\x64"), "\x75\163\145\162\137\x69\x64" => Request::instance()->param("\165\x73\x65\x72\137\x69\x64"), "\x61\144\144\x5f\x70\x72\151\143\145" => Request::instance()->param("\141\144\144\x5f\160\x72\x69\143\145"), "\x74\x6f\x74\141\x6c" => Request::instance()->param("\x74\x6f\x74\141\154")]; goto Rd1TK; D9Vdi: $mch_id = $this->getMchId($app_id); goto SE5L5; WBu8C: $result = $this->checkParam($rule, $data); goto j_aIU; w2aXi: n2wVR: goto djR1o; rv2UM: return json_encode($rs); goto w2aXi; djR1o: $order = new CateringService(); goto PenhS; Rd1TK: $json = Request::instance()->param("\157\x72\144\x65\162\137\x64\x69\x73\x68\137\152\x73\x6f\x6e"); goto WBu8C; PenhS: $info = $order->addOrder($data, $json); goto Xf27P; j_aIU: if (empty($result)) { goto n2wVR; } goto S9Pxt; uzkY2: } public function tuiOrder() { goto RZcPX; c_awF: return json_encode($rs); goto VXWEq; y27q7: $rs["\143\x6f\144\x65"] = 1; goto NlTVI; HgPWh: if (empty($result)) { goto e1hlR; } goto y27q7; p7CiF: $info = $order->tuiOrder($data, $json); goto wec4G; ztKVY: $mch_id = $this->getMchId($app_id); goto NDvKx; nWOs0: $data = ["\155\x63\150\x5f\151\144" => $mch_id, "\x6f\x72\x64\145\x72\x5f\151\x64" => Request::instance()->param("\157\x72\x64\x65\x72\137\151\x64"), "\x75\x73\x65\162\137\x69\144" => Request::instance()->param("\x75\163\x65\x72\x5f\151\x64"), "\162\145\144\165\143\145\x5f\x70\162\x69\143\145" => Request::instance()->param("\162\145\x64\x75\143\x65\137\x70\162\151\143\x65"), "\x74\157\x74\x61\x6c" => Request::instance()->param("\x74\x6f\164\x61\x6c")]; goto SiWz7; NlTVI: $rs["\x6d\x73\x67"] = $result; goto c_awF; wec4G: return AjaxReturn($info); goto qhP5Y; xQpYQ: $order = new CateringService(); goto p7CiF; UDoFi: $result = $this->checkParam($rule, $data); goto HgPWh; SiWz7: $json = Request::instance()->param("\x6f\162\x64\145\x72\x5f\x64\x69\163\150\137\152\163\x6f\x6e"); goto UDoFi; VXWEq: e1hlR: goto xQpYQ; RZcPX: $app_id = Request::instance()->param("\x69"); goto ztKVY; NDvKx: $rule = [["\155\x63\x68\137\151\x64", "\162\x65\161\x75\x69\x72\145", "\xe4\xb8\x8d\345\xad\x98\xe5\234\250\345\225\206\xe6\210\xb7"], ["\165\163\x65\x72\x5f\151\144", "\162\x65\161\x75\151\x72\145"], ["\x6f\162\x64\145\162\137\x69\x64", "\162\145\x71\x75\151\162\x65"], ["\x72\x65\x64\165\x63\x65\137\x70\x72\151\143\145", "\162\x65\161\x75\x69\x72\145"], ["\164\x6f\x74\x61\x6c", "\162\x65\x71\x75\151\x72\x65"]]; goto nWOs0; qhP5Y: } public function tuigoodslist() { goto F0iva; avpeT: $result = $this->checkParam($rule, $data); goto SuGus; HelEC: pAf9k: goto VCGXI; SuGus: if (empty($result)) { goto pAf9k; } goto rJOou; vXRDi: return json_encode($rs); goto HelEC; FPTYb: $rule = [["\155\143\150\137\x69\144", "\162\145\x71\x75\x69\x72\145", "\xe4\xb8\x8d\345\xad\230\xe5\234\xa8\xe5\x95\206\346\210\xb7"], ["\157\162\144\x65\x72\137\151\144", "\x72\145\x71\x75\151\162\x65"]]; goto dtQ0i; f20E1: $rs["\155\163\147"] = $result; goto vXRDi; rJOou: $rs["\x63\157\x64\145"] = 1; goto f20E1; Ox_1N: return AjaxReturn($info); goto FkTXk; VCGXI: $order = new CateringService(); goto IdXcU; WZfpL: $mch_id = $this->getMchId($app_id); goto FPTYb; F0iva: $app_id = Request::instance()->param("\151"); goto WZfpL; IdXcU: $info = $order->tuigoodslist($data); goto Ox_1N; dtQ0i: $data = ["\155\143\150\137\x69\x64" => $mch_id, "\x6f\x72\144\x65\162\x5f\x69\144" => Request::instance()->param("\x6f\162\144\145\162\x5f\151\x64")]; goto avpeT; FkTXk: } public function getWxcode() { goto xo0nR; I_KfC: $result = data_uri($data, "\151\155\141\147\x65\x2f\160\156\x67"); goto oj1YI; n5bOK: $appsecret = "\145\x31\x34\71\x65\x38\61\62\x36\60\x37\x63\67\143\x64\142\x65\x31\62\x39\63\63\x36\x63\141\x33\142\x62\143\70\62\x61"; goto ui78x; xo0nR: $appid = "\167\x78\x62\x63\x66\141\x61\60\x30\x35\144\141\67\x62\x31\66\61\x63"; goto n5bOK; pokgv: $url = "\150\x74\x74\160\163\x3a\x2f\57\x61\160\151\56\x77\145\x69\170\151\156\x2e\161\161\56\x63\157\x6d\x2f\167\x78\x61\57\147\145\x74\x77\x78\141\x63\x6f\x64\x65\165\156\154\x69\x6d\x69\x74\x3f\x61\x63\x63\x65\x73\163\x5f\164\x6f\x6b\145\x6e\75" . $ACCESS_TOKEN["\141\143\x63\x65\163\x73\x5f\x74\x6f\x6b\145\156"]; goto I1cQK; ui78x: $ACCESS_TOKEN = $this->getWxAccessToken($appid, $appsecret); goto pokgv; ZQjU_: $post_data = json_encode($post_data); goto haRgb; haRgb: $data = $this->send_post($url, $post_data); goto I_KfC; oj1YI: return "\x3c\151\155\x61\147\145\40\x73\x72\143\75" . $result . "\x3e\74\57\151\x6d\x61\x67\x65\76"; goto BgzQP; I1cQK: $post_data = array("\160\x61\x67\145" => "\160\141\147\x65\x73\x2f\143\x61\x72\x65\147\157\162\x79\57\x69\x6e\144\145\170", "\x73\143\x65\156\x65" => "\63\x34\x2c\x53\x38\65\x33\105\105\x34\x51\122\x50"); goto ZQjU_; BgzQP: } protected function send_post($url, $post_data) { goto gLwQ6; gLwQ6: $options = array("\150\164\164\x70" => array("\x6d\145\x74\x68\157\x64" => "\x50\117\123\124", "\x68\x65\x61\x64\x65\162" => "\x43\157\x6e\164\145\156\164\55\x74\171\160\145\72\141\160\160\154\x69\143\x61\x74\x69\x6f\156\57\152\x73\157\x6e", "\143\x6f\x6e\164\145\x6e\x74" => $post_data, "\164\151\x6d\x65\x6f\165\x74" => 60)); goto Y8F79; OWfIv: $result = file_get_contents($url, false, $context); goto gGI5I; Y8F79: $context = stream_context_create($options); goto OWfIv; gGI5I: return $result; goto IL38b; IL38b: } }
