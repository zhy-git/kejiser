<?php
 namespace app\api\service; use think\Db; use think\Exception; class DistribeService { private $i = "\x79\x62\x73\x63\x5f\151\x6d\x61\147\145\163"; private $og = "\x79\142\163\143\137\x6f\162\x64\145\162\x5f\x67\x6f\157\144\163"; private $u = "\171\142\x73\x63\x5f\165\163\145\x72"; private $us = "\171\x62\x73\143\x5f\165\x73\145\162\137\x73\x68\141\162\x65"; public function user_info($data) { goto llIok; zXvHp: goto jLVlg; goto ESju6; ziQTA: $info["\164\150\x69\162\144"] = 0; goto JNEvr; y9r1_: if (!(count($b["\x70\x69\x64\x5f\x61\162\162"]) > 0)) { goto IzLIu; } goto Y8vge; wYuEh: goto KkH8N; goto ezJL9; BU6PA: $u["\164\145\x61\155\137\x63\157\x75\156\x74"] = 0; goto wYuEh; uY_u6: $u["\x70\141\x72\145\x6e\164"] = $parent ? $parent : "\xe6\x80\xbb\345\272\x97"; goto zXvHp; ldSwT: W8D74: goto qrHB5; CaFok: $info["\163\145\143\157\156\144"] = $b["\x63\157\x75\x6e\x74"]; goto y9r1_; ESju6: e49ZV: goto sFhTH; JUKmX: $u["\164\145\141\x6d\x5f\x63\157\x75\x6e\164"] = $info["\146\x69\162\163\164"]; goto ajFx0; ezJL9: Ay2Qt: goto JUKmX; iemci: IzLIu: goto ldSwT; hr390: $a = $this->InfiniteClass([$data["\x75\151\144"]], $data["\155\143\150\137\151\x64"], 1); goto rm1BY; AlbZg: $info["\163\145\x63\x6f\x6e\144"] = 0; goto ziQTA; v0gXK: $u["\165\x6e\137\160\141\171"] = Db::name("\x79\x62\163\x63\x5f\165\x73\x65\162\137\x73\x68\141\x72\145\137\143\x61\163\150")->where(["\x6d\x63\x68\137\151\x64" => $data["\x6d\x63\x68\137\151\144"], "\163\x74\141\164\x75\x73" => "\x31", "\x75\163\x65\x72\137\151\x64" => $data["\x75\151\144"], "\x69\163\137\x64\x65\x6c" => 1])->sum("\x70\x72\x69\143\x65"); goto th1Iu; iA3ZX: $u["\x6f\162\x64\x65\162\x5f\155\x6f\x6e\x65\x79\137\165\156"] = $this->get_share_money($data["\165\x69\144"], $data["\155\143\x68\x5f\x69\x64"], ["\151\156", "\x31\x2c\62"]); goto v0gXK; KpeKT: $u["\157\x72\144\x65\162\x5f\x6d\157\x6e\145\x79\137\171\x6a"] = $this->get_share_money($data["\x75\x69\144"], $data["\x6d\x63\150\x5f\151\144"], ["\x69\156", "\60\x2c\x31\x2c\62"]); goto iA3ZX; qrHB5: $share = Db::name("\x79\x62\x73\143\x5f\x75\163\145\162\137\x73\150\x61\x72\145\137\x73\x65\x74\164\151\156\147")->where(["\155\x63\150\x5f\x69\x64" => $data["\x6d\143\150\x5f\x69\144"]])->value("\x6c\145\166\145\x6c"); goto T0DKc; T0DKc: if ($share == 1) { goto Ay2Qt; } goto C7Eeq; rm1BY: $info["\x66\151\x72\x73\x74"] = $a["\x63\x6f\x75\156\x74"]; goto AlbZg; LsTI1: zWbP_: goto g8SQh; g8SQh: $u["\164\x65\x61\155\137\x63\x6f\165\156\x74"] = $info["\x66\151\x72\x73\x74"] + $info["\163\145\143\157\x6e\x64"]; goto p8S8B; p8S8B: goto KkH8N; goto XhLH3; XhLH3: scqlR: goto aQ02W; Ax2U1: $u["\157\x72\x64\x65\162\x5f\163\150\141\162\145\x5f\155\x6f\x6e\145\171"] = $this->get_share_money($data["\165\151\x64"], $data["\155\x63\x68\137\151\144"], ["\x69\x6e", "\60\x2c\61\54\62\x2c\x33"]); goto KpeKT; aQ02W: $u["\x74\145\141\155\x5f\x63\157\x75\x6e\x74"] = $info["\x66\151\x72\163\x74"] + $info["\x73\x65\x63\157\156\144"] + $info["\x74\150\151\x72\144"]; goto tPMWS; slsgu: return $u; goto gH8st; NJPNW: if (!empty($u)) { goto mhWCZ; } goto BHmCZ; th1Iu: $u["\x67\x65\x74\137\x70\162\x69\143\145"] = sprintf("\x25\x2e\62\146", $u["\164\x6f\164\x61\x6c\137\x70\162\x69\x63\x65"] - $u["\x70\162\151\x63\x65"]); goto hr390; DCw9h: if ($u["\160\151\x64"] == 0) { goto e49ZV; } goto aV_MI; CMIAc: mhWCZ: goto DCw9h; BHmCZ: return null; goto CMIAc; ajFx0: goto KkH8N; goto LsTI1; lGf7L: if ($share == 3) { goto scqlR; } goto BU6PA; sFhTH: $u["\x70\141\162\145\156\164"] = "\xe6\x80\273\xe5\272\227"; goto eW1Ed; aV_MI: $parent = Db::name($this->u)->where(["\155\143\x68\137\151\x64" => $data["\155\143\150\137\x69\x64"], "\x75\151\x64" => $u["\160\151\x64"]])->value("\156\151\x63\x6b\137\156\141\x6d\x65"); goto uY_u6; zhdto: $info["\164\150\151\x72\x64"] = $c["\x63\157\x75\156\x74"]; goto iemci; tPMWS: KkH8N: goto slsgu; Y8vge: $c = $this->InfiniteClass($b["\x70\x69\144\137\141\x72\162"], $data["\155\x63\x68\x5f\x69\x64"], 1); goto zhdto; eW1Ed: jLVlg: goto ulnfc; llIok: $u = Db::name($this->u)->where($data)->find(); goto NJPNW; ulnfc: $u["\x74\x6f\x64\141\x79\x5f\x70\x72\151\x63\145"] = Db::name("\171\x62\163\143\x5f\x75\x73\x65\x72\137\x73\150\141\x72\x65\137\x63\x61\163\150")->where(["\x6d\143\x68\x5f\x69\x64" => $data["\155\x63\150\x5f\151\144"], "\165\163\145\x72\x5f\151\x64" => $data["\165\151\x64"], "\x69\163\x5f\x64\145\x6c" => 1])->whereTime("\143\x72\x65\141\164\145\137\x74\x69\x6d\145", "\144")->sum("\x70\x72\151\x63\145"); goto Ax2U1; C7Eeq: if ($share == 2) { goto zWbP_; } goto lGf7L; JNEvr: if (!(count($a["\160\151\x64\x5f\141\x72\x72"]) > 0)) { goto W8D74; } goto qNOiZ; qNOiZ: $b = $this->InfiniteClass($a["\x70\x69\x64\x5f\141\162\x72"], $data["\155\143\x68\x5f\151\144"], 1); goto CaFok; gH8st: } public function get_share_money($uid, $mch_id, $status, $type = 0) { goto TVD3F; OEKM_: if (!($type == 1)) { goto Jrtq0; } goto aeZ2N; gs9l0: $reb2 = Db::name("\x79\x62\x73\x63\x5f\157\162\x64\x65\x72\137\x73\x68\141\162\145")->alias("\157\163")->join("\171\x62\163\143\137\157\162\144\145\162\40\x6f", "\x6f\163\x2e\x6f\x72\144\x65\x72\x5f\x69\x64\x3d\x6f\56\x6f\x72\144\x65\x72\x5f\151\x64")->where(["\157\163\56\x75\163\x65\162\137\151\x64" => $uid, "\x6f\x73\x2e\x72\x65\142\141\x74\x65" => ["\74\x3e", "\x30\x2e\60\x30"], "\157\x73\x2e\151\x73\x5f\144\145\154" => 1, "\x6f\x73\56\155\143\150\x5f\x69\144" => $mch_id, "\157\x2e\157\162\144\145\x72\x5f\163\x74\x61\x74\x75\163" => $status])->count(); goto Hc4Z8; nU4yB: $thi2 = Db::name("\171\142\x73\143\x5f\157\162\x64\x65\x72\137\163\150\141\x72\x65")->alias("\157\163")->join("\171\x62\163\x63\137\157\x72\x64\x65\162\40\x6f", "\x6f\163\x2e\x6f\162\144\145\x72\137\x69\x64\x3d\157\x2e\157\162\x64\x65\162\x5f\151\144")->where(["\157\163\56\x70\141\162\x65\156\x74\137\151\144\x5f\63" => $uid, "\x6f\x73\x2e\155\143\150\x5f\151\x64" => $mch_id, "\157\163\x2e\151\x73\x5f\x64\x65\154" => 1, "\x6f\x2e\x6f\162\144\145\162\x5f\163\164\141\x74\x75\163" => $status])->count(); goto gs9l0; TVD3F: $fir = Db::name("\x79\142\x73\143\x5f\157\162\144\145\162\x5f\163\x68\x61\162\x65")->alias("\x6f\163")->join("\171\142\163\x63\137\x6f\x72\x64\145\x72\40\x6f", "\157\163\56\x6f\162\144\x65\x72\x5f\151\144\x3d\x6f\x2e\x6f\162\x64\x65\162\137\151\144")->where(["\157\x73\56\x70\141\x72\145\156\164\137\151\x64\137\61" => $uid, "\x6f\x73\x2e\155\143\x68\137\x69\144" => $mch_id, "\157\x73\x2e\x69\163\137\x64\145\154" => 1, "\157\x2e\157\x72\x64\x65\162\137\x73\x74\x61\164\x75\x73" => $status])->sum("\x6f\163\x2e\x66\151\162\163\164\x5f\160\162\x69\143\145"); goto cYQxV; sl1sq: $money = floatval($fir) + floatval($sec) + floatval($thi) + floatval($reb); goto OEKM_; xltHZ: $reb = Db::name("\171\x62\163\143\137\157\x72\x64\x65\162\x5f\x73\x68\141\162\x65")->alias("\157\163")->join("\x79\142\x73\x63\x5f\x6f\162\144\x65\162\40\157", "\x6f\163\56\x6f\x72\144\145\162\137\151\x64\x3d\157\56\x6f\x72\x64\145\162\137\151\x64")->where(["\x6f\x73\56\x75\x73\145\x72\x5f\x69\x64" => $uid, "\157\x73\x2e\x6d\143\x68\x5f\x69\144" => $mch_id, "\157\x73\x2e\151\x73\137\144\x65\x6c" => 1, "\157\x2e\157\x72\x64\145\x72\137\x73\164\x61\x74\165\x73" => $status])->sum("\162\145\x62\x61\164\145"); goto sl1sq; TDmIL: return sprintf("\x25\x2e\x32\146", $money); goto X91Sp; UQU1Z: $sec2 = Db::name("\171\142\163\x63\x5f\x6f\162\x64\x65\162\137\x73\150\x61\162\x65")->alias("\x6f\163")->join("\171\x62\163\x63\137\x6f\x72\x64\145\162\40\x6f", "\x6f\163\x2e\157\x72\144\x65\x72\137\x69\144\75\157\56\157\x72\x64\145\x72\x5f\x69\x64")->where(["\157\x73\56\160\141\x72\145\x6e\164\137\151\x64\137\62" => $uid, "\x6f\163\56\155\143\x68\x5f\151\x64" => $mch_id, "\x6f\x73\x2e\x69\x73\x5f\x64\145\154" => 1, "\157\x2e\157\x72\144\x65\162\x5f\x73\x74\x61\x74\165\x73" => $status])->count(); goto nU4yB; pJ8MF: Jrtq0: goto TDmIL; aeZ2N: $fir2 = Db::name("\x79\142\x73\143\x5f\157\162\144\145\162\x5f\x73\x68\x61\x72\145")->alias("\157\x73")->join("\x79\x62\163\x63\x5f\x6f\162\144\x65\162\x20\157", "\157\163\56\x6f\162\x64\145\x72\x5f\151\x64\75\157\56\157\x72\144\x65\162\137\x69\144")->where(["\x6f\163\56\x70\x61\x72\145\156\164\x5f\151\144\x5f\x31" => $uid, "\157\x73\56\x6d\143\150\137\151\144" => $mch_id, "\157\x73\x2e\151\x73\137\144\x65\x6c" => 1, "\x6f\x2e\x6f\162\144\x65\x72\x5f\163\x74\141\164\165\x73" => $status])->count(); goto UQU1Z; Hc4Z8: $count = intval($fir2) + intval($sec2) + intval($thi2) + intval($reb2); goto GT8Bg; kUQsX: $thi = Db::name("\x79\142\163\143\x5f\157\x72\144\145\x72\137\x73\150\x61\x72\x65")->alias("\157\x73")->join("\171\142\x73\x63\x5f\157\x72\x64\145\162\40\x6f", "\157\163\56\x6f\162\144\145\162\x5f\151\x64\x3d\x6f\56\157\162\x64\x65\x72\x5f\151\144")->where(["\x6f\x73\56\x70\141\x72\145\156\164\137\x69\x64\137\63" => $uid, "\157\x73\56\x6d\143\x68\137\x69\x64" => $mch_id, "\x6f\x73\x2e\151\x73\137\x64\x65\x6c" => 1, "\x6f\56\157\x72\x64\145\x72\x5f\163\x74\x61\164\x75\x73" => $status])->sum("\x74\x68\x69\x72\x64\137\160\162\151\143\x65"); goto xltHZ; cYQxV: $sec = Db::name("\171\x62\x73\x63\137\x6f\x72\x64\x65\x72\137\163\150\x61\162\145")->alias("\157\163")->join("\x79\x62\x73\143\137\157\162\144\x65\x72\x20\157", "\x6f\163\x2e\157\162\144\145\x72\137\x69\144\x3d\157\x2e\x6f\x72\x64\x65\x72\x5f\151\x64")->where(["\157\x73\56\160\141\x72\x65\156\164\137\x69\144\137\x32" => $uid, "\x6f\163\x2e\x6d\143\x68\137\151\x64" => $mch_id, "\x6f\163\56\x69\x73\137\144\145\154" => 1, "\x6f\56\x6f\x72\144\x65\x72\137\163\164\x61\x74\x75\x73" => $status])->sum("\157\x73\x2e\x73\x65\143\157\156\x64\x5f\x70\x72\151\143\145"); goto kUQsX; GT8Bg: return ["\157\x72\x64\145\x72\x5f\x6d\x6f\x6e\145\x79" => sprintf("\45\x2e\x32\x66", $money), "\157\162\144\x65\x72\x5f\143\x6f\165\156\164" => $count]; goto pJ8MF; X91Sp: } public function addman($data) { goto RkiBZ; u66Xj: $rs = Db::name("\171\x62\x73\143\x5f\165\x73\x65\162")->where(["\x75\151\x64" => $data["\165\151\144"], "\155\143\x68\x5f\151\x64" => $data["\155\143\150\137\x69\144"]])->find(); goto aE6_v; zfHVk: $info = Db::name("\x79\x62\163\143\137\x75\163\145\x72")->where("\x75\151\x64", $data["\165\151\x64"])->update(["\x70\151\144" => $data["\160\151\144"]]); goto vGY3K; vGY3K: THbXN: goto mcjHm; RkiBZ: $info = null; goto u66Xj; mcjHm: return $info; goto yXyNe; aE6_v: if (!(!empty($rs) && $data["\x70\x69\144"] != 0 && $rs["\x70\151\144"] == 0 && $data["\165\151\x64"] != $data["\160\151\x64"])) { goto THbXN; } goto zfHVk; yXyNe: } public function get_join($data) { goto f3_Tc; Bquv_: W0yk2: goto rO07I; v3qwm: c5uoZ: goto jqcxf; Ya6dG: if ($share_condition == 1) { goto W0yk2; } goto Ik73F; idocS: $data["\x63\162\x65\x61\164\145\137\164\151\x6d\x65"] = time(); goto yoPYF; fupxx: return json_encode($rs); goto Yvlg0; pie8Y: $rs["\151\x6e\x66\x6f"] = $res; goto nvywa; yoPYF: Db::startTrans(); goto gV9oz; UpvE2: if (!($count > 0)) { goto rm5Dh; } goto pVrfu; ofrwK: $rs["\x6d\x73\147"] = "\347\x94\250\346\x88\xb7\xe5\267\xb2\345\255\x98\xe5\234\250"; goto fupxx; pVrfu: $rs["\143\157\x64\x65"] = 1; goto ofrwK; gr025: $data["\163\x65\154\154\x65\x72\137\x63\157\155\x6d\x65\x6e\x74\163"] = null; goto idocS; k1KWX: $count = Db::name($this->us)->where(["\x6d\143\150\137\151\x64" => $data["\155\143\150\x5f\x69\144"], "\165\163\x65\162\x5f\x69\x64" => $data["\165\x73\x65\x72\137\151\x64"], "\151\163\137\144\145\154" => 1])->count(); goto UpvE2; nvywa: return json_encode($rs); goto r0VfV; Ik73F: $data["\163\x74\141\x74\165\163"] = 1; goto wYtX7; f3_Tc: $rs = array("\x63\157\x64\145" => 0, "\x69\x6e\146\x6f" => array()); goto k1KWX; JgNkd: $share_condition = Db::name("\x79\x62\163\143\x5f\165\x73\x65\162\x5f\x73\150\141\x72\145\137\163\145\164\164\151\x6e\x67")->where(["\x6d\143\x68\x5f\x69\x64" => $data["\x6d\143\150\137\x69\x64"]])->value("\x73\150\x61\162\x65\137\x63\x6f\x6e\144\151\x74\x69\x6f\x6e"); goto o7b70; gV9oz: try { goto uCmfK; Ap3H6: $is_distributor = 2; goto f2rPv; ADgYR: O8oZj: goto LJsr3; LJsr3: if ($share_condition == 1) { goto t26o9; } goto Zeh3n; cBXrb: throw new Exception("\xe6\223\215\344\xbd\234\xe5\xa4\xb1\xe8\264\xa5"); goto ADgYR; uCmfK: $res = Db::name($this->us)->insertGetId($data); goto t2WdW; CBkW7: t26o9: goto Ap3H6; f2rPv: k30qC: goto kn7ha; U2Z7P: Db::commit(); goto EGrkM; t2WdW: if (!empty($res)) { goto O8oZj; } goto cBXrb; kn7ha: Db::name($this->u)->where(["\x6d\x63\x68\x5f\151\144" => $data["\x6d\143\150\x5f\x69\144"], "\165\151\144" => $data["\165\x73\x65\x72\137\x69\x64"]])->update(["\151\163\x5f\x64\x69\x73\x74\162\x69\x62\165\x74\157\162" => $is_distributor]); goto U2Z7P; Zeh3n: $is_distributor = 1; goto tRuZE; tRuZE: goto k30qC; goto CBkW7; EGrkM: } catch (\Exception $e) { goto tDsIa; m_7mB: $rs["\155\x73\147"] = $e->getMessage(); goto SRvPh; sTLkK: $rs["\x63\x6f\144\x65"] = 1; goto m_7mB; tDsIa: Db::rollback(); goto sTLkK; SRvPh: return json_encode($rs); goto Uc5AE; Uc5AE: } goto pie8Y; wYtX7: goto c5uoZ; goto Bquv_; jqcxf: $data["\151\x73\x5f\x64\145\154"] = 1; goto gr025; rO07I: $data["\x73\x74\141\164\165\163"] = 0; goto v3qwm; Yvlg0: rm5Dh: goto JgNkd; o7b70: $rs["\x73\x68\141\x72\x65\137\x63\157\156\144\151\x74\151\x6f\156"] = $share_condition; goto Ya6dG; r0VfV: } public function get_myteam($data, $page) { goto bEt7V; zTwmy: goto c2crw; goto xZaWC; HsRPw: c2crw: goto iLauN; Ds0BW: $info["\x73\145\x63\x6f\156\144"] = $b["\143\157\x75\156\x74"]; goto g8Lmx; VvRJC: if ($data["\x73\164\141\164\x75\x73"] == 3) { goto zUZ4q; } goto zTwmy; H4AoJ: $info["\x74\x68\151\x72\144"] = $c["\x63\157\165\156\164"]; goto vO9U6; eTLto: $b = $this->InfiniteClass($a["\x70\x69\x64\x5f\x61\162\162"], $data["\x6d\143\x68\137\x69\x64"], $page); goto Ds0BW; eCSKd: $info["\154\151\163\164"] = $a["\154\151\x73\x74"]; goto Rh3_T; keIdc: if (!(count($a["\x70\151\x64\x5f\x61\162\162"]) > 0)) { goto aEhbP; } goto eTLto; g8Lmx: if (!(count($b["\x70\x69\x64\x5f\141\162\162"]) > 0)) { goto Pj0Rl; } goto y7L1V; IeeuP: goto c2crw; goto i6z4C; xZaWC: q38Ph: goto eCSKd; EO2WU: aEhbP: goto x8A7N; i6z4C: zUZ4q: goto v5YYd; bEt7V: $a = $this->InfiniteClass([$data["\165\151\x64"]], $data["\x6d\x63\150\137\x69\144"], $page); goto JnzRB; jofFS: $info["\164\150\x69\162\x64"] = 0; goto EXa30; vO9U6: Pj0Rl: goto EO2WU; QFuEi: cZjNu: goto ncQZd; iLauN: return $info; goto XvnLO; JnzRB: $info["\146\151\162\x73\164"] = $a["\x63\157\x75\x6e\164"]; goto UAhhv; ncQZd: $info["\154\x69\163\164"] = $b["\154\151\x73\164"]; goto IeeuP; drVCZ: if ($data["\163\164\x61\x74\165\163"] == 2) { goto cZjNu; } goto VvRJC; y7L1V: $c = $this->InfiniteClass($b["\x70\151\x64\x5f\141\162\x72"], $data["\x6d\143\x68\x5f\151\x64"], $page); goto H4AoJ; IUU_v: $c["\x6c\151\x73\x74"] = []; goto keIdc; FfdFM: $info["\163\x65\143\x6f\156\x64"] = 0; goto jofFS; Rh3_T: goto c2crw; goto QFuEi; x8A7N: if ($data["\163\164\141\164\165\163"] == 1) { goto q38Ph; } goto drVCZ; UAhhv: $info["\x6c\151\163\x74"] = []; goto FfdFM; EXa30: $b["\x6c\x69\163\164"] = []; goto IUU_v; v5YYd: $info["\154\151\x73\x74"] = $c["\x6c\151\x73\x74"]; goto HsRPw; XvnLO: } public function InfiniteClass($pid, $mch_id, $page) { goto H4CHD; ZKPAf: gRHSk: goto aIesq; jX6yA: iorgl: goto ZsaLE; SGeIt: foreach ($li as $k1 => $v1) { array_push($rs["\160\151\144\x5f\x61\x72\x72"], $v1["\x75\x69\144"]); EHhvZ: } goto I1zI3; jtLZg: $li = Db::name($this->u)->where(["\x70\x69\x64" => ["\151\x6e", $pid], "\155\143\x68\x5f\x69\144" => $mch_id])->select(); goto bvq8x; ZsaLE: $rs["\x6c\151\163\x74"] = $list; goto sdlsR; H4CHD: $rs = array("\143\157\x75\x6e\164" => 0, "\x6c\x69\163\x74" => [], "\160\151\x64\137\x61\162\162" => []); goto qsPRG; C24x0: return $rs; goto kCLDF; J_DWy: if (!$list) { goto xOgZi; } goto xsOOR; xsOOR: foreach ($list as $k => $v) { goto Y2rNy; WYSAk: $list[$k]["\157\x72\144\x65\162\137\x63\157\x75\x6e\x74"] = $a["\x6f\x72\x64\145\162\x5f\143\x6f\x75\156\x74"]; goto Fb4Jd; iVA9c: $list[$k]["\162\145\x67\137\x74\151\155\145"] = date("\131\x2d\x6d\55\144\x20\x48\x3a\x69\72\x73", $list[$k]["\x72\x65\147\137\164\x69\155\145"]); goto tcCtI; Y2rNy: $a = $this->get_share_money($v["\x75\x69\144"], $mch_id, ["\x69\x6e", "\60\54\61\54\62\x2c\63"], 1); goto WYSAk; tcCtI: oHXVl: goto Tdv1n; aiBwJ: $list[$k]["\143\150\x69\x6c\144\x5f\143\x6f\165\156\164"] = Db::name($this->u)->where(["\x70\151\144" => $v["\165\151\x64"], "\155\x63\150\137\151\144" => $mch_id])->count(); goto iVA9c; Fb4Jd: $list[$k]["\157\x72\x64\x65\162\137\155\x6f\156\x65\x79"] = $a["\157\x72\x64\x65\162\137\x6d\x6f\156\x65\x79"]; goto aiBwJ; Tdv1n: } goto jX6yA; I1zI3: qQN7E: goto ZKPAf; aIesq: $list = Db::name($this->u)->where(["\x70\151\x64" => ["\x69\156", $pid], "\155\143\x68\137\151\144" => $mch_id])->page($page, PAGE_NUM)->order("\x75\x69\x64", "\x64\145\x73\143")->select(); goto J_DWy; qsPRG: $rs["\x63\157\x75\156\164"] = Db::name($this->u)->where(["\160\151\144" => ["\x69\x6e", $pid], "\155\x63\x68\x5f\151\x64" => $mch_id])->count(); goto jtLZg; sdlsR: xOgZi: goto C24x0; bvq8x: if (!$li) { goto gRHSk; } goto SGeIt; kCLDF: } public function get_shareOrder($data, $page) { goto zXhm0; O0A06: $where["\157\163\x2e\x70\x61\162\145\x6e\164\x5f\x69\x64\x5f\61\174\x6f\x73\x2e\160\x61\x72\145\x6e\164\137\151\144\137\x32\x7c\x6f\163\x2e\160\x61\x72\145\156\164\137\x69\144\137\x33\x7c\157\x73\x2e\x75\163\x65\162\137\151\144"] = $data["\165\163\x65\x72\x5f\x69\144"]; goto gLZo5; zXhm0: $status = $data["\163\x74\x61\164\x75\x73"]; goto ZM4yl; zCBBM: $where["\157\x2e\157\x72\x64\x65\x72\137\163\x74\x61\x74\x75\x73"] = 3; goto nyAVd; nNthk: $where["\157\56\x6f\162\x64\145\x72\137\x73\164\141\x74\165\163"] = 0; goto q5B94; bxEOE: TUy0s: goto xaZ90; asj1R: return $list; goto jkJ88; nyAVd: ZJ7xd: goto O0A06; cCkmf: return []; goto bxEOE; Aoodn: $where["\157\56\157\x72\144\x65\162\137\163\x74\x61\x74\165\x73"] = ["\x69\156", "\61\54\x32"]; goto lf05z; LB1S3: $where["\x6f\x2e\157\x72\x64\x65\162\x5f\163\164\141\x74\165\x73"] = ["\x69\x6e", "\x30\54\x31\54\62\x2c\x33"]; goto NqGOK; kSWHA: m7jd3: goto nNthk; k0DAu: zUdxQ: goto Aoodn; hj3x6: if (!empty($list)) { goto TUy0s; } goto cCkmf; lf05z: goto ZJ7xd; goto UO5Vb; TjMH1: if ($status == 1) { goto zUdxQ; } goto G3M7D; G3M7D: if ($status == 2) { goto O5lgk; } goto LB1S3; NqGOK: goto ZJ7xd; goto kSWHA; xaZ90: foreach ($list as $key => $value) { goto VMwty; OqyEp: $list[$key]["\163\150\x61\x72\145\137\x6d\157\156\145\x79"] = $money; goto RLTjb; RLTjb: $list[$key]["\143\162\x65\141\164\x65\x5f\x74\x69\155\145"] = date("\x59\55\155\55\x64\x20\x48\x3a\x69\72\x73", $list[$key]["\143\162\x65\x61\x74\145\x5f\164\151\155\x65"]); goto pC0eK; TKjHS: $money = $value["\x66\151\x72\163\164\x5f\x70\x72\151\143\x65"]; goto FaQJQ; x7zVy: O8dQs: goto h5tTy; O1bvS: $money = $value["\x74\150\x69\x72\x64\137\x70\x72\x69\x63\145"]; goto S_9hC; tHiYt: HhocK: goto wYDwg; Ht_4t: $money = $value["\163\145\x63\157\156\x64\x5f\x70\x72\151\143\x65"]; goto y7R0W; cYD4T: if ($data["\x75\x73\145\162\137\151\144"] == $value["\x70\141\x72\x65\x6e\164\x5f\x69\144\137\x31"]) { goto O8dQs; } goto ctyU3; VMwty: $text = ''; goto jVMad; TQcbR: if ($data["\165\163\145\162\x5f\x69\144"] == $value["\160\x61\162\x65\156\x74\137\x69\144\137\63"]) { goto PhwkT; } goto NBEZC; qk6wQ: foreach ($goods as $k => $v) { goto UdPoy; dIM08: if (!$pic) { goto MhU1f; } goto azZk5; g3Ggk: VwVgV: goto Ob7oG; azZk5: $goods[$k]["\x70\151\x63"] = $pic; goto uWj66; UdPoy: $pic = Db::name($this->i)->where("\x69\x6d\147\x5f\x69\144", $v["\147\157\x6f\x64\x73\x5f\x69\x6d\x61\x67\x65\163"])->value("\151\155\147\x5f\x63\157\166\145\x72"); goto dIM08; uWj66: MhU1f: goto g3Ggk; Ob7oG: } goto sulss; trzgl: goto WyHba; goto x7zVy; gr2g1: unset($list[$key]); goto LBTst; y7R0W: goto WyHba; goto j55Il; oO6Pv: if ($data["\165\163\145\x72\x5f\151\x64"] == $value["\x75\163\x65\x72\x5f\151\x64"]) { goto ygGGn; } goto cYD4T; IVQpn: bogi3: goto TIEio; tT6xH: ygGGn: goto VP9vP; S_9hC: WyHba: goto hj5KE; FaQJQ: goto WyHba; goto IVQpn; NBEZC: goto WyHba; goto tT6xH; jVMad: $money = 0.0; goto oO6Pv; pC0eK: $goods = Db::name($this->og)->where("\157\162\144\145\162\x5f\x69\x64", $value["\157\x72\x64\x65\162\x5f\x69\x64"])->select(); goto qk6wQ; ctyU3: if ($data["\x75\163\145\x72\x5f\151\x64"] == $value["\160\141\x72\x65\156\x74\x5f\x69\x64\x5f\62"]) { goto bogi3; } goto TQcbR; fT_7l: $text = "\xe8\x87\xaa\xe8\264\xad\xe8\xbf\224\347\x8e\xb0"; goto trzgl; VP9vP: if (!(empty($value["\x72\145\142\x61\164\145"]) || $value["\162\x65\142\x61\164\145"] == "\60\56\60\60")) { goto XjlA4; } goto gr2g1; LBTst: XjlA4: goto QDwf5; QDwf5: $money = $value["\162\x65\142\x61\x74\145"]; goto fT_7l; j55Il: PhwkT: goto e66C5; TIEio: $text = "\xe4\272\x8c\xe7\272\247"; goto Ht_4t; jIvq3: $list[$key]["\x67\x6f\x6f\144\x73"] = $goods; goto tHiYt; e66C5: $text = "\xe4\270\x89\347\272\247"; goto O1bvS; hj5KE: $list[$key]["\163\x68\x61\162\x65\137\164\x79\x70\145"] = $text; goto OqyEp; sulss: CysM2: goto jIvq3; h5tTy: $text = "\xe4\xb8\x80\xe7\xba\xa7"; goto TKjHS; wYDwg: } goto Mrpdh; wfo0p: if ($status == 0) { goto m7jd3; } goto TjMH1; Mrpdh: OtRJH: goto asj1R; MSIfl: $where["\x6f\x73\56\151\x73\x5f\x64\x65\x6c"] = 1; goto wfo0p; UO5Vb: O5lgk: goto zCBBM; q5B94: goto ZJ7xd; goto k0DAu; gLZo5: $list = Db::name("\171\142\x73\143\137\x6f\162\x64\x65\162\137\x73\x68\x61\162\145")->field("\x6f\x73\56\52\x2c\x6f\56\x6f\162\144\x65\x72\137\x73\164\141\x74\165\163\54\x6f\x2e\x6f\162\x64\145\x72\x5f\156\x6f\x2c\165\x2e\165\x73\x65\162\137\150\145\141\x64\151\155\x67\x2c\165\x2e\156\x69\x63\x6b\x5f\156\141\155\145")->alias("\x6f\x73")->join("\171\x62\163\143\x5f\157\162\x64\x65\162\x20\157", "\x6f\x73\x2e\x6f\x72\x64\145\x72\137\x69\144\75\x6f\56\157\x72\144\x65\x72\x5f\151\144")->join("\171\x62\x73\143\137\165\163\145\x72\x20\165", "\x75\56\165\151\144\x3d\157\163\56\x75\163\x65\162\x5f\x69\x64")->where($where)->page($page, PAGE_NUM)->order("\x6f\x73\56\x69\144", "\144\x65\163\x63")->select(); goto hj3x6; ZM4yl: $where["\157\x73\56\155\x63\x68\x5f\151\144"] = $data["\155\x63\x68\x5f\x69\144"]; goto MSIfl; jkJ88: } public function get_shareSetting($mch_id) { goto oQ5LA; TaCQ1: $info["\x6f\x74\x68\145\162"] = ["\x31" => "\xe5\217\257\xe6\x8f\220\xe7\216\xb0\344\xbd\xa3\351\207\221", "\x32" => "\xe5\267\xb2\346\217\220\xe7\x8e\xb0\344\275\xa3\351\207\221", "\x33" => "\346\216\250\xe8\215\x90\344\272\xba", "\64" => "\346\234\xaa\xe7\273\x93\xe7\xae\x97\xe4\xbd\243\351\207\221", "\x35" => "\xe5\x88\x86\xe9\x94\x80\xe4\275\xa3\xe9\207\x91", "\66" => "\345\210\x86\351\224\x80\350\256\242\xe5\x8d\225", "\67" => "\xe6\217\x90\347\216\xb0\xe6\x98\216\xe7\273\x86", "\x38" => "\xe6\x88\221\xe7\232\x84\xe5\233\xa2\xe9\230\237", "\71" => "\346\216\250\xe5\xb9\277\344\272\214\xe7\xbb\xb4\347\xa0\x81", "\x31\x30" => "\345\x8f\x91\xe5\xb1\x95\xe4\270\x8b\347\272\277", "\x31\61" => "\345\276\205\xe6\211\x93\346\xac\276\xe4\xbd\243\xe9\x87\x91", "\61\x32" => "\345\210\206\351\x94\x80\xe4\xb8\xad\xe5\277\x83", "\61\x33" => "\345\210\x86\351\224\200\xe5\225\206"]; goto mkHVn; Uubbn: $info["\157\164\150\145\162"] = json_decode($info["\x6f\x74\150\x65\162"], true); goto sbqQM; WJ9Vz: if ($info && !empty($info["\x6f\x74\150\x65\x72"])) { goto d6UpI; } goto TaCQ1; mkHVn: goto xX6zL; goto BxlVf; KswEY: $info["\x70\141\171\x5f\x74\171\x70\x65"] = []; goto gHTha; viNUx: $info["\x6c\x65\166\145\x6c"] = 0; goto md6W3; sbqQM: xX6zL: goto dGqwm; gHTha: goto nahws; goto UsgQc; md6W3: Gzlbl: goto dPDGq; dGqwm: if (isset($info["\154\x65\166\145\x6c"])) { goto Gzlbl; } goto viNUx; i6jwg: nahws: goto WJ9Vz; oQ5LA: $info = Db::name("\171\142\x73\x63\x5f\165\163\x65\162\x5f\163\150\141\x72\x65\137\163\x65\164\164\151\x6e\147")->where("\x6d\143\x68\x5f\151\144", $mch_id)->find(); goto CYGuf; q_ccW: $info["\160\x61\x79\x5f\x74\x79\x70\x65"] = json_decode($info["\x70\141\x79\x5f\164\171\160\145"], true); goto i6jwg; dPDGq: return $info; goto FAWIi; CYGuf: if ($info && !empty($info["\160\141\x79\137\x74\171\x70\145"])) { goto R_Pef; } goto KswEY; UsgQc: R_Pef: goto q_ccW; BxlVf: d6UpI: goto Uubbn; FAWIi: } public function get_addCash($data) { goto h3KCR; NlyUg: $rs["\x63\x6f\x64\x65"] = 0; goto bcs0a; LfZP1: try { goto O6aET; jSVAT: QWy21: goto vxjrD; UtDmc: if (!($setting["\x6d\x61\170\x5f\155\157\156\x65\171"] > 0 && $setting["\x6d\141\170\x5f\x6d\157\x6e\145\x79"] - $today_price < $data["\160\162\151\143\x65"])) { goto J9wfO; } goto RVapo; PxgYm: $res2 = Db::name($this->u)->where(["\x6d\x63\150\x5f\x69\x64" => $data["\x6d\x63\x68\x5f\x69\144"], "\165\x69\144" => $data["\165\163\x65\162\137\151\x64"]])->setDec("\160\x72\151\x63\x65", $data["\x70\162\x69\143\x65"]); goto xNICA; RASNS: $res = Db::name("\x79\x62\x73\x63\x5f\x75\x73\145\162\x5f\163\150\x61\x72\145\x5f\x63\x61\x73\x68")->insertGetId($data); goto yVJ6O; VcgZO: $today_price = Db::name("\171\142\x73\x63\x5f\165\163\x65\162\x5f\x73\150\x61\162\x65\137\143\x61\163\150")->where(["\x6d\x63\150\x5f\x69\x64" => $data["\155\x63\150\x5f\x69\144"], "\165\x73\x65\x72\137\151\144" => $data["\165\x73\145\162\137\x69\144"], "\x69\163\x5f\144\x65\x6c" => 1])->whereTime("\143\x72\x65\141\164\x65\137\164\x69\155\145", "\144")->sum("\x70\162\151\x63\x65"); goto gfjvw; RMrE0: I4jkh: goto UtDmc; gfjvw: $setting = $this->get_shareSetting($data["\155\x63\x68\137\x69\144"]); goto KmaKP; OQIRp: if (!$u) { goto rkteO; } goto mAY8r; r55hC: Hnqbc: goto PxgYm; gsIKA: J9wfO: goto vJm1I; RVapo: throw new Exception("\346\217\x90\xe7\216\260\351\207\x91\351\242\235\344\270\215\xe8\203\xbd\351\253\x98\xe4\xba\216\344\273\x8a\346\227\xa5\xe9\xa2\235\345\272\246"); goto gsIKA; D3yd2: if (!($data["\160\162\x69\143\x65"] < $setting["\155\151\156\x5f\x6d\x6f\x6e\145\171"])) { goto I4jkh; } goto SEV9J; kMe2C: throw new Exception("\xe6\x8f\220\347\216\xb0\xe6\x93\215\xe4\xbd\x9c\345\xa4\xb1\xe8\264\245"); goto r55hC; GYwuO: throw new Exception("\346\x8f\x90\xe7\x8e\xb0\xe6\223\215\xe4\275\x9c\345\244\xb1\xe8\264\xa5"); goto jSVAT; mAY8r: if (!($data["\x70\162\151\143\x65"] > $u["\160\162\151\143\x65"])) { goto SAEpc; } goto f3335; SEV9J: throw new Exception("\xe6\217\220\347\x8e\xb0\351\x87\221\xe9\xa2\x9d\344\xb8\x8d\xe8\x83\xbd\xe4\275\x8e\xe4\272\216\xe6\234\x80\xe5\260\217\xe6\217\x90\xe7\216\260\351\xa2\235\xe5\xba\xa6"); goto RMrE0; yVJ6O: if (!empty($res)) { goto Hnqbc; } goto kMe2C; dXxKu: SAEpc: goto SCzZ0; SCzZ0: rkteO: goto VcgZO; vJm1I: Wa2p6: goto RASNS; xNICA: if (!empty($res2)) { goto QWy21; } goto GYwuO; f3335: throw new Exception("\xe4\275\231\xe9\242\x9d\344\xb8\215\xe8\266\263"); goto dXxKu; vxjrD: Db::commit(); goto jZF_g; KmaKP: if (!$setting) { goto Wa2p6; } goto D3yd2; O6aET: $u = Db::name($this->u)->where(["\x6d\143\x68\x5f\151\x64" => $data["\x6d\x63\150\137\x69\144"], "\165\151\x64" => $data["\x75\x73\145\x72\x5f\x69\x64"]])->find(); goto OQIRp; jZF_g: } catch (\Exception $e) { goto Qd9sh; sEgGI: $rs["\x6d\x73\x67"] = $e->getMessage(); goto xMPM_; Qd9sh: Db::rollback(); goto sEgGI; xMPM_: return json_encode($rs); goto vrXOz; vrXOz: } goto NlyUg; c71BF: Db::startTrans(); goto LfZP1; qIwAE: return json_encode($rs); goto kSiHX; bcs0a: $rs["\151\156\x66\x6f"] = $res; goto qIwAE; h3KCR: $rs = array("\143\157\x64\145" => 1); goto c71BF; kSiHX: } public function get_CashList($data, $page) { goto KiAhh; XvK2B: $data["\x69\163\x5f\144\x65\x6c"] = 1; goto tntrZ; KiAhh: if (!($data["\x73\x74\x61\x74\165\x73"] == -1)) { goto IDJUW; } goto icU6b; zYr16: return $list; goto Ebldg; tntrZ: $list = Db::name("\171\142\x73\x63\137\x75\x73\x65\x72\137\163\x68\x61\x72\145\x5f\x63\x61\163\x68")->where($data)->page($page, PAGE_NUM)->order("\151\x64", "\x64\x65\x73\143")->select(); goto wQ3qW; LzRFk: nQ2hY: goto zYr16; U0y7Q: IDJUW: goto XvK2B; wQ3qW: if (!$list) { goto nQ2hY; } goto cOkrk; icU6b: unset($data["\x73\164\141\164\165\x73"]); goto U0y7Q; cOkrk: foreach ($list as $k => $v) { $list[$k]["\x63\162\145\x61\x74\145\x5f\x74\x69\x6d\145"] = date("\131\55\x6d\x2d\144\x20\x48\72\x69\x3a\x73", $list[$k]["\x63\162\x65\141\x74\145\x5f\x74\x69\x6d\x65"]); wo7_S: } goto quHOs; quHOs: Mu_F0: goto LzRFk; Ebldg: } }
