<?php
 namespace app\api\service; use think\Cache; use think\Db; require_once BASE_ROOT . "\x63\157\x72\145\x2f\141\x70\x70\154\x69\143\141\164\x69\x6f\x6e\57\x63\157\x6d\155\x6f\x6e\x2e\160\150\160"; class GoodsService { private $g = "\x79\x62\x73\x63\137\147\157\157\x64\163"; private $c = "\x79\142\x73\x63\137\x63\141\x72\x74"; private $f = "\171\142\163\143\137\x75\163\x65\x72\137\x66\141\166\x6f\x72\151\x74\x65\x73"; private $b = "\x79\142\163\x63\x5f\147\x6f\x6f\144\163\x5f\142\x72\141\x6e\x64"; private $i = "\171\x62\x73\x63\137\151\x6d\x61\147\145\x73"; private $s = "\171\142\x73\143\x5f\x67\157\x6f\144\163\x5f\163\153\x75"; private $cate = "\x79\x62\163\143\137\147\157\157\144\x73\x5f\x63\141\x74\x65"; private $a = "\171\142\163\143\137\165\x73\x65\162\137\141\144\x64\162\145\163\163"; private $hd = "\x79\x62\x73\143\x5f\142\x75\x73\x69\156\145\x73\163\137\141\x63\164\x69\166\151\x74\x79"; private $dq = "\x79\142\163\x63\x5f\141\162\145\x61"; private $attr = "\171\142\163\x63\137\x67\157\x6f\144\163\x5f\141\x74\164\162"; private $spec = "\171\142\x73\x63\x5f\x67\x6f\x6f\144\x73\137\163\160\x65\x63\137\146\x6f\x72\x6d\141\164"; public function getGoodsList($data, $order, $by, $page = 1) { goto H4dJn; xPQwP: $goods_list = null; goto Ay3FG; H4dJn: if (!isset($data["\143\141\x74\145\137\151\x64"])) { goto NJQSP; } goto Tewvu; vUTnc: ZOapE: goto YRzYt; Tewvu: $data["\143\141\x74\x65\137\x69\x64"] = ["\x69\156", self::InfiniteGoods($data["\143\x61\164\x65\x5f\151\144"], $data["\155\x63\x68\x5f\x69\x64"])]; goto nreRQ; BwP2e: if (!empty($goods_list)) { goto tpVLW; } goto dt8g_; YRzYt: return $goods_list; goto EXf92; nreRQ: NJQSP: goto xPQwP; Ay3FG: $goods_list = Db::name($this->g)->field("\147\x6f\x6f\144\x73\x5f\151\144\54\x67\157\x6f\144\x73\137\x6e\141\x6d\x65\54\x70\x72\x69\143\145\54\x69\156\x74\162\157\144\x75\143\164\151\x6f\156\x2c\x69\x6d\141\x67\145\x73\54\143\141\164\145\x5f\151\x64")->where($data)->where("\x73\164\x61\x74\x65", 1)->where("\151\163\x5f\144\x65\x6c", 0)->page($page, PAGE_NUM)->order($order, $by)->order("\x73\x6f\162\x74\40\144\145\163\x63\54\x63\x72\x65\x61\164\145\137\x74\151\x6d\145\x20\x64\x65\x73\143")->select(); goto BwP2e; KgR00: foreach ($goods_list as $k => $value) { goto Hez1g; Y4uHd: C5933: goto u8JNV; j_up7: if (!$pic) { goto C5933; } goto jh_bm; jh_bm: $goods_list[$k]["\160\x69\143"] = $pic; goto Y4uHd; u8JNV: B3_nB: goto imH87; Hez1g: $pic = Db::name($this->i)->where("\x69\155\147\137\151\144", $value["\x69\155\x61\147\x65\x73"])->field("\151\155\x67\137\x63\x6f\x76\145\162\x2c\151\155\147\137\x63\x6f\x76\145\162\x5f\x62\x69\x67\x2c\x69\155\147\137\x63\x6f\166\x65\162\137\155\151\x64\x2c\x69\x6d\147\137\x63\157\x76\x65\162\137\163\x6d\x61\154\154")->find(); goto j_up7; imH87: } goto vUTnc; VDxoW: tpVLW: goto KgR00; dt8g_: return $goods_list; goto VDxoW; EXf92: } public function getGoodsDetail($data, $uid) { goto Tflw7; DsRRs: $goods_detail["\141\x63\x74\x69\166\x69\x74\x79"] = $activity_info; goto Im1cJ; xu_kR: goto s6Bqd; goto tgbjJ; GAvs6: if (!empty($goods_detail)) { goto F65Iu; } goto rcm5o; e8FvY: R0BJ1: goto OCC3D; JHkzA: MkWM0: goto CV7TC; kPFvY: $goods_detail["\x67\157\x6f\144\163\137\x61\164\x74\x72"] = json_decode($goods_detail["\147\157\x6f\144\163\x5f\141\x74\x74\x72\x69\x62\165\x74\x65"], true); goto N6N9p; dCVRM: $goods_detail["\146\x61\166\157\x72\x69\164\x65\163"] = false; goto hMzQz; NyVQ5: $goods_detail["\x67\x6f\157\x64\163\137\141\164\164\162"] = []; goto xu_kR; CMKEs: $goods_detail["\143\141\x72\x74"] = Db::name($this->c)->where("\142\165\x79\145\x72\x5f\151\144", $uid)->where("\x6d\x63\x68\x5f\151\144", $data["\155\143\150\x5f\151\x64"])->sum("\156\x75\x6d"); goto e8FvY; ikvt0: $activity_info = Db::name($this->hd)->where("\155\x63\150\137\151\x64", $data["\x6d\143\x68\137\x69\144"])->order("\163\141\x74\151\163\146\x79\x5f\x6d\x6f\156\x65\x79", "\x64\x65\163\143")->where("\151\x73\137\165\163\145", 1)->where("\163\x74\141\162\137\164\x69\x6d\145", "\x3c", time())->where("\145\x6e\x64\x5f\x74\x69\155\x65", "\x3e", time())->select(); goto irLww; cc0i2: $shipping_fee_id = $goods_detail["\163\150\151\160\160\x69\156\x67\137\146\x65\x65\x5f\151\144"]; goto B9dJy; P4jld: F65Iu: goto cc0i2; Tflw7: Db::name($this->g)->where("\147\x6f\157\x64\163\137\x69\144", $data["\147\157\x6f\144\x73\x5f\151\x64"])->setInc("\x63\x6c\x69\x63\x6b\x73"); goto VqeUk; eERNH: return $goods_detail; goto wvDLc; mane7: foreach ($goods_detail["\x73\153\x75"] as $key => $value) { goto bZ4Uv; bZ4Uv: $pic = Db::name($this->i)->where("\151\x6d\147\137\x69\x64", $value["\x69\155\141\147\145\x73"])->field("\151\155\x67\137\x63\x6f\166\x65\x72\x2c\151\x6d\x67\x5f\143\x6f\166\145\x72\137\142\151\x67\x2c\151\x6d\x67\137\143\157\166\145\162\137\x6d\x69\x64\54\x69\155\x67\137\143\157\x76\x65\162\x5f\x73\155\x61\154\154")->find(); goto eaKW1; fyAyV: N_jrh: goto TZllw; eaKW1: $goods_detail["\163\x6b\x75"][$key]["\x70\151\143"] = $pic; goto fyAyV; TZllw: } goto ba35x; iWMTE: DvtQm: goto CMKEs; tTL27: $goods_detail["\x67\x6f\x6f\144\163\x5f\163\160\145\143\x5f\146\x6f\x72\x6d\x61\164"] = json_decode($goods_detail["\x67\157\157\x64\163\x5f\163\160\145\143\137\x66\x6f\162\x6d\141\x74"], true); goto ikvt0; l3NgI: if (!empty($goods_detail["\147\x6f\x6f\144\x73\x5f\x61\x74\x74\162\x69\x62\x75\164\x65"])) { goto U8b7Q; } goto NyVQ5; N6N9p: $attrs = array(); goto IndSB; B9dJy: if (empty($shipping_fee_id)) { goto pF7Rz; } goto Fcm36; OCC3D: $goods_detail["\147\157\157\x64\163\x5f\x62\x72\141\156\x64"] = Db::name($this->b)->where("\x62\162\141\x6e\x64\137\151\x64", $goods_detail->brand_id)->select(); goto T86AH; G1UCA: $goods_detail["\x67\157\x6f\x64\163\137\x61\x74\x74\x72"] = array(); goto nvbps; VqeUk: $goods_detail = Db::name($this->g)->where($data)->where("\163\164\x61\164\x65", 1)->where("\x69\163\137\144\145\x6c", 0)->find(); goto GAvs6; f8Qs2: pF7Rz: goto vR37u; QUlgF: $fav_c = Db::name($this->f)->where("\146\x61\166\x5f\x69\x64", $data["\147\157\x6f\144\x73\x5f\x69\x64"])->where("\165\151\144", $uid)->find(); goto GB_Iw; T86AH: $goods_pic = Db::name($this->i)->field("\151\155\147\x5f\143\157\166\145\162\x2c\151\155\147\x5f\143\157\166\145\x72\137\142\x69\x67\54\x69\x6d\x67\x5f\x63\157\x76\x65\162\137\x6d\151\x64\x2c\x69\x6d\x67\x5f\x63\157\166\145\162\137\x73\155\x61\x6c\154")->where("\x69\x6d\147\x5f\x69\144", "\151\x6e", $goods_detail["\x69\x6d\147\137\151\x64\x5f\141\x72\162\x61\171"])->select(); goto BKZo_; M2KBS: tEZZi: goto G1UCA; nvbps: foreach ($attrs as $ak => $av) { goto N205y; N205y: $aitem = array(); goto xJFJ5; xJFJ5: $aitem["\141\x74\x74\x72\137\166\x61\x6c\x75\x65\137\x69\x64"] = $ak; goto FrIkJ; j6xSX: $goods_detail["\x67\x6f\157\x64\x73\137\x61\164\x74\x72"][] = $aitem; goto z2Ixl; z2Ixl: hHr6h: goto bdwMW; FrIkJ: $aitem["\141\x74\x74\x72\x5f\x76\141\x6c\x75\x65"] = $attrs_name[$ak]; goto CGIma; CGIma: $aitem["\x61\164\164\x72\x5f\166\141\154\x75\145\x5f\x6e\141\x6d\145"] = $av; goto j6xSX; bdwMW: } goto JHkzA; dGYSJ: $goods_detail["\x66\x61\x76\x6f\162\x69\164\145\x73"] = true; goto iWMTE; GB_Iw: if (!empty($fav_c)) { goto WxlTn; } goto dCVRM; Fcm36: $post_fee = Db::name("\171\142\x73\x63\x5f\x65\x78\160\162\x65\163\163\x5f\x73\150\151\x70\160\151\x6e\147")->where(["\163\150\x69\160\160\151\156\147\137\x66\x65\x65\137\x69\x64" => $shipping_fee_id])->field("\142\x79\x6e\165\155\137\163\x6e\165\x6d\x2c\142\171\156\x75\155\137\163\x70\x72\151\x63\x65\54\142\x79\x6e\165\x6d\137\x78\x6e\x75\155\54\x62\x79\156\x75\155\x5f\170\160\162\151\x63\x65")->find(); goto cToKF; tgbjJ: U8b7Q: goto kPFvY; rcm5o: return null; goto P4jld; F7V2q: $goods_detail["\x73\153\165"] = Db::name($this->s)->where("\147\x6f\157\144\x73\137\x69\144", $data["\x67\x6f\x6f\144\163\137\151\x64"])->order("\x73\153\x75\137\x69\144")->select(); goto mane7; cToKF: $goods_detail["\x70\157\x73\x74\x5f\146\x65\x65"] = $post_fee; goto f8Qs2; irLww: foreach ($activity_info as $act_k => $act_v) { goto TM22c; rIrho: $activity_info[$act_k]["\x64\151\163\x63\157\x75\x6e\x74\137\155\157\156\x65\171"] = intval($act_v["\144\x69\x73\143\157\x75\x6e\x74\137\x6d\157\156\145\171"]); goto R6ceX; R6ceX: i_xyb: goto rwh72; aaHmI: $activity_info[$act_k]["\163\x61\164\151\163\146\x79\137\x6d\157\x6e\145\171"] = intval($act_v["\163\x61\x74\151\x73\146\x79\x5f\155\157\x6e\x65\171"]); goto rIrho; TM22c: $activity_info[$act_k]["\x73\164\x61\162\137\x74\x69\155\145"] = date("\131\55\x6d\x2d\x64", $act_v["\x73\164\141\x72\x5f\x74\x69\x6d\x65"]); goto hHNNq; hHNNq: $activity_info[$act_k]["\x65\x6e\x64\137\x74\x69\155\x65"] = date("\x59\x2d\155\x2d\x64", $act_v["\145\156\x64\137\x74\151\x6d\145"]); goto aaHmI; rwh72: } goto hb19A; IndSB: $attrs_name = array(); goto RNTMc; RNTMc: foreach ($goods_detail["\147\x6f\x6f\144\x73\137\141\x74\x74\162"] as $attr_item) { goto lqjP2; w7fnP: goto D_leX; goto vz5Z6; OtCMd: AIGbK: goto byBV5; IfyPE: $attrs_name[$attr_item["\141\164\164\x72\137\166\x61\154\x75\145\x5f\151\144"]] = $attr_item["\x61\164\164\x72\137\166\x61\154\165\145"]; goto FerRa; FerRa: $attrs[$attr_item["\x61\164\x74\162\137\166\x61\154\165\145\x5f\x69\144"]] = $attr_item["\141\164\164\162\137\x76\141\x6c\165\x65\x5f\156\141\x6d\x65"]; goto vtI1e; ZutOi: $attrs[$attr_item["\141\164\164\x72\137\166\x61\x6c\x75\145\x5f\151\x64"]] .= "\x2c" . $attr_item["\141\164\164\162\137\x76\141\154\165\x65\137\x6e\141\155\x65"]; goto w7fnP; vz5Z6: yoBJH: goto IfyPE; vtI1e: D_leX: goto OtCMd; lqjP2: if (empty($attrs[$attr_item["\141\x74\x74\x72\137\x76\141\x6c\x75\x65\137\x69\x64"]])) { goto yoBJH; } goto ZutOi; byBV5: } goto M2KBS; ba35x: h0_R5: goto l3NgI; CV7TC: s6Bqd: goto tTL27; Im1cJ: Cache::set("\147\157\157\144\x73\x3a" . $data["\147\157\x6f\x64\x73\137\x69\x64"], $goods_detail, CACHE_TIME); goto eERNH; hMzQz: goto DvtQm; goto Ai1iw; BKZo_: $goods_detail["\x70\151\143"] = $goods_pic; goto F7V2q; vR37u: if (!($uid != '')) { goto R0BJ1; } goto QUlgF; hb19A: e5GEC: goto DsRRs; Ai1iw: WxlTn: goto dGYSJ; wvDLc: } public function cateGoods($mch_id) { goto hO0C1; X6Nhl: fxPXr: goto k4eSL; cU_Kw: foreach ($cate_info as $key => $value) { goto iCT33; Kb51D: if (empty($cid)) { goto WChPk; } goto epBb0; jTF_D: bB4fZ: goto a0rcu; uHUNc: LqPlO: goto Kb51D; LkQ__: qdZmk: goto FI3H7; Afrik: $cid = array(); goto aLPO1; GGv1J: $cid = array(); goto s2UOF; aN0y1: foreach ($goods_list as $k1 => $g_v) { goto TAB7G; lK4i7: if (!$pic) { goto daXWH; } goto bLDo8; LfEME: C5YbO: goto oxfCf; uErNl: daXWH: goto LfEME; TAB7G: $pic = Db::name($this->i)->where("\x69\x6d\x67\x5f\x69\144", $g_v["\151\x6d\x61\x67\x65\x73"])->field("\x69\155\x67\137\143\x6f\166\145\162\x2c\x69\155\x67\x5f\x63\157\166\x65\162\x5f\x62\x69\147\x2c\151\x6d\x67\137\143\157\x76\x65\x72\137\x6d\x69\144\54\x69\x6d\147\x5f\143\157\166\145\162\x5f\163\155\x61\154\154")->find(); goto lK4i7; bLDo8: $goods_list[$k1]["\160\x69\x63"] = $pic; goto uErNl; oxfCf: } goto yvggE; PyRGJ: $carr[] = $value["\x63\x61\x74\x65\137\x69\144"]; goto KO8uY; GXbl7: $goods_list = Db::name($this->g)->field("\147\x6f\157\x64\163\x5f\x69\144\x2c\147\x6f\157\x64\163\137\156\x61\155\145\x2c\x70\162\151\143\x65\x2c\151\x6e\164\162\157\144\x75\143\x74\151\157\x6e\x2c\x69\x6d\141\147\x65\x73\x2c\163\x61\x6c\x65\x73\x2c\x6d\151\x6e\137\x62\x75\171\x2c\x73\164\157\x63\153")->where("\x63\x61\164\145\x5f\x69\144", "\151\x6e", $carr)->where("\x6d\143\x68\137\x69\144", $mch_id)->where("\163\x74\x61\x74\145", 1)->where("\x69\x73\x5f\144\145\x6c", 0)->order("\163\x6f\162\164\x20\x64\145\x73\x63\x2c\143\x72\x65\x61\x74\145\137\164\151\x6d\145\40\144\145\163\x63")->select(); goto MEACM; Ml3U6: foreach ($second_info as $citem) { goto b1WOQ; b1WOQ: $carr[] = $citem["\x63\x61\164\x65\x5f\x69\x64"]; goto jcVIY; PxcrX: RG4u9: goto p5nBE; jcVIY: $cid[] = $citem["\143\x61\164\145\x5f\x69\144"]; goto PxcrX; p5nBE: } goto uHUNc; s2UOF: $cid[] = $value["\143\x61\x74\x65\x5f\x69\x64"]; goto PyRGJ; KNCRZ: KXQFT: goto eMpI_; poO0C: $cid = array(); goto Ml3U6; KO8uY: $second_info = Db::name($this->cate)->where(["\x70\x69\x64" => ["\x69\156", $cid]])->where("\155\143\x68\x5f\151\x64", $mch_id)->select(); goto poO0C; aLPO1: foreach ($third_info as $citem2) { $carr[] = $citem2["\143\141\x74\145\137\151\144"]; nEAOJ: } goto LkQ__; MEACM: if (empty($goods_list)) { goto bB4fZ; } goto aN0y1; iCT33: $carr = array(); goto GGv1J; FI3H7: WChPk: goto GXbl7; epBb0: $third_info = Db::name($this->cate)->where(["\160\x69\x64" => ["\x69\156", $cid]])->where("\x6d\x63\150\x5f\151\x64", $mch_id)->select(); goto Afrik; a0rcu: $cate_info[$key]["\x67\157\x6f\x64\163\x5f\154\151\x73\164"] = $goods_list; goto KNCRZ; yvggE: sa4ZH: goto jTF_D; eMpI_: } goto X6Nhl; hO0C1: $cate_info = Db::name($this->cate)->where("\160\151\x64", 0)->where("\x6d\x63\x68\137\151\144", $mch_id)->order("\x73\x6f\162\164\x20\x61\163\x63")->select(); goto cU_Kw; k4eSL: return $cate_info; goto ZDXIm; ZDXIm: } public function goodsClicks($data) { $rs = Db::name($this->g)->where("\147\157\x6f\144\x73\137\151\144", $data)->setInc("\143\x6c\x69\143\153\x73"); return $rs; } public function Favorites($data) { goto HcnXD; NHUTS: goto HNtgZ; goto ONWto; Q2WWH: if (!empty($info)) { goto wN9yP; } goto zOtJS; XvF23: $res["\162\x73"] = $rs; goto NHUTS; OI5DX: return $res; goto oxNvZ; E1zxj: HNtgZ: goto OI5DX; hk8w9: $rs = Db::name($this->f)->where($data)->delete(); goto JvcXb; dHO7V: $res["\162\x73"] = $rs; goto E1zxj; Ds_jW: $rs = Db::name($this->f)->insert($data); goto UK0oO; ONWto: wN9yP: goto hk8w9; JvcXb: $res["\x73\164\141\x74\165\163"] = 0; goto dHO7V; HcnXD: $info = Db::name($this->f)->where($data)->find(); goto Q2WWH; UK0oO: $res["\163\x74\141\x74\165\x73"] = 1; goto XvF23; zOtJS: $data["\x66\x61\x76\137\164\x69\155\145"] = time(); goto Ds_jW; oxNvZ: } public function delFavorites($data) { $rs = Db::name($this->f)->delete($data["\154\157\x67\137\x69\x64"]); return $rs; } public function getFavorites($data, $page) { goto qUVPw; LgErv: foreach ($fav_list as $key => $value) { goto sRsXl; DWiiy: if (!empty($goods_info)) { goto U1ryN; } goto iZlmE; B2H2x: $fav_list[$key]["\160\x69\x63"] = $pic; goto R0cXy; yiHhZ: E1nJr: goto Rl_kt; iZlmE: Db::name($this->f)->delete($value["\154\x6f\147\x5f\151\144"]); goto oLfke; J8X2p: if (!$pic) { goto Oy0XQ; } goto B2H2x; VOSTo: goto E1nJr; goto gsy6k; R0cXy: Oy0XQ: goto yiHhZ; oLfke: unset($fav_list[$key]); goto VOSTo; bVo5e: $pic = Db::name($this->i)->where("\151\155\x67\137\x69\144", $goods_info["\151\x6d\x61\x67\x65\163"])->field("\x69\155\x67\137\143\157\166\145\x72\x2c\x69\155\147\x5f\143\x6f\x76\145\x72\137\142\151\x67\x2c\151\x6d\x67\137\x63\x6f\166\x65\162\x5f\x6d\151\x64\x2c\151\x6d\147\x5f\x63\157\x76\x65\x72\137\x73\x6d\x61\154\x6c")->find(); goto J8X2p; dVsh5: $fav_list[$key]["\x67\157\x6f\x64\163"] = $goods_info; goto bVo5e; sRsXl: $goods_info = Db::name($this->g)->where("\147\x6f\x6f\x64\x73\x5f\x69\144", $value["\x66\141\166\x5f\151\x64"])->where("\x69\x73\x5f\144\145\154", 0)->find(); goto DWiiy; gsy6k: U1ryN: goto dVsh5; Rl_kt: } goto TVwaV; pNyMC: jlxdq: goto LgErv; XOOW1: if (!empty($fav_list)) { goto jlxdq; } goto Qm75d; BJRbL: $fav_list = Db::name($this->f)->where($data)->page($page, PAGE_NUM)->select(); goto XOOW1; tE6OC: return $fav_list; goto WSYgl; qUVPw: $fav_list = null; goto BJRbL; TVwaV: qpcnZ: goto tE6OC; Qm75d: return $fav_list; goto pNyMC; WSYgl: } public function getGoods($data) { goto qq5DT; rusB4: $pro = Db::name($this->dq)->where("\151\x64", $city["\x70\151\x64"])->find(); goto pLcdf; kl1X6: $info = Db::name($this->s)->where($map)->find(); goto xA7c4; Ri_wU: return null; goto A4Vvg; wJscK: foreach ($activity_info as $act_k => $act_v) { goto gJX0p; gJX0p: $activity_info[$act_k]["\x73\x74\x61\x72\137\164\x69\155\x65"] = $this->__TIME($act_v["\x73\x74\x61\162\x5f\x74\151\155\x65"]); goto hwuHX; hwuHX: $activity_info[$act_k]["\x65\156\x64\x5f\x74\151\155\x65"] = $this->__TIME($act_v["\x65\x6e\144\x5f\164\151\x6d\x65"]); goto xI26m; xI26m: EHL3U: goto D9Y0r; D9Y0r: } goto AHRKo; BA14e: $info["\160\x6f\163\164\137\x66\x65\145"] = $post_fee; goto SOfwM; kjtDf: if (!empty($address)) { goto ANYDS; } goto KanGn; xA7c4: if (!empty($info)) { goto kiSEh; } goto I1rHs; oAHAL: if (!empty($info["\x67\x6f\x6f\144\x73"])) { goto VZ87k; } goto Ri_wU; qq5DT: $map = ["\147\x6f\x6f\x64\x73\x5f\x69\144" => $data["\x67\157\157\x64\x73\x5f\151\144"], "\x73\x6b\165\x5f\151\144" => $data["\163\153\x75\137\x69\x64"]]; goto kl1X6; CZ4cP: BBKL0: goto VXU6m; honuG: $info["\x67\157\157\x64\x73"] = Db::name($this->g)->field("\147\157\157\x64\x73\x5f\x6e\141\x6d\145\x2c\151\x6d\141\x67\x65\163\x2c\163\x68\x69\160\x70\151\156\147\137\x66\145\145\x5f\151\x64\x2c\163\x68\151\160\x70\x69\x6e\x67\x5f\146\x65\x65")->where("\147\x6f\x6f\144\x73\137\x69\x64", $info["\147\x6f\x6f\x64\163\137\x69\x64"])->where("\151\163\137\144\145\154", 0)->find(); goto oAHAL; f7s1m: $pic = Db::name($this->i)->where("\x69\x6d\147\137\151\x64", $info["\x67\x6f\157\x64\x73"]["\151\x6d\x61\147\145\x73"])->field("\151\155\x67\x5f\143\x6f\x76\145\x72\54\151\155\147\137\x63\x6f\166\145\x72\137\x62\x69\x67\x2c\x69\155\147\x5f\x63\x6f\x76\x65\162\137\x6d\x69\144\x2c\151\155\147\137\x63\157\x76\145\x72\x5f\x73\x6d\x61\154\154")->find(); goto vyvgs; oQnje: if (empty($shipping_fee_id)) { goto p7l2k; } goto Pj7qz; SOfwM: p7l2k: goto iTUGm; p84vJ: $info["\x70\151\143"] = $pic; goto CZ4cP; NPT26: $shipping_fee_id = $info["\147\x6f\x6f\x64\x73"]["\x73\x68\151\x70\160\151\x6e\x67\x5f\146\x65\x65\x5f\x69\x64"]; goto oQnje; VXU6m: $address = Db::name($this->a)->field("\143\157\156\x73\x69\x67\156\145\162\x2c\160\150\157\156\x65\54\x61\144\x64\x72\145\163\163\x2c\141\162\145\x61")->where("\165\x69\144", $data["\165\151\144"])->where("\x69\x73\x5f\144\x65\146\x61\165\154\164\x20", 1)->find(); goto kjtDf; q5G_8: $info["\141\143\164\151\166\151\164\x79"] = $activity_info; goto sqoPT; tbu4R: $res = Db::name($this->dq)->where("\151\x64", $address["\141\162\145\141"])->find(); goto F9XXu; LSIWW: kiSEh: goto honuG; sqoPT: return $info; goto c6Tod; Otlry: $info["\141\144\144\x72\x65\x73\x73"] = $address; goto IVite; X5xY3: $address["\143\151\x74\x79"] = $city["\156\x61\155\x65"]; goto bhyQX; iTUGm: if (empty($info->images)) { goto dZboH; } goto pWgmU; bhyQX: $address["\x64\151\x73\164\x72\x69\x63\x74"] = $res["\156\141\x6d\x65"]; goto Otlry; KanGn: $address = Db::name($this->a)->field("\143\x6f\x6e\x73\x69\147\156\x65\162\54\160\x68\157\156\145\54\141\x64\x64\162\145\x73\163\x2c\x61\162\x65\x61")->where("\165\151\x64", $data["\165\x69\144"])->order("\x63\x72\x65\141\164\145\x5f\x74\x69\155\145", "\x64\x65\x73\x63")->find(); goto ZgbWp; AHRKo: kDSuW: goto q5G_8; zyZl6: dZboH: goto f7s1m; A_PPa: goto mEAqg; goto zyZl6; Pj7qz: $post_fee = Db::name("\171\142\x73\143\x5f\x65\170\x70\162\145\x73\x73\137\x73\x68\151\x70\160\151\156\x67")->where(["\163\150\x69\x70\x70\x69\156\147\x5f\x66\x65\x65\x5f\x69\x64" => $shipping_fee_id])->field("\x62\171\x6e\x75\155\x5f\x73\x6e\165\155\54\142\x79\x6e\165\x6d\137\x73\160\x72\x69\143\145\x2c\x62\171\156\165\155\137\x78\156\165\x6d\x2c\x62\x79\156\165\155\x5f\170\x70\162\151\x63\x65")->find(); goto BA14e; I1rHs: return null; goto LSIWW; A4Vvg: VZ87k: goto NPT26; pLcdf: $address["\160\162\157\166\x69\x6e\x63\145"] = $pro["\156\141\x6d\x65"]; goto X5xY3; IVite: $activity_info = Db::name($this->hd)->where("\x6d\x63\150\x5f\151\x64", $data["\x6d\x63\x68\137\x69\x64"])->where("\x69\x73\137\165\163\145", 1)->order("\x73\x61\x74\151\x73\146\x79\x5f\x6d\x6f\x6e\145\x79", "\x64\x65\163\x63")->where("\x73\x74\141\x72\137\164\151\x6d\x65", "\74", time())->where("\x65\156\x64\x5f\x74\151\x6d\x65", "\x3e", time())->select(); goto wJscK; vyvgs: mEAqg: goto xYwfy; ZgbWp: ANYDS: goto tbu4R; xYwfy: if (!$pic) { goto BBKL0; } goto p84vJ; pWgmU: $pic = Db::name($this->i)->where("\151\x6d\x67\x5f\151\144", $info["\151\155\141\x67\145\163"])->field("\x69\x6d\x67\x5f\x63\157\166\145\162\x2c\x69\155\147\137\x63\157\166\x65\x72\x5f\142\x69\147\x2c\x69\155\147\137\x63\157\x76\x65\x72\x5f\x6d\151\144\x2c\x69\x6d\147\137\143\x6f\166\145\162\137\163\x6d\141\x6c\154")->find(); goto A_PPa; F9XXu: $city = Db::name($this->dq)->where("\151\x64", $res["\x70\151\x64"])->find(); goto rusB4; c6Tod: } public function cartGoods($data) { goto vsFz2; C15FP: $activity_info = Db::name($this->hd)->where("\155\x63\150\x5f\x69\144", $data["\155\x63\x68\x5f\151\x64"])->order("\163\141\x74\x69\x73\146\x79\x5f\x6d\157\x6e\145\171", "\x64\145\163\x63")->where("\x69\x73\137\x75\163\x65", 1)->where("\163\x74\141\162\137\164\151\x6d\x65", "\74", time())->where("\145\x6e\x64\x5f\x74\151\155\x65", "\x3e", time())->select(); goto UCdzI; vvbP3: $address["\x63\x69\164\171"] = $city["\156\141\155\x65"]; goto ta5yE; W8zny: jpOlO: goto Kmlcw; h15gY: $res = Db::name($this->dq)->where("\x69\144", $address["\x61\162\x65\x61"])->find(); goto KlxRC; Hq3Wq: $address = Db::name($this->a)->field("\143\157\x6e\163\x69\147\x6e\145\x72\54\x70\x68\157\x6e\x65\54\x61\x64\144\162\x65\163\163\x2c\x61\x72\x65\x61")->where("\165\151\144", $data["\165\x69\144"])->order("\143\x72\145\x61\164\x65\x5f\x74\151\155\145", "\144\x65\163\143")->find(); goto cVtwh; eR0A8: $pro = Db::name($this->dq)->where("\151\144", $city["\x70\151\144"])->find(); goto FhUXe; cVtwh: S5VIc: goto h15gY; Kmlcw: $address = Db::name($this->a)->field("\x63\x6f\x6e\x73\151\147\156\x65\162\54\160\150\x6f\156\145\54\x61\x64\x64\162\145\163\x73\x2c\x61\162\145\x61")->where("\165\x69\x64", $data["\165\x69\144"])->where("\x69\x73\x5f\144\145\x66\x61\x75\154\164\x20", 1)->find(); goto cZVRp; cZVRp: if (!empty($address)) { goto S5VIc; } goto Hq3Wq; KlxRC: $city = Db::name($this->dq)->where("\151\144", $res["\x70\151\x64"])->find(); goto eR0A8; TMy5v: return $info; goto jVaDf; AN9NW: $cart_id = explode("\54", $data["\x63\x61\162\164\x5f\x69\x64"]); goto dbkf6; JckDo: return null; goto W8zny; ta5yE: $address["\144\151\163\x74\x72\x69\143\164"] = $res["\156\141\x6d\x65"]; goto iHAvv; hrnBZ: if (!empty($info)) { goto jpOlO; } goto JckDo; iHAvv: $info["\x61\144\x64\162\x65\163\163"] = $address; goto C15FP; vsFz2: $data["\x63\x61\x72\164\x5f\151\144"] = rtrim($data["\x63\x61\162\164\x5f\151\144"], "\54"); goto AN9NW; XOiNu: XYbLO: goto hrnBZ; B8nSo: $info["\141\x63\164\x69\x76\x69\164\x79"] = $activity_info; goto TMy5v; FhUXe: $address["\160\162\157\x76\x69\x6e\x63\145"] = $pro["\156\141\x6d\x65"]; goto vvbP3; CaLZa: JWA_N: goto B8nSo; UCdzI: foreach ($activity_info as $act_k => $act_v) { goto KHydH; YNtDu: $activity_info[$act_k]["\x65\156\x64\137\164\x69\x6d\x65"] = $this->__TIME($act_v["\x65\x6e\144\x5f\164\151\x6d\x65"]); goto SPGz1; KHydH: $activity_info[$act_k]["\163\x74\x61\x72\137\x74\x69\x6d\x65"] = $this->__TIME($act_v["\163\x74\141\162\x5f\164\x69\x6d\x65"]); goto YNtDu; SPGz1: E_kQn: goto YvSRe; YvSRe: } goto CaLZa; dbkf6: foreach ($cart_id as $key => $value) { goto W6kz4; nHl2k: Wy8ch: goto gXG8R; GjUME: if (!$pic) { goto MMkPK; } goto ttQZj; UJ9M4: qIWW7: goto Y0KnQ; jPpuM: $pic = Db::name($this->i)->where("\151\x6d\x67\x5f\x69\144", $cart_info["\x67\x6f\157\x64\x73\137\151\155\141\147\145\x73"])->field("\151\x6d\147\137\143\157\166\145\x72\x2c\151\x6d\147\x5f\x63\x6f\x76\x65\x72\x5f\142\x69\x67\x2c\x69\155\147\x5f\x63\157\x76\x65\162\x5f\x6d\151\x64\x2c\x69\155\147\x5f\143\157\166\x65\x72\x5f\x73\155\141\x6c\154")->find(); goto GjUME; Q2OKS: $post_fee = Db::name("\x79\x62\x73\143\137\x65\170\x70\162\x65\x73\x73\137\163\x68\151\160\160\151\156\x67")->where(["\163\x68\151\x70\x70\x69\156\x67\x5f\146\x65\145\x5f\151\x64" => $shipping_fee_id])->field("\142\x79\x6e\165\155\137\163\x6e\165\155\x2c\x62\171\x6e\x75\x6d\x5f\163\160\162\x69\143\145\x2c\x62\x79\x6e\x75\155\137\x78\156\x75\155\x2c\142\x79\x6e\165\155\x5f\170\x70\162\x69\143\x65")->find(); goto qM2L4; f96Cm: LsZlX: goto ky2SR; Y0KnQ: $shipping_fee_id = $cart_info["\x67\157\157\144\163"]["\163\x68\151\x70\x70\x69\156\147\137\x66\x65\x65\137\x69\144"]; goto BKaUT; W6kz4: $cart_info = Db::name($this->c)->where("\143\x61\x72\164\x5f\151\x64", $value)->where("\x62\x75\171\145\162\x5f\151\144", $data["\x75\151\x64"])->find(); goto nIh18; nIh18: if (!empty($cart_info)) { goto LsZlX; } goto kjqJ_; p1TqZ: MMkPK: goto rnjL_; IHtKz: $info["\x69\x6e\x66\157"][$key] = $cart_info; goto nHl2k; rnjL_: $cart_info["\x70\162\x69\143\145"] = Db::name($this->s)->where("\163\x6b\165\137\151\x64", $cart_info["\x73\153\x75\137\x69\144"])->field("\x70\x72\151\x63\145\x2c\155\x61\162\x6b\145\164\137\x70\x72\151\143\x65\x2c\x70\x72\157\155\157\x74\145\x5f\x70\162\x69\x63\x65\x2c\x63\157\x73\164\137\x70\162\x69\x63\145\54\x73\x6b\165\137\156\141\155\x65")->find(); goto IHtKz; kjqJ_: goto Wy8ch; goto f96Cm; BKaUT: if (empty($shipping_fee_id)) { goto mhtq0; } goto Q2OKS; qM2L4: $cart_info["\x70\x6f\x73\164\x5f\146\145\145"] = $post_fee; goto CJhyV; ky2SR: $cart_info["\147\157\x6f\144\163"] = Db::name($this->g)->field("\x67\157\x6f\x64\163\137\x6e\141\x6d\x65\54\151\x6d\x61\147\x65\x73\54\x73\150\151\x70\x70\151\156\147\x5f\146\x65\x65\137\151\144\x2c\163\x68\151\160\x70\151\156\147\137\x66\145\x65")->where("\x67\x6f\x6f\x64\163\x5f\x69\144", $cart_info["\147\157\x6f\x64\163\x5f\151\144"])->where("\151\x73\x5f\144\145\x6c", 0)->find(); goto pTXAF; CJhyV: mhtq0: goto jPpuM; pTXAF: if (!empty($cart_info["\147\x6f\157\144\x73"])) { goto qIWW7; } goto JHMRH; ttQZj: $cart_info["\160\x69\x63"] = $pic; goto p1TqZ; JHMRH: goto Wy8ch; goto UJ9M4; gXG8R: } goto XOiNu; jVaDf: } public static function InfiniteCate($cate_id, $mch_id) { goto ZKjP_; zOO4l: foreach ($cate_list as $key => $value) { goto PJpJh; WMSxC: $item = array(); goto XdAbC; XdAbC: $item["\143\x61\164\x65\137\x69\144"] = $value["\x63\141\164\x65\x5f\151\x64"]; goto SonbS; g0Ecf: $value["\143\x61\x74\x65"] = self::InfiniteCate($value["\143\141\x74\x65\137\151\144"], $mch_id); goto VBeGs; mRq9F: $item["\x6c\145\x76\x65\154"] = $value["\x6c\x65\x76\x65\154"] + 1; goto GAfXC; SonbS: $item["\x63\141\x74\145\137\156\141\155\145"] = "\xe5\x85\250\351\x83\xa8"; goto mRq9F; VBeGs: if (empty($value["\x63\x61\164\x65"])) { goto JniuG; } goto WMSxC; pPTDR: $rs[] = $value; goto PxEr5; PxEr5: imZUm: goto MAzp8; PJpJh: $value["\x63\x61\164\x65\x5f\x70\x69\x63"] = self::__IMG($value["\x63\141\x74\x65\137\160\x69\x63"]); goto g0Ecf; MtcFM: JniuG: goto pPTDR; g1kQe: array_unshift($value["\143\141\164\145"], $item); goto MtcFM; GAfXC: $item["\143\141\164\x65"] = array(); goto g1kQe; MAzp8: } goto F9nYF; k9k55: return $rs; goto PWx1h; XwUyC: $cate_list = null; goto hO2Uu; Qy4TJ: qtKrr: goto NMUNz; uuGST: return $rs; goto Qy4TJ; sLk8M: if (!($rs != false)) { goto qtKrr; } goto uuGST; hO2Uu: $cate_list = Db::name("\171\142\163\143\137\x67\x6f\157\144\163\x5f\143\x61\x74\x65")->where("\160\151\144", $cate_id)->where("\x6d\143\x68\137\151\x64", $mch_id)->where("\x69\x73\137\166\x69\x73\151\142\x6c\145", 1)->order("\x73\157\162\164\x20\141\163\x63")->select(); goto zOO4l; h9eIT: Cache::set($mch_id . "\143\141\164\x65\x3a" . $cate_id, $rs, CACHE_TIME); goto k9k55; ZKjP_: $rs = Cache::get($mch_id . "\143\141\x74\145\72" . $cate_id); goto sLk8M; F9nYF: gQjm4: goto h9eIT; NMUNz: $rs = array(); goto XwUyC; PWx1h: } public static function InfiniteGoods($cate_id, $mch_id) { goto WOAtu; t07wW: return $rs; goto bkmr1; C4WUO: $cate_list = Db::name("\x79\142\x73\143\137\x67\157\x6f\x64\x73\137\143\x61\x74\145")->where("\x70\151\x64", $cate_id)->where("\155\x63\x68\x5f\151\x64", $mch_id)->where("\151\163\137\x76\x69\163\x69\142\154\145", 1)->field("\143\141\x74\145\137\x69\144")->select(); goto k71iv; k71iv: foreach ($cate_list as $key => $value) { $rs = array_merge($rs, self::InfiniteGoods($value->cate_id, $mch_id)); Axotn: } goto P57c0; P57c0: b3ErL: goto t07wW; MeZv9: $rs[] = $cate_id; goto C4WUO; WOAtu: $rs = array(); goto MeZv9; bkmr1: } public function __IMG($img_path) { goto F3qgl; f_vK8: $path = "\x68\164\164\160\72\x2f\57" . $_SERVER["\x48\124\124\x50\137\x48\117\x53\124"] . "\x2f" . $img_path; goto zoavI; oJ_OD: if (stristr($img_path, "\x68\x74\x74\x70\72\x2f\x2f") === false && stristr($img_path, "\x68\x74\x74\x70\163\x3a\57\x2f") === false) { goto YooWY; } goto PrZoa; PrZoa: $path = $img_path; goto kNHGa; id8Ca: COsKB: goto SFOEc; kNHGa: goto hE1VT; goto QFj0j; zoavI: hE1VT: goto id8Ca; F3qgl: $path = ''; goto IfotH; IfotH: if (empty($img_path)) { goto COsKB; } goto oJ_OD; QFj0j: YooWY: goto f_vK8; SFOEc: return $path; goto attzK; attzK: } public function __TIME($time) { goto QgoJ0; WArme: $date = date("\x59\x2d\155\55\144\40\110\x3a\151\x3a\x73", $time); goto xL22q; Qedl0: return $date; goto EHqyk; xL22q: nL9SD: goto Qedl0; YpX2D: if (!(!empty($time) && $time != 0)) { goto nL9SD; } goto WArme; QgoJ0: $date = ''; goto YpX2D; EHqyk: } }
