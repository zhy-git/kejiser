<?php
 namespace app\api\service; use think\Db; use think\log; require_once BASE_ROOT . "\143\157\162\145\57\x61\160\x70\154\x69\143\x61\164\x69\157\156\x2f\143\x6f\155\155\157\156\x2e\x70\x68\x70"; require_once BASE_ROOT . "\x63\x6f\162\145\x2f\145\x78\164\x65\156\144\57\x57\x78\160\x61\171\x2f\127\170\120\x61\171\56\x41\x70\151\56\x70\x68\x70"; require_once BASE_ROOT . "\x63\x6f\x72\x65\57\x61\160\160\154\151\143\141\164\151\x6f\x6e\57\141\144\155\x69\x6e\x2f\x73\145\x72\x76\x69\x63\x65\x2f\120\x72\151\x6e\164\x65\x72\x53\145\x72\x76\151\x63\x65\x2e\x70\x68\x70"; use app\admin\service\PrinterService; class BargainService { public function barIndex($data) { goto vdaUe; vdaUe: $rs = array(); goto sfwoW; Ih549: return $rs; goto kTsec; cIezh: $rs["\143\141\x74\x65\137\x69\156\x66\x6f"] = $cate_info; goto Ih549; sfwoW: $rs["\143\x61\162\x6f\x75\163\145\154"] = Db::name("\x79\142\x73\x63\x5f\141\160\x70\154\x69\x63\x61\x74\x69\x6f\156\137\143\x61\162\x6f\165\163\145\154")->where("\151\x73\137\165\x73\145", 0)->where($data)->order("\x73\x6f\x72\164", "\x64\145\x73\143")->order("\x63\x72\145\141\x74\x65\137\164\151\155\x65", "\144\145\163\x63")->select(); goto K8Mo0; K8Mo0: $cate_info = Db::name("\171\142\x73\143\137\x61\x70\x70\x6c\151\143\x61\x74\151\157\156\x5f\x61\x63\164\151\166\151\x74\x79\x5f\143\154\x61\x73\x73")->where("\151\163\x5f\165\163\145", 0)->where($data)->order("\x73\157\162\x74", "\144\145\163\x63")->order("\143\x72\145\x61\164\x65\x5f\164\x69\155\x65", "\144\x65\x73\x63")->select(); goto cIezh; kTsec: } public function getBargainList($data, $page) { goto J22s9; U_6Ek: $new_data["\x6d\x63\150\137\151\144"] = $data["\x6d\143\150\x5f\151\144"]; goto j5O4B; mmUZW: goto ntIEd; goto fBmlr; wglTm: goto nIFh7; goto iMxHq; ussmB: $bargain_list = Db::name("\x79\x62\163\143\137\x62\x61\162\147\x61\151\x6e")->where($new_data)->where("\142\141\x72\x67\141\x69\156\x5f\164\x79\160\145", "\x31")->whereTime("\x65\156\x64\x5f\164\x69\x6d\x65", "\76", time())->order("\163\x6f\162\x74", "\x64\145\x73\143")->order("\x63\x72\145\141\x74\145\137\x74\151\x6d\x65", "\144\x65\x73\x63")->page($page, PAGE_NUM)->select(); goto oABEc; iokfR: if ($data["\x74\171\160\x65"] == 1) { goto pDQrB; } goto vgbAZ; vgbAZ: if ($data["\x74\171\160\x65"] == 2) { goto LMq0m; } goto ussmB; F60uK: LMq0m: goto B2euu; FYncd: nIFh7: goto qm4ha; j5O4B: $new_data["\x64\145\154"] = 0; goto iokfR; Hy5Iz: $new_data = []; goto mmUZW; QP86_: Jn4yt: goto wglTm; X74T9: return $bargain_list; goto yJthA; B2euu: $bargain_list = Db::name("\x79\142\163\143\x5f\142\141\x72\x67\x61\x69\x6e")->where($new_data)->where("\142\141\162\147\x61\151\x6e\x5f\164\x79\x70\x65", "\61")->whereTime("\163\164\141\x72\137\164\x69\155\145", "\76", time())->order("\163\x6f\x72\x74", "\144\x65\163\143")->order("\x63\x72\145\141\164\145\137\164\x69\x6d\145", "\x64\x65\x73\x63")->page($page, PAGE_NUM)->select(); goto QP86_; am9Md: ntIEd: goto U_6Ek; cCqig: vmPkO: goto X74T9; Y_pwZ: return $bargain_list; goto DyIv1; J22s9: if (isset($data["\143\154\x61\163\x73\x5f\x69\x64"])) { goto BEdIi; } goto Hy5Iz; ea7YC: $new_data = ["\143\154\x61\163\163\137\151\144" => $data["\x63\154\x61\163\x73\x5f\151\144"]]; goto am9Md; qm4ha: if (!empty($bargain_list)) { goto NPd6U; } goto Y_pwZ; fBmlr: BEdIi: goto ea7YC; iMxHq: pDQrB: goto Y4B9U; aL72a: foreach ($bargain_list as $key => $value) { goto PhtMr; Ccm63: IdRxJ: goto Y3w2D; vGRIf: $pic = Db::name("\x79\x62\163\x63\x5f\151\155\141\x67\145\x73")->where("\x69\x6d\147\137\x69\x64", $value["\x62\x61\x72\x67\x61\151\x6e\137\160\151\143\164\x75\x72\x65"])->field("\151\x6d\147\x5f\x63\x6f\166\145\162\x2c\151\x6d\x67\137\143\x6f\x76\x65\162\137\142\151\147\54\x69\x6d\147\x5f\143\x6f\x76\145\x72\137\155\151\144\54\151\155\147\137\143\x6f\x76\x65\x72\x5f\163\x6d\141\154\154")->find(); goto LnqdA; LnqdA: if (!$pic) { goto IdRxJ; } goto o5f0i; IR6F1: $bargain_list[$key]["\x75\x73\x65\162"] = $user_list; goto kZLy_; Y3w2D: $user_list = array(); goto nItrF; PhtMr: $bargain_user_list = Db::name("\171\142\x73\x63\137\x62\x61\x72\147\141\151\156\x5f\x75\163\145\162")->where("\142\x61\162\147\141\151\156\137\151\144", $value["\x69\144"])->select(); goto vGRIf; lzCoB: DQofZ: goto IR6F1; o5f0i: $bargain_list[$key]["\160\151\143"] = $pic; goto Ccm63; kZLy_: XXMAb: goto zvQSL; nItrF: foreach ($bargain_user_list as $user_key => $user_value) { goto F6hro; F6hro: $user_info = Db::name("\171\x62\x73\143\137\x75\163\145\162")->field("\165\x73\145\162\x5f\x68\145\141\x64\151\155\147\54\156\x69\143\153\137\x6e\x61\155\x65")->where("\165\151\144", $user_value["\165\x73\x65\162\137\151\x64"])->find(); goto lLyf2; lLyf2: $user_list[$user_key] = $user_info; goto cZm8r; cZm8r: rjWtg: goto qh2NE; qh2NE: } goto lzCoB; zvQSL: } goto cCqig; Y4B9U: $bargain_list = Db::name("\171\x62\163\143\x5f\x62\141\x72\x67\x61\151\x6e")->where($new_data)->where("\x62\141\x72\x67\x61\151\156\137\x74\x79\x70\145", "\61")->whereTime("\163\x74\x61\x72\137\x74\151\x6d\145", "\x3c", time())->whereTime("\x65\x6e\144\x5f\164\151\155\x65", "\x3e", time())->order("\x73\157\162\164", "\144\x65\x73\x63")->order("\143\x72\145\141\x74\145\137\x74\x69\x6d\145", "\144\145\163\143")->page($page, PAGE_NUM)->select(); goto FYncd; DyIv1: NPd6U: goto aL72a; oABEc: goto Jn4yt; goto F60uK; yJthA: } public function getGoodsInfo($data) { goto t55J7; OVYex: $about_info = Db::name("\171\142\163\x63\137\142\165\x73\x69\x6e\145\x73\x73\137\141\x62\157\165\x74")->where("\155\x63\x68\137\x69\144", $data["\155\x63\x68\x5f\x69\144"])->find(); goto VVzv_; J3M0Q: Db::name("\171\142\163\x63\137\142\141\162\x67\x61\x69\156")->where($data)->setInc("\x63\150\x65\x63\x6b\x5f\x6e\x75\x6d\142\x65\162"); goto Ptrh1; M6p2X: $bargain_info["\x70\151\143\x5f\141\x72\x72"] = $pic_arr; goto QO2mo; DtJZJ: if (!($i < count($pic_array))) { goto eH73X; } goto crsFR; nWPR8: eXvgG: goto M6p2X; t55J7: $rs = array(); goto Mu8Pa; tJWXw: eH73X: goto nWPR8; LSY4v: $i = 0; goto jcJ8s; jcJ8s: Htn2D: goto DtJZJ; QO2mo: $rs["\142\x61\x72\147\141\151\156\x5f\151\x6e\146\x6f"] = $bargain_info; goto OVYex; o1wb0: YY0H4: goto jHqzI; x29Nw: $pic_arr = array(); goto KS3zv; hFCmJ: kV_F4: goto x29Nw; Mu8Pa: $bargain_info = Db::name("\171\x62\163\143\137\142\141\162\x67\141\x69\x6e")->where($data)->where("\x62\141\x72\147\x61\x69\156\x5f\164\171\x70\x65", "\61")->find(); goto J3M0Q; Ptrh1: $pic = Db::name("\171\x62\163\x63\x5f\151\155\x61\147\x65\163")->where("\x69\x6d\147\x5f\151\144", $bargain_info["\x62\x61\162\147\141\x69\156\x5f\x70\x69\x63\164\x75\162\145"])->value("\151\x6d\147\137\143\157\166\x65\162"); goto ZszCZ; KS3zv: if (!$bargain_info["\x69\155\x67\x5f\151\144\x5f\x61\162\162\141\171"]) { goto eXvgG; } goto Z4Zsy; DJ5gy: return $rs; goto J3JMq; VVzv_: $rs["\x61\x62\157\x75\164\137\151\156\146\x6f"] = $about_info; goto DJ5gy; jHqzI: $i++; goto eXMwA; Z4Zsy: $pic_array = explode("\54", $bargain_info["\x69\x6d\147\137\151\x64\137\141\x72\x72\x61\171"]); goto LSY4v; eXMwA: goto Htn2D; goto tJWXw; ZszCZ: if (!$pic) { goto kV_F4; } goto y7OR1; y7OR1: $bargain_info["\x70\x69\x63"] = $pic; goto hFCmJ; crsFR: $pic_arr[$i] = Db::name("\171\x62\x73\x63\x5f\151\x6d\x61\x67\145\163")->where("\x69\155\x67\x5f\x69\x64", $pic_array[$i])->value("\151\155\x67\x5f\x63\x6f\x76\x65\x72"); goto o1wb0; J3JMq: } public function getBargainInfo($data) { goto Pi78r; gk6uG: s05dK: goto zuKny; Ovr4y: $rs["\x75\163\145\162\x5f\151\156\146\157"] = $user_info; goto FYONa; ZhHJK: if (!($i < count($pic_array))) { goto s05dK; } goto zKrf0; WnU58: $pic_arr = array(); goto dcxKg; dcxKg: if (!$bargain_info["\151\x6d\x67\137\x69\144\x5f\141\x72\x72\141\x79"]) { goto cmw9P; } goto aHN1V; mMkXW: $pic = Db::name("\x79\x62\163\143\137\151\155\x61\147\145\x73")->where("\151\x6d\x67\x5f\151\144", $bargain_info["\x62\x61\162\x67\x61\151\156\x5f\x70\x69\143\x74\165\162\145"])->value("\151\155\x67\x5f\x63\x6f\166\145\x72"); goto WtRqJ; WtRqJ: if (!$pic) { goto MpENt; } goto Pk5Lf; Pk5Lf: $bargain_info["\160\x69\x63"] = $pic; goto ssg9z; HC9tu: $i = 0; goto oMS80; woSzf: $bargain_info = Db::name("\x79\142\163\143\137\x62\141\x72\x67\141\x69\156")->where("\x6d\143\x68\137\x69\144", $data["\x6d\143\x68\137\151\x64"])->where("\x69\x64", $data["\151\x64"])->where("\x62\x61\x72\147\x61\151\156\137\x74\171\160\145", "\x31")->find(); goto mMkXW; Pi78r: $rs = array(); goto woSzf; OS_5a: $user_info = Db::name("\x79\x62\163\x63\137\x62\141\x72\147\x61\x69\156\137\x75\163\145\162")->where("\142\141\x72\x67\141\151\156\137\x69\144", $data["\151\x64"])->where("\165\x73\145\162\x5f\x69\144", $data["\165\x73\145\x72\x5f\x69\144"])->find(); goto ktsqo; zKrf0: $pic_arr[$i] = Db::name("\x79\142\x73\143\x5f\x69\155\x61\147\x65\x73")->where("\151\x6d\x67\x5f\151\144", $pic_array[$i])->value("\x69\x6d\x67\137\143\x6f\166\x65\162"); goto CXJrX; oMS80: U8WE_: goto ZhHJK; fvmW8: goto U8WE_; goto gk6uG; JSR1G: $user_info["\165\x73\x65\x72\x5f\x68\x65\141\144\151\x6d\x67"] = $user_data["\165\x73\x65\x72\x5f\x68\145\x61\x64\x69\x6d\x67"]; goto NXmgp; ssg9z: MpENt: goto WnU58; upbI1: $rs["\x62\141\162\x67\x61\x69\156\x5f\151\x6e\146\x6f"] = $bargain_info; goto OS_5a; ktsqo: $user_data = Db::name("\x79\142\x73\x63\137\x75\163\145\x72")->field("\165\x73\x65\x72\137\150\145\x61\x64\151\155\x67\54\156\151\x63\x6b\137\156\x61\155\145")->where("\165\x69\144", $user_info["\165\x73\x65\x72\x5f\151\144"])->find(); goto JSR1G; FYONa: return $rs; goto PPT2I; zuKny: cmw9P: goto aNk9j; aNk9j: $bargain_info["\160\151\143\x5f\141\x72\162"] = $pic_arr; goto upbI1; NXmgp: $user_info["\156\x69\x63\153\137\156\x61\155\x65"] = $user_data["\x6e\151\x63\153\137\x6e\x61\155\x65"]; goto Ovr4y; aHN1V: $pic_array = explode("\x2c", $bargain_info["\x69\155\147\x5f\x69\x64\137\141\x72\x72\x61\171"]); goto HC9tu; CXJrX: p2BC5: goto GxFnf; GxFnf: $i++; goto fvmW8; PPT2I: } public function BargainCreate($data) { goto KiHYg; h1xTQ: try { goto JMLHP; eNZyc: Db::commit(); goto nCD3X; gNFzn: $help_data = array("\x75\163\145\x72\x5f\151\x64" => $data["\x75\163\145\x72\x5f\x69\144"], "\151\111\x6e\151\164\x69\x61\164\145\x64\x5f\151\144" => $in_id, "\142\x61\x72\x67\x61\151\156\137\x70\x72\151\x63\x65" => $bargain_price, "\143\x72\x65\x61\x74\145\137\164\x69\155\145" => time(), "\x62\141\x6c\141\156\143\x65\137\160\x72\x69\143\145" => $data["\143\165\162\162\x65\x6e\164\x5f\x70\x72\x69\143\145"]); goto XFXiC; XgE04: Db::name("\171\142\163\143\137\x62\141\162\x67\x61\x69\x6e")->where("\151\144", $data["\142\141\162\x67\141\151\x6e\137\151\144"])->setInc("\x68\145\x6c\x70\x5f\x6e\x75\x6d\142\145\162"); goto eNZyc; XFXiC: $help_id = Db::name("\x79\142\163\x63\x5f\x62\x61\162\x67\x61\x69\x6e\137\150\x65\154\x70")->strict(true)->insertGetId($help_data); goto bl0jn; bl0jn: Db::name("\x79\142\163\143\137\x62\141\x72\x67\x61\x69\156")->where("\151\x64", $data["\x62\141\x72\x67\x61\151\156\137\151\x64"])->setInc("\160\141\x72\164\x69\x63\151\x70\x61\x6e\x74\x73\137\x6e\165\155\x62\x65\x72"); goto XgE04; JMLHP: $in_id = Db::name("\x79\142\x73\x63\137\x62\x61\x72\147\x61\151\x6e\x5f\x75\x73\145\x72")->strict(true)->insertGetId($data); goto gNFzn; nCD3X: } catch (\Exception $e) { Db::rollback(); return null; } goto gWzlu; J7znL: if (!empty($bargain_info)) { goto sz94z; } goto G4xX9; KiHYg: $bargain_info = Db::name("\x79\142\x73\143\x5f\x62\x61\162\x67\x61\151\156\x5f\x75\163\145\162")->where("\x75\163\x65\162\x5f\151\144", $data["\x75\163\x65\x72\x5f\x69\x64"])->where("\x62\141\x72\147\141\151\x6e\x5f\x69\x64", $data["\x62\x61\x72\147\x61\x69\156\x5f\x69\x64"])->find(); goto vs1MX; PD5_l: RZNHr: goto LhPGK; vs1MX: if (empty($bargain_info)) { goto RZNHr; } goto nMTjG; yhezX: $data["\x6f\162\151\x67\x69\156\x61\154\x5f\160\x72\x69\x63\145"] = $bargain_info["\x6f\162\151\x67\x69\156\x61\154\137\x70\x72\151\x63\145"]; goto XgbfO; oAm63: $data["\x67\x6f\157\144\163\x5f\x69\x64"] = $bargain_info["\147\x6f\157\144\x73\137\151\x64"]; goto yhezX; ErCSI: sz94z: goto oAm63; bV2V6: $bargain_price = $this->randomFloat($bargain_price * 0.5, $bargain_price * 1.5); goto CKjD6; L34Jp: $bargain_price = ($bargain_info["\x6f\x72\151\147\x69\x6e\x61\x6c\137\x70\162\x69\x63\145"] - $bargain_info["\x6c\x6f\167\x65\163\164\137\x70\x72\x69\143\145"]) / $bargain_info["\143\157\x6d\160\154\145\164\145\144\137\x6e\165\155\x62\145\162"]; goto bV2V6; Z5tbb: $data["\x69\x6e\x69\x74\151\x61\164\x65\x64\x5f\164\151\155\145"] = time(); goto Cd_4t; XgbfO: $data["\154\157\167\145\x73\x74\x5f\x70\x72\151\143\145"] = $bargain_info["\x6c\x6f\x77\145\x73\x74\x5f\x70\162\x69\143\x65"]; goto L34Jp; G4xX9: return "\154\x6f\163\145"; goto ErCSI; gWzlu: $info = Db::name("\x79\x62\163\143\x5f\142\141\162\x67\141\x69\156\137\x68\x65\x6c\160")->where("\151\x64", $help_id)->find(); goto Q0U70; nMTjG: return "\x65\x78\x69\163\164"; goto PD5_l; Q0U70: return $info["\x62\x61\x72\x67\141\x69\156\137\x70\162\x69\143\x65"]; goto yYwtB; LhPGK: $bargain_info = Db::name("\171\142\x73\143\137\x62\141\162\147\x61\151\156")->where("\151\144", $data["\x62\141\x72\x67\141\151\x6e\x5f\x69\144"])->where("\x62\x61\162\x67\141\x69\x6e\x5f\x74\x79\160\145", "\61")->where("\142\141\162\x67\x61\x69\x6e\137\151\x6e\166\145\x6e\x74\157\x72\x79", "\x3c\x3e", 0)->whereTime("\163\x74\x61\162\137\x74\151\x6d\145", "\74", time())->whereTime("\x65\156\144\137\164\151\x6d\x65", "\x3e", time())->find(); goto J7znL; Cd_4t: Db::startTrans(); goto h1xTQ; CKjD6: $data["\143\165\x72\162\x65\156\x74\x5f\x70\x72\151\143\145"] = $bargain_info["\x6f\x72\x69\147\151\156\141\x6c\x5f\160\162\151\x63\145"] - $bargain_price; goto Z5tbb; yYwtB: } public function randomFloat($min = 0, $max = 1) { $num = $min + mt_rand() / mt_getrandmax() * ($max - $min); return sprintf("\45\56\x32\x66", $num); } public function BargainHelp($data) { goto zbYYI; vZ6bs: return "\x62\x61\x72\147\x61\151\x6e\x5f\154\157\x73\145"; goto vTUEJ; sj3lX: goto jqSp9; goto nhErB; mnhJb: $help_count = Db::name("\x79\x62\163\143\137\x62\141\162\147\141\151\x6e\x5f\150\145\x6c\160")->where("\x69\111\x6e\x69\164\151\x61\x74\x65\x64\x5f\x69\144", $data["\151\x49\156\151\x74\151\141\x74\x65\144\x5f\x69\x64"])->count(); goto cSxLJ; kfl2w: $bargain_price = $this->randomFloat($bargain_price * 0.5, $bargain_price * 1.5); goto KUJUH; KUJUH: goto Fg4n_; goto qPKjs; fVl_J: Db::startTrans(); goto UvIe5; zbYYI: $help_info = Db::name("\x79\x62\x73\x63\137\142\x61\162\147\x61\x69\156\x5f\150\x65\x6c\x70")->where($data)->find(); goto B_Pts; vTUEJ: tmOYC: goto RspQO; oeK1_: if (!empty($bargain_info)) { goto QxRhL; } goto zSnpF; pAZer: if (!empty($user_info)) { goto tmOYC; } goto vZ6bs; qPKjs: emBga: goto rpl9J; zSnpF: return "\x6c\157\163\x65"; goto f2yPf; gsAaw: $bargain_price = ($user_info["\143\x75\x72\x72\145\x6e\164\x5f\160\162\151\143\x65"] - $bargain_info["\154\x6f\x77\x65\x73\164\137\160\x72\x69\x63\x65"]) / ($bargain_info["\143\x6f\x6d\160\x6c\x65\164\x65\144\x5f\156\x75\155\142\145\x72"] - $help_count); goto kfl2w; RspQO: $bargain_info = Db::name("\171\142\163\143\137\x62\141\162\147\x61\151\156")->where("\x69\x64", $user_info["\x62\141\162\147\141\x69\156\137\x69\x64"])->where("\x62\141\162\x67\141\151\x6e\137\x74\171\160\x65", "\x31")->whereTime("\x73\164\x61\162\137\164\151\x6d\145", "\74", time())->whereTime("\145\156\x64\137\x74\x69\x6d\145", "\76", time())->find(); goto oeK1_; rpl9J: $bargain_price = $user_info["\143\165\162\x72\145\x6e\x74\137\x70\162\x69\x63\x65"] - $bargain_info["\154\x6f\167\x65\x73\x74\137\160\x72\151\x63\145"]; goto v72SG; DpSTq: return $info["\142\141\x72\147\x61\x69\156\x5f\160\162\x69\x63\x65"]; goto W1Exg; v72SG: Fg4n_: goto rgkFj; f2yPf: QxRhL: goto mnhJb; rgkFj: $data["\142\x61\x6c\x61\x6e\x63\145\x5f\160\162\x69\x63\145"] = $user_info["\143\165\x72\162\145\156\x74\x5f\x70\162\x69\x63\x65"] - $bargain_price; goto fVl_J; CLpy5: return "\145\170\151\x73\164"; goto ad7yP; YVhda: $user_info = Db::name("\171\x62\163\x63\137\x62\x61\x72\147\x61\x69\156\137\x75\163\145\162")->where("\151\x64", $data["\x69\111\156\151\x74\x69\141\x74\x65\x64\x5f\x69\x64"])->find(); goto pAZer; p_yne: return "\x6d\x61\x78"; goto d9kFu; UvIe5: try { goto MWY9h; mqzNX: Db::name("\171\x62\x73\x63\137\x62\x61\162\147\x61\151\x6e\137\165\x73\145\x72")->where("\151\144", $data["\151\111\156\151\164\151\x61\x74\x65\144\137\151\x64"])->setDec("\x63\x75\162\162\145\x6e\x74\x5f\160\x72\151\143\145", $bargain_price); goto hicQZ; m2Xir: $help_id = Db::name("\x79\x62\x73\x63\x5f\142\141\162\147\x61\x69\156\x5f\150\x65\x6c\x70")->strict(true)->insertGetId($help_data); goto mqzNX; MWY9h: $help_data = array("\x75\163\x65\162\x5f\x69\144" => $data["\x75\163\x65\162\x5f\151\x64"], "\x69\x49\x6e\x69\x74\151\x61\164\x65\x64\x5f\151\x64" => $data["\x69\x49\x6e\x69\164\151\141\x74\x65\x64\x5f\151\x64"], "\142\x61\x72\147\x61\x69\156\137\x70\x72\x69\143\x65" => $bargain_price, "\143\x72\x65\141\x74\x65\x5f\164\151\x6d\x65" => time(), "\142\x61\x6c\x61\156\x63\145\137\x70\162\151\x63\x65" => $data["\x62\141\154\141\156\x63\145\x5f\160\x72\151\143\x65"]); goto m2Xir; TV66f: Db::commit(); goto P1r89; hicQZ: Db::name("\x79\x62\x73\x63\137\x62\141\x72\147\141\151\x6e")->where("\151\144", $user_info["\142\x61\162\x67\x61\x69\156\137\151\144"])->setInc("\150\x65\154\x70\137\x6e\165\x6d\142\x65\x72"); goto TV66f; P1r89: } catch (\Exception $e) { Db::rollback(); return null; } goto sj3lX; ikBCI: $help_price = Db::name("\x79\x62\163\x63\137\142\141\162\x67\x61\x69\x6e\137\150\x65\x6c\160")->where("\x69\x49\156\x69\x74\151\x61\164\145\x64\137\151\x64", $data["\151\x49\156\x69\x74\151\x61\164\145\144\x5f\x69\x64"])->sum("\x62\141\162\x67\141\x69\x6e\137\x70\162\151\143\145"); goto cAwBJ; xgbrn: $data["\154\157\167\x65\163\164\137\x70\x72\151\143\145"] = $bargain_info["\x6c\x6f\x77\x65\163\x74\x5f\160\162\151\x63\x65"]; goto Tvn2R; B_Pts: if (empty($help_info)) { goto Bo8gB; } goto CLpy5; ad7yP: Bo8gB: goto YVhda; cAwBJ: $data["\x6f\162\x69\147\x69\156\x61\154\x5f\x70\162\x69\x63\145"] = $bargain_info["\157\162\151\147\x69\x6e\x61\154\137\160\x72\151\143\x65"]; goto xgbrn; d9kFu: jqSp9: goto Xul2b; Xul2b: $info = Db::name("\171\142\163\x63\x5f\x62\x61\x72\x67\x61\x69\x6e\137\150\x65\x6c\x70")->where("\151\x64", $help_id)->find(); goto DpSTq; nhErB: FCbVb: goto p_yne; Tvn2R: if ($bargain_info["\143\x6f\x6d\160\x6c\145\x74\145\144\x5f\156\x75\x6d\142\145\x72"] - $help_count == 1) { goto emBga; } goto gsAaw; cSxLJ: if ($help_count == $bargain_info["\143\157\155\160\x6c\145\164\x65\144\137\x6e\x75\x6d\x62\x65\162"]) { goto FCbVb; } goto ikBCI; W1Exg: } public function getBargainRecord($data) { goto uWbR2; vopmf: $help_list = Db::name("\x79\142\x73\143\137\142\141\162\147\141\151\x6e\x5f\x68\145\154\x70")->where("\151\x49\156\x69\x74\151\x61\164\x65\144\137\x69\x64", $data["\x69\111\156\151\164\x69\141\x74\145\x64\137\x69\x64"])->select(); goto WxBAH; nRACt: return $help_list; goto S0E5i; uWbR2: $help_list = null; goto vopmf; tAWkC: sw1Fo: goto nRACt; WxBAH: foreach ($help_list as $key => $value) { goto MNWkQ; aFZXM: $help_list[$key]["\156\x69\143\153\x5f\156\141\155\145"] = $user_data["\156\x69\x63\153\137\x6e\141\155\x65"]; goto HOXZv; MNWkQ: $user_data = Db::name("\x79\x62\163\143\x5f\x75\163\x65\x72")->field("\x75\163\145\x72\137\150\145\x61\x64\x69\x6d\x67\54\x6e\151\143\x6b\x5f\x6e\x61\x6d\x65")->where("\165\151\144", $value["\165\x73\x65\162\137\151\x64"])->find(); goto odczZ; odczZ: $help_list[$key]["\165\163\x65\x72\x5f\x68\x65\x61\144\x69\x6d\147"] = $user_data["\x75\x73\x65\162\x5f\x68\145\x61\x64\x69\x6d\147"]; goto aFZXM; HOXZv: bIsxs: goto sTwm1; sTwm1: } goto tAWkC; S0E5i: } public function getMyBargain($data, $page) { goto UHj3t; BEOYN: return $user_list; goto v45pS; H_6XB: VapR1: goto BEOYN; UHj3t: $user_list = Db::name("\x79\142\x73\x63\x5f\x62\x61\162\x67\x61\151\156\137\165\163\x65\x72")->where("\x75\163\x65\x72\x5f\x69\144", $data["\165\163\145\x72\x5f\x69\144"])->order("\151\156\x69\164\151\x61\164\145\x64\x5f\x74\x69\x6d\x65", "\x64\x65\163\x63")->page($page, PAGE_NUM)->select(); goto pSbNu; pSbNu: foreach ($user_list as $key => $value) { goto jYjjS; FAKPX: lqNvc: goto sCU4d; rLkQT: $user_list[$key]["\x73\164\x61\162\x5f\x74\x69\155\145"] = $bargain_info["\x73\164\x61\162\137\164\151\155\145"]; goto pe28w; GyD2V: $user_list[$key]["\x63\x6f\x6e\x73\165\155\160\x74\151\157\156\x74\151\x6d\145"] = date("\x59\x2d\x6d\x2d\x64\40\110\x3a\x69", $bargain_info["\x63\157\156\163\165\155\x70\x74\151\x6f\x6e\137\x74\x69\x6d\x65"]); goto JAxMZ; jYjjS: $bargain_info = Db::name("\x79\142\x73\x63\137\x62\x61\162\x67\141\x69\x6e")->where("\151\144", $value["\142\141\162\147\141\151\156\x5f\x69\x64"])->find(); goto J81SZ; ci27N: $user_list[$key]["\160\x69\143"] = $pic; goto FAKPX; o_kla: $user_list[$key]["\150\145\x6c\160"] = $help_num; goto Zj0FQ; pe28w: $user_list[$key]["\x65\156\x64\x5f\164\151\155\145"] = $bargain_info["\145\x6e\x64\137\164\x69\155\x65"]; goto v9lC6; Zj0FQ: f6fAC: goto Wvns6; btW3x: if (!$pic) { goto lqNvc; } goto ci27N; J81SZ: $user_list[$key]["\142\141\x72\x67\141\151\x6e\137\156\141\155\x65"] = $bargain_info["\142\x61\162\147\141\x69\156\137\x6e\141\x6d\x65"]; goto rLkQT; v9lC6: $user_list[$key]["\x63\x6f\x6e\163\165\x6d\160\x74\x69\157\156\137\164\151\155\145"] = $bargain_info["\143\157\x6e\x73\x75\x6d\160\x74\151\157\x6e\x5f\164\x69\x6d\x65"]; goto GyD2V; JAxMZ: $pic = Db::name("\x79\142\163\143\137\151\x6d\141\x67\145\x73")->where("\151\x6d\147\x5f\x69\144", $bargain_info["\x62\x61\x72\147\141\151\156\137\160\151\143\164\165\162\x65"])->field("\x69\x6d\147\x5f\x63\x6f\x76\145\162\54\x69\155\147\x5f\143\157\166\x65\162\137\x62\151\x67\54\151\155\147\137\143\157\x76\x65\162\137\x6d\x69\x64\x2c\151\155\x67\137\x63\x6f\166\x65\x72\x5f\163\155\x61\154\154")->find(); goto btW3x; sCU4d: $help_num = Db::name("\x79\142\x73\x63\137\142\x61\162\147\141\x69\x6e\x5f\150\145\x6c\160")->where("\x69\111\156\x69\x74\151\x61\x74\x65\144\x5f\151\x64", $value["\x69\144"])->count(); goto o_kla; Wvns6: } goto H_6XB; v45pS: } public function createOrder($data) { goto xRvON; pcrg2: $data["\x62\x61\x72\x67\x61\x69\156\137\x70\x69\x63"] = $info["\142\141\x72\147\x61\151\x6e\x5f\x70\x69\x63\164\x75\162\x65"]; goto wSSaR; sw9DM: return $id; goto g1b2Z; hqVZH: $data["\142\141\x72\x67\141\x69\x6e\x5f\156\x61\155\145"] = $info["\x62\x61\162\x67\141\x69\156\x5f\156\x61\x6d\x65"]; goto pcrg2; WNN7Q: Db::startTrans(); goto a_yOL; a_yOL: try { goto gK_ka; hw6vQ: $pay_data = array("\157\x75\164\x5f\164\162\141\x64\x65\x5f\x6e\x6f" => $data["\x6f\x75\164\137\x74\x72\x61\144\x65\137\x6e\157"], "\x70\x61\x79\137\164\x79\x70\145" => $data["\160\x61\171\137\164\x79\x70\145"], "\164\x79\x70\145\137\x61\x6c\x69\x73\137\x69\x64" => $id, "\x70\141\171\137\142\157\144\171" => "\xe5\xb9\263\345\x8f\xb0\346\224\xaf\xe4\273\x98", "\x70\x61\171\x5f\144\x65\x74\x61\x69\154" => "\345\xb9\263\345\x8f\xb0\350\xb4\255\344\xb9\260\345\x95\206\xe5\223\x81", "\160\x61\x79\137\x6d\157\x6e\145\x79" => $data["\160\x61\x79\137\x6d\157\156\x65\171"], "\x63\x72\x65\x61\x74\145\x5f\x74\151\155\145" => time()); goto b5Ntk; PmzNq: YqqpS: goto hw6vQ; ERGOy: Db::commit(); goto NYJs3; TiiRk: if (!$id) { goto YqqpS; } goto atOg_; WIrJj: $pp->print_order(); goto PmzNq; b5Ntk: Db::name("\171\142\163\x63\x5f\142\x61\162\147\141\x69\x6e\137\x6f\x72\x64\145\162\x5f\x70\x61\x79\155\145\156\x74")->insert($pay_data); goto s4WPZ; s4WPZ: if (!(isset($data["\x62\141\x72\x67\x61\151\156\137\151\x64"]) && $data["\141\x63\x74\151\166\151\x74\171\x5f\x6f\162\144\x65\x72\137\164\x79\x70\145"] == 1)) { goto LSxm4; } goto jWlwy; jWlwy: Db::name("\x79\142\x73\x63\137\x62\x61\x72\x67\x61\x69\x6e")->where("\151\x64", $data["\x62\x61\162\147\141\x69\156\137\x69\144"])->setDec("\142\x61\x72\x67\141\x69\156\137\x69\x6e\x76\145\x6e\164\x6f\x72\171"); goto BPTG6; BPTG6: LSxm4: goto ERGOy; atOg_: $pp = new PrinterService($data["\155\x63\150\137\151\x64"], $id, "\x6f\x72\x64\x65\162", 1); goto WIrJj; gK_ka: $id = Db::name("\x79\142\163\x63\x5f\x62\x61\x72\x67\x61\x69\156\x5f\157\x72\144\x65\162")->strict(true)->insertGetId($data); goto TiiRk; NYJs3: } catch (\Exception $e) { Db::rollback(); return null; } goto sw9DM; xRvON: $info = Db::name("\x79\x62\x73\x63\137\x62\x61\162\x67\141\151\x6e")->where("\x69\144", $data["\x62\141\162\x67\141\x69\156\x5f\151\x64"])->find(); goto hqVZH; wSSaR: $data["\157\162\x69\x67\x69\156\141\x6c\x5f\x70\x72\151\143\145"] = $info["\x6f\x72\x69\x67\151\156\141\154\x5f\x70\x72\x69\x63\145"]; goto WNN7Q; g1b2Z: } public function orderList($data, $page = 1) { goto BM79S; l5KW1: rq4ds: goto nKhsy; KgXeX: if (!empty($order_list)) { goto K_8hb; } goto dQtSX; dQtSX: return $order_list; goto FsiYG; FsiYG: K_8hb: goto r0WH1; nKhsy: return $order_list; goto GW0Km; BM79S: $order_list = null; goto hTQbm; hTQbm: $order_list = Db::name("\x79\x62\163\143\137\142\141\x72\x67\141\x69\156\x5f\x6f\162\x64\x65\162")->where("\x62\165\x79\145\x72\137\x69\x64", $data["\x62\x75\x79\145\x72\x5f\151\144"])->where("\151\163\x5f\x64\145\154\x65\164\x65\144", 0)->where("\157\162\x64\x65\162\137\x73\x74\x61\164\x75\x73", $data["\157\162\x64\145\162\x5f\163\164\141\x74\165\x73"])->page($page, PAGE_NUM)->order("\x63\x72\145\141\x74\145\x5f\164\151\155\x65", "\144\x65\163\143")->select(); goto KgXeX; r0WH1: foreach ($order_list as $key => $value) { goto Kx0B0; ULVA0: $order_list[$key]["\x70\141\x79\137\x74\151\155\x65"] = __TIME($value["\160\141\x79\x5f\x74\151\155\x65"]); goto UJfq5; kj267: aZj_Q: goto GZ50F; Kx0B0: $order_list[$key]["\x73\151\147\156\137\x74\151\155\x65"] = __TIME($value["\x73\151\147\x6e\137\x74\x69\x6d\145"]); goto ULVA0; CMqPQ: $pic = Db::name("\171\142\x73\143\x5f\x69\155\141\147\x65\x73")->where("\151\x6d\147\137\151\144", $value["\x62\141\162\x67\x61\x69\x6e\x5f\x70\151\143"])->field("\x69\x6d\x67\137\x63\x6f\166\145\x72\54\x69\155\147\137\x63\157\166\145\x72\137\142\x69\147\x2c\151\x6d\147\137\x63\157\x76\145\x72\137\155\151\x64\x2c\151\155\147\137\143\x6f\166\x65\x72\137\x73\155\x61\x6c\154")->find(); goto I9qhn; Phsga: $order_list[$key]["\x70\151\x63"] = $pic; goto p5I3W; UJfq5: $order_list[$key]["\143\x6f\x6e\x73\151\x67\x6e\137\x74\151\x6d\x65"] = __TIME($value["\143\x6f\x6e\x73\151\147\156\137\x74\151\155\145"]); goto CMqPQ; I9qhn: if (!$pic) { goto g6IHH; } goto Phsga; p5I3W: g6IHH: goto kj267; GZ50F: } goto l5KW1; GW0Km: } public function getOrder($data) { goto sYEHo; sYEHo: $order_info = null; goto sV7wC; f7m4Z: $pro = Db::name("\x79\142\x73\143\137\141\x72\x65\141")->where("\151\x64", $city["\160\x69\144"])->find(); goto hkTsm; ONM5M: $order_info["\143\x72\x65\141\164\145\137\x74\x69\155\145"] = __TIME($order_info["\143\x72\145\x61\x74\x65\137\x74\x69\155\145"]); goto zrWOJ; c9f12: if (!$pic) { goto SKqSf; } goto dPcXR; dPcXR: $order_info["\x70\x69\143"] = $pic; goto vW9vJ; bx6f1: yDh9c: goto eRjjE; sV7wC: $order_info = Db::name("\x79\x62\163\143\x5f\x62\141\x72\x67\141\151\x6e\137\x6f\162\144\x65\x72")->where($data)->where("\x69\x73\x5f\144\145\154\145\x74\145\144", 0)->find(); goto Ps5kl; qtZeY: $order_info["\x63\x6f\x6e\x73\x69\x67\x6e\x5f\x74\151\155\x65"] = __TIME($order_info["\x63\157\x6e\163\x69\x67\x6e\x5f\164\x69\x6d\145"]); goto ONM5M; eRjjE: $order_info["\x73\151\x67\156\x5f\164\151\x6d\x65"] = __TIME($order_info["\x73\x69\x67\x6e\x5f\164\151\x6d\x65"]); goto Y9zB1; vW9vJ: SKqSf: goto kTUzw; s9vmm: $order_info["\x61\x64\x64\162\145\x73\163"] = $address; goto YY3I9; p3hPN: $city = Db::name("\171\142\x73\143\137\141\162\145\x61")->where("\151\144", $res["\x70\151\144"])->find(); goto f7m4Z; hkTsm: $address["\160\162\157\166\x69\x6e\143\x65"] = $pro["\x6e\x61\x6d\x65"]; goto xQNdZ; zrWOJ: $res = Db::name("\x79\x62\x73\x63\x5f\141\162\145\x61")->where("\x69\x64", $order_info["\x72\x65\143\x65\151\x76\145\162\x5f\141\162\145\141"])->find(); goto p3hPN; xQNdZ: $address["\143\151\164\x79"] = $city["\156\141\x6d\x65"]; goto KGRcy; YY3I9: $pic = Db::name("\x79\142\163\143\137\x69\x6d\141\147\x65\163")->where("\151\155\147\137\151\x64", $order_info["\142\x61\x72\147\141\151\x6e\137\x70\151\x63"])->field("\151\x6d\147\137\x63\157\166\x65\162\54\151\x6d\147\137\143\157\x76\x65\x72\x5f\142\151\x67\x2c\151\x6d\x67\137\x63\157\166\x65\x72\137\x6d\x69\144\54\151\x6d\x67\x5f\x63\157\166\145\x72\x5f\x73\x6d\141\x6c\154")->find(); goto c9f12; kTUzw: return $order_info; goto SthsQ; Ps5kl: if (!empty($order_info)) { goto yDh9c; } goto LG0EZ; Y9zB1: $order_info["\x70\x61\x79\137\164\x69\x6d\145"] = __TIME($order_info["\x70\141\171\x5f\164\x69\x6d\x65"]); goto qtZeY; KGRcy: $address["\x64\x69\x73\164\162\x69\143\164"] = $res["\x6e\141\155\x65"]; goto s9vmm; LG0EZ: return $order_info; goto bx6f1; SthsQ: } public function signOrder($data) { goto vrdsT; Bxq8n: $res = Db::name("\171\x62\163\143\x5f\142\x61\x72\147\x61\x69\156\x5f\157\x72\144\x65\x72")->where(["\157\162\144\145\162\137\151\144" => $data["\157\x72\x64\145\x72\x5f\x69\x64"]])->update($new_data); goto FCHpE; jBaGL: return json_encode($rs); goto iZEw4; LOBk8: if (!empty($info)) { goto oXsq_; } goto Jk3BC; vrdsT: $info = Db::name("\x79\142\163\x63\x5f\x62\x61\x72\147\x61\151\156\x5f\x6f\x72\x64\x65\162")->where($data)->find(); goto LOBk8; iZEw4: oXsq_: goto atchm; CuoiG: $new_data = array("\157\x72\144\145\x72\137\163\164\141\164\165\163" => 3, "\x73\151\147\x6e\x5f\164\151\x6d\x65" => time()); goto Bxq8n; cthUH: $rs["\x6d\163\x67"] = "\350\257\xa5\xe8\xae\242\xe5\x8d\x95\xe7\x8a\xb6\346\x80\201\xe5\xbc\x82\xe5\270\xb8\357\xbc\x81"; goto jBaGL; FCHpE: return $res; goto k09or; Jk3BC: $rs["\143\157\144\145"] = 1; goto cthUH; atchm: $pp = new PrinterService($data["\x6d\143\150\137\x69\144"], $data["\157\x72\x64\x65\162\x5f\x69\x64"], "\x63\x6f\x6e\146\151\x72\x6d", 1); goto VVUA5; VVUA5: $pp->print_order(); goto CuoiG; k09or: } public function cancelOrder($data) { goto Aeika; GRyZ6: S038g: goto RXb_a; RXb_a: $bargain = Db::name("\171\142\163\143\x5f\142\x61\x72\147\x61\x69\156")->where("\151\144\75" . $info["\142\141\x72\147\141\151\156\137\x69\144"])->find(); goto VRAkJ; n9VfA: return $res; goto NurYi; nSpxn: return null; goto GRyZ6; Mn6Fl: Db::name("\x79\x62\163\143\137\x62\141\x72\x67\x61\x69\x6e")->where("\x69\144\x3d" . $info["\142\141\162\147\x61\x69\x6e\x5f\151\x64"])->setInc("\x62\x61\162\x67\x61\x69\x6e\137\x69\156\x76\x65\x6e\x74\x6f\x72\x79", $info["\x74\x6f\164\141\x6c"]); goto ur0UJ; ur0UJ: LMAMp: goto EcENT; Aeika: $info = Db::name("\x79\x62\163\143\137\x62\x61\x72\x67\141\151\x6e\x5f\x6f\162\x64\145\x72")->where($data)->find(); goto KgsNY; EcENT: Db::startTrans(); goto tAA2D; KgsNY: if (!empty($info)) { goto S038g; } goto nSpxn; tAA2D: try { goto p9MtV; p9MtV: $new_data = array("\157\162\144\145\x72\137\x73\x74\x61\x74\165\163" => -1); goto hTiaf; hTiaf: $res = Db::name("\171\x62\163\143\x5f\142\x61\162\147\x61\151\156\x5f\157\x72\x64\145\x72")->where(["\157\x72\144\145\x72\137\x69\x64" => $data["\x6f\x72\x64\x65\x72\x5f\x69\144"]])->update($new_data); goto JHF1V; JHF1V: Db::commit(); goto KJtCX; KJtCX: } catch (\Exception $e) { Db::rollback(); return $e->getMessage(); } goto n9VfA; VRAkJ: if (empty($bargain)) { goto LMAMp; } goto Mn6Fl; NurYi: } public function delOrder($data) { goto tvDfn; nWeNN: return null; goto qhY0b; qhY0b: JL_xS: goto NDlYw; NDlYw: $new_data = array("\151\x73\x5f\144\x65\154\x65\164\x65\x64" => 1); goto SEVTL; FIk9C: return $res; goto oin3O; m6ixl: if (!empty($info)) { goto JL_xS; } goto nWeNN; tvDfn: $info = Db::name("\x79\142\x73\x63\x5f\x62\x61\162\x67\141\151\156\137\157\162\x64\x65\x72")->where($data)->find(); goto m6ixl; SEVTL: $res = Db::name("\171\x62\163\x63\137\142\141\162\x67\141\x69\156\137\157\x72\144\x65\162")->where(["\x6f\162\144\145\162\x5f\151\144" => $data["\157\x72\144\145\x72\x5f\151\x64"]])->update($new_data); goto FIk9C; oin3O: } public function refundOrder($data) { goto w5c9R; w5c9R: $info = Db::name("\x79\x62\x73\x63\x5f\x62\x61\x72\147\141\x69\156\137\157\162\x64\145\162")->where($data)->find(); goto uDONR; TKc70: $res = Db::name("\171\142\163\x63\137\x62\141\x72\x67\x61\x69\x6e\137\x6f\x72\x64\x65\x72")->where(["\x6f\x72\x64\x65\x72\x5f\x69\x64" => $data["\157\162\144\x65\162\137\151\144"]])->update($new_data); goto uXru1; gw91S: yQP4y: goto AMub0; uXru1: return $res; goto XIJm8; ZLkPi: return null; goto gw91S; AMub0: $new_data = array("\x6f\x72\x64\x65\162\x5f\x73\164\x61\164\165\163" => 4, "\x72\145\x66\165\156\x64\x5f\164\x69\x6d\x65" => time()); goto TKc70; uDONR: if (!empty($info)) { goto yQP4y; } goto ZLkPi; XIJm8: } public function checkOrder($buyer_id, $bargain_id) { $rs = Db::name("\171\x62\163\x63\137\142\x61\x72\x67\x61\151\156\137\x6f\x72\x64\x65\162")->where("\142\165\171\x65\x72\137\151\x64", $buyer_id)->where("\142\x61\x72\147\x61\151\x6e\137\151\x64", $bargain_id)->where("\x61\x63\x74\x69\x76\151\x74\171\x5f\x6f\x72\x64\x65\x72\x5f\164\x79\160\145", 1)->where("\157\x72\144\145\162\x5f\163\x74\141\x74\165\163", "\74\76", -1)->count(); return $rs; } public function orderInfo($data) { goto yf8MQ; IRW3S: $info["\141\x64\x64\x72\145\x73\163"] = $rs; goto EHkAd; U8onm: $city = Db::name("\x79\142\x73\x63\137\141\x72\x65\141")->where("\151\x64", $res["\160\x69\144"])->find(); goto RZi3R; RVkEF: $rs["\143\x69\164\171"] = $city["\x6e\141\x6d\145"]; goto l0_xy; EHkAd: return $info; goto eQhQn; yf8MQ: $info = Db::name("\x79\142\163\143\137\142\x61\x72\147\141\151\156\137\x6f\162\x64\x65\162")->where($data)->find(); goto CAieQ; Uc80R: $rs["\x70\x72\157\x76\151\156\x63\145"] = $pro["\x6e\141\x6d\145"]; goto RVkEF; RZi3R: $pro = Db::name("\171\x62\163\143\x5f\x61\162\145\x61")->where("\151\x64", $city["\160\x69\144"])->find(); goto Uc80R; CAieQ: $res = Db::name("\x79\142\163\143\137\141\x72\x65\141")->where("\151\x64", $info["\162\x65\x63\x65\151\166\x65\x72\137\141\162\x65\x61"])->find(); goto U8onm; l0_xy: $rs["\x64\151\x73\164\162\151\x63\164"] = $res["\156\x61\x6d\145"]; goto IRW3S; eQhQn: } public function orderPay($data) { goto xXcz_; X5337: $rs["\143\x6f\144\145"] = 1; goto SJq1_; fJyjq: $input->SetTotal_fee($info["\x70\x61\x79\x5f\155\x6f\x6e\145\171"] * 100); goto xzYeC; kCruD: $input->SetDetail($info["\160\141\171\x5f\x64\145\x74\141\151\154"]); goto fJyjq; QsmPr: $rs["\155\163\x67"] = "\350\xae\xa2\345\x8d\225\xe4\xb8\215\xe5\255\230\xe5\x9c\250"; goto Fe35i; N2t1P: $input->SetBody($info["\x70\x61\x79\x5f\x62\x6f\144\171"]); goto KnDPG; niIhJ: $rs["\143\x6f\144\145"] = 1; goto Cq03l; z2ulD: $rs["\143\157\144\x65"] = 1; goto QsmPr; kdLWj: return $rs; goto mr5J8; gRgeo: $GLOBALS["\x6d\x63\x68\x5f\x69\x64"] = $data["\155\143\x68\x5f\x69\x64"]; goto dD5aM; mpIcG: if (!($unifiedorder["\162\x65\x74\x75\162\156\137\x63\x6f\x64\145"] == "\106\x41\111\114")) { goto Arocq; } goto l2hSQ; Fe35i: return $rs; goto F5Tyi; KnDPG: $input->SetOpenid($data["\157\160\x65\156\x69\144"]); goto kCruD; F5Tyi: KJS8R: goto g5VmW; pAxdS: $unifiedorder = \WxPayApi::unifiedOrder($input); goto mpIcG; xXcz_: $rs = array("\143\157\x64\x65" => 0, "\151\156\x66\157" => array()); goto I_PP1; Aq9hl: $res = $this->weixinapp($unifiedorder); goto h91YO; h91YO: $rs["\151\x6e\146\x6f"] = $res; goto UfNf4; rLSlV: if (!($unifiedorder["\162\145\x73\165\154\164\137\x63\157\x64\x65"] == "\106\101\111\114")) { goto IA9pZ; } goto X5337; d7BJe: Arocq: goto rLSlV; oAJA2: if (!empty($info)) { goto KJS8R; } goto z2ulD; dD5aM: $GLOBALS["\153\145\x79"] = "\142\141\162\x67\x61\x69\156"; goto uRAy4; j0z6x: IA9pZ: goto Aq9hl; l1q04: $rs["\x6d\163\147"] = $unifiedorder["\162\145\164\165\162\x6e\137\x6d\163\x67"]; goto VbtA2; SJq1_: $rs["\155\x73\x67"] = $unifiedorder["\145\162\x72\x5f\143\x6f\144\x65\137\144\145\163"]; goto CE3mC; Cq03l: $rs["\x6d\x73\147"] = "\350\xae\xa2\xe5\x8d\225\xe4\270\xbb\351\242\x98\xe5\xb7\xb2\346\x94\271\xe5\x8f\230"; goto kdLWj; g5VmW: if (!($info["\160\x61\171\137\163\164\x61\164\x75\163"] != 0)) { goto abiA5; } goto niIhJ; xzYeC: $input->SetOut_trade_no($data["\157\x75\164\137\x74\162\x61\144\145\137\x6e\x6f"]); goto SjR1q; UfNf4: return $rs; goto eOnmr; SjR1q: $input->SetTrade_type("\x4a\123\x41\x50\111"); goto pAxdS; VbtA2: return $rs; goto d7BJe; mr5J8: abiA5: goto gRgeo; I_PP1: $info = Db::name("\171\x62\163\143\x5f\x62\141\x72\147\141\151\x6e\137\x6f\162\x64\x65\x72\137\160\x61\x79\155\x65\156\164")->where("\157\165\164\x5f\x74\x72\x61\144\x65\x5f\156\x6f", $data["\x6f\165\x74\137\x74\162\x61\144\145\x5f\x6e\x6f"])->find(); goto oAJA2; CE3mC: return $rs; goto j0z6x; uRAy4: $input = new \WxPayUnifiedOrder(); goto N2t1P; l2hSQ: $rs["\x63\x6f\144\145"] = 1; goto l1q04; eOnmr: } private function weixinapp($unifiedorder) { goto R2uh_; R2uh_: $input = new \WxPayJsApiPay(); goto dr6nw; WyOqt: $input->SetNonceStr($this->createNoncestr()); goto yvqAq; hQ0mY: $input->SetTimeStamp('' . time() . ''); goto WyOqt; MFN_l: $input->SetSign(); goto hnWh9; hnWh9: return $input; goto AunN1; LeDpU: $input->SetSignType("\115\104\65"); goto MFN_l; dr6nw: $input->SetAppid($unifiedorder["\x61\x70\x70\151\144"]); goto hQ0mY; yvqAq: $input->SetPackage("\x70\162\145\160\x61\171\x5f\151\144\x3d" . $unifiedorder["\x70\x72\145\x70\141\x79\137\151\144"]); goto LeDpU; AunN1: } private function createNoncestr($length = 32) { goto o1yUa; tFrE4: return $str; goto GTLnM; zGD1a: rJp1E: goto U4zIn; xNgan: goto mWiTf; goto gR75M; AmN0B: $i = 0; goto oQVvT; U4zIn: $i++; goto xNgan; EZ0D9: $str = ''; goto AmN0B; o1yUa: $chars = "\x61\142\143\144\x65\x66\x67\x68\x69\152\x6b\154\155\x6e\157\x70\x71\162\x73\164\x75\166\167\170\x79\172\x30\x31\x32\63\x34\x35\x36\67\70\71"; goto EZ0D9; gR75M: DGmXQ: goto tFrE4; wqnYk: if (!($i < $length)) { goto DGmXQ; } goto j86_y; oQVvT: mWiTf: goto wqnYk; j86_y: $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1); goto zGD1a; GTLnM: } }
