<?php
 namespace app\api\service; use think\Db; use think\Cache; class ArticleService { private $ac = "\x79\142\163\x63\137\x61\x72\164\x69\143\x6c\145\137\143\154\141\163\x73"; private $a = "\171\x62\x73\143\x5f\x61\162\x74\x69\143\154\145"; private $g = "\x79\x62\x73\143\137\x67\x6f\157\x64\163"; private $i = "\171\142\x73\143\x5f\151\x6d\x61\147\145\163"; public function getArticleClass($data) { $rs = Db::name($this->ac)->where("\155\x63\150\137\151\x64", $data["\x6d\143\150\x5f\151\144"])->where("\151\x73\x5f\144\x65\154", 1)->order("\163\x6f\162\164", "\x64\x65\163\x63")->order("\x63\x72\x65\141\x74\145\137\164\x69\x6d\x65", "\x64\x65\x73\143")->select(); return $rs; } public static function InfiniteCate($class_id, $mch_id) { goto awvJU; fh8_5: if (!($rs != false)) { goto TD1A9; } goto yoFoB; X5_LL: $cate_list = null; goto UnkFm; awvJU: $rs = Cache::get($mch_id . "\x63\154\x61\x73\x73\x3a" . $class_id); goto fh8_5; yoFoB: return $rs; goto mZb6p; U_CsV: WSkM0: goto s4Blr; xTlUQ: return $rs; goto p4DEI; mZb6p: TD1A9: goto p0qX1; s4Blr: Cache::set($mch_id . "\143\154\x61\163\x73\x3a" . $class_id, $rs, CACHE_TIME); goto xTlUQ; UnkFm: $cate_list = Db::name("\x79\x62\163\x63\x5f\x61\x72\164\151\x63\154\x65\137\x63\x6c\x61\x73\x73")->where("\160\151\144", $class_id)->where("\155\x63\150\x5f\x69\x64", $mch_id)->where("\151\163\x5f\144\x65\154", 1)->order("\163\157\162\x74", "\x64\145\163\143")->order("\x63\x72\145\141\164\x65\137\164\x69\155\x65", "\144\145\163\143")->select(); goto c8lT4; c8lT4: foreach ($cate_list as $key => $value) { goto mIREF; iI72u: Nfxwn: goto qQzre; bruzY: $rs[] = $value; goto iI72u; mIREF: $value["\143\141\x74\145"] = self::InfiniteCate($value["\x63\x6c\141\x73\x73\x5f\151\x64"], $mch_id); goto bruzY; qQzre: } goto U_CsV; p0qX1: $rs = array(); goto X5_LL; p4DEI: } public static function InfiniteArticle($class_id, $mch_id) { goto SPm8_; SPm8_: $rs = array(); goto BL3Ak; UM14Q: gcyNr: goto AWWwK; wppmp: $cate_list = Db::name("\171\x62\x73\143\137\x61\x72\x74\x69\x63\x6c\145\137\x63\x6c\141\x73\163")->where("\x70\151\144", $class_id)->where("\155\x63\x68\x5f\x69\144", $mch_id)->where("\x69\x73\137\x64\145\154", 1)->field("\x63\154\141\x73\163\137\x69\144")->select(); goto lijRb; lijRb: foreach ($cate_list as $key => $value) { $rs = array_merge($rs, self::InfiniteArticle($value["\143\x6c\141\x73\x73\x5f\151\x64"], $mch_id)); DRYfg: } goto UM14Q; AWWwK: return $rs; goto t6h1g; BL3Ak: $rs[] = $class_id; goto wppmp; t6h1g: } public function getArticle($data, $page) { goto EMH9i; ZH2NU: CGaFM: goto Mz_Q2; OseSz: $rs["\141\x72\x74\x69\x63\154\x65\137\156\x61\x6d\x65"] = $class_id["\x6e\141\x6d\x65"]; goto BFlxt; CoWQd: $rs["\143\154\141\163\163\137\163\164\171\154\x65"] = 2; goto UQYwq; Rpp1V: $new_data = ["\155\x63\150\137\x69\144" => $data["\155\x63\x68\x5f\151\144"]]; goto Hf_3T; EMH9i: unset($data["\x69\x64\145\x6e\x74"]); goto Rpp1V; NN_Yk: if (empty($class_id)) { goto tDvfK; } goto OseSz; YYYPp: $new_data["\143\x6c\x61\163\x73\x5f\151\144"] = ["\151\x6e", self::InfiniteArticle($data["\143\x6c\x61\x73\x73\137\151\144"], $data["\x6d\x63\x68\x5f\x69\x64"])]; goto PFsER; lS_Et: if (!empty($info)) { goto CGaFM; } goto utoLT; ssgOD: dIstk: goto YYYPp; UAmuL: $rs["\141\x72\x74\x69\x63\154\x65\x5f\156\141\x6d\x65"] = "\346\x96\x87\347\xab\xa0\xe5\210\227\xe8\xa1\xa8"; goto KRhNc; PFsER: $class_id = Db::name($this->ac)->where($data)->where("\x69\x73\137\x64\x65\154", 1)->find(); goto NN_Yk; UQYwq: i2VtX: goto iOuh0; Hf_3T: if (isset($data["\143\x6c\x61\163\163\x5f\x69\144"])) { goto dIstk; } goto UAmuL; t_DoX: return $rs; goto zOvy9; Vyzi1: tDvfK: goto Q23qo; Mz_Q2: foreach ($info as $key => $value) { $info[$key]["\x63\x72\x65\141\x74\x65\137\x74\x69\x6d\x65"] = date("\x59\55\x6d\x2d\144\x20\110\72\x69\x3a\x73", $value["\143\x72\x65\x61\x74\145\137\x74\x69\x6d\145"]); o3WEQ: } goto lFMsV; FJs_7: goto i2VtX; goto Vyzi1; KRhNc: $one_ac = Db::name($this->ac)->where(["\155\x63\150\x5f\x69\144" => $data["\x6d\x63\x68\137\151\x64"], "\151\163\x5f\x64\x65\x6c" => 1])->order("\x63\x6c\141\163\163\137\151\x64\40\x61\163\143")->find(); goto lZkS6; D066m: $info = Db::name($this->a)->where($new_data)->where(["\163\164\x61\x74\165\x73" => 2, "\164\171\x70\x65" => 1])->page($page, PAGE_NUM)->order("\163\x6f\162\x74", "\144\145\x73\143")->order("\x63\162\x65\141\x74\145\137\x74\151\x6d\x65", "\144\145\x73\143")->select(); goto lS_Et; Q23qo: $rs["\x61\162\164\151\143\x6c\145\137\x6e\x61\x6d\x65"] = "\xe6\226\207\xe7\253\xa0\345\x88\227\350\xa1\250"; goto CoWQd; utoLT: return $rs; goto ZH2NU; BFlxt: $rs["\x63\x6c\141\x73\x73\x5f\163\x74\x79\154\145"] = $class_id["\143\154\x61\163\163\137\163\x74\171\154\x65"]; goto FJs_7; lZkS6: $rs["\143\154\x61\x73\x73\137\163\164\x79\x6c\145"] = $one_ac["\x63\x6c\x61\x73\163\137\163\164\x79\154\x65"] ? $one_ac["\143\154\x61\x73\163\x5f\163\164\x79\x6c\x65"] : 2; goto jYlhS; jYlhS: goto BvQig; goto ssgOD; lFMsV: WOXyF: goto DY_6u; iOuh0: BvQig: goto D066m; DY_6u: $rs["\151\x6e\x66\x6f"] = $info; goto t_DoX; zOvy9: } public function getArticleInfo($data) { goto GV3yI; ina1B: goto MDl1t; goto O_IAH; jI77q: x0oTM: goto IEHmX; BPXXg: foreach ($goods_id as $key => $value) { goto rXj3u; hp2kP: iotue: goto fXKCA; fXKCA: $pic = Db::name($this->i)->where("\151\x6d\147\x5f\151\x64", $goods_info[$key]->images)->field("\151\x6d\x67\x5f\143\x6f\x76\x65\x72\x2c\151\155\147\137\143\x6f\x76\145\x72\137\142\x69\x67\54\x69\x6d\x67\x5f\143\x6f\166\x65\x72\x5f\x6d\151\144\x2c\x69\155\x67\x5f\143\x6f\166\145\x72\137\x73\x6d\x61\x6c\x6c")->find(); goto JFls5; Wa4yz: unset($goods_info[$key]); goto lpi_k; lpi_k: goto cAh1f; goto hp2kP; JFls5: $goods_info[$key]["\160\151\x63"] = $pic; goto j47Vb; rXj3u: $goods_info[$key] = Db::name($this->g)->field("\147\x6f\157\x64\x73\137\x69\144\54\147\x6f\x6f\144\163\137\x6e\x61\x6d\145\x2c\160\x72\x69\x63\145\x2c\151\x6d\x61\x67\145\163\x2c\x69\156\164\162\157\x64\165\143\164\x69\x6f\156")->where("\x67\x6f\x6f\x64\x73\x5f\x69\x64", $value)->where("\151\163\137\x64\x65\x6c", 0)->find(); goto bMOx7; j47Vb: cAh1f: goto iLiYe; bMOx7: if (!empty($goods_info[$key])) { goto iotue; } goto Wa4yz; iLiYe: } goto MBt5O; IEHmX: Db::name($this->a)->where("\x61\162\164\151\143\x6c\x65\137\151\x64", $data["\141\162\x74\x69\x63\154\x65\137\151\x64"])->setInc("\x63\154\x69\x63\153"); goto d9fzW; qHNCH: $goods_id = explode("\54", $rs["\x67\157\x6f\144\163\137\x61\162\162\x61\171"]); goto d4MMM; d4MMM: $goods_info = array(); goto BPXXg; MBt5O: zHqQ5: goto Kpd0K; GV3yI: if (isset($data["\x69\144\x65\x6e\x74"])) { goto Go9dc; } goto yHjU0; Kpd0K: $rs["\x67\157\157\144\163"] = $goods_info; goto d7NAq; yHjU0: $rs = Db::name($this->a)->where("\141\162\x74\151\x63\x6c\x65\137\x69\144", $data["\141\x72\x74\151\143\x6c\x65\x5f\x69\x64"])->find(); goto ina1B; O_IAH: Go9dc: goto b7EhO; arCxM: if (!empty($rs)) { goto x0oTM; } goto C3oOq; b7EhO: $rs = Db::name($this->a)->where("\x6d\x63\150\x5f\151\x64", $data["\x6d\143\150\x5f\151\144"])->where("\x69\144\x65\156\x74", $data["\x69\x64\145\x6e\x74"])->find(); goto VTbXI; d9fzW: $rs["\143\162\145\x61\164\x65\x5f\x74\151\x6d\145"] = date("\131\55\155\x2d\x64\x20\110\72\151\x3a\x73", $rs["\x63\x72\145\x61\x74\x65\137\164\151\x6d\x65"]); goto qHNCH; d7NAq: return $rs; goto nj2t6; VTbXI: MDl1t: goto arCxM; C3oOq: return $rs; goto jI77q; nj2t6: } }
