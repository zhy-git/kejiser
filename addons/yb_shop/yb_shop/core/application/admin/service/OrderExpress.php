<?php
 namespace app\admin\service; use app\common\model\ExpressCompany; use app\common\model\OrderGoods; class OrderExpress extends Base { function __construct() { parent::__construct(); } public function delivey($order_id, $express_name, $shipping_type, $express_company_id, $express_no) { goto nSR3v; QiyT5: $order_express->startTrans(); goto gU52B; nSR3v: $user = new \app\common\model\Business(); goto bTKHO; gU52B: try { goto dkcbp; kYDzA: $order_express->commit(); goto rPiwn; yDkF1: $express_company_info = $express_company->getInfo(["\143\157\137\x69\144" => $express_company_id], "\x63\x6f\155\160\141\x6e\x79\x5f\156\x61\155\x65"); goto zATx9; s0L3P: $order_goods = new \app\admin\service\OrderGoods(); goto iFkoh; n0Xx5: $order_express->save($data_goods_delivery); goto s0L3P; rPiwn: return 1; goto c4qGA; dkcbp: $express_company = new ExpressCompany(); goto yDkF1; zATx9: $data_goods_delivery = array("\x6f\162\x64\145\x72\137\x69\x64" => $order_id, "\157\162\144\145\x72\137\x67\157\x6f\x64\x73\x5f\151\x64\137\141\162\162\x61\x79" => '', "\145\x78\x70\x72\x65\163\x73\137\156\x61\x6d\x65" => $express_name, "\163\x68\151\160\x70\x69\x6e\147\x5f\164\171\x70\145" => $shipping_type, "\145\170\x70\x72\145\x73\x73\137\143\x6f\x6d\160\141\156\x79" => $express_company_info["\x63\157\x6d\160\141\156\x79\x5f\x6e\141\155\x65"], "\145\170\x70\162\145\x73\163\137\143\157\x6d\x70\x61\x6e\x79\137\151\144" => $express_company_id, "\145\170\160\x72\x65\x73\x73\x5f\x6e\x6f" => $express_no, "\x73\x68\x69\160\160\151\156\147\x5f\x74\151\x6d\145" => time(), "\165\x69\144" => $this->bus_id, "\x75\163\x65\x72\137\156\141\x6d\x65" => $user_name["\x6e\141\155\145"]); goto n0Xx5; iFkoh: $order_goods->orderGoodsDelivery($order_id, ''); goto kYDzA; c4qGA: } catch (\Exception $e) { $order_express->rollback(); return $e->getMessage(); } goto qTmT0; pAgfz: $order_express = new \app\common\model\OrderExpress(); goto QiyT5; bTKHO: $user_name = $user->getInfo(["\x69\x64" => $this->bus_id], "\x6e\141\155\x65"); goto pAgfz; qTmT0: } }
