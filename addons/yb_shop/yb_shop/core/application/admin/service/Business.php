<?php
 namespace app\admin\service; use app\common\model\AdminModule; use think\Session; class Business extends Base { function __construct() { parent::__construct(); $this->bus = new \app\common\model\Business(); } public function login($user_name, $password = '') { goto lCXhb; g7qUE: Session::set("\142\165\x73\137\151\144", $user_info["\x69\144"]); goto Akdt7; UUycv: $condition = array("\160\x68\x6f\156\145" => $user_name, "\160\x61\x73\x73\x77\x6f\x72\x64" => md5($password)); goto rcRVB; xn5oL: return 0; goto UiIlW; mlgz5: if (!empty($user_info)) { goto TDsSq; } goto xn5oL; lCXhb: Session::set("\142\165\x73\x5f\151\x64", ''); goto UUycv; wOt79: TDsSq: goto g7qUE; QdBIa: dInwH: goto dzq6a; UiIlW: goto dInwH; goto wOt79; rcRVB: $user_info = $this->bus->getInfo($condition, $field = "\x69\144\x2c\160\x68\157\x6e\x65\54\156\x69\x63\x6b\x5f\x6e\x61\x6d\x65\x2c\x6e\x61\x6d\145"); goto mlgz5; Akdt7: return 1; goto QdBIa; dzq6a: } public function getSessionBusId() { return $this->bus_id; } public function getModuleIdByModule($controller, $action) { goto Q2JdY; v2mJG: return $res; goto c4sUC; Q2JdY: $admin_mod = new AdminModule(); goto dU5Fz; dU5Fz: $res = $admin_mod->getModuleIdByModule($controller, $action); goto v2mJG; c4sUC: } public function getBusInfo() { $res = $this->bus->getInfo("\151\144\x3d" . $this->bus_id, "\x2a"); return $res; } public function getchildModuleQuery($moduleid) { goto jMspl; tyZI2: $new_list = $list; goto sEU7M; HdXH8: $list = $auth_group->getAuthList($moduleid); goto tyZI2; jMspl: $auth_group = new AdminModule(); goto HdXH8; sEU7M: return $new_list; goto eNILH; eNILH: } public function selectAll() { goto pfgkP; ilMJt: $list = $auth_group->getAuthListLevel(2); goto edoiL; pfgkP: $auth_group = new AdminModule(); goto ilMJt; edoiL: return $list; goto hyhPF; hyhPF: } public function getModuleRootAndSecondMenu($module_id) { goto UM7PZ; Uac1u: return array(0, 0); goto ZeYa2; ZeYa2: gT2lc: goto uCgVo; hVnNm: EjOU9: goto xqSS5; ekJ3B: if (empty($info)) { goto WOw3m; } goto f4eno; UM7PZ: $auth_group = new AdminModule(); goto PWVP0; QZA5z: goto VAjnn; goto RuIB1; xqSS5: goto X7A1d; goto KBbCO; WJ6sq: iSQep: goto MgWHF; KBbCO: pH7iY: goto QZA5z; celDb: zg2QA: goto o22NM; Quc8H: WOw3m: goto bTqga; uCgVo: $info = $auth_group->getInfo(["\x6d\x6f\144\x75\154\145\x5f\151\144" => $module_id, "\160\x69\x64" => array("\x6e\x65\161", 0)], "\160\x69\144\x2c\x20\154\x65\166\145\154"); goto ekJ3B; f4eno: if ($info["\x6c\x65\x76\145\154"] == 2) { goto SfCEG; } goto tRn13; IU_hI: $pid = $module["\160\x69\x64"]; goto pJZ3c; RuIB1: SfCEG: goto nZuH_; yQ4Rg: X7A1d: goto gC3QN; sLm8G: $module = $auth_group->getInfo(["\155\157\x64\165\154\145\x5f\x69\x64" => $pid, "\x70\151\x64" => array("\156\x65\161", 0)], "\x70\151\144\54\40\x6d\x6f\x64\165\x6c\145\137\151\x64\54\x20\x6c\145\x76\x65\x6c"); goto c1QV3; pJZ3c: goto EjOU9; goto WJ6sq; PWVP0: $count = $auth_group->where(["\155\x6f\144\165\154\145\x5f\151\x64" => $module_id])->count(); goto fHP3d; gC3QN: if (!($pid != 0)) { goto pH7iY; } goto sLm8G; sjck_: VAjnn: goto TY59j; MgWHF: $pid = 0; goto Bwu4K; Bwu4K: return array($module["\160\x69\x64"], $module["\155\157\x64\x75\x6c\x65\x5f\x69\144"]); goto hVnNm; tRn13: $pid = $info["\160\151\144"]; goto yQ4Rg; TY59j: goto zg2QA; goto Quc8H; nZuH_: return array($info["\160\151\x64"], $module_id); goto sjck_; c1QV3: if ($module["\154\x65\x76\x65\x6c"] == 2) { goto iSQep; } goto IU_hI; fHP3d: if (!($count == 0)) { goto gT2lc; } goto Uac1u; bTqga: return array($module_id, 0); goto celDb; o22NM: } }
