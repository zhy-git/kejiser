<?php
 namespace app\admin\service; class ArticleClass extends Base { function __construct() { parent::__construct(); $this->article_class = new \app\common\model\ArticleClass(); } public function getArticleClass($condition = '', $field = "\x2a", $order = '') { $list = $this->article_class->getQuerys($condition, $field, $order); return $list; } public function getClassCategoryDetail($pid) { $res = $this->article_class->get($pid); return $res; } public function getClassCategoryTree($pid, $mch_id) { goto Ji7WJ; Ji7WJ: $list = array(); goto L5G8Q; YrmF1: $list = $one_list; goto niSSY; niSSY: return $list; goto gawg2; L5G8Q: $one_list = $this->getClassCategoryListByParentId($pid, $mch_id); goto YrmF1; gawg2: } public function getClassCategoryListByParentId($pid, $mch_id) { goto b__Jd; c_fRb: $i = 0; goto uWE5D; VlO5s: nvFuW: goto ypbcs; lDf2R: $where["\x6d\143\150\137\151\144"] = array("\145\161", $mch_id); goto gINo_; ypbcs: BTCRZ: goto mIb_R; iZLeJ: Neev9: goto bSryW; i2ING: goto Uk3QY; goto s5BLo; hcao4: Uk3QY: goto iZLeJ; w_zkk: if (!empty($child_list) && $child_list["\164\157\x74\141\154\137\143\157\x75\x6e\164"] > 0) { goto z5i3L; } goto PB2Ho; H7ncs: goto zicCd; goto VlO5s; PB2Ho: $list["\x64\x61\x74\x61"][$i]["\x69\x73\x5f\x70\x61\x72\x65\x6e\x74"] = 0; goto i2ING; gINo_: $where["\x69\163\137\x64\x65\154"] = array("\145\x71", 1); goto WIikk; uWE5D: zicCd: goto QMlee; rxrcu: $child_list = $this->getClassCategoryList(1, 1, "\160\x69\144\75" . $parent_id, "\x70\151\x64\54\x73\x6f\x72\x74"); goto w_zkk; WIikk: $list = $this->getClassCategoryList(1, 0, $where, "\x70\151\x64\x2c\x73\157\x72\164"); goto ZMC7d; mIb_R: return $list["\x64\x61\164\x61"]; goto H_3D_; QMlee: if (!($i < count($list["\x64\x61\x74\x61"]))) { goto nvFuW; } goto QoKII; QoKII: $parent_id = $list["\x64\x61\x74\x61"][$i]["\x63\x6c\141\x73\x73\137\x69\144"]; goto rxrcu; b__Jd: $where["\160\151\x64"] = array("\145\x71", $pid); goto lDf2R; X02J8: $list["\x64\141\164\141"][$i]["\x69\163\x5f\160\x61\x72\145\156\x74"] = 1; goto hcao4; s5BLo: z5i3L: goto X02J8; bSryW: $i++; goto H7ncs; ZMC7d: if (empty($list)) { goto BTCRZ; } goto c_fRb; H_3D_: } public function getClassCategoryList($page_index = 1, $page_size = 0, $condition = '', $order = '', $field = "\x2a") { $list = $this->article_class->pageQuery($page_index, $page_size, $condition, $order, $field); return $list; } public function getFormatClassCategoryList($mch_id) { $one_list = $this->getCategoryTreeUseInShopIndex($mch_id); return $one_list; } public function getCategoryTreeUseInShopIndex($mch_id) { goto oB_eO; zKNxn: $goods_category_one = $goods_category_model->getQuerys(["\x6c\145\x76\x65\x6c" => 1, "\x6d\143\150\x5f\x69\144" => $mch_id, "\151\x73\137\144\145\154" => 1], "\143\154\141\163\163\137\x69\x64\x2c\x6e\141\155\x65\x2c\160\151\x64\54\x63\154\x61\163\163\x5f\x69\x6d\x67\x2c\163\157\x72\x74\54\143\162\x65\x61\164\x65\137\x74\x69\155\x65", "\x73\x6f\162\164"); goto GbRpX; OrT6C: return $goods_category_one; goto np0xc; GbRpX: if (empty($goods_category_one)) { goto eTqbX; } goto KcyAC; KcyAC: foreach ($goods_category_one as $k_cat_one => $v_cat_one) { goto LADFl; wlFeJ: fUq4w: goto qlxGL; sHRr_: $v_cat_one["\143\150\x69\154\144\137\154\x69\163\164"] = $goods_category_two_list; goto wlFeJ; efQxG: NIgjD: goto sHRr_; Dut67: foreach ($goods_category_two_list as $k_cat_two => $v_cat_two) { goto ZOD_Y; Bg7mt: $v_cat_two["\x63\x6f\165\156\x74"] = count($cat_three_list); goto LhFrY; LhFrY: $v_cat_two["\x63\150\151\x6c\x64\137\x6c\x69\163\x74"] = $cat_three_list; goto pQhjr; pQhjr: PY3C8: goto uFtCs; ZOD_Y: $cat_three_list = $goods_category_model->getQuerys(["\x6c\x65\x76\145\x6c" => 3, "\160\151\x64" => $v_cat_two["\x63\154\141\x73\x73\137\151\x64"], "\x69\x73\137\x64\x65\154" => 1], "\x63\x6c\141\163\x73\137\151\144\x2c\x6e\x61\x6d\145\54\160\x69\x64\x2c\x63\x6c\141\163\x73\137\151\x6d\x67\x2c\163\157\x72\164\54\143\x72\145\x61\164\145\137\x74\151\x6d\145", "\163\x6f\162\x74"); goto Bg7mt; uFtCs: } goto Jv7p4; Jv7p4: DIWfD: goto efQxG; vZMWP: $v_cat_one["\x63\x6f\x75\x6e\x74"] = count($goods_category_two_list); goto wS0tI; LADFl: $goods_category_two_list = $goods_category_model->getQuerys(["\154\x65\x76\145\154" => 2, "\160\x69\x64" => $v_cat_one["\143\154\x61\x73\163\137\151\x64"], "\151\x73\137\144\145\154" => 1], "\x63\154\141\163\x73\137\x69\x64\54\156\141\155\x65\54\160\x69\x64\x2c\143\154\x61\x73\x73\137\x69\x6d\x67\54\x73\x6f\x72\x74\x2c\x63\x72\x65\x61\164\145\137\x74\151\x6d\145", "\163\x6f\162\164"); goto vZMWP; wS0tI: if (empty($goods_category_two_list)) { goto NIgjD; } goto Dut67; qlxGL: } goto sobnA; HrukT: eTqbX: goto OrT6C; oB_eO: $goods_category_model = new \app\common\model\ArticleClass(); goto zKNxn; sobnA: jiB9_: goto HrukT; np0xc: } public function addArticleClass($data) { $res = $this->article_class->save($data); return $res; } public function getArticleClassById($class_id) { $info = $this->article_class->getInfo(["\143\x6c\x61\163\163\137\x69\144" => $class_id]); return $info; } public function updateArticleClass($data) { $res = $this->article_class->save($data, ["\143\x6c\x61\x73\163\x5f\151\144" => $data["\143\x6c\x61\163\163\x5f\151\x64"]]); return $res; } public function delArticleClass($class_id) { goto HPTTv; IcSn3: return $res; goto jOeTI; XshpS: if ($article_list) { goto sWjLK; } goto E3Ky_; YFjfr: q2f2u: goto Xwsk1; E3Ky_: $res = $article_class->destroy($class_id); goto IcSn3; a9zd9: sWjLK: goto Md1j4; Md1j4: return "\x2d\61"; goto YFjfr; jOeTI: goto q2f2u; goto a9zd9; r4U6h: $article_list = $article->getInfo(["\143\154\141\x73\x73\137\151\144" => $class_id]); goto XshpS; kXZx5: $article_class = new \app\common\model\ArticleClass(); goto r4U6h; HPTTv: $article = new \app\common\model\Article(); goto kXZx5; Xwsk1: } }
