<?php
 namespace app\admin\service; use think\Db; class VideoService extends Base { public function getVideoClass($data) { $class_list = Db::name("\171\x62\x74\143\x5f\166\x69\144\145\x6f\137\143\x6c\x61\163\163")->where($data)->order("\x73\x6f\162\164", "\x64\x65\x73\143")->paginate(20); return $class_list; } public function addVideoClass($data) { $class = Db::name("\171\x62\x74\x63\x5f\x76\151\x64\145\157\137\x63\154\x61\163\x73")->insert($data); return $class; } public function getVideoClassById($class_id) { $info = Db::name("\171\x62\164\x63\137\166\151\x64\x65\157\x5f\x63\x6c\x61\x73\163")->where(["\143\154\x61\163\x73\x5f\151\144" => $class_id])->find(); return $info; } public function updateVideoClass($data) { $info = Db::name("\x79\x62\164\x63\x5f\x76\x69\144\145\x6f\x5f\143\x6c\141\x73\163")->where("\x63\154\x61\x73\163\x5f\x69\144", $data["\x63\x6c\x61\x73\x73\x5f\x69\144"])->update($data); return $info; } public function delVideoClass($data) { goto E1y9s; bGrPT: return $class; goto jVVmZ; FzPTA: try { goto Hm3Di; LhXFk: Db::commit(); goto BPe0v; AKcvC: Db::name("\x79\142\x74\x63\x5f\x76\x69\x64\x65\x6f")->where("\x63\x6c\x61\163\163\x5f\x69\x64", $data)->delete(); goto LhXFk; Hm3Di: $class = Db::name("\171\142\x74\143\137\166\151\x64\145\157\x5f\x63\x6c\141\163\x73")->where("\x63\154\x61\x73\x73\x5f\x69\144", $data)->delete(); goto AKcvC; BPe0v: } catch (\Exception $e) { Db::rollback(); return null; } goto bGrPT; E1y9s: Db::startTrans(); goto FzPTA; jVVmZ: } public function getVideo($data) { $class_list = Db::name("\171\142\164\143\x5f\166\x69\144\145\x6f")->where($data)->order("\x73\x6f\162\164", "\x64\145\163\143")->paginate(20); return $class_list; } public function getClass($mch_id) { $class_list = Db::name("\171\142\164\143\137\166\151\144\145\157\x5f\143\x6c\141\163\x73")->where("\x6d\x63\150\137\151\x64", $mch_id)->order("\163\157\162\x74", "\x64\x65\163\143")->select(); return $class_list; } public function addVideo($data) { goto l1VAl; iprd3: return $class; goto NhXJg; qojux: try { goto LkHAh; X9BN0: Db::commit(); goto V1T8n; pqWXq: Db::name("\171\142\x74\x63\x5f\x76\151\144\145\157\x5f\x63\x6c\x61\163\x73")->where("\143\154\x61\x73\163\x5f\151\x64", $data["\143\x6c\141\x73\x73\137\151\x64"])->update(["\x75\x70\144\141\164\x65\x5f\x74\151\155\x65" => time()]); goto X9BN0; LkHAh: $class = Db::name("\x79\x62\164\x63\137\x76\151\144\145\x6f")->insert($data); goto pqWXq; V1T8n: } catch (\Exception $e) { Db::rollback(); return null; } goto iprd3; l1VAl: Db::startTrans(); goto qojux; NhXJg: } public function getVideoById($video_id) { $info = Db::name("\171\142\x74\143\x5f\x76\x69\144\x65\x6f")->where(["\166\151\x64\x65\x6f\x5f\151\144" => $video_id])->find(); return $info; } public function updateVideo($data) { $info = Db::name("\x79\x62\x74\x63\137\166\x69\144\x65\x6f")->where("\x76\151\x64\145\x6f\137\151\x64", $data["\x76\x69\x64\145\x6f\x5f\x69\x64"])->update($data); return $info; } public function VideoDel($data) { $class = Db::name("\171\x62\164\x63\137\166\x69\x64\145\x6f")->where("\x76\x69\144\x65\x6f\137\151\144", $data)->delete(); return $class; } }
