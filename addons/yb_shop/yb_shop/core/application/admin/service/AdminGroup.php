<?php
 namespace app\admin\service; use app\common\model\AdminModule; class AdminGroup extends Base { function __construct() { parent::__construct(); $this->admin_group = new \app\common\model\AdminGroup(); } public function getSystemUserGroupDetail($group_id) { return $this->admin_group->get($group_id); } public function addSystemUserGroup($group_name, $module_id_array, $info) { goto cquOL; iTDVE: return 2; goto y077g; RXS4B: return $res; goto a5jLt; y077g: Tj8Vs: goto SHWtc; cquOL: $count = $this->admin_group->getCount(["\x72\x6f\x6c\145\x5f\x6e\141\x6d\x65" => $group_name]); goto YRRRN; VI2jQ: $res = $this->admin_group->save($data); goto RXS4B; SHWtc: $data = array("\x72\157\154\145\137\x6e\x61\155\x65" => $group_name, "\x6d\157\144\x75\x6c\145\137\x69\x64\x5f\x61\x72\162\x61\171" => $module_id_array, "\x69\x6e\x66\x6f" => $info, "\x63\162\145\x61\164\145\x5f\164\151\155\145" => time()); goto VI2jQ; YRRRN: if (!($count > 0)) { goto Tj8Vs; } goto iTDVE; a5jLt: } public function updateSystemUserGroup($role_id, $role_name, $module_id_array, $info) { goto pSclM; t3RUy: $res = $this->admin_group->save($data, ["\x72\157\154\x65\137\151\144" => $role_id]); goto jDg_c; BMuo5: if (!($role_name != $group_info["\x72\x6f\x6c\x65\137\x6e\141\155\145"])) { goto JrpsV; } goto UDI0v; UDI0v: $count = $this->admin_group->getCount(["\162\x6f\154\145\x5f\x6e\141\155\145" => $role_name]); goto WImHx; pSclM: $group_info = $this->admin_group->getInfo(["\162\x6f\x6c\145\137\x69\144" => $role_id], "\52"); goto BMuo5; ozCGq: KVAqX: goto XjfGU; jDg_c: return $res; goto LYFlf; WImHx: if (!($count > 0)) { goto KVAqX; } goto DkP9N; DkP9N: return 2; goto ozCGq; XjfGU: JrpsV: goto pZvlj; pZvlj: $data = array("\162\157\x6c\145\x5f\x6e\141\x6d\145" => $role_name, "\x6d\157\144\165\154\x65\x5f\x69\x64\137\141\162\162\x61\171" => $module_id_array, "\151\x6e\x66\x6f" => $info, "\x6d\157\x64\151\146\171\x5f\x74\151\x6d\145" => time()); goto t3RUy; LYFlf: } public function deleteSystemAdminGroup($rol_id) { goto xvQPX; RXc7y: BckwT: goto fMUkt; Fjs3b: if ($count > 0) { goto sPJbv; } goto K0T9g; yT0Cu: sPJbv: goto gTviF; LJGgo: goto BckwT; goto yT0Cu; xvQPX: $count = $this->getAdminGroupIsUse($rol_id); goto Fjs3b; K0T9g: $res = $this->admin_group->where("\x72\157\154\x65\137\x69\x64", $rol_id)->delete(); goto h4HeI; gTviF: return USER_GROUP_ISUSE; goto RXc7y; h4HeI: return $res; goto LJGgo; fMUkt: } private function getAdminGroupIsUse($rol_id) { goto pB1GK; vjEJo: $count = $user_admin->getCount(["\162\157\154\x65\x5f\x69\144\137\141\162\162\141\x79" => $rol_id]); goto ogBgt; pB1GK: $user_admin = new \app\common\model\Admin(); goto vjEJo; ogBgt: return $count; goto yabwA; yabwA: } public function getSystemAdminGroupAll() { $all = $this->admin_group->all(); return $all; } }
