<?php
 namespace app\admin\controller; use app\admin\service\VideoService; use think\Db; class Publish extends Base { public function wxapp() { goto pRJPS; onFpN: $index = base64_encode($index); goto fqw6n; CsArI: $this->assign("\x75\163\x65\x72\151\144", $this->bus_id); goto HwgIF; V6jBm: $un_url = explode("\72", $un_data); goto FPemN; fqw6n: $this->assign("\160\141\147\x65\163", $index); goto mzJ81; we5F_: $index = json_decode($res["\151\x6e\144\x65\x78\x5f\x76\141\x6c\165\145\163"], true); goto RW4i_; UORSn: $index = json_encode($index, true); goto onFpN; zg0c8: $this->assign("\141\160\160\x6e\x61\155\145", $_W["\141\x63\143\x6f\165\x6e\164"]["\156\x61\x6d\145"]); goto D1gli; HwgIF: $this->assign("\141\160\160\x69\144", $_W["\141\x63\x63\x6f\165\x6e\x74"]["\153\x65\171"]); goto zg0c8; HW6Ej: $last = Db::name("\167\x78\141\160\160\x5f\x76\x65\x72\x73\151\x6f\156\x73")->where("\x69\144", $vid)->where("\165\156\151\x61\143\x69\144", $this->bus_id)->field("\x76\x65\162\163\151\x6f\156")->find(); goto pxZBF; mzJ81: $vid = $_SESSION["\166\x65\162\163\151\157\x6e\x5f\x69\x64"]; goto HW6Ej; pxZBF: $this->assign("\x6c\x61\163\164", $last); goto fJuhK; FPemN: $un_data = $un_url[0]; goto flm4q; ZpJgP: $res = Db::name("\171\142\163\143\137\x75\163\x65\x72\137\164\x6d\160\x6c")->where("\x6d\143\150\x5f\x69\x64", $this->bus_id)->find(); goto we5F_; D1gli: $un_data = $_SERVER["\110\124\124\x50\x5f\110\x4f\x53\x54"]; goto V6jBm; fJuhK: return view(); goto okXP5; RW4i_: unset($index["\141\154\154\x5f\144\x61\164\x61"]); goto UORSn; pRJPS: global $_W; goto CsArI; flm4q: $this->assign("\x75\x72\154", $un_data); goto ZpJgP; okXP5: } public function getqrcode() { goto UcIU9; SU2Ad: EQKQl: goto GOSYn; OVL0k: $uuid = $matches1[2][0]; goto i7wOD; W5h6b: $data["\x75\165\151\144"] = $uuid; goto W6bEt; UcIU9: if (!request()->isAjax()) { goto EQKQl; } goto gCCiW; YDPeY: preg_match_all("\57\x28\163\x72\143\75\134\42\134\x2f\x63\157\156\x6e\x65\x63\x74\134\57\x71\x72\x63\x6f\x64\145\134\57\51\x28\x5b\134\x73\x5c\x53\x5d\x2a\77\x29\x28\x5c\42\x29\57", $res, $matches); goto GWInA; Cz0xR: preg_match_all("\x2f\x28\x75\x75\x69\x64\x3d\51\x28\x5b\134\163\134\123\x5d\52\77\51\x28\134\42\x29\x2f", $res, $matches1); goto OVL0k; GWInA: $qrcode = "\x68\x74\x74\160\163\72\57\57\x6f\160\x65\x6e\56\167\145\151\170\151\x6e\56\161\x71\56\x63\157\x6d\57\x63\x6f\x6e\x6e\x65\x63\164\x2f\161\x72\x63\x6f\x64\x65\x2f" . $matches[2][0]; goto Cz0xR; gCCiW: $res = get_url_content("\x68\164\164\x70\163\x3a\57\x2f\157\x70\145\x6e\56\x77\x65\151\170\x69\x6e\56\x71\x71\56\x63\x6f\155\x2f\143\157\x6e\x6e\x65\143\164\x2f\x71\162\143\x6f\156\x6e\145\143\x74\77\141\160\x70\x69\144\75\x77\170\x64\145\x34\60\x65\x30\x32\x33\67\64\x34\x36\66\x34\143\x62\x26\x72\145\144\151\162\x65\143\164\x5f\165\162\151\x3d\x68\x74\x74\160\163\72\57\x2f\x6d\x70\56\x77\x65\151\170\151\x6e\56\x71\161\x2e\143\x6f\x6d\x2f\x64\x65\142\x75\x67\x2f\143\x67\151\55\x62\x69\156\x2f\x77\x65\142\x64\145\x62\x75\147\147\x65\x72\x2f\161\162\x63\x6f\144\x65\x26\x73\x63\x6f\x70\145\x3d\163\156\x73\141\160\x69\137\154\x6f\x67\x69\156\46\x73\x74\x61\x74\145\x3d\x6c\x6f\x67\151\156\43\x77\x65\143\150\x61\164\x5f\x72\145\x64\151\x72\145\x63\164\x26\x6f\163\x3d\x64\141\162\167\x69\156\x26\x63\x6c\x69\145\156\164\166\145\162\163\x69\157\156\x3d\x31\56\60\x32\56\x31\70\60\x36\x31\x32\x30\46\157\163\x76\x65\x72\163\151\157\x6e\x3d\61\60\x2e\x31\63\x2e\x32", "\x68\x74\164\160\x73"); goto YDPeY; W6bEt: exit(json_encode($data, true)); goto SU2Ad; i7wOD: $data["\x71\x72\x63\157\144\x65"] = $qrcode; goto W5h6b; GOSYn: } public function checklogin() { goto cGHfN; jHH4n: $res = get_url_content($url, "\150\164\164\x70\x73"); goto LG_Rs; nbuaU: $uuid = request()->param("\165\165\151\144"); goto TIvCK; d7Mv6: $data["\x63\x6f\x64\x65"] = $code; goto pKfSp; LG_Rs: preg_match_all("\x2f\x28\x77\151\156\x64\x6f\x77\56\x77\x78\137\145\162\x72\143\x6f\144\x65\x3d\51\50\x5b\x5c\x73\x5c\x53\x5d\x2a\77\51\x28\x3b\x77\151\x6e\144\x6f\167\x2e\x29\x2f", $res, $matches); goto QX3HP; p7Njt: $data["\x65\162\162\157\x72\137\x63\x6f\x64\145"] = $error_code; goto d7Mv6; QX3HP: $error_code = $matches[2][0]; goto CFObx; pKfSp: exit(json_encode($data, true)); goto VdTfr; Zo4Df: $code = $matches1[2][0]; goto p7Njt; TIvCK: $url = "\150\164\164\160\163\x3a\57\x2f\154\x6f\156\x67\56\x6f\160\x65\156\x2e\167\x65\151\170\x69\x6e\56\161\x71\56\143\157\x6d\57\143\x6f\x6e\x6e\x65\x63\164\57\154\57\161\162\x63\x6f\x6e\156\145\143\164\77\x75\x75\151\144\75" . $uuid . "\x26\137\x3d" . time(); goto jHH4n; cGHfN: if (!request()->isAjax()) { goto jKkea; } goto nbuaU; CFObx: preg_match_all("\x2f\50\x77\151\x6e\144\157\167\x2e\167\x78\x5f\143\x6f\x64\x65\x3d\x27\x29\50\133\134\163\x5c\123\x5d\x2a\x3f\51\50\47\x3b\x29\57", $res, $matches1); goto Zo4Df; VdTfr: jKkea: goto X01ss; X01ss: } public function userlogin() { goto akliJ; x5cAW: curl_close($ch); goto cyLDu; sraND: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); goto u2yNZ; RklXd: $harr["\x54\151\143\x6b\x65\164"] = $Ticket; goto iV55f; HBYOe: $ch = curl_init(); goto zpUia; TbYmn: preg_match_all("\57\50\104\x65\x62\165\147\147\x65\x72\55\x4e\145\167\124\x69\143\153\x65\164\x3a\40\x29\x28\x5b\x5c\163\x5c\123\x5d\52\77\x29\x28\x5c\162\x5c\x6e\51\x2f", $header, $matches1); goto Xb2bI; stJEc: preg_match_all("\x2f\x28\104\x65\142\x75\x67\x67\x65\x72\55\x54\151\143\x6b\145\164\72\x20\x29\50\133\x5c\x73\x5c\123\135\x2a\x3f\x29\x28\x5c\x72\x5c\156\51\x2f", $header, $matches); goto YvRNW; JvLht: $Signature = $matches2[2][0]; goto RklXd; nXHGB: YGj43: goto lzLek; SRJew: $url = "\150\164\x74\160\163\x3a\x2f\x2f\155\x70\x2e\167\145\151\x78\x69\x6e\x2e\x71\x71\56\143\157\x6d\57\144\x65\142\x75\147\x2f\143\147\x69\x2d\x62\x69\x6e\57\167\x65\x62\144\145\142\x75\147\147\145\162\57\161\x72\x63\x6f\x64\x65\x3f\143\157\144\x65\x3d{$code}\46\x73\164\141\x74\x65\75\x64\141\162\x77\151\x6e\x26\x6f\163\x3d\144\141\162\x77\x69\x6e\x26\x63\x6c\x69\x65\156\164\166\x65\x72\163\151\x6f\x6e\75\61\x2e\60\x32\56\61\x38\60\x36\x31\62\x30\46\157\163\166\145\x72\x73\151\157\156\75\x31\60\56\61\x33\56\x32"; goto HBYOe; zpUia: curl_setopt($ch, CURLOPT_URL, $url); goto AxE3V; DQ87N: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto sraND; akliJ: if (!request()->isAjax()) { goto YGj43; } goto BGVZE; ec1Uv: $harr["\123\x69\x67\156\141\164\x75\162\145"] = $Signature; goto S1N1Z; AxE3V: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto rtlAO; iV55f: $harr["\x4e\x65\167\x54\x69\143\x6b\x65\164"] = $NewTicket; goto ec1Uv; S1N1Z: $data["\x68\x65\x61\144\x65\x72"] = $harr; goto sY7qN; u2yNZ: $cont = curl_exec($ch); goto x5cAW; YvRNW: $Ticket = $matches[2][0]; goto TbYmn; sY7qN: $data["\x62\x6f\x64\x79"] = json_decode($body, true); goto Pxttq; rtlAO: curl_setopt($ch, CURLOPT_HEADER, true); goto DQ87N; Pxttq: exit(json_encode($data, true)); goto nXHGB; cyLDu: list($header, $body) = explode("\xd\xa\xd\12", $cont, 2); goto stJEc; BGVZE: $code = request()->param("\143\x6f\144\145"); goto SRJew; M7L2U: preg_match_all("\x2f\50\x44\145\142\165\147\x67\x65\x72\x2d\x53\151\147\156\141\164\x75\x72\x65\x3a\x20\x29\50\133\x5c\x73\134\123\x5d\x2a\77\51\x28\134\162\134\x6e\51\57", $header, $matches2); goto JvLht; Xb2bI: $NewTicket = $matches1[2][0]; goto M7L2U; lzLek: } public function bdapp() { goto LKZNC; I2gk5: $this->assign("\x61\x70\160\x69\144", $appid); goto rSArH; opwFs: $this->assign("\165\x73\145\x72\151\144", $this->bus_id); goto ZKkGD; T8TYC: $appid = $param["\x41\x50\120\x5f\111\104"]; goto uc60a; rSArH: $this->assign("\141\160\160\x6e\x61\x6d\145", $appname); goto KS2Ye; CZkCg: $vid = $_SESSION["\166\x65\162\163\x69\157\x6e\137\151\144"]; goto oKtZB; JTxXA: h7Ikz: goto I2gk5; oBYjM: $param = json_decode($app_info, true); goto T8TYC; qdVZ9: $appname = $_W["\x61\x63\x63\157\165\156\x74"]["\x6e\x61\x6d\145"]; goto opwFs; J9m72: unset($index["\141\x6c\x6c\137\x64\141\164\141"]); goto eaK1N; pe7C3: $appid = $_W["\x61\x63\143\157\x75\156\x74"]["\x6b\145\171"]; goto qdVZ9; tcrap: $this->assign("\x75\x72\154", $un_data); goto nue55; eaK1N: $index = json_encode($index, true); goto lv7SS; LKZNC: global $_W; goto pe7C3; JFjmJ: $un_url = explode("\x3a", $un_data); goto ek3Yn; ek3Yn: $un_data = $un_url[0]; goto tcrap; lv7SS: $index = base64_encode($index); goto mDjMp; mDjMp: $this->assign("\160\141\x67\145\163", $index); goto CZkCg; p3fIC: if (empty($app_info)) { goto h7Ikz; } goto oBYjM; uc60a: $appname = $param["\101\x50\x50\137\x4e\101\115\x45"]; goto JTxXA; gbn8O: $index = json_decode($res["\151\x6e\144\145\x78\137\166\141\154\165\145\x73"], true); goto J9m72; KS2Ye: $un_data = $_SERVER["\x48\x54\x54\120\x5f\x48\x4f\x53\x54"]; goto JFjmJ; koU7k: return view(); goto e1sBB; oKtZB: $last = Db::name("\167\170\141\160\160\x5f\x76\x65\162\163\151\x6f\156\163")->where("\x69\144", $vid)->where("\x75\156\x69\141\x63\151\x64", $this->bus_id)->field("\x76\x65\x72\163\x69\x6f\156")->find(); goto sWN6f; nue55: $res = Db::name("\x79\142\163\143\x5f\x75\163\145\x72\x5f\164\155\x70\x6c")->where("\x6d\143\150\137\x69\144", $this->bus_id)->find(); goto gbn8O; ZKkGD: $app_info = Db::name("\171\x62\163\x63\x5f\x63\x6f\x6e\x66\151\147")->where(["\155\143\150\x5f\x69\x64" => $this->bus_id, "\153\x65\x79" => "\102\x44\x41\x50\x50"])->value("\166\x61\x6c\165\145"); goto p3fIC; sWN6f: $this->assign("\154\x61\163\x74", $last); goto koU7k; e1sBB: } }
