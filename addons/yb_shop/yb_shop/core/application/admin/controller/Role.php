<?php
 namespace app\admin\controller; use Think\Db; use think\Request; class Role extends Base { public function index() { goto oNpT8; i32tJ: $url = request()->query(); goto P889S; BoKmO: Zw4p0: goto SJDij; oNpT8: $data = Request::instance()->param(); goto hFZzQ; Pr1Fk: jOt2A: goto pwrV1; hJbmK: if (!empty($data["\x72\157\x6c\x65\137\x6e\x61\x6d\x65"])) { goto jOt2A; } goto ekWXy; bJaZ0: return view(); goto f6wyQ; SJDij: $list = Db::name("\171\x62\163\143\x5f\165\163\x65\162\137\x72\x6f\x6c\x65")->where($where)->where("\162\157\x6c\145\x5f\x73\x74\141\x74\x75\x73\x3d\x31")->paginate(20, false, $config); goto IxJ_4; IxJ_4: $this->assign("\x6c\151\163\x74", $list); goto TOs4a; TOs4a: $this->assign("\162\157\154\x65\x5f\x6e\x61\155\145", $data["\x72\x6f\x6c\x65\137\x6e\141\x6d\145"]); goto bJaZ0; ekWXy: $data["\162\157\154\x65\137\156\141\155\x65"] = ''; goto t0D1k; pwrV1: $config["\x71\165\145\x72\x79"]["\162\157\154\145\137\x6e\x61\x6d\x65"] = $data["\162\x6f\x6c\x65\137\x6e\141\155\x65"]; goto BoKmO; hFZzQ: $where = []; goto Zgmta; L81Cu: $url = explode("\x26", $url[1]); goto Zft7m; UyvFy: $config = ["\x71\165\x65\x72\171" => ["\x73" => $url]]; goto hJbmK; Zft7m: $url = "\57" . $url[0]; goto UyvFy; P889S: $url = explode("\75\x2f", $url); goto L81Cu; t0D1k: goto Zw4p0; goto Pr1Fk; Zgmta: empty($data["\x72\157\x6c\145\x5f\156\x61\155\x65"]) || ($where["\x72\x6f\x6c\145\x5f\156\141\155\145"] = ["\x6c\x69\153\145", "\45" . $data["\x72\x6f\x6c\145\x5f\156\141\x6d\x65"] . "\45"]); goto i32tJ; f6wyQ: } public function role_add() { goto lu_4b; JmE0c: $firstArray = array(); goto a25xH; jPtBd: DXNjx: goto vezCc; a25xH: $p = array(); goto YIcDO; lu_4b: $permissionList = Db::name("\x79\142\x73\143\137\x62\165\x73\137\155\x6f\x64\165\154\145\40")->where("\x69\x73\137\155\x65\156\x75\x3d\x31")->order("\163\x6f\162\x74\x20\x61\x73\x63\54\x6d\157\x64\x75\154\x65\137\x69\144\x20\141\x73\x63")->select(); goto JmE0c; rrKzW: return view(); goto AdBqH; YIcDO: foreach ($permissionList as $per) { goto CHqC7; E3uxN: EZCaU: goto uZHUR; CHqC7: if (!($per["\x70\151\144"] == 0 && $per["\155\x6f\x64\165\x6c\x65\x5f\156\141\x6d\x65"] != null)) { goto L165k; } goto zZAeO; Zrl8g: L165k: goto E3uxN; zZAeO: $firstArray[] = $per; goto Zrl8g; uZHUR: } goto jPtBd; i5dla: $this->assign("\x6c\x69\163\x74", $p); goto rrKzW; YpWRb: C9D0T: goto i5dla; vezCc: foreach ($firstArray as &$first_per) { goto rvOuq; mWfVZ: zugNr: goto WTK1S; xXqtA: foreach ($permissionList as $childPer) { goto AVdy0; KQja7: INtOY: goto TD9ez; J8XyX: $secondArray[] = $childPer; goto KQja7; AVdy0: if (!($childPer["\160\x69\x64"] == $first_per["\x6d\157\144\165\x6c\145\x5f\x69\x64"])) { goto INtOY; } goto J8XyX; TD9ez: kA08I: goto zXTBm; zXTBm: } goto KuobU; M7RMN: CKXuG: goto wpX2i; YTIkA: $p[] = $first_per; goto M7RMN; KuobU: VSpWF: goto pIkjn; pIkjn: foreach ($secondArray as &$second_per) { goto g6Xtp; qDTRe: SXKHF: goto oT4Az; g6Xtp: $threeArray = array(); goto TQU_A; sZ3k9: Dze2Z: goto Dgd2A; oT4Az: $second_per["\143\x68\151\154\x64"] = $threeArray; goto sZ3k9; TQU_A: foreach ($permissionList as $three_per) { goto Qgw5o; Qgw5o: if (!($three_per["\x70\151\144"] == $second_per["\x6d\x6f\x64\x75\x6c\145\x5f\x69\144"])) { goto z8Fga; } goto P8fG1; P8fG1: $threeArray[] = $three_per; goto Texfy; Texfy: z8Fga: goto sb9BU; sb9BU: Nzfk5: goto ARa3X; ARa3X: } goto qDTRe; Dgd2A: } goto mWfVZ; rvOuq: $secondArray = array(); goto xXqtA; WTK1S: $first_per["\x63\150\151\154\x64"] = $secondArray; goto YTIkA; wpX2i: } goto YpWRb; AdBqH: } public function role_add_do() { goto hma3v; d7PmK: $data["\x63\162\145\141\x74\145\137\x74\x69\155\145"] = time(); goto Ltw_B; sLJev: return AjaxReturn($res); goto e2Qyr; YkOJ9: $data["\155\157\x64\165\x6c\x65\137\x69\144\137\x61\x72\162\x61\171"] = input("\160\x61\x72\x61\x6d\56\x73\x74\x72"); goto d7PmK; Ltw_B: $res = Db::name("\171\142\163\x63\137\x75\x73\145\x72\137\162\157\x6c\x65")->insert($data); goto sLJev; LXCCG: $data["\x69\x6e\x66\x6f"] = input("\x70\141\x72\x61\155\x2e\151\x6e\146\x6f"); goto YkOJ9; hma3v: $data["\x72\x6f\154\145\137\x6e\141\155\145"] = input("\x70\x61\x72\141\x6d\56\162\157\154\145\x5f\x6e\x61\x6d\x65"); goto LXCCG; e2Qyr: } public function role_edit() { goto iUX3_; ti7Gi: $info = Db::name("\x79\142\163\143\x5f\x75\163\x65\x72\x5f\x72\x6f\x6c\145")->where("\162\x6f\x6c\x65\137\x69\144", $ro_id)->find(); goto ByR_y; DK1GM: mSTI0: goto c7xYp; un2FO: $ro_id = input("\x70\141\x72\141\155\56\x69\x64"); goto ti7Gi; PsET4: $p = array(); goto chClH; c7xYp: foreach ($firstArray as &$first_per) { goto bRGLO; NNgIF: foreach ($secondArray as &$second_per) { goto bEfNl; LULLF: j3gXs: goto VUoMJ; FlZeG: $second_per["\143\150\151\154\144"] = $threeArray; goto LULLF; eshz9: foreach ($permissionList as $three_per) { goto DRqkw; DRqkw: if (!($three_per["\160\151\144"] == $second_per["\x6d\157\x64\165\154\145\x5f\151\144"])) { goto vSAcE; } goto wHXa0; wHXa0: $threeArray[] = $three_per; goto qQ__R; qQ__R: vSAcE: goto Tsrg4; Tsrg4: x7h5T: goto EWfH3; EWfH3: } goto eVXWk; eVXWk: OPFLt: goto FlZeG; bEfNl: $threeArray = array(); goto eshz9; VUoMJ: } goto HOBT3; DiQd9: tBtX6: goto NNgIF; l9Hxd: jix5K: goto hbEpD; SYNmM: $p[] = $first_per; goto l9Hxd; ie_VR: foreach ($permissionList as $childPer) { goto tvo8p; pDxjg: j9E3U: goto OGtQS; MrFNZ: $secondArray[] = $childPer; goto MjZw5; tvo8p: if (!($childPer["\160\x69\x64"] == $first_per["\x6d\x6f\x64\x75\x6c\x65\x5f\x69\144"])) { goto kuDKb; } goto MrFNZ; MjZw5: kuDKb: goto pDxjg; OGtQS: } goto DiQd9; bRGLO: $secondArray = array(); goto ie_VR; HOBT3: iZWjY: goto zIcKA; zIcKA: $first_per["\143\x68\x69\154\x64"] = $secondArray; goto SYNmM; hbEpD: } goto AXr9i; azO45: $firstArray = array(); goto PsET4; iUX3_: $permissionList = Db::name("\171\142\163\143\137\142\165\163\137\155\157\x64\x75\x6c\145\x20")->where("\x69\x73\137\155\145\x6e\x75\x3d\61")->order("\x73\157\162\x74\40\x61\163\x63\54\x6d\x6f\144\165\154\x65\137\151\144\x20\141\163\x63")->select(); goto azO45; AXr9i: tmBGP: goto iKC9o; chClH: foreach ($permissionList as $per) { goto o3xwf; HiyS5: G3G5x: goto BQoM0; n2_lu: eMGJp: goto HiyS5; oZSpd: $firstArray[] = $per; goto n2_lu; o3xwf: if (!($per["\160\x69\144"] == 0 && $per["\155\157\144\x75\x6c\145\137\156\141\155\x65"] != null)) { goto eMGJp; } goto oZSpd; BQoM0: } goto DK1GM; iKC9o: $this->assign("\x6c\x69\x73\x74", $p); goto un2FO; Ly8cU: return view(); goto UwDDF; ByR_y: $this->assign("\151\x6e\146\157", $info); goto Ly8cU; UwDDF: } public function role_edit_do() { goto dEH_g; Qbs_4: return AjaxReturn($res); goto yog7k; ln5HL: $data["\162\x6f\154\145\x5f\x6e\x61\x6d\145"] = input("\x70\x61\x72\x61\x6d\x2e\162\157\x6c\x65\137\156\x61\155\x65"); goto P6DUc; LuODe: $res = Db::name("\171\x62\163\x63\x5f\165\x73\145\x72\137\162\157\154\145")->inc("\x63\x72\145\x61\x74\145\137\x74\x69\x6d\x65")->where("\x72\x6f\154\x65\137\x69\x64", $id)->update($data); goto Qbs_4; dEH_g: $id = input("\160\141\162\x61\155\x2e\x69\x64"); goto ln5HL; P6DUc: $data["\151\x6e\x66\x6f"] = input("\160\141\x72\141\155\x2e\x69\156\146\x6f"); goto TndPl; TndPl: $data["\x6d\x6f\144\x75\x6c\x65\137\x69\144\137\x61\x72\162\x61\x79"] = input("\x70\141\x72\x61\x6d\56\163\164\162"); goto LuODe; yog7k: } public function permission() { goto LAmzE; cuA0C: $url = explode("\x26", $url[1]); goto E6O9z; H8HDw: $list = Db::name("\x75\x73\x65\162\x73")->where($where)->where("\165\x69\x64\x3c\x3e\x31")->paginate(20, false, $config = ["\x71\165\x65\162\171" => ["\x73" => $url, "\x75\x73\145\162\x6e\141\155\145" => $data["\x75\163\x65\x72\156\x61\x6d\145"]]]); goto gRPgC; LAmzE: $data = Request::instance()->param(); goto mi_BR; iFu3P: $this->assign("\165\x73\x65\x72\x6e\141\155\145", $data["\165\163\x65\x72\156\x61\x6d\145"]); goto i6j9Y; E6O9z: $url = "\x2f" . $url[0]; goto XCvXL; ycV92: $url = explode("\75\57", $url); goto cuA0C; i6j9Y: return view(); goto iY9NM; gRPgC: $this->assign("\154\151\163\164", $list); goto iFu3P; mi_BR: $where = []; goto Xow6m; MgUE2: $url = request()->query(); goto ycV92; Xow6m: empty($data["\x75\163\145\162\x6e\141\155\x65"]) || ($where["\x75\163\x65\162\x6e\x61\x6d\x65"] = ["\x6c\151\x6b\145", "\x25" . $data["\165\163\x65\x72\156\141\155\145"] . "\x25"]); goto MgUE2; XCvXL: $data["\x75\x73\145\162\x6e\x61\x6d\145"] = empty($data["\x75\x73\x65\162\156\x61\x6d\x65"]) ? '' : $data["\x75\163\145\x72\156\141\x6d\x65"]; goto H8HDw; iY9NM: } public function permission_edit() { goto UjGIq; IViC0: $this->assign("\162\x6f\154\145\x5f\x6c\x69\163\164", $role_list); goto kI4jH; UjGIq: $uid = input("\160\141\x72\x61\155\x2e\x75\x69\x64"); goto yxdVp; kI4jH: $this->assign("\x75\x69\x64", $uid); goto Y4MD_; JKxd0: $role_list = Db::name("\x79\x62\x73\x63\x5f\x75\x73\x65\x72\x5f\162\157\154\145")->where("\x72\x6f\x6c\145\x5f\163\164\141\x74\x75\163\x3d\x31")->select(); goto IViC0; Y4MD_: $this->assign("\160\x65\162\155\151\x73\163\x69\157\156", $permission); goto D60jN; D60jN: return view(); goto SCGli; yxdVp: $permission = Db::name("\x79\x62\x73\x63\x5f\165\163\145\162\x5f\x70\145\162\155\x69\163\163\151\157\x6e")->where("\x75\x73\145\x72\x5f\151\144", $uid)->value("\151\x73\x5f\x73\x68\157\167\137\143\x6f\160\171\x72\151\x67\150\164"); goto JKxd0; SCGli: } public function permission_edit_do() { goto jHVBZ; htknD: $role_id = input("\160\x61\162\141\x6d\x2e\162\x6f\154\145\x5f\x69\144"); goto F0eNS; ozNp3: $is_show_copyright = input("\x70\x61\x72\x61\x6d\x2e\x69\163\x5f\163\150\x6f\x77\x5f\x63\157\x70\171\x72\151\x67\x68\x74"); goto htknD; T13gu: goto SuF41; goto ej_rq; vltpf: $role_list = Db::name("\171\142\163\143\x5f\x75\x73\145\162\x5f\x70\145\x72\155\151\163\163\151\x6f\x6e")->inc("\x63\x72\x65\x61\x74\145\137\164\151\x6d\145")->where("\165\163\145\x72\137\151\x64", $uid)->update(["\162\157\154\x65\x5f\151\144" => $role_id, "\x69\x73\137\x73\150\x6f\167\137\x63\157\160\x79\x72\x69\x67\150\x74" => $is_show_copyright]); goto T13gu; ej_rq: pKLpJ: goto iBnl4; qwHU2: SuF41: goto MPo_e; jHVBZ: $uid = input("\x70\x61\162\141\x6d\56\165\x69\x64"); goto ozNp3; iBnl4: $role_list = Db::name("\171\142\163\143\137\165\x73\145\x72\137\x70\x65\x72\155\x69\163\x73\x69\x6f\156")->insert(["\x72\157\154\x65\x5f\x69\144" => $role_id, "\x75\x73\x65\162\x5f\151\x64" => $uid, "\x69\x73\x5f\163\x68\157\x77\137\x63\x6f\x70\171\x72\x69\147\150\164" => $is_show_copyright, "\x63\162\x65\x61\x74\145\x5f\164\x69\155\145" => time()]); goto qwHU2; F0eNS: $check = Db::name("\x79\x62\x73\x63\137\165\x73\x65\162\x5f\x70\145\x72\155\151\x73\x73\x69\x6f\156")->where("\165\x73\x65\x72\137\151\x64", $uid)->find(); goto HJWVM; MPo_e: return AjaxReturn($role_list); goto Kn_sa; HJWVM: if (empty($check)) { goto pKLpJ; } goto vltpf; Kn_sa: } public function role_del() { goto dZp_O; YV_tj: $check = Db::name("\171\x62\163\143\x5f\165\163\x65\x72\137\x70\145\x72\155\151\163\x73\151\x6f\x6e")->where("\162\x6f\154\145\137\151\144", $role_id)->update(["\x72\x6f\154\145\x5f\x69\x64" => 1]); goto y1YcA; dZp_O: $role_id = input("\160\141\162\141\155\x2e\x72\157\x6c\145\x5f\151\144"); goto YV_tj; Djzrh: JvHtl: goto d6i1_; d6i1_: return AjaxReturn($check); goto kekQc; wN8CB: Db::name("\171\142\x73\x63\137\x75\163\x65\162\x5f\162\x6f\154\145")->where("\x72\157\154\145\137\x69\x64", $role_id)->delete(); goto Djzrh; y1YcA: if (!$check) { goto JvHtl; } goto wN8CB; kekQc: } public function usercopyright_edit() { goto W8Fwh; b6xon: exit(json_encode($dd, true)); goto F27fE; FO5G9: $data["\151\x73\137\163\x68\157\167\x5f\x63\x6f\160\171\162\x69\147\150\164"] = $info["\x69\x73\x5f\163\150\x6f\x77\x5f\x63\x6f\x70\x79\x72\151\x67\150\164"] == 0 ? 1 : 0; goto A1QkA; W8Fwh: $uid = Request::instance()->param("\165\x69\x64"); goto URjDi; Mg8Qy: $dd["\x63\157\x64\145"] = $res; goto b6xon; A1QkA: $res = Db::name("\x79\142\x73\x63\x5f\x75\x73\x65\162\x5f\160\x65\x72\x6d\x69\x73\x73\151\x6f\x6e")->where("\x69\x64", $info["\151\144"])->update($data); goto Mg8Qy; URjDi: $info = Db::name("\171\142\x73\143\x5f\x75\163\145\x72\137\x70\145\162\x6d\151\x73\x73\151\157\156")->where("\165\163\x65\162\x5f\x69\x64", $uid)->find(); goto FO5G9; F27fE: } }
