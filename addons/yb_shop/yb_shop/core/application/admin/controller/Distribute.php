<?php
 namespace app\admin\controller; use think\Db; class Distribute extends Base { public function index() { goto ZUsJI; Ay1pb: nY0hX: goto NLECi; cw4u0: OHaRg: goto YmdqS; YmdqS: $star_time = input("\160\141\x72\141\x6d\x2e\x73\164\x61\x72\x5f\x74\x69\x6d\x65"); goto FMMev; yS30M: return view(); goto dcEmC; NGzOJ: $this->assign("\x73\145\x61\162\143\x68\137\164\x65\x78\x74", $search_text); goto mM067; lZ4Il: PGSkp: goto wJ5p3; ptpkS: $share = $share_level; goto eyYx0; kw1t1: if (!(!empty($star_time) && !empty($end_time))) { goto nY0hX; } goto p2Eke; wJ5p3: $share["\154\145\x76\x65\x6c"] = 0; goto gAikp; pmA5T: $this->assign("\163\150\x61\162\145", $share); goto yS30M; ssAU3: $end = strtotime($end_time); goto wh8Jt; LaLCR: $star = strtotime($star_time); goto g_Gce; p2Eke: $star = strtotime($star_time); goto ssAU3; YJhuC: switch ($share_level["\x6c\145\166\x65\154"]) { case 0: goto S7GXe; case 1: goto qntKn; F35y0: $share["\164\150\151\162\x64"] = "\55\x31"; goto oEPhh; oEPhh: goto S7GXe; goto XWrLs; qntKn: $share["\163\145\x63\157\156\x64"] = "\x2d\61"; goto F35y0; XWrLs: case 2: $share["\164\x68\x69\x72\144"] = "\55\x31"; goto S7GXe; } goto AoQTM; ucWa1: $url = "\x2f" . $url[0]; goto K81MI; NLECi: $where["\x73\56\x6d\x63\x68\x5f\x69\x64"] = array("\145\161", $this->bus_id); goto egIRw; gAikp: yg__C: goto YJhuC; g_Gce: $where["\163\56\x63\x72\x65\141\164\x65\x5f\164\x69\x6d\145"] = ["\142\x65\164\x77\145\145\x6e", [$star, $star + 86400]]; goto ZFDfg; FY3Lg: $where["\147\56\x67\157\x6f\x64\163\x5f\156\141\155\145"] = ["\154\151\153\x65", "\x25" . $search_text . "\x25"]; goto cw4u0; wh8Jt: $where["\163\56\143\162\145\141\164\x65\137\x74\x69\x6d\145"] = ["\x62\145\x74\x77\145\145\x6e", [$star, $end]]; goto Ay1pb; IM82m: $this->assign("\x65\156\144\x5f\164\x69\x6d\145", $end_time); goto TPGq2; w4Kpp: if (empty($share_level)) { goto PGSkp; } goto ptpkS; YNa7T: if (empty($search_text)) { goto OHaRg; } goto FY3Lg; ZUsJI: $where["\x67\x2e\151\x73\137\x64\145\154"] = 0; goto nXyRX; eyYx0: goto yg__C; goto lZ4Il; mM067: $this->assign("\163\164\x61\x72\137\164\x69\x6d\145", $star_time); goto IM82m; TPGq2: $share_level = db::name("\x79\142\x73\x63\x5f\165\163\x65\162\137\163\150\x61\162\145\137\x73\145\x74\x74\151\x6e\147")->where("\155\x63\150\x5f\151\x64", $this->bus_id)->field("\x6c\x65\x76\x65\x6c")->find(); goto w4Kpp; FMMev: $end_time = input("\160\x61\162\141\x6d\56\x65\x6e\x64\x5f\x74\151\x6d\145"); goto OatrN; XdmMf: $this->assign("\x72\x65\x73\165\x6c\164", $list); goto NGzOJ; OatrN: if (empty($star_time)) { goto jBoJN; } goto LaLCR; AoQTM: UBoEf: goto K5z1Q; bH6If: $this->assign("\x70\141\147\x65", $page); goto XdmMf; egIRw: $url = request()->query(); goto TnvIC; qtHnL: $page = $list->render(); goto bH6If; TnvIC: $url = explode("\x3d\57", $url); goto bF2PP; K81MI: $list = Db::name("\x79\142\x73\x63\137\147\157\x6f\144\163\137\163\150\x61\x72\x65\x5f\163\x65\x74\164\151\156\x67")->alias("\163")->join("\171\142\163\143\137\147\x6f\157\x64\x73\x20\147", "\x67\x2e\x67\157\x6f\x64\163\137\151\x64\75\x73\x2e\147\x6f\157\x64\163\137\x69\x64")->join("\x79\142\x73\x63\137\x69\155\x61\x67\x65\x73\x20\x69\x6d\x61\147\x65\163", "\x67\56\151\155\141\147\145\x73\x20\x3d\40\151\x6d\x61\x67\145\x73\x2e\x69\x6d\x67\137\151\144", "\154\x65\146\164")->field("\163\x2e\x2a\x2c\147\56\x67\157\x6f\x64\x73\x5f\156\141\155\x65\54\147\x2e\x70\x72\x69\143\x65\x2c\x67\x2e\x69\x6d\141\147\x65\163\54\x69\x6d\141\147\145\x73\56\151\x6d\147\137\143\157\166\145\162")->where($where)->paginate(20, false, ["\x71\165\x65\x72\171" => ["\163" => $url]]); goto qtHnL; nXyRX: $search_text = input("\x70\141\162\141\155\56\x73\145\141\x72\143\150\x5f\164\x65\170\x74"); goto YNa7T; bF2PP: $url = explode("\46\x70\x61\147\x65", $url[1]); goto ucWa1; ZFDfg: jBoJN: goto kw1t1; K5z1Q: S7GXe: goto pmA5T; dcEmC: } public function share_type_all() { goto VnhuC; ruanx: $res = Db::name("\171\x62\x73\x63\137\x67\157\157\144\163\137\x73\150\141\x72\x65\137\163\145\x74\164\151\156\147")->where("\151\144", $id)->update(["\163\164\141\x74\165\163" => $status]); goto wE7h4; p4KZS: $status = input("\160\x61\162\141\x6d\56\153\x65\171"); goto ruanx; wE7h4: return AjaxReturn($res); goto pOvJk; VnhuC: $id = input("\x70\141\x72\141\155\56\151\x64"); goto p4KZS; pOvJk: } public function share_del() { goto yDgDm; mvCS3: return AjaxReturn($res); goto VIGKy; yDgDm: $id = input("\160\141\162\x61\155\x2e\x69\144"); goto wuipF; wuipF: $res = Db::name("\171\142\163\143\137\147\157\x6f\144\163\137\x73\x68\x61\x72\145\137\163\145\x74\164\x69\156\147")->where("\x69\144", $id)->delete(); goto mvCS3; VIGKy: } public function add_share() { goto JvNRe; a_S1z: return view(); goto tCDET; cPqFw: switch ($share2["\x6c\145\x76\145\x6c"]) { case 0: goto DMwKc; case 1: goto b9Tfz; P5U2R: goto DMwKc; goto UgaPB; Qtcom: $share["\164\x68\151\x72\x64"] = "\x2d\x31"; goto P5U2R; b9Tfz: $share["\x73\145\143\x6f\156\x64"] = "\x2d\x31"; goto Qtcom; UgaPB: case 2: $share["\x74\x68\151\162\x64"] = "\55\x31"; goto DMwKc; } goto fDCdU; afQhs: OzawY: goto KLc8h; qlCLE: DMwKc: goto XCpvI; OTgxQ: $this->assign("\163\x68\141\162\x65", $share); goto oYaAz; JvNRe: $id = input("\160\141\x72\141\x6d\56\x67\x6f\x6f\x64\163\x5f\151\x64", 0); goto EtxD1; r32Mx: $share["\160\x72\151\143\x65\137\164\171\x70\145"] = 0; goto VqVKt; XCpvI: if ($share["\160\x72\x69\143\145\x5f\x74\171\x70\x65"] == 0) { goto cwJwj; } goto gPUgn; VqVKt: goto OzawY; goto gyP6d; fVPkB: F1ADL: goto cPqFw; AuchZ: $share["\x69\143\157\x6e"] = "\x25"; goto cPPKF; O7D47: if (!empty($share2)) { goto F1ADL; } goto n1SOR; fDCdU: UjB5P: goto qlCLE; GmG4Z: $share = db::name("\x79\142\163\x63\x5f\x67\x6f\157\144\x73\x5f\163\150\141\x72\x65\x5f\x73\145\x74\164\x69\x6e\147")->alias("\x73")->join("\x79\142\x73\x63\x5f\x67\x6f\157\144\163\x20\x67", "\x67\x2e\147\x6f\x6f\x64\x73\x5f\x69\144\x3d\163\x2e\x67\157\157\x64\x73\137\x69\x64")->join("\171\x62\163\x63\137\x69\x6d\141\147\145\x73\x20\x69\155\141\x67\145\x73", "\x67\56\151\x6d\141\147\145\163\x20\x3d\x20\x69\x6d\141\x67\145\x73\56\151\155\147\x5f\151\x64", "\x6c\145\146\164")->field("\x73\56\x2a\54\147\x2e\x67\x6f\157\144\163\x5f\156\x61\x6d\x65\x2c\x67\x2e\160\162\x69\x63\145\x2c\x67\56\x69\x6d\x61\147\x65\163\x2c\x69\155\x61\147\145\x73\56\x69\155\147\137\143\157\x76\145\162")->where("\x73\x2e\147\x6f\x6f\144\163\x5f\151\144", $id)->find(); goto afQhs; KLc8h: $share2 = db::name("\x79\x62\x73\x63\x5f\165\x73\145\x72\137\163\x68\141\x72\145\137\x73\x65\164\x74\151\x6e\147")->where("\155\143\x68\x5f\x69\144", $this->bus_id)->field("\154\x65\166\145\x6c")->find(); goto O7D47; gyP6d: xM463: goto GmG4Z; gPUgn: $share["\151\x63\x6f\x6e"] = "\345\205\203"; goto n9atl; oYaAz: $this->assign("\151\x64", $id); goto a_S1z; EtxD1: if ($id > 0) { goto xM463; } goto r32Mx; cPPKF: lQWC3: goto OTgxQ; VB9K2: cwJwj: goto AuchZ; n9atl: goto lQWC3; goto VB9K2; n1SOR: $share["\154\145\x76\145\154"] = 0; goto fVPkB; tCDET: } public function share_pay() { goto LSoKM; fiDaK: $count = Db::name("\171\x62\163\x63\137\147\x6f\157\144\163\x5f\163\150\141\x72\x65\137\163\145\x74\x74\x69\x6e\x67")->where(["\147\x6f\157\x64\x73\x5f\151\144" => $data["\x67\x6f\157\x64\x73\137\151\144"], "\x6d\143\x68\137\151\x64" => $data["\155\x63\150\x5f\x69\144"]])->count(); goto MjAHU; mnVpp: $rs = Db::name("\x79\142\x73\143\x5f\147\157\x6f\144\x73\137\163\x68\141\x72\145\x5f\x73\145\x74\164\x69\156\x67")->insert($data); goto wSw5l; BnbCx: $data["\x6d\x63\150\x5f\x69\144"] = $this->bus_id; goto dc1lq; dc1lq: $data["\146\151\162\x73\164"] = input("\160\141\162\141\155\56\146\151\162\163\164", 0.0); goto rv1A2; H4qFH: $data["\x63\162\x65\x61\x74\145\137\164\151\155\145"] = time(); goto zyFZM; Tc8aW: fFu6n: goto jBOb2; wSw5l: goto gVGKB; goto FzVsF; GHkTC: $data["\164\150\151\x72\144"] = input("\x70\x61\162\141\x6d\x2e\164\x68\x69\x72\x64", 0.0); goto kOkiM; xxotU: if ($rs) { goto cWG7k; } goto AjP7l; kOkiM: $data["\x70\162\151\x63\x65\137\164\x79\x70\x65"] = input("\160\x61\x72\141\155\56\160\162\x69\143\x65\x5f\x74\x79\x70\145", 0); goto fiDaK; LSoKM: $data["\x67\x6f\x6f\x64\x73\x5f\151\x64"] = input("\160\x61\162\141\x6d\56\147\157\x6f\x64\163\137\151\144", 0); goto YUonX; rv1A2: $data["\x73\x65\x63\157\x6e\144"] = input("\160\x61\x72\141\x6d\56\x73\145\x63\x6f\x6e\x64", 0.0); goto GHkTC; FzVsF: ndD0l: goto SDhl8; IpE1y: cWG7k: goto uPnLH; uPnLH: return 0; goto Tc8aW; AjP7l: return 1; goto UxJDk; S0V3S: gVGKB: goto xxotU; UxJDk: goto fFu6n; goto IpE1y; zyFZM: $data["\x73\x74\x61\x74\x75\163"] = 1; goto mnVpp; YS2vV: wTz5n: goto BnbCx; YUonX: if (!($data["\x67\x6f\x6f\x64\163\137\151\x64"] == 0)) { goto wTz5n; } goto B2t2Q; B2t2Q: return 1; goto YS2vV; SDhl8: $rs = Db::name("\x79\x62\x73\143\137\x67\x6f\x6f\144\163\x5f\163\x68\x61\162\x65\137\163\x65\164\x74\151\156\147")->where(["\x67\x6f\x6f\144\163\137\x69\x64" => $data["\147\157\157\x64\163\137\x69\144"], "\x6d\143\150\137\x69\144" => $data["\155\x63\x68\x5f\151\x64"]])->update($data); goto S0V3S; MjAHU: if ($count > 0) { goto ndD0l; } goto H4qFH; jBOb2: } }
