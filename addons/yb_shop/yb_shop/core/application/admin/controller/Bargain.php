<?php
 namespace app\admin\controller; use think\Db; require EXTEND_PATH . "\x57\x78\160\141\x79\x2f\x57\x78\120\x61\171\x2e\x41\160\151\56\x70\150\160"; class Bargain extends Base { public function index() { goto M_tZu; QGFeX: $url = explode("\75\x2f", $url); goto WBhNQ; cbIb6: if (!($search_text != '')) { goto eYjIR; } goto wtoCB; tmu_X: $url = "\x2f" . $url[0]; goto Rbeq3; hxsvm: $this->assign("\160\x61\x67\x65", $page); goto y8Eqx; taKRb: eYjIR: goto wgDMg; Rbeq3: $search_text = input("\160\x61\x72\x61\x6d\x2e\163\145\141\x72\143\150\x5f\164\x65\x78\x74", ''); goto Ycd2w; M_tZu: $url = request()->query(); goto QGFeX; Ycd2w: $condition["\x62\56\142\x61\162\147\141\x69\156\x5f\156\141\155\145"] = array("\x6c\151\x6b\145", "\x25" . $search_text . "\45"); goto c8M5Q; vlyOT: $this->assign("\x6c\151\163\164", $list); goto fHLml; y8Eqx: return view("\142\141\x72\147\141\151\156\x2f\x69\x6e\144\x65\x78"); goto gGZxl; c8M5Q: $seart = ''; goto cbIb6; plAUd: $page = $list->render(); goto vlyOT; WBhNQ: $url = explode("\46", $url[1]); goto tmu_X; wgDMg: $list = Db::name("\171\x62\163\143\x5f\142\141\x72\147\141\x69\156")->alias("\x62")->join("\x79\142\x73\143\137\x69\x6d\141\x67\x65\x73\40\x69", "\x69\56\151\155\147\x5f\x69\144\75\x62\56\x62\141\x72\147\x61\151\x6e\137\x70\151\x63\x74\x75\x72\x65", "\114\x45\x46\x54")->field("\151\x2e\151\x6d\x67\x5f\x63\157\166\x65\x72\x2c\x62\56\x2a")->where($condition)->where("\x62\56\x6d\x63\150\x5f\x69\144", $this->bus_id)->where("\x62\x2e\x64\145\x6c", 0)->order("\x62\56\143\162\145\x61\164\145\x5f\164\x69\x6d\145\x20\144\x65\163\143")->paginate(15, false, $config = ["\x71\x75\145\162\x79" => ["\x73" => $url, "\x73\145\141\x72\143\150\137\x74\x65\170\x74" => $seart]]); goto plAUd; fHLml: $this->assign("\163\x65\141\x72\143\150\137\x74\x65\x78\164", $search_text); goto hxsvm; wtoCB: $seart = $search_text; goto taKRb; gGZxl: } public function bargain_del() { goto oHCI0; oHCI0: if (!request()->isAjax()) { goto nS61L; } goto rOyfp; BU_QW: return AjaxReturn($res); goto TJbAj; xD3Li: if (empty($u)) { goto jfIxE; } goto zejuN; RL1ae: nS61L: goto Gzepu; TJbAj: Lt3T7: goto RL1ae; hr4nQ: goto Lt3T7; goto K2R8Q; SVeg_: $u = Db::name("\171\142\163\x63\x5f\x62\x61\x72\147\141\x69\x6e\137\165\x73\145\x72")->where("\x62\141\162\147\141\x69\x6e\137\x69\144", $id)->find(); goto xD3Li; xZavU: $res = Db::name("\x79\x62\x73\143\137\x62\141\x72\x67\141\151\x6e")->where("\151\x64", $id)->update(["\x64\145\x6c" => 1]); goto BU_QW; K2R8Q: jfIxE: goto xZavU; rOyfp: $id = input("\x70\x61\x72\x61\155\56\x69\144"); goto SVeg_; zejuN: return AjaxReturnMsg(0, "\345\xb7\262\xe6\234\211\347\x94\250\xe6\x88\xb7\345\217\x82\345\x8a\240\346\xad\244\xe6\264\xbb\xe5\x8a\250\x2c\346\227\240\xe6\263\x95\xe5\x88\xa0\xe9\231\244"); goto hr4nQ; Gzepu: } public function add_bargain() { goto nYWbL; VI5ZW: return AjaxReturn($res); goto zNxbh; Xo4SZ: $bargain_inventory = input("\160\x61\162\141\x6d\x2e\x62\x61\162\147\141\x69\156\137\151\156\x76\145\x6e\x74\x6f\162\x79", ''); goto HSyuS; jJiEv: $activity_rules = input("\x70\141\x72\141\155\x2e\x61\x63\x74\151\166\x69\164\171\x5f\162\165\154\x65\x73", ''); goto o37io; ZBVeU: $class_id = input("\x70\x61\162\x61\155\x2e\x63\154\141\x73\x73\x5f\x69\x64", ''); goto xFqFu; bDvEL: $bargain_name = input("\160\141\162\x61\155\56\142\141\x72\147\x61\151\156\x5f\x6e\141\155\145", ''); goto zut4t; VGzgF: $class_list = Db::name("\x79\142\163\143\137\x61\160\160\154\151\x63\x61\x74\x69\157\x6e\x5f\141\143\x74\151\166\151\x74\171\137\x63\154\141\163\x73")->where("\141\147\x65\156\x74\163\137\x69\x64", $this->bus_id)->select(); goto ij51h; HSyuS: $original_price = input("\160\x61\162\141\x6d\x2e\x6f\162\151\x67\x69\x6e\141\154\x5f\160\162\151\143\145", ''); goto wZVXW; VKpqE: $arr_str_img = substr($arr_str_img, 0, strlen($arr_str_img) - 1); goto lwAs5; nYWbL: $bargain = new \app\admin\service\Bargain(); goto lkBbA; zNxbh: vadCs: goto VGzgF; Rak3e: $array_img = json_decode(input("\x70\141\x72\x61\x6d\x2e\141\x72\x72\141\x79\x5f\151\155\147", ''), true); goto ZBVeU; i10FW: return view("\x62\x61\162\147\141\x69\156\x2f\141\144\x64\x5f\142\x61\x72\147\x61\x69\156"); goto pu_kW; wZVXW: $lowest_price = input("\160\x61\162\x61\155\56\x6c\x6f\x77\x65\x73\x74\137\160\x72\151\143\145", ''); goto yaI3R; ruDcz: l_JkG: goto VKpqE; o37io: $completed_number = input("\x70\x61\162\x61\x6d\x2e\x63\157\155\x70\x6c\x65\x74\x65\x64\137\156\165\x6d\x62\x65\x72", ''); goto Rak3e; lwAs5: $res = $bargain->addBargain($bargain_name, $bargain_picture, $bargain_inventory, $original_price, $lowest_price, $star_time, $end_time, $consumption_time, $activity_rules, $completed_number, $this->bus_id, $arr_str_img, $class_id); goto VI5ZW; QX3CQ: foreach ($array_img as $k => $v) { $arr_str_img .= $v["\151\144"] . "\54"; F18Sc: } goto ruDcz; zut4t: $bargain_picture = input("\160\141\x72\141\x6d\56\142\141\x72\147\x61\x69\x6e\x5f\160\151\x63\x74\165\x72\145", ''); goto Xo4SZ; FBuZx: $consumption_time = input("\160\x61\x72\x61\x6d\x2e\143\x6f\x6e\163\x75\155\160\x74\151\157\156\137\x74\151\155\145", ''); goto jJiEv; WItCH: $end_time = input("\x70\x61\x72\141\155\x2e\x65\156\144\137\x74\x69\x6d\145", ''); goto FBuZx; ij51h: $this->assign("\x63\154\x61\163\x73\x5f\x6c\151\163\164", $class_list); goto i10FW; yaI3R: $star_time = input("\x70\x61\x72\x61\x6d\56\163\x74\141\x72\x5f\x74\151\155\145", ''); goto WItCH; xFqFu: $arr_str_img = ''; goto QX3CQ; lkBbA: if (!request()->isAjax()) { goto vadCs; } goto bDvEL; pu_kW: } public function bargain_edit() { goto MuUBa; EhPbn: if ($res !== false) { goto qj0AV; } goto BlTsb; ZA153: $arr[$a]["\x69\x64"] = $img_id[$a]; goto PPBbc; YRCxc: $bargain_picture = input("\160\141\162\141\x6d\56\x62\x61\162\147\141\151\156\x5f\160\151\143\x74\x75\162\x65", ''); goto SRXIT; rV1zE: $consumption_time = input("\160\x61\x72\x61\x6d\56\143\157\156\x73\165\155\x70\x74\151\157\156\x5f\164\x69\x6d\145", ''); goto M7lki; SRXIT: $bargain_inventory = input("\x70\x61\162\x61\x6d\x2e\x62\x61\x72\147\141\x69\x6e\137\151\156\x76\145\x6e\164\x6f\x72\171", ''); goto Zns2D; p4vmo: $array_img = json_decode(input("\x70\x61\x72\x61\155\56\x61\x72\162\141\x79\137\x69\x6d\147", ''), true); goto CBnu9; OwYWW: foreach ($array_img as $k => $v) { $arr_str_img .= $v["\151\x64"] . "\x2c"; pEBhF: } goto fBbRb; EMY3b: $list["\163\x74\141\162\137\164\x69\x6d\145"] = date("\131\x2d\x6d\x2d\x64\40\110\72\151\72\163", $list["\163\164\x61\x72\137\x74\151\x6d\145"]); goto JW17H; aUgE6: $img_url = Db::name("\171\142\163\143\x5f\151\x6d\x61\147\x65\163")->where("\151\155\x67\137\x69\x64", $img_id[$a])->find(); goto ZA153; HYF80: $id = input("\160\141\x72\x61\x6d\56\x69\x64", ''); goto ypJLe; BlTsb: return AjaxReturn(0); goto o6n2_; piCZz: if (!($a < count($img_id))) { goto cgOiw; } goto aUgE6; q_8u1: ccWxH: goto piCZz; MuUBa: $bargain = new \app\admin\service\Bargain(); goto NY7ya; o6n2_: goto fgErK; goto GgW85; ypJLe: $bargain_name = input("\160\141\162\x61\x6d\56\x62\x61\162\x67\x61\x69\x6e\137\x6e\141\x6d\x65", ''); goto YRCxc; GgW85: qj0AV: goto nw_VP; amq3j: $arr = []; goto A3ioM; GSzdk: return view("\142\x61\162\147\x61\151\156\x2f\145\144\151\164\137\x62\141\162\x67\x61\151\x6e"); goto sT7zM; GNmrq: $list["\x63\x6f\156\163\x75\155\x70\164\x69\157\x6e\x5f\164\x69\x6d\x65"] = date("\x59\x2d\155\x2d\144\40\110\x3a\x69\x3a\163", $list["\x63\x6f\x6e\x73\165\155\160\164\x69\157\x6e\137\164\x69\155\x65"]); goto EMY3b; eJ080: EWo9t: goto F8YoQ; uRmw9: $class_list = Db::name("\171\x62\x73\x63\137\x61\160\160\x6c\x69\143\141\164\x69\x6f\156\137\141\x63\x74\x69\166\151\x74\x79\137\x63\154\141\163\163")->where("\x61\x67\145\156\164\x73\x5f\x69\x64", $this->bus_id)->select(); goto dVw65; Rq1iY: $arr_str_img = ''; goto OwYWW; B9DCb: $this->assign("\154\x69\163\x74", $list); goto uRmw9; dVw65: $this->assign("\143\x6c\141\x73\x73\137\x6c\151\x73\x74", $class_list); goto GSzdk; NY7ya: if (!request()->isAjax()) { goto c6MqD; } goto HYF80; fBbRb: smWof: goto kbAJD; SdBpj: cgOiw: goto NPJKP; va3rD: $list = Db::name("\171\142\x73\143\137\142\141\162\x67\x61\151\156")->alias("\x62")->join("\171\x62\x73\143\x5f\151\155\x61\147\145\x73\x20\151", "\151\x2e\x69\x6d\147\x5f\151\144\x3d\x62\56\x62\x61\162\147\141\151\x6e\x5f\x70\x69\x63\164\165\x72\x65", "\x4c\105\106\124")->field("\142\x2e\x2a\x2c\x69\56\x69\x6d\x67\137\151\x64\x2c\x69\x2e\x69\x6d\147\x5f\x63\157\x76\145\162")->where("\x62\56\x69\x64", $id)->find(); goto GNmrq; sCsdP: c6MqD: goto gxXY9; AZj1s: fgErK: goto sCsdP; xU5jG: goto ccWxH; goto SdBpj; xW3ld: $completed_number = input("\x70\141\162\141\x6d\x2e\x63\x6f\x6d\x70\x6c\145\164\145\144\x5f\156\165\155\142\x65\x72", ''); goto p4vmo; gxXY9: $id = input("\160\141\x72\141\155\56\x69\x64", ''); goto va3rD; kbAJD: $arr_str_img = substr($arr_str_img, 0, strlen($arr_str_img) - 1); goto TgDxC; PPBbc: $arr[$a]["\x75\x72\154"] = $img_url["\x69\x6d\x67\x5f\x63\157\166\x65\x72"]; goto eJ080; CBnu9: $class_id = input("\160\x61\x72\141\x6d\56\143\154\x61\163\163\137\151\x64", ''); goto Rq1iY; M7lki: $activity_rules = input("\160\x61\162\141\x6d\x2e\141\143\164\x69\x76\151\164\171\x5f\162\x75\154\x65\x73", ''); goto xW3ld; F8YoQ: $a++; goto xU5jG; Zns2D: $original_price = input("\x70\x61\x72\141\x6d\x2e\157\162\x69\147\x69\156\141\x6c\137\160\x72\x69\x63\145", ''); goto EUszG; JW17H: $list["\145\156\x64\x5f\164\x69\x6d\x65"] = date("\x59\x2d\x6d\55\144\40\110\72\x69\x3a\x73", $list["\x65\x6e\x64\x5f\x74\151\x6d\x65"]); goto tBips; EUszG: $lowest_price = input("\160\141\x72\x61\155\56\154\157\x77\x65\163\164\137\160\x72\x69\143\x65", ''); goto Dy0vG; NPJKP: $list["\141\162\x72\x61\x79\137\x69\155\147"] = json_encode($arr); goto B9DCb; tBips: $img_id = explode("\54", $list["\x69\155\147\x5f\151\144\137\x61\x72\162\x61\171"]); goto amq3j; QDMhi: $end_time = input("\x70\141\162\x61\x6d\x2e\145\x6e\x64\137\164\x69\x6d\x65", ''); goto rV1zE; TgDxC: $res = $bargain->editBargain($id, $bargain_name, $bargain_picture, $bargain_inventory, $original_price, $lowest_price, $star_time, $end_time, $consumption_time, $activity_rules, $completed_number, $this->bus_id, $arr_str_img, $class_id); goto EhPbn; Dy0vG: $star_time = input("\x70\x61\162\x61\x6d\x2e\163\x74\141\162\x5f\x74\x69\155\145", ''); goto QDMhi; nw_VP: return AjaxReturn(1); goto AZj1s; A3ioM: $a = 0; goto q_8u1; sT7zM: } public function bargain_status() { goto ltwTS; gipOC: if ($key == "\x6f\146\146") { goto c94D3; } goto qpRjR; l4t0Q: c94D3: goto VDS2n; VDS2n: $res = Db::name("\171\x62\x73\143\x5f\142\141\x72\147\x61\x69\156")->where("\x69\x64", $id)->update(["\142\x61\x72\147\x61\151\156\137\x74\x79\x70\x65" => 2]); goto nG4CK; nG4CK: dpvXn: goto MCxRx; qpRjR: $res = Db::name("\171\x62\163\143\137\142\x61\162\x67\141\x69\x6e")->where("\151\x64", $id)->update(["\142\141\162\147\141\151\x6e\137\x74\171\x70\145" => 1]); goto H5mwi; MCxRx: return AjaxReturn($res); goto ss46d; ltwTS: $id = input("\x70\141\162\141\155\x2e\151\x64"); goto MbW2J; MbW2J: $key = input("\x70\141\x72\x61\x6d\56\153\145\171"); goto gipOC; H5mwi: goto dpvXn; goto l4t0Q; ss46d: } public function bargain_order() { goto Qre4n; AsLqX: global $_W; goto YPDnk; f2OxD: if ($status == '' || $status == "\x2d\x32") { goto jsJfW; } goto X5AZY; yljFt: $this->assign("\160\x61\x67\145", $page); goto BJ0gA; OhbZq: $seart = $search_text; goto WALdF; Qre4n: $url = request()->query(); goto gpCFp; um3sD: jsJfW: goto QDyXT; spNpZ: return view("\x62\141\x72\147\x61\151\x6e\57\142\x61\162\147\x61\151\x6e\137\x6f\162\x64\x65\162"); goto NCZMx; n3TKG: $condition["\x62\157\56\x62\141\162\x67\x61\151\156\137\156\x61\155\x65"] = array("\154\x69\153\x65", "\x25" . $search_text . "\45"); goto ZuHUw; I4qML: goto X1kly; goto um3sD; L04qY: K8u1i: goto b_aHG; WLBZL: if ($refund_setting["\163\x77\x69\164\x63\x68"] != 1 || empty($refund_setting["\153\145\x79"]) || empty($refund_setting["\x63\x65\x72\x74"])) { goto Av1D4; } goto dqOin; w98aU: Av1D4: goto DYt_Q; SJ0Jw: X1kly: goto p5CIM; p5CIM: $seart = ''; goto n3TKG; DYt_Q: $this->assign("\162\145\x66\x75\156\144\137\164\x79\x70\x65", 0); goto L04qY; X5AZY: $condition["\142\157\56\x6f\162\144\145\x72\x5f\163\x74\141\164\165\163"] = array("\145\x71", $status); goto I4qML; dqOin: $this->assign("\x72\145\146\165\156\144\137\164\171\160\145", 1); goto oZP7z; b_aHG: $page = $list->render(); goto iekMB; WALdF: Jsmdi: goto DM24V; BJ0gA: $this->assign("\163\145\x61\162\143\x68\137\164\145\x78\164", $search_text); goto zQCTz; YPDnk: $setting = uni_setting_load("\160\x61\171\155\x65\x6e\x74", $_W["\x75\156\x69\x61\x63\x69\x64"]); goto QVDCw; ZuHUw: if (!($search_text != '')) { goto Jsmdi; } goto OhbZq; QVDCw: $refund_setting = $setting["\x70\141\171\155\x65\156\x74"]["\167\x65\x63\150\141\164\137\x72\145\146\x75\x6e\144"]; goto WLBZL; o7qJe: $search_text = input("\x70\x61\162\141\155\56\x73\x65\x61\162\143\150\x5f\x74\x65\170\164"); goto f2OxD; kC6RZ: $status = input("\x70\141\x72\141\155\56\163\164\141\164\x75\163", "\55\62"); goto o7qJe; iekMB: $this->assign("\154\151\163\164", $list); goto yljFt; oZP7z: goto K8u1i; goto w98aU; OLaXy: $url = "\x2f" . $url[0]; goto kC6RZ; QDyXT: $condition["\142\157\56\x6f\x72\x64\145\162\137\x73\164\141\x74\x75\x73"] = array("\x69\x6e", "\x30\x2c\x31\x2c\x32\54\x33\x2c\64\54\65\x2c\55\61"); goto SJ0Jw; hvaw1: $url = explode("\46", $url[1]); goto OLaXy; DM24V: $list = Db::name("\171\x62\163\x63\x5f\x62\x61\x72\147\141\x69\x6e\x5f\x6f\x72\x64\145\x72")->alias("\142\x6f")->join("\171\142\x73\x63\x5f\151\155\141\147\x65\x73\x20\x69", "\x69\x2e\x69\155\x67\x5f\151\x64\x3d\142\157\x2e\x62\x61\162\x67\141\x69\x6e\x5f\x70\151\x63")->where($condition)->where("\142\x6f\56\155\x63\x68\x5f\x69\x64", $this->bus_id)->field("\142\x6f\56\52\x2c\151\56\151\x6d\147\x5f\x63\157\166\145\x72")->order("\x62\157\x2e\143\x72\145\141\x74\x65\x5f\x74\151\155\145\40\144\x65\x73\143")->paginate(15, false, $config = ["\161\x75\x65\162\171" => ["\163" => $url, "\x73\x74\141\x74\165\x73" => $status, "\x73\145\141\x72\x63\x68\137\x74\x65\170\x74" => $seart]]); goto AsLqX; zQCTz: $this->assign("\x73\164\141\x74\x75\163", $status); goto spNpZ; gpCFp: $url = explode("\75\x2f", $url); goto hvaw1; NCZMx: } public function bargain_order_send() { goto IsH1l; uwYsW: $res = Db::name("\x79\x62\x73\x63\137\x62\141\162\x67\141\151\156\x5f\x6f\x72\144\x65\162")->where("\157\x72\144\x65\162\x5f\151\x64", $id)->update(["\157\162\x64\x65\x72\137\163\x74\141\164\165\x73" => 2]); goto PaB90; PaB90: return AjaxReturn($res); goto UUMJ5; IsH1l: $id = input("\x70\141\162\141\x6d\x2e\151\x64"); goto uwYsW; UUMJ5: } public function activity_carousel() { goto oYtrV; x4QXd: return view("\x62\141\162\147\141\x69\x6e\x2f\x61\143\x74\151\166\151\164\x79\x5f\x63\141\162\x6f\165\x73\145\x6c"); goto Jo0Mh; aa03c: $url = explode("\46", $url[1]); goto ubOBL; oYtrV: $url = request()->query(); goto wbezz; ZvQLp: $this->assign("\154\151\163\164", $list); goto O2hrA; O2hrA: $this->assign("\160\x61\147\145", $page); goto x4QXd; kgcI3: $list = Db::name("\171\x62\x73\143\137\141\x70\x70\154\151\143\x61\164\x69\157\156\137\x63\141\162\x6f\x75\163\x65\154")->where("\x61\147\x65\x6e\164\163\137\x69\x64", $this->bus_id)->order("\x73\157\162\x74")->paginate(15, false, $config = ["\x71\x75\x65\162\171" => ["\163" => $url]]); goto Rh7aL; Rh7aL: $page = $list->render(); goto ZvQLp; ubOBL: $url = "\57" . $url[0]; goto kgcI3; wbezz: $url = explode("\x3d\x2f", $url); goto aa03c; Jo0Mh: } public function add_activity_carousel() { goto v_CZO; rSXO9: return view("\142\x61\162\147\141\x69\156\57\141\144\x64\137\x61\x63\164\151\166\x69\x74\171\137\x63\141\162\x6f\165\163\145\154"); goto b9NEu; ei6d5: return AjaxReturn($res); goto Y2H9U; N00X7: $data["\141\x67\145\156\x74\x73\137\x69\x64"] = $this->bus_id; goto cLMk2; ghYnQ: $data["\x69\155\147"] = input("\x70\141\162\141\155\x2e\154\x6f\147\157", ''); goto PoOD3; Az5vT: $data = []; goto ghYnQ; PoOD3: $data["\163\157\x72\164"] = input("\160\x61\162\x61\155\x2e\163\157\x72\x74", ''); goto G8WKF; cLMk2: $res = Db::name("\171\142\163\143\137\x61\160\x70\154\151\x63\141\x74\151\157\156\137\143\x61\162\157\165\x73\145\154")->insert($data); goto ei6d5; v_CZO: if (!request()->isAjax()) { goto k3c0z; } goto Az5vT; G8WKF: $data["\x63\x72\x65\141\164\145\x5f\164\x69\x6d\x65"] = time(); goto N00X7; E20YU: $this->assign("\x70\x5f\x69\x64", 4); goto rSXO9; Y2H9U: k3c0z: goto aR93I; aR93I: $this->assign("\164\150\151\163\137\x69\144", 1); goto E20YU; b9NEu: } public function edit_activity_carousel() { goto ttvE8; cimWK: $data["\x69\x6d\147"] = input("\x70\141\x72\x61\155\56\154\157\147\x6f", ''); goto xv936; DMtQr: return AjaxReturn($res); goto Kz8yO; xv936: $data["\x73\x6f\x72\164"] = input("\x70\141\x72\x61\x6d\x2e\x73\157\162\164", ''); goto JH7Mp; O2Gl1: $info = Db::name("\x79\142\163\143\x5f\141\160\160\x6c\x69\x63\x61\x74\x69\157\x6e\x5f\x63\x61\162\157\x75\x73\x65\154")->where("\x69\144", $id)->find(); goto MjR0Y; qgOHD: $id = input("\x70\141\x72\x61\155\x2e\151\x64"); goto cimWK; MYCN3: $res = Db::name("\x79\x62\x73\143\137\x61\160\x70\x6c\151\143\141\x74\151\157\x6e\137\143\141\162\157\165\x73\x65\154")->where("\x69\x64", $id)->update($data); goto DMtQr; MjR0Y: $this->assign("\151\x6e\x66\157", $info); goto cL4aH; JH7Mp: $data["\141\147\145\x6e\164\163\137\151\x64"] = $this->bus_id; goto MYCN3; cL4aH: return view("\142\141\162\x67\x61\x69\x6e\57\x65\144\x69\164\x5f\141\143\164\151\x76\x69\164\x79\137\x63\x61\162\157\x75\x73\x65\x6c"); goto zxYit; ttvE8: if (!request()->isAjax()) { goto YuY_c; } goto AflJD; Kz8yO: YuY_c: goto EXduV; AflJD: $data = []; goto qgOHD; EXduV: $id = input("\160\141\x72\x61\155\56\151\x64"); goto O2Gl1; zxYit: } public function activity_carousel_sort() { goto v3Xao; Bujy2: $val = input("\160\x61\162\141\x6d\56\166\141\x6c"); goto naIna; naIna: $res = Db::name("\x79\x62\163\143\137\141\160\x70\154\x69\x63\141\x74\x69\x6f\156\x5f\143\141\162\157\165\163\145\154")->where("\x69\144", $id)->update(["\163\x6f\162\164" => $val]); goto jmsUU; v3Xao: $id = input("\x70\141\162\x61\155\56\151\144"); goto Bujy2; jmsUU: return AjaxReturn($res); goto Ms5Mi; Ms5Mi: } public function activity_class_use() { goto Sl9aq; jDHya: $link = $item["\x69\155\147"]; goto VnkyI; M67EU: if (!($key == "\144\x65\x6c")) { goto tRNrA; } goto KBWqD; vxmWx: return AjaxReturn($res); goto erwmT; Sl9aq: $id = input("\x70\141\x72\141\155\56\x69\144"); goto Ek7iS; a4wP2: h5Anb: goto DJHMe; DJHMe: $res = Db::name("\x79\142\x73\143\x5f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\157\x6e\x5f\143\141\x72\x6f\165\163\x65\154")->where("\x69\144", $id)->update(["\x69\x73\137\165\163\145" => 0]); goto ixei9; k0Cai: VC7KU: goto vxmWx; LkSm4: if ($key == "\157\x6e") { goto h5Anb; } goto M67EU; VnkyI: $link = str_replace("\x68\164\x74\x70\x3a\57\x2f" . $_SERVER["\x48\x54\x54\120\x5f\x48\x4f\123\x54"], $_SERVER["\104\x4f\103\125\x4d\105\116\124\x5f\122\117\x4f\x54"], $link); goto l3ISL; Ri3CK: goto AmIVu; goto a4wP2; L0mfH: GCqoM: goto P30id; sgnD8: if ($key == "\x6f\146\146") { goto GCqoM; } goto LkSm4; vNM6F: ZieLJ: goto fxdIV; l3ISL: $res = Db::name("\x79\x62\x73\x63\137\x61\x70\160\x6c\x69\143\141\164\151\157\x6e\x5f\x63\x61\x72\x6f\165\x73\145\x6c")->where("\x69\144", $id)->delete(); goto LRLJS; LRLJS: if (!file_exists($link)) { goto ZieLJ; } goto lFEe7; fxdIV: tRNrA: goto Ri3CK; ixei9: AmIVu: goto O7lsT; lFEe7: unlink($link); goto vNM6F; Ek7iS: $key = input("\x70\141\x72\x61\x6d\x2e\x6b\145\x79"); goto sgnD8; O7lsT: goto VC7KU; goto L0mfH; KBWqD: $item = Db::name("\x79\x62\x73\143\x5f\x61\x70\x70\x6c\x69\143\141\164\151\x6f\x6e\x5f\x63\x61\162\x6f\165\163\x65\154")->where("\151\144", $id)->find(); goto jDHya; P30id: $res = Db::name("\x79\142\x73\x63\x5f\x61\160\x70\154\151\x63\141\164\151\157\156\137\x63\x61\162\157\165\163\x65\154")->where("\151\144", $id)->update(["\x69\163\x5f\x75\163\145" => 1]); goto k0Cai; erwmT: } public function activity_class() { goto rcHVY; DDI3P: mlgMj: goto ms5t_; KBuaa: $this->assign("\160\x61\147\145", $page); goto pPmCV; GbvK0: $condition["\143\x6c\x61\163\x73\x5f\156\141\x6d\x65"] = array("\154\151\153\145", "\45" . $search_text . "\x25"); goto pz4s_; rcHVY: $url = request()->query(); goto PCKry; nmKTv: $page = $list->render(); goto ID1zy; pz4s_: $seart = ''; goto bK2V5; rjPR_: $seart = $search_text; goto DDI3P; kK5js: $url = explode("\x26", $url[1]); goto msmNj; msmNj: $url = "\x2f" . $url[0]; goto lQHkc; bK2V5: if (!($search_text != '')) { goto mlgMj; } goto rjPR_; pPmCV: $this->assign("\x6c\151\x73\164", $list); goto T30zm; ms5t_: $list = Db::name("\x79\x62\x73\143\137\x61\x70\160\154\151\143\x61\x74\151\x6f\156\x5f\x61\x63\164\x69\x76\x69\164\x79\137\143\x6c\141\x73\163")->where("\x61\147\x65\156\x74\163\137\151\x64", $this->bus_id)->where($condition)->order("\163\157\162\164")->paginate(15, false, $config = ["\161\165\145\x72\x79" => ["\163" => $url, "\x73\145\x61\162\143\x68\x5f\x74\145\170\x74" => $seart]]); goto nmKTv; PCKry: $url = explode("\75\x2f", $url); goto kK5js; ID1zy: $this->assign("\163\x65\141\162\143\150\137\x74\x65\x78\x74", $search_text); goto KBuaa; T30zm: return view("\x62\141\162\x67\x61\x69\x6e\57\x61\x63\164\151\166\151\164\171\137\x63\x6c\141\163\163"); goto bjETl; lQHkc: $search_text = input("\160\x61\162\141\x6d\56\163\145\x61\162\143\150\137\164\145\170\164", ''); goto GbvK0; bjETl: } public function add_activity_class() { goto sUqIi; JgHa3: $data["\x73\157\x72\x74"] = request()->post("\x73\x6f\x72\164", ''); goto LYtbm; NEsAk: $res = Db::name("\171\142\163\143\137\141\x70\160\x6c\x69\x63\141\164\x69\157\x6e\x5f\x61\143\x74\x69\x76\x69\164\171\137\143\154\x61\163\x73")->insert($data); goto OEMhs; LYtbm: $data["\x69\x6d\x67\137\x75\x72\x6c"] = request()->post("\x63\141\164\x65\x5f\x70\x69\143", ''); goto EGBBy; jbqmh: return view("\142\x61\162\147\141\x69\156\57\141\x64\x64\x5f\x61\x63\164\151\x76\x69\164\171\137\x63\154\141\163\163"); goto ux85w; fbSqA: $data["\141\147\145\156\x74\x73\x5f\151\144"] = $this->bus_id; goto NEsAk; sUqIi: if (!request()->isAjax()) { goto B8uMz; } goto oQEFU; EGBBy: $data["\x63\x72\x65\x61\x74\145\137\x74\x69\155\145"] = time(); goto fbSqA; oQEFU: $data = []; goto ZNTfs; OEMhs: return AjaxReturn($res); goto sMIsW; sMIsW: B8uMz: goto jbqmh; ZNTfs: $data["\143\x6c\x61\x73\x73\137\x6e\x61\x6d\x65"] = request()->post("\143\141\164\145\137\156\x61\x6d\x65", ''); goto JgHa3; ux85w: } public function edit_activity_class() { goto C139z; oLdFA: $data = []; goto aZUdm; g0OBD: $data["\151\155\x67\137\165\x72\x6c"] = request()->post("\143\x61\164\x65\x5f\x70\x69\143", ''); goto MvPj4; ndOzn: aqLM0: goto qkmjo; Bw21E: return view("\x62\141\x72\147\x61\151\156\57\145\144\x69\x74\x5f\141\x63\x74\x69\x76\x69\x74\x79\137\x63\x6c\141\163\x73"); goto YO8AL; qkmjo: $id = input("\160\141\162\x61\x6d\56\151\x64", ''); goto W32jg; MvPj4: $data["\x63\x72\x65\141\x74\x65\x5f\x74\151\x6d\145"] = time(); goto NDv_V; C139z: if (!request()->isAjax()) { goto aqLM0; } goto UJayv; bPnd0: $data["\163\x6f\x72\x74"] = request()->post("\x73\x6f\x72\x74", ''); goto g0OBD; aZUdm: $data["\x63\x6c\x61\163\163\137\156\x61\x6d\145"] = request()->post("\143\141\x74\145\x5f\156\x61\155\145", ''); goto bPnd0; UJayv: $id = request()->post("\151\x64", ''); goto oLdFA; NDv_V: $data["\141\147\x65\x6e\164\163\x5f\151\x64"] = $this->bus_id; goto wAyQb; xx50l: $this->assign("\x69\x6e\146\x6f", $list); goto Bw21E; W32jg: $list = Db::name("\x79\x62\x73\x63\x5f\x61\x70\x70\x6c\x69\143\141\164\151\x6f\x6e\137\141\143\x74\x69\x76\151\164\x79\x5f\x63\x6c\x61\163\x73")->where("\151\x64", $id)->find(); goto xx50l; J0ql2: return AjaxReturn($res); goto ndOzn; wAyQb: $res = Db::name("\171\x62\x73\143\137\141\160\x70\x6c\x69\143\141\x74\151\x6f\x6e\x5f\x61\143\x74\151\x76\x69\x74\171\137\x63\x6c\141\163\163")->where("\x69\144", $id)->update($data); goto J0ql2; YO8AL: } public function activity_class_status() { goto vJbjE; NtHjA: $res = Db::name("\171\x62\x73\x63\x5f\141\160\x70\x6c\x69\143\x61\164\151\x6f\x6e\137\x61\143\x74\151\x76\151\164\171\137\x63\154\141\163\x73")->where("\151\x64", $id)->update(["\x69\163\137\x75\163\x65" => 1]); goto pZtTO; J8dvL: goto pv6Ul; goto Cnp8f; Cnp8f: UEPZA: goto NtHjA; WTfsv: $key = input("\x70\x61\x72\141\155\56\x6b\x65\171"); goto OUUsI; O8wYc: $res = Db::name("\171\142\163\x63\137\141\160\x70\x6c\x69\x63\x61\164\x69\157\156\x5f\x61\143\164\151\x76\151\x74\171\137\143\x6c\x61\x73\163")->where("\151\144", $id)->update(["\x69\163\137\165\x73\145" => 0]); goto J8dvL; pZtTO: pv6Ul: goto jOhx6; jOhx6: return AjaxReturn($res); goto EjQJN; vJbjE: $id = input("\x70\141\162\141\155\56\151\144"); goto WTfsv; OUUsI: if ($key == "\157\x66\x66") { goto UEPZA; } goto O8wYc; EjQJN: } public function activity_class_sort() { goto QnwLS; QnwLS: $id = input("\x70\141\x72\x61\x6d\56\x69\x64"); goto pZ2oY; IgSos: $res = Db::name("\x79\x62\x73\143\x5f\x61\x70\160\154\151\143\x61\164\151\157\156\137\x61\143\x74\151\166\x69\x74\x79\137\x63\x6c\141\x73\x73")->where("\151\x64", $id)->update(["\x73\157\162\164" => $val]); goto sLHWg; pZ2oY: $val = input("\160\141\162\141\x6d\56\166\141\x6c"); goto IgSos; sLHWg: return AjaxReturn($res); goto LRF4G; LRF4G: } public function bargain_refund() { goto KdyBI; zL9FY: $order_id = input("\160\141\162\x61\155\56\x6f\162\x64\x65\162\x5f\151\144"); goto aiyQ1; Ha41K: return AjaxReturn($res); goto kzRyZ; XeBqf: $this->assign("\151\x6e\x66\x6f", $info); goto QBfq3; KdyBI: if (!request()->isAjax()) { goto umTcS; } goto zL9FY; lWX9S: $order_id = input("\160\141\x72\141\x6d\56\x6f\162\144\145\x72\137\x69\x64", "\60"); goto synJX; ro_T0: return view("\142\x61\162\147\141\151\x6e\57\x62\x61\x72\x67\x61\151\156\137\162\145\x66\x75\156\144"); goto ys5XQ; AGgUO: $res = Db::name("\x79\x62\163\x63\137\142\141\x72\147\141\151\x6e\137\157\x72\x64\145\162")->where("\157\162\144\145\162\x5f\151\144", $order_id)->update(["\157\162\144\x65\x72\x5f\163\x74\141\164\165\163" => 4, "\162\x65\146\x75\x6e\144\x5f\x6d\x6f\x6e\145\171" => $refund_money, "\146\151\156\151\163\150\x5f\x74\x69\155\145" => time()]); goto Ha41K; kzRyZ: umTcS: goto lWX9S; aiyQ1: $refund_money = input("\x70\141\x72\x61\155\56\162\x65\146\x75\156\144\x5f\x6d\157\x6e\x65\171"); goto AGgUO; QBfq3: $this->assign("\x6f\x72\144\x65\162\137\x69\x64", $order_id); goto ro_T0; synJX: $info = Db::name("\x79\x62\x73\143\137\142\x61\x72\147\x61\151\156\x5f\x6f\x72\x64\145\162")->where("\157\x72\144\145\x72\x5f\x69\x64", $order_id)->find(); goto XeBqf; ys5XQ: } public function orderTakeRefund() { goto teVYe; xyakC: V4iQ7: goto B5bKm; IfZe1: $cert = authcode($refund_setting["\x63\145\x72\164"], "\104\x45\x43\117\104\x45"); goto LKH6C; C1k1q: YZT14: goto Ch4Gj; X7EgA: $bus_config = Db::name("\x79\142\163\143\x5f\x63\x6f\x6e\146\151\x67")->where("\x6d\x63\x68\137\151\144", $this->bus_id)->where("\153\x65\x79", "\x57\130\120\x41\x59")->find(); goto I75tJ; h5Pmi: $order_info = Db::name("\x79\x62\163\x63\137\142\141\x72\147\x61\151\156\x5f\157\162\144\x65\162")->where("\x6f\162\144\145\162\x5f\151\x64", $order_id)->find(); goto X7EgA; ctJzJ: if ($param["\162\x65\x73\x75\x6c\x74\x5f\x63\157\144\145"] == "\x53\125\103\x43\x45\123\123") { goto YZT14; } goto oV5ct; xIXvE: global $_W; goto diKmv; uNaSD: goto V4iQ7; goto awq8r; kiTgN: $input = new \WxPayRefund(); goto GsBPX; iQXmW: $input->SetOut_refund_no($res); goto UBnle; E0EBd: file_put_contents($key_path, $key); goto SSk_C; hjNMn: $item = Db::name("\x79\x62\163\143\x5f\x62\x61\x72\147\x61\x69\156\x5f\x6f\x72\x64\145\162")->where("\157\162\x64\145\162\137\x69\144", $order_id)->find(); goto v_ePs; UBnle: $input->SetOp_user_id($temp["\101\x50\120\137\x4d\103\110\x49\x44"]); goto Fe6zY; SSk_C: $param = \WxPayApi::refund($input); goto ctJzJ; ymhbx: return AjaxReturn($res); goto xyakC; GsBPX: $input->SetOut_trade_no($order_info["\157\x75\164\137\x74\x72\x61\x64\x65\x5f\x6e\157"]); goto FJjOk; FJjOk: $input->SetTotal_fee($order_info["\x70\141\171\x5f\x6d\157\x6e\x65\x79"] * 100); goto BIHzq; Fe6zY: $input->SetAppid($temp["\101\120\x50\137\x49\104"]); goto rRmZJ; B47bc: return AjaxReturn($order_info); goto OyQIY; Ch4Gj: $order_info = Db::name("\x79\142\163\x63\137\x62\141\x72\x67\141\151\x6e\137\157\x72\144\x65\x72")->where("\x6f\x72\x64\x65\162\137\x69\x64", $order_id)->update(["\x6f\x72\x64\x65\x72\x5f\x73\x74\x61\x74\165\163" => 5, "\x72\145\146\x75\156\144\x5f\155\x6f\156\x65\x79" => $order_info["\x70\x61\171\x5f\155\x6f\156\145\x79"], "\x66\151\x6e\x69\x73\x68\x5f\x74\x69\155\x65" => time()]); goto B47bc; oV5ct: $errmsg = empty($param["\145\x72\162\137\x63\157\x64\x65\x5f\144\x65\x73"]) ? "\351\x80\200\xe6\xac\xbe\xe5\xa4\261\xe8\xb4\245" : $param["\x65\x72\x72\137\x63\x6f\x64\145\137\144\x65\163"]; goto cTGkF; nypP0: $res = $temp["\101\120\120\x5f\115\x43\110\x49\104"] . date("\x59\x6d\144\x48\x69\x73") . rand(10000, 9999999); goto kiTgN; diKmv: $setting = uni_setting_load("\160\x61\x79\x6d\x65\156\x74", $_W["\x75\x6e\x69\141\x63\x69\144"]); goto o694z; rRmZJ: $cert = $cert; goto rAtSM; teVYe: $order_id = request()->post("\x6f\x72\x64\145\x72\x5f\x69\144", ''); goto xIXvE; D94dL: file_put_contents($cert_path, $cert); goto E0EBd; BIHzq: $input->SetRefund_fee($order_info["\x70\x61\x79\x5f\x6d\x6f\x6e\x65\171"] * 100); goto iQXmW; KFqaw: if ($refund_setting["\x73\167\x69\164\143\x68"] != 1 || empty($refund_setting["\153\145\x79"]) || empty($refund_setting["\x63\145\x72\164"])) { goto QqCeO; } goto IfZe1; DJuDY: $key_path = ATTACHMENT_ROOT . "\160\x75\142\154\x69\x63\x2f" . $this->bus_id . "\x5f\x77\x65\143\x68\x61\164\137\162\x65\x66\x75\156\x64\137\153\x65\x79\56\x70\x65\x6d"; goto D94dL; kCxeo: $cert_path = ATTACHMENT_ROOT . "\160\x75\x62\x6c\x69\x63\57" . $this->bus_id . "\x5f\167\x65\x63\x68\141\164\x5f\162\x65\146\165\x6e\144\137\143\x65\162\x74\x2e\x70\145\x6d"; goto DJuDY; rAtSM: $key = $key; goto kCxeo; o694z: $refund_setting = $setting["\x70\141\171\155\x65\156\164"]["\167\x65\x63\x68\x61\x74\x5f\162\145\x66\165\x6e\x64"]; goto KFqaw; LKH6C: $key = authcode($refund_setting["\x6b\145\171"], "\x44\105\103\x4f\104\105"); goto h5Pmi; awq8r: QqCeO: goto hjNMn; cTGkF: return AjaxReturnMsg(0, $errmsg); goto WYlQF; WYlQF: goto h0I7a; goto C1k1q; v_ePs: $res = Db::name("\x79\x62\163\x63\x5f\142\141\x72\x67\141\x69\x6e\x5f\x6f\x72\144\x65\162")->where("\x6f\162\144\145\x72\137\x69\x64", $order_id)->update(["\x6f\x72\144\145\x72\x5f\163\x74\141\x74\x75\163" => 5, "\x72\145\146\x75\156\x64\x5f\155\x6f\x6e\x65\171" => $item["\160\x61\x79\x5f\155\x6f\x6e\145\171"], "\146\x69\x6e\151\x73\150\x5f\164\151\155\145" => time()]); goto ymhbx; I75tJ: $temp = json_decode($bus_config["\166\141\x6c\x75\x65"], true); goto nypP0; OyQIY: h0I7a: goto uNaSD; B5bKm: } public function returnGoodsList() { goto Vthjv; TT6Ea: jCIPg: goto XLSbE; Vthjv: if (!(request()->isAjax() && request()->method() == "\x50\117\123\x54")) { goto jCIPg; } goto E7eyf; fG5mt: $imgs = Db::name("\171\x62\x73\143\x5f\151\155\x61\147\x65\163")->where("\x69\155\x67\137\x69\144", "\151\156", $img_id_array)->field("\151\155\147\x5f\151\x64\54\151\155\x67\x5f\x63\157\166\145\x72")->select(); goto kvWEr; tpp15: $art = Db::name("\x79\142\163\143\137\x67\x6f\157\x64\163")->alias("\x67")->join("\x79\x62\x73\x63\x5f\151\155\141\x67\145\x73\40\x6d", "\155\x2e\151\x6d\147\137\151\x64\x3d\147\x2e\x69\155\x61\x67\x65\x73")->where("\x67\x2e\x6d\x63\x68\x5f\151\x64", $this->bus_id)->where("\147\56\x69\163\137\144\x65\x6c", "\60")->field("\x67\56\147\157\x6f\144\x73\x5f\x69\x64\54\x67\56\x63\x72\145\x61\164\145\x5f\164\151\x6d\x65\x2c\x67\56\x67\157\x6f\144\163\x5f\156\141\x6d\145\54\x67\56\160\x72\151\x63\145\54\155\56\151\x6d\x67\137\143\x6f\166\x65\162")->order("\x67\56\143\x72\145\141\164\x65\x5f\164\x69\155\145\40\144\x65\x73\143")->paginate(15, false, ["\161\x75\145\x72\x79" => ["\x73" => $url]]); goto RPy2g; bgB4R: $img_id_array = $goods["\x69\155\147\137\x69\144\x5f\x61\x72\x72\x61\x79"]; goto fG5mt; sVPiW: $this->assign("\x70\x61\x67\145", $art->render()); goto kWCgY; eddK6: $url = "\57" . $url[0]; goto tpp15; kWCgY: return $this->fetch("\142\141\x72\147\x61\151\156\57\162\x65\x74\x75\x72\x6e\x5f\x67\x6f\x6f\144\x73\137\154\x69\x73\164"); goto jQnkV; qm9VO: $url = explode("\46", $url[1]); goto eddK6; E7eyf: $goods_id = request()->post("\147\x6f\x6f\x64\163\137\151\144"); goto cdFvv; RPy2g: $this->assign("\x67\x6f\157\144\163", $art); goto sVPiW; WhLkp: $goods = Db::name("\171\142\163\x63\x5f\x67\157\x6f\144\x73")->alias("\x67")->join("\x79\x62\x73\143\137\151\x6d\141\x67\145\163\40\x69", "\147\56\151\x6d\141\147\145\x73\40\75\151\x2e\x69\x6d\147\137\x69\x64")->where($where)->field("\147\56\52\54\x69\x2e\151\x6d\x67\137\143\x6f\166\x65\x72")->find(); goto bgB4R; kvWEr: $goods["\x69\x6d\147\x5f\141\x72\x72"] = $imgs; goto oeIg6; oeIg6: return AjaxReturn($goods); goto TT6Ea; p0Pg6: $url = explode("\75\x2f", $url); goto qm9VO; XLSbE: $url = request()->query(); goto p0Pg6; cdFvv: $where["\147\157\157\144\x73\137\x69\x64"] = $goods_id; goto WhLkp; jQnkV: } }
