<?php
 namespace app\admin\controller; use app\admin\service\Business; use app\common\model\BusMenu; use think\Controller; use think\Cookie; use think\Db; use think\Exception; use think\Request; use think\Session; header("\x41\143\x63\145\x73\163\55\103\x6f\x6e\164\x72\x6f\154\x2d\x41\154\x6c\x6f\x77\x2d\117\x72\151\x67\x69\156\x3a\x2a"); class Base extends Controller { protected $bus = null; protected $mod_class_id = null; protected $bus_id; protected $moduleid = null; protected $rootid = null; protected $controller = null; protected $action = null; protected $module_info = null; protected $bus_group = null; protected $uuid = null; public function __construct() { goto d_V_d; d_V_d: parent::__construct(); goto e01r7; JOHWe: $this->init(); goto rqXVE; e01r7: $this->bus = new Business(); goto JOHWe; rqXVE: } public function init() { goto Ke29V; qjjiQ: sYLEN: goto u1Nvy; hH4R6: fAsVB: goto ZTAoq; ahtcK: $last_visit_url = $last_visit[1]; goto EdqZN; wBIz9: $isadmin = $_SESSION["\167\x65\x37\x5f\167"]["\151\163\146\157\165\x6e\144\145\162"]; goto h1Sdm; kHma6: $siteroot = $_SESSION["\x77\x65\x37\x5f\x77"]["\x73\x69\164\145\162\157\157\x74"]; goto hcFiB; Exkqb: $this->assign("\165\163\x65\162\x5f\x69\156\146\x6f", $id); goto CZ34g; gEdEF: $xcx_name = $_SESSION["\x77\x65\x37\x5f\x61\x63\x63\157\165\156\x74"]["\x6e\x61\x6d\x65"]; goto lr48E; EdqZN: $this->assign("\154\141\x73\x74\137\166\x69\x73\151\x74\137\165\162\x6c", $last_visit_url); goto phL8l; CZ34g: $about = Db::name("\171\142\163\143\x5f\142\x75\x73\151\x6e\x65\x73\x73\x5f\x61\142\x6f\165\164")->where("\155\143\150\x5f\151\x64", $uniacid)->find(); goto WZI2S; a6hpE: $result = count_days($date1, $endtime); goto mF32t; u1Nvy: header("\114\157\143\141\x74\151\x6f\156\72" . $siteroot); goto pWSoM; wsrNr: $three_mid = Cookie::get("\x74\150\162\145\x65\137\x6d\x69\x64"); goto KxcJ7; N71h0: Session::set("\x77\145\x37\137\x73", $_SESSION["\167\x65\67\x5f\x77"]); goto eQPPi; VyfYL: if (WXAPP_TYPE == 100) { goto sYLEN; } goto VJDxv; Fupo2: aPqa3: goto Rgxim; usThA: $this->action = Request::instance()->action(); goto KW2Vy; Ke29V: global $_W, $_GPC; goto kHma6; aHYhE: $sub_mid = Cookie::get("\163\165\x62\x5f\155\151\144"); goto wsrNr; VJDxv: header("\114\x6f\x63\141\x74\151\157\x6e\x3a" . url("\141\x64\x6d\x69\156\x2f\154\157\147\151\156\x2f\x69\156\144\x65\170")); goto u9b0x; fVgSQ: $date1 = strtotime(date("\x59\x2d\155\55\144")); goto a6hpE; nS1Jf: $endtime = Db::name("\141\143\x63\157\165\156\164")->where("\165\156\151\141\x63\x69\x64", $uniacid)->value("\x65\156\x64\x74\x69\x6d\x65"); goto Fe6L4; OKzk1: $this->assign("\x63\x6f\x70\171\162\x69\x67\x68\x74", $copyright); goto rNVP4; loEIc: Cookie::set("\x75\163\x65\162\156\141\155\145", $username); goto tib4M; Q5i1Z: $this->assign("\164\157\160\x5f\155\151\x64", $top_mid); goto Bgy8E; E8FfH: $this->bus_id = $uniacid; goto VXpVz; LOfRO: $firstArray = array(); goto jbatL; l0eLx: $res_check = Db::name("\x79\x62\163\143\x5f\165\163\x65\162\137\162\x6f\x6c\145")->find(); goto pqcxA; EH0g1: mdptp: goto JASeA; vlbz8: $last_visit = explode("\x2c", $_GPC[$visit_key]); goto ahtcK; E4yag: $where["\151\163\137\155\145\x6e\165"] = 1; goto FUnCi; tnHDe: YCUBw: goto R1yKD; sxO1W: $first_menu_list = $this->bus->getchildModuleQuery(0); goto seKCz; tib4M: Cookie::set("\165\156\x69\x61\x63\151\144", $uniacid); goto A8RXb; d667m: $copyright = Db::name("\171\142\x73\143\x5f\143\157\x70\x79\162\x69\x67\150\x74")->where("\151\144", 1)->find(); goto OKzk1; X_XhP: $sub_mid = empty($sub_mid) ? 0 : $sub_mid; goto IUxlN; V6IGO: $uniacid = Cookie::get("\x75\156\151\141\x63\x69\144"); goto fJYV6; XnANk: Session::set("\x62\x75\163\137\151\x64", $uniacid); goto K0Phf; EOVZx: $this->assign("\x61\154\154\x5f\x6d\x65\x6e\x75", $p); goto d667m; u6sCQ: $this->assign("\x73\x69\x74\x65\162\x6f\x6f\x74", $siteroot); goto WKQDG; y77tQ: if (empty($_GPC[$visit_key])) { goto WtUSj; } goto vlbz8; jbatL: $p = array(); goto Mt4Cc; WrQzo: if (!($wq_uid != 1 && (!$isadmin || $founder_groupid == 2))) { goto hcJxZ; } goto u41un; g51Ex: Cookie::set("\163\x69\x74\x65\162\x6f\x6f\164", $siteroot); goto l051c; I4qT0: $root_array = $this->bus->getModuleRootAndSecondMenu($this->moduleid); goto cgT9v; eQPPi: $username = $_SESSION["\x77\145\x37\x5f\x75\x73\x65\162"]["\x75\163\x65\162\x6e\141\x6d\x65"]; goto loEIc; w9Uno: OJWye: goto TVieT; Vttin: $this->assign("\x69\x73\x66\x6f\165\x6e\144\145\x72", $isfounder); goto ORm8e; pWSoM: yuHyP: goto lOPWW; qiUCw: $this->assign("\170\143\x78\137\156\x61\x6d\x65", $xcx_name); goto u6sCQ; R1yKD: foreach ($firstArray as &$first_per) { goto d4YQh; sgLua: LYaXy: goto IWOfl; IWOfl: $first_per["\x73\x75\142"] = $secondArray; goto MLHba; nLGUi: foreach ($secondArray as &$second_per) { goto T2TLy; T2TLy: $threeArray = array(); goto W9pIV; JzYDX: vru7w: goto O4DPp; osSmw: l9ke1: goto b8T4J; W9pIV: foreach ($permissionList as $three_per) { goto rW2iO; rOzEl: $threeArray[] = $three_per; goto phgd0; hgWis: BZetj: goto UB8pU; rW2iO: if (!($three_per["\160\x69\x64"] == $second_per["\155\x6f\x64\x75\154\145\x5f\151\144"])) { goto mP9Cd; } goto rOzEl; phgd0: mP9Cd: goto hgWis; UB8pU: } goto osSmw; b8T4J: $second_per["\163\x75\x62"] = $threeArray; goto JzYDX; O4DPp: } goto sgLua; ixWpU: QDj5U: goto nLGUi; yJ5Ao: foreach ($permissionList as $childPer) { goto IU45T; IU45T: if (!($childPer["\x70\151\x64"] == $first_per["\x6d\157\144\x75\x6c\x65\137\x69\144"])) { goto uetwj; } goto EmZUU; NlKUB: uetwj: goto g765m; EmZUU: $secondArray[] = $childPer; goto NlKUB; g765m: b5UqM: goto OKoE8; OKoE8: } goto ixWpU; MLHba: $p[] = $first_per; goto MCz81; MCz81: eIJ42: goto XINoE; d4YQh: $secondArray = array(); goto yJ5Ao; XINoE: } goto Fupo2; rwrlF: $this->assign("\x65\x6e\x64\164\151\x6d\145", $endtime); goto XUVWl; oCkqX: $siteroot = Cookie::get("\x73\x69\x74\145\162\x6f\x6f\164"); goto PlIh3; u41un: $user_role_list = Db::name("\x79\x62\163\x63\137\x75\x73\145\x72\137\x70\145\162\x6d\151\163\163\151\x6f\156")->alias("\160")->join("\171\142\x73\x63\x5f\165\x73\145\162\137\x72\157\154\145\x20\162", "\162\56\162\157\154\x65\x5f\x69\144\75\x70\x2e\162\x6f\x6c\x65\137\151\x64")->where("\160\x2e\165\163\145\162\x5f\x69\144", $wq_uid)->find(); goto z5O4n; p_Mh6: $this->redirect("\57"); goto w9Uno; VHCql: pAgq1: goto E8FfH; A40bD: $this->assign("\x57\130\101\x50\x50\137\124\x59\x50\105", WXAPP_TYPE); goto Y0xDb; skKYp: $where = array(); goto WrQzo; GiRxX: if (WXAPP_TYPE == 100) { goto mdptp; } goto Y3v0M; XUVWl: $this->assign("\163\x69\x74\145\x5f\156\141\155\x65", $site_name["\x73\x69\164\145\137\156\x61\x6d\145"]); goto CmfOm; ebcyW: WAf89: goto HVTux; ZTAoq: $visit_key = "\x5f\x5f\x6c\141\x73\164\166\151\163\151\x74\137" . $_W["\x75\151\x64"]; goto y77tQ; IUxlN: $three_mid = empty($three_mid) ? 0 : $three_mid; goto Q5i1Z; mF32t: $endtime = ["\151\163\137\163\150\x6f\x77" => 1, "\x74\151\x6d\145" => Date("\x59\55\155\x2d\x64", $endtime), "\x64\141\x79\163" => $result]; goto hH4R6; lOPWW: exit; goto K3CtG; wmqM0: Y3pnk: goto fVgSQ; vo8m6: $uniacid = $_SESSION["\167\x65\67\x5f\141\143\143\x6f\x75\156\164"]["\165\x6e\151\141\143\151\144"]; goto gEdEF; NAAWK: $chece_au = Db::name("\x79\x62\x73\143\137\165\163\145\x72\137\160\x65\162\155\151\163\163\151\x6f\156")->where("\165\163\145\162\x5f\151\144", $wq_uid)->find(); goto hbNdg; yYyTT: $this->moduleid = $this->module_info["\155\157\x64\165\154\145\x5f\151\x64"]; goto Exkqb; CmfOm: $this->assign("\x76\x65\162\163\151\157\x6e\x5f\x69\x64", $_SESSION["\x76\145\162\163\x69\157\156\137\x69\x64"]); goto A40bD; ORm8e: $site_name = Db::name("\171\x62\163\x63\137\x63\x6f\160\x79\162\x69\x67\x68\164")->where("\x69\144", 1)->find(); goto nS1Jf; Bgy8E: $this->assign("\x73\x75\x62\x5f\155\151\x64", $sub_mid); goto YCYV8; KW2Vy: $this->module_info = $this->bus->getModuleIdByModule($this->controller, $this->action); goto yYyTT; u9b0x: goto yuHyP; goto qjjiQ; lr48E: if ($uniacid) { goto Gqxd1; } goto Ed6Jr; YCYV8: $this->assign("\x74\150\x72\x65\x65\x5f\155\151\144", $three_mid); goto EOVZx; FUnCi: $permissionList = Db::name("\x79\x62\x73\x63\137\142\x75\x73\137\x6d\157\144\165\154\145")->where($where)->order("\x73\157\162\164\x20\x61\163\x63\54\155\157\x64\165\154\x65\137\151\x64\40\x61\163\143")->select(); goto LOfRO; cgT9v: $this->rootid = $root_array[0]; goto sxO1W; hcFiB: if (!empty($_SESSION["\167\145\x37\x5f\x61\143\143\x6f\x75\x6e\x74"])) { goto ePF6W; } goto VyfYL; phL8l: WtUSj: goto rwrlF; Fe6L4: if ($endtime && $endtime != 0) { goto Y3pnk; } goto jk31h; A8RXb: Cookie::set("\x78\143\x78\137\x6e\x61\x6d\x65", $xcx_name); goto g51Ex; r5qOL: Db::name("\171\142\163\143\x5f\x75\x73\x65\162\x5f\x70\145\162\x6d\x69\163\163\151\x6f\156")->insert(["\165\163\145\162\x5f\151\x64" => $wq_uid, "\x72\157\154\x65\x5f\151\144" => $role_id["\x72\x6f\x6c\x65\137\x69\x64"], "\x63\162\145\x61\x74\145\137\x74\x69\x6d\145" => time()]); goto fHsG0; hbNdg: if (!empty($chece_au)) { goto P2nzb; } goto l0eLx; VXpVz: $this->uuid = $_W["\165\151\x64"]; goto XnANk; Y3v0M: header("\x4c\x6f\143\x61\164\151\x6f\156\72" . url("\x61\144\x6d\x69\156\x2f\x6c\x6f\x67\151\x6e\57\x69\156\144\145\170")); goto A5fCZ; h3bh9: $_SESSION["\104\x4f\103\125\x5f\122\x4f\x4f\124"] = $DOCU_ROOT[0]; goto vo8m6; pqcxA: if (!empty($res_check)) { goto zu0PU; } goto qV2hl; Rgxim: $top_mid = Cookie::get("\x74\157\160\x5f\x6d\151\x64"); goto aHYhE; HVTux: exit; goto VHCql; h1Sdm: $founder_groupid = $_SESSION["\167\x65\67\137\x77"]["\x75\x73\x65\162"]["\146\157\165\156\x64\x65\162\x5f\x67\x72\x6f\165\160\x69\144"]; goto NAAWK; OCkBD: hcJxZ: goto E4yag; K3CtG: ePF6W: goto rAVD6; KxcJ7: $top_mid = empty($top_mid) ? 233 : $top_mid; goto X_XhP; z5O4n: $where["\155\157\144\165\x6c\x65\137\151\x64"] = array("\x69\x6e", $user_role_list["\x6d\157\x64\165\x6c\x65\137\x69\144\x5f\141\162\162\x61\x79"]); goto OCkBD; rNVP4: $isfounder = $_SESSION["\x77\145\67\x5f\x77"]["\151\x73\146\x6f\x75\156\x64\145\162"]; goto Vttin; A5fCZ: goto WAf89; goto EH0g1; JASeA: header("\x4c\x6f\143\141\x74\151\x6f\x6e\72" . $siteroot); goto ebcyW; K0Phf: if (!empty($uniacid)) { goto OJWye; } goto p_Mh6; Ld5Ud: $role_id = Db::name("\171\142\x73\x63\137\165\163\145\162\x5f\162\157\x6c\145")->order("\x72\x6f\154\145\137\151\x64\40\141\x73\x63")->find(); goto r5qOL; rAVD6: $DOCU_ROOT = explode("\x2f\141\144\144\157\156\163", $_SERVER["\x53\103\x52\x49\120\124\x5f\x46\111\x4c\x45\x4e\x41\x4d\105"]); goto h3bh9; D7EmC: $this->assign("\165\x6e\x69\x61\143\151\144", $uniacid); goto kCYoe; PlIh3: goto UQFpy; goto usePw; fJYV6: $xcx_name = Cookie::get("\170\x63\170\x5f\156\x61\155\145"); goto oCkqX; l051c: UQFpy: goto qiUCw; Ed6Jr: $username = Cookie::get("\165\163\x65\162\x6e\141\x6d\x65"); goto V6IGO; qV2hl: Db::name("\171\142\163\x63\x5f\165\x73\145\162\x5f\x72\x6f\154\x65")->insert(["\162\157\154\145\137\x6e\x61\155\145" => "\xe9\xbb\230\xe8\256\244\346\235\203\351\231\220\xe7\xbb\204", "\x72\157\154\145\137\x73\164\x61\x74\x75\163" => 1, "\155\157\144\165\154\x65\137\x69\x64\x5f\x61\162\162\141\171" => "\x32\63\63\54\62\63\64\x2c\62\x34\x30\54\61\x39\64\54\x31\65\66\x2c\61\65\x37\x2c\x31\x39\x35\54\62\60\64\54\x32\60\x35\x2c\62\x34\x36\54\x32\x33\54\62\x31\70\54\62\62\64\x2c\62\x33\x35\54\x31\67\54\x32\x32\x30\x2c\62\x32\61\x2c\62\62\62\x2c\61\x35\x32\54\62\x33\x36\54\61\64\x35\x2c\x31\x39\70\x2c\62\70\x2c\62\x30\60\54\x32\x30\62\54\62\x30\63\x2c\x32\x31\x30\54\x32\x31\x32\x2c\62\61\63\x2c\62\63\x37\x2c\61\x32\x2c\x32\62\54\x32\65\x2c\x31\64\x39\x2c\x32\x39\x2c\62\67\x2c\x31\x34\x38\x2c\x31\x35\x31\54\62\x33\x38\54\x31\x35\x34\54\x31\x36\71\x2c\x32\62\x33\x2c\x32\x31\67\54\62\x31\66\54\x32\61\x34\54\62\x31\x35\x2c\x32\x34\x33\54\62\x32\70\54\x32\x32\67\x2c\x32\62\x36\54\x32\63\60\54\x32\62\71", "\x69\156\146\157" => '', "\x63\x72\145\x61\164\145\137\x74\x69\155\x65" => time()]); goto Uyn7q; seKCz: $wq_uid = $_SESSION["\x77\145\67\x5f\167"]["\165\163\145\x72"]["\165\x69\x64"]; goto wBIz9; kCYoe: if (!empty($id)) { goto pAgq1; } goto GiRxX; Uyn7q: zu0PU: goto Ld5Ud; TVieT: $this->controller = Request::instance()->controller(); goto usThA; Mt4Cc: foreach ($permissionList as $per) { goto Y7UnQ; K4wzb: $firstArray[] = $per; goto YtcxB; nQCcj: r7hbk: goto KzNq0; Y7UnQ: if (!($per["\x70\x69\x64"] == 0 && $per["\x6d\x6f\x64\x75\x6c\x65\137\x6e\141\x6d\x65"] != null)) { goto SDil9; } goto K4wzb; YtcxB: SDil9: goto nQCcj; KzNq0: } goto tnHDe; usePw: Gqxd1: goto N71h0; WZI2S: $this->assign("\141\x62\157\165\164", $about); goto I4qT0; fHsG0: P2nzb: goto skKYp; WKQDG: $id = self::setUser($username, $uniacid); goto D7EmC; r_f1c: goto fAsVB; goto wmqM0; jk31h: $endtime = ["\151\x73\x5f\x73\x68\157\x77" => 0]; goto r_f1c; Y0xDb: } protected function setUser($username, $uniacid) { goto TJEn5; X7BM8: $temp = "\x2f"; goto xiIWS; ILiMD: $payCallback = Db::name("\171\x62\x73\143\137\x63\x6f\156\x66\151\147")->where("\x6d\x63\150\x5f\x69\x64", $uniacid)->where("\x6b\x65\x79", "\127\x58\120\101\131")->find(); goto GGgcW; O_yRQ: Db::name("\x79\x62\x73\x63\x5f\165\x73\x65\x72\x5f\164\155\x70\x6c")->insert($toopsen); goto H4n5C; sADnW: if (count($cuff) > 0) { goto TTdeP; } goto Lv43S; Cmq2N: $callback["\101\x50\x50\x5f\x55\x52\114\137\x50\x54"] = "\150\164\x74\x70\163\x3a\57\x2f" . $un_url[0] . "\57\x61\x64\144\x6f\156\163\x2f\171\x62\x5f\163\x68\x6f\160\x2f\143\157\x72\x65\x2f\x70\164\137\160\141\x79\56\x70\x68\160"; goto sYEsi; wy12D: $digital["\151\x73\x5f\x75\x73\145"] = 1; goto DGnWt; YRjF8: $temp = ''; goto sADnW; RVNgp: return $result; goto qqkPM; DGnWt: $digital["\155\x63\150\137\151\144"] = $uniacid; goto Y2Ui1; hKCfV: $un_data["\165\156\x69\x61\143\x69\x64"] = $uniacid; goto Aa22N; ra1J9: $cuff = array_values($cuff); goto U9hLc; qu5xI: $un_data["\151\x70\166\x34"] = isset($_SERVER["\123\105\x52\126\x45\x52\x5f\x41\x44\104\122"]) ? $_SERVER["\123\105\122\126\x45\x52\x5f\101\104\104\122"] : ''; goto LXYv5; i7Ebq: $digital["\x76\141\154\x75\145\62"] = ''; goto Wgl2R; Lv43S: $temp = "\57"; goto UURmh; lJbYn: EF49m: goto vt1EX; RoT1w: $data["\x68\x65\141\144\137\151\x6d\147"] = "\160\x75\142\x6c\x69\x63\57\165\x70\x6c\157\x61\144\x2f\x31\57\154\x6f\x67\x6f\x2f\x31\x35\61\62\x36\x39\x37\x31\x31\66\56\x70\156\147"; goto sBDVB; Aa22N: $un_data["\x61\163\153"] = WXAPP_TYPE; goto Ae_t2; r9pVO: QRGgT: goto i62tN; Du3Wz: if (count($cuff) > 0) { goto EF49m; } goto X7BM8; YvcY0: $imgs["\x69\163\137\144\145\x66\141\165\x6c\x74"] = 1; goto w4iEj; NtnHF: self::base_shape($un_data); goto Ufuin; Rx0nb: $snap = $_SESSION["\x77\x65\67\x5f\x77"]["\x73\x69\164\x65\x72\157\x6f\164"] . "\x61\x64\x64\x6f\x6e\163"; goto ugGDm; UURmh: goto OeS3f; goto zhuhP; thzVl: $data["\x75\156\x69\141\x63\151\x64"] = $uniacid; goto oetzW; ugGDm: $cuff = explode("\x61\144\144\157\x6e\163", $snap); goto OEIE0; V0beo: $imgs["\151\144\145\156\164\137\143\x6c\x61\163\163"] = ''; goto Ay0D0; SCVVI: Db::name("\x79\x62\163\143\137\143\x6f\x6e\x66\x69\x67")->where("\x6d\x63\x68\137\x69\x64", $uniacid)->where("\153\x65\x79", "\127\x58\x50\x41\x59")->update($payCallback); goto RVNgp; cOvWd: $templen["\155\143\x68\137\151\144"] = $uniacid; goto ctCus; Yx3UD: $un_data["\x75\163\x65\162\x6e\x61\x6d\x65"] = $username; goto DFWQX; YXsu3: $callback["\101\120\120\x5f\x55\122\114"] = "\x68\x74\164\160\x73\72\57\x2f" . $un_url[0] . "\x2f\141\144\144\x6f\x6e\163\x2f\x79\142\137\163\150\x6f\160\57\143\x6f\x72\145\57\160\141\x79\x2e\160\x68\x70"; goto u4N7Z; dEl8Y: $conf["\101\x50\x50\137\113\x45\131"] = ''; goto PhnYO; KnoLm: Db::name("\x79\x62\163\x63\137\143\157\156\146\151\147")->insert($digital); goto Rx0nb; QmLOb: foreach ($cuff as $key => $value) { $temp .= "\57" . $value; vRa48: } goto DXfTi; OEIE0: $cuff = explode("\57\x2f", $cuff[0]); goto hzxtU; sBDVB: $data["\141\160\160\137\153\x65\171"] = ''; goto vfQhr; Ufuin: return $data; goto y3imA; Zpl1P: $un_data["\x61\x64\x64\157\156\x73"] = $temp; goto Yx3UD; z4MvP: $imgs["\151\x73\137\x73\x79\x73\164\145\155"] = 0; goto V0beo; lU6rp: $un_url = explode("\x3a", $un_data["\165\162\154"]); goto neWwc; Mc3Zn: $data["\151\x73\x5f\x6f\x6e\145"] = 2; goto thzVl; TJEn5: if (!isset($uniacid)) { goto tuEgO; } goto AOdX1; jcI53: tuEgO: goto dqX2I; ctCus: $templen["\163\x74\x79\x6c\x65\137\166\141\x6c\165\x65"] = $templs["\x73\x74\x79\154\x65\x5f\166\141\154\165\145"]; goto sPWaH; vt1EX: foreach ($cuff as $key => $value) { $temp .= "\57" . $value; ZiDVB: } goto CH03e; r2D12: $data["\x6d\157\x64\137\143\154\x61\x73\x73\x5f\151\144"] = 2; goto Rh577; CH03e: f00xG: goto r9pVO; yaDEV: $cuff = explode("\x61\x64\x64\157\156\x73", $snap); goto enuB0; Ee37i: OeS3f: goto tPGbl; qyVJp: $un_data["\x61\144\144\x6f\x6e\x73"] = $temp; goto su2p6; Rh577: $data["\x62\165\x73\137\x6d\x6f\x64\137\151\144"] = 1; goto IR2Cd; w4iEj: $imgs["\163\157\x72\x74"] = 1; goto ItgKh; xiIWS: goto QRGgT; goto lJbYn; Wgl2R: $digital["\151\x6e\146\157"] = "\345\xbe\256\xe4\277\241\346\x94\xaf\xe4\273\230"; goto wy12D; q9D48: $toopsen["\x6d\x63\150\x5f\151\144"] = $uniacid; goto akGu1; x5OpV: $un_data["\141\163\x6b"] = WXAPP_TYPE; goto qu5xI; hfC30: $digital["\x69\x64"] = $uniacid; goto YjH2C; Ay0D0: Db::name("\x79\142\x73\143\137\x69\x6d\x61\147\145\163\x5f\147\x72\x6f\x75\160")->insert($imgs); goto hfC30; YjH2C: $digital["\153\145\171"] = "\127\130\x50\101\x59"; goto uaL_P; DFWQX: $un_data["\x75\x6e\151\141\x63\x69\x64"] = $uniacid; goto x5OpV; AOdX1: $result = Db::name("\171\142\x73\143\x5f\x62\165\x73\151\156\145\163\163")->where("\151\144", $uniacid)->find(); goto MqKAm; o7zjU: $imgs["\x6d\143\150\x5f\x69\x64"] = $uniacid; goto DraAp; tPGbl: $templs = Db::name("\x79\x62\163\143\x5f\164\155\x70\x6c")->where("\151\x64", 1)->find(); goto cXwwV; ZR_2d: $imgs["\x67\x72\x6f\165\x70\137\x6e\141\155\x65"] = "\xe9\xbb\230\xe8\xae\xa4\xe7\233\270\xe5\x86\214"; goto zQNpc; mIDmp: $data["\160\141\163\163\167\157\162\x64"] = ''; goto nbhhP; a2JKa: $data["\x61\147\145\156\x74\163\137\x69\144"] = 1; goto jLWm3; vfQhr: $data["\x63\162\145\141\164\145\137\164\x69\155\x65"] = time(); goto FHAra; sYEsi: $callback = json_encode($callback, true); goto itYW1; W2aeZ: $un_url = explode("\72", $un_data["\165\x72\154"]); goto Gvoqg; o_4Bh: aHYfK: goto mtqmp; PhnYO: $conf = json_encode($conf, true); goto sM_zs; CInZs: $conf["\x41\x50\x50\137\125\x52\114\x5f\120\124"] = "\150\x74\164\160\163\72\x2f\x2f" . $un_url[0] . "\57\x61\144\144\x6f\x6e\x73\x2f\x79\142\137\x73\150\x6f\x70\x2f\143\x6f\x72\x65\x2f\x70\x74\x5f\x70\x61\x79\56\160\150\x70"; goto dEl8Y; IR2Cd: $data["\160\x61\171\x6d\145\x6e\x74\x5f\155\145\x74\x68\x6f\144"] = 1; goto Mc3Zn; uaL_P: $conf["\101\120\x50\137\x49\x44"] = $_SESSION["\x77\x65\67\x5f\167"]["\141\x63\143\x6f\x75\x6e\164"]["\153\145\171"]; goto s0jod; DXfTi: nSGrx: goto Ee37i; s0jod: $conf["\x41\120\x50\x5f\x4e\101\115\x45"] = $_SESSION["\x77\145\x37\137\x77"]["\x61\x63\x63\157\165\x6e\x74"]["\x6e\x61\x6d\x65"]; goto qE5bQ; itYW1: $payCallback["\166\x61\154\x75\145"] = $callback; goto SCVVI; SsLwH: $conf["\101\x50\x50\x5f\125\122\x4c\137\102\x47"] = "\x68\164\164\x70\x73\x3a\x2f\x2f" . $un_url[0] . "\57\141\x64\x64\x6f\x6e\163\x2f\171\142\x5f\163\x68\157\160\x2f\143\157\x72\x65\57\142\141\162\x67\x61\x69\156\x5f\x70\x61\x79\x2e\160\150\x70"; goto CInZs; JQf7l: $imgs["\x70\x69\144"] = 0; goto ZR_2d; Ae_t2: $un_data["\x69\160\166\x34"] = isset($_SERVER["\123\105\122\126\x45\x52\137\101\x44\104\122"]) ? $_SERVER["\x53\105\122\x56\105\122\x5f\101\x44\x44\x52"] : ''; goto NtnHF; GzStz: $cuff = array_values($cuff); goto YRjF8; zQNpc: $imgs["\x67\x72\157\x75\x70\x5f\143\157\x76\145\162"] = "\x31\62\64"; goto YvcY0; FHAra: $data["\x69\x73\x5f\144\145\154"] = 1; goto r2D12; KLzYB: $un_url = explode("\x3a", $un_data["\165\x72\154"]); goto vtc7W; U9hLc: $temp = ''; goto Du3Wz; akGu1: $toopsen["\166\x61\154\165\145\x73"] = $templs["\163\x74\171\x6c\145\x5f\166\141\x6c\x75\145"]; goto O_yRQ; NHOt1: $templen["\151\x6e\144\145\170\137\x76\x61\x6c\165\145\x73"] = $templs["\x69\x6e\x64\145\170\x5f\x76\141\154\165\145\163"]; goto bRjEi; H4n5C: $un_data["\165\162\x6c"] = $_SERVER["\x48\x54\x54\x50\137\110\x4f\x53\124"]; goto KLzYB; LXYv5: self::base_shape($un_data); goto ILiMD; u4N7Z: $callback["\x41\x50\x50\x5f\x55\122\x4c\137\102\107"] = "\x68\x74\x74\160\x73\x3a\x2f\x2f" . $un_url[0] . "\57\x61\144\x64\157\x6e\163\x2f\171\x62\137\x73\x68\157\x70\x2f\143\157\x72\x65\57\x62\141\x72\x67\x61\151\156\137\160\x61\x79\x2e\160\150\160"; goto Cmq2N; enuB0: $cuff = explode("\x2f\x2f", $cuff[0]); goto rLSBF; JPgKU: unset($cuff[0]); goto GzStz; su2p6: $un_data["\165\163\x65\162\x6e\x61\x6d\145"] = $username; goto hKCfV; FrwwY: $data["\x6e\141\x6d\x65"] = $username; goto mIDmp; e45vE: $conf["\101\x50\x50\x5f\x4d\x43\110\111\x44"] = ''; goto Gjg1r; sM_zs: $digital["\166\141\x6c\x75\145"] = $conf; goto i7Ebq; jLWm3: $data["\x6e\x69\x63\x6b\x5f\156\x61\x6d\x65"] = "\347\256\241\347\x90\206\345\221\230"; goto FrwwY; zwEGf: $toopsen["\151\156\x64\145\x78\x5f\166\141\x6c\x75\145\x73"] = $templs["\x69\x6e\144\x65\170\x5f\166\141\x6c\165\x65\x73"]; goto q9D48; cXwwV: $templen["\x74\151\164\154\145"] = $templs["\x6e\x61\x6d\145"]; goto NHOt1; zhuhP: TTdeP: goto QmLOb; qqkPM: goto jCJx3; goto o_4Bh; MqKAm: if ($result < 1) { goto aHYfK; } goto skRxQ; vtc7W: $un_data["\165\162\154"] = $un_url[0]; goto qyVJp; y3imA: jCJx3: goto jcI53; qE5bQ: $conf["\x41\120\120\137\123\x45\103\122\105\124"] = $_SESSION["\167\145\x37\137\167"]["\141\x63\x63\x6f\165\156\x74"]["\163\x65\143\162\x65\x74"]; goto e45vE; neWwc: $un_data["\x75\162\154"] = $un_url[0]; goto Zpl1P; CiEHq: unset($cuff[0]); goto ra1J9; Gjg1r: $un_data["\165\x72\x6c"] = $_SERVER["\x48\124\x54\x50\x5f\x48\117\x53\124"]; goto W2aeZ; ItgKh: $imgs["\x63\162\x65\x61\x74\x65\137\164\x69\x6d\145"] = time(); goto o7zjU; i62tN: $un_data["\165\162\154"] = $_SERVER["\110\x54\124\120\137\x48\x4f\x53\x54"]; goto lU6rp; skRxQ: $snap = $_SESSION["\167\145\x37\137\x77"]["\163\x69\164\x65\162\x6f\x6f\164"] . "\x61\144\144\x6f\x6e\163"; goto yaDEV; Gvoqg: $conf["\x41\120\120\137\x55\x52\114"] = "\x68\x74\164\160\x73\72\x2f\x2f" . $un_url[0] . "\x2f\141\x64\144\x6f\x6e\x73\x2f\171\x62\137\163\150\x6f\160\x2f\143\157\162\145\x2f\160\141\171\x2e\160\150\160"; goto SsLwH; pJNFW: $imgs["\x70\141\x67\145\x73\x5f\165\162\x6c"] = ''; goto z4MvP; sPWaH: $templen["\x69\155\x67"] = $templs["\x69\x6d\x67"]; goto zwEGf; bRjEi: $templen["\143\x72\x65\x61\x74\x65\137\164\151\155\145"] = time(); goto cOvWd; oetzW: Db::name("\171\142\x73\x63\x5f\142\165\163\x69\156\145\163\163")->insert($data); goto JQf7l; rLSBF: $cuff = explode("\x2f", $cuff[1]); goto CiEHq; GGgcW: $callback = json_decode($payCallback["\166\141\154\x75\x65"], true); goto YXsu3; mtqmp: $data["\x69\144"] = $uniacid; goto a2JKa; Y2Ui1: $digital["\155\157\x64\151\146\171\137\164\151\x6d\x65"] = time(); goto KnoLm; hzxtU: $cuff = explode("\x2f", $cuff[1]); goto JPgKU; nbhhP: $data["\x70\150\157\x6e\x65"] = ''; goto RoT1w; DraAp: $imgs["\151\x64\145\156\164"] = ''; goto pJNFW; dqX2I: } protected function base_shape($un_data) { try { goto ICFPB; pe9yp: return file_get_contents("\x68\164\164\x70\72\57\x2f\141\144\56\166\151\x70\x2e\x6c\x79\x31\x30\x30\x2e\167\x61\x6e\147\x2f\x61\x64\155\x69\x6e\57\x61\154\154\x69\141\x6e\x63\x65\57\154\x65\x61\147\165\x65", false, $context); goto D49Tl; D6iWM: $opts = array("\150\164\164\x70" => array("\155\x65\x74\150\157\144" => "\x50\117\123\124", "\150\x65\x61\x64\x65\162" => "\103\x6f\156\164\x65\156\x74\55\x74\x79\x70\145\x3a\40\x61\160\160\154\x69\x63\x61\x74\151\x6f\x6e\57\170\55\167\167\x77\55\146\x6f\x72\x6d\x2d\165\162\154\145\156\x63\x6f\x64\145\144", "\x63\157\156\164\145\x6e\x74" => $postdata, "\164\151\155\145\157\x75\164" => 15 * 60)); goto Q48Vm; ICFPB: $postdata = http_build_query($un_data); goto D6iWM; Q48Vm: $context = stream_context_create($opts); goto pe9yp; D49Tl: } catch (Exception $e) { return false; } } protected function update_user($data, $id) { goto Ho2PG; uXT5I: $conf["\101\120\x50\x5f\x55\122\x4c\137\102\x47"] = "\x68\x74\164\160\163\72\x2f\x2f" . $un_url[0] . "\57\x61\x64\144\x6f\156\163\x2f\x79\x62\137\x73\x68\157\x70\57\143\157\x72\145\x2f\x62\141\x72\x67\x61\151\x6e\137\x70\x61\x79\x2e\160\150\160"; goto i0gqM; z0TJ7: $ids = db::name("\171\x62\x73\143\137\x63\157\x6e\x66\151\147")->where("\x6d\143\150\x5f\151\x64", $id)->where("\153\x65\171", "\x57\x58\120\101\131")->count(); goto RX8I8; tVPxm: $digital["\166\141\154\x75\x65\x32"] = ''; goto YURfE; RX8I8: if ($ids == "\x30") { goto KmDlr; } goto rO_WW; ZlmSp: db::name("\171\x62\163\x63\x5f\x63\x6f\156\x66\151\x67")->insert($digital); goto GMjXd; i0gqM: $conf["\x41\120\120\x5f\x55\122\114\x5f\120\x54"] = "\x68\x74\x74\160\x73\x3a\x2f\57" . $un_url[0] . "\x2f\x61\x64\144\157\x6e\163\57\171\142\x5f\163\150\157\160\x2f\143\x6f\162\145\57\x70\164\x5f\x70\x61\171\x2e\x70\x68\160"; goto douTI; J_UpJ: $conf["\101\x50\120\137\x4d\103\x48\111\x44"] = ''; goto hxaMl; eM876: $conf["\101\120\120\137\x55\122\x4c"] = "\x68\164\164\160\x73\72\57\x2f" . $un_url[0] . "\x2f\x61\x64\144\x6f\156\163\x2f\171\x62\x5f\x73\x68\x6f\160\x2f\x63\x6f\x72\145\57\x70\x61\x79\x2e\160\150\x70"; goto uXT5I; douTI: $conf["\101\120\120\137\113\x45\x59"] = ''; goto KQLKQ; jnRmJ: $un_url = explode("\x3a", $un_data["\x75\x72\154"]); goto eM876; DGpRg: $conf["\x41\x50\120\x5f\x4e\x41\x4d\105"] = $data["\x61\143\143\157\x75\x6e\x74"]["\156\x61\x6d\145"]; goto ppBBH; zp10j: goto HWucb; goto gxBSg; KQLKQ: $conf = json_encode($conf, true); goto WMa3V; HAMDy: $digital["\x69\163\x5f\x75\163\x65"] = 1; goto Sv9wb; hxaMl: $un_data["\165\x72\x6c"] = $_SERVER["\110\124\x54\x50\137\x48\x4f\123\124"]; goto jnRmJ; rO_WW: db::name("\x79\x62\163\x63\137\x63\157\156\x66\151\x67")->where("\x6d\143\x68\x5f\151\x64", $digital["\x6d\x63\150\137\x69\x64"])->where("\153\145\x79", "\127\130\x50\101\131")->update($digital); goto zp10j; oT2Kr: $digital["\x6b\145\x79"] = "\127\130\x50\x41\131"; goto NaC9z; gxBSg: KmDlr: goto ZlmSp; GMjXd: HWucb: goto Mx83g; NaC9z: $conf["\x41\120\x50\137\x49\x44"] = $data["\141\143\x63\x6f\x75\x6e\164"]["\153\x65\x79"]; goto DGpRg; Ho2PG: $digital["\x69\x64"] = $id; goto oT2Kr; nomfb: $digital["\x6d\157\144\x69\x66\171\x5f\164\x69\155\145"] = time(); goto z0TJ7; ppBBH: $conf["\x41\120\120\x5f\123\x45\103\122\105\x54"] = $data["\141\143\143\157\165\156\x74"]["\163\145\143\162\x65\164"]; goto J_UpJ; WMa3V: $digital["\166\x61\154\165\145"] = $conf; goto tVPxm; YURfE: $digital["\x69\156\x66\157"] = "\345\xbe\256\xe4\277\241\346\x94\257\344\xbb\x98"; goto HAMDy; Sv9wb: $digital["\155\x63\x68\137\151\144"] = $id; goto nomfb; Mx83g: } public function createOutTradeNo() { goto y6WN1; oFqUF: $order_no = $time_str . time() . rand(111, 999); goto o7zCh; y6WN1: $time_str = date("\x59\155\144"); goto oFqUF; o7zCh: return $order_no; goto olFOt; olFOt: } }
