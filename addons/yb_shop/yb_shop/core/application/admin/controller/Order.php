<?php
 namespace app\admin\controller; use app\admin\service\Area; use think\Db; use think\Request; use app\admin\service\OrderService; use think\log; header("\143\x6f\156\x74\145\156\x74\55\164\171\160\145\x3a\x74\x65\170\x74\57\x68\164\x6d\x6c\x3b\x63\x68\141\x72\x73\145\164\75\165\x74\x66\55\x38\73"); require EXTEND_PATH . "\127\x78\x70\141\x79\57\127\170\120\141\x79\56\101\x70\x69\56\160\x68\160"; class Order extends Base { public function OrderList() { goto TOPrl; HFepS: $order = new OrderService(); goto J2eTj; xmcq5: $list = $order->getOrderList($condition, $search_text, "\x63\162\145\x61\164\x65\x5f\x74\x69\155\x65\x20\144\x65\163\143"); goto bAUVi; Q6qTM: $star_time = input("\x70\x61\x72\x61\x6d\x2e\163\x74\141\162\x5f\x74\151\x6d\x65"); goto iKM1y; j4I9b: if ($refund_setting["\163\167\151\164\x63\x68"] != 1 || empty($refund_setting["\153\x65\x79"]) || empty($refund_setting["\x63\145\162\164"])) { goto bI_zq; } goto L_Kih; TWQv5: $page = $list->render(); goto tG4qp; Ds48x: fkcNx: goto G8Aag; Kl7Y2: if (empty($star_time)) { goto fkcNx; } goto Q9Yk7; xaqO5: $this->assign("\x72\x65\x66\x75\156\x64\137\x74\x79\x70\145", 0); goto FLuYY; tG4qp: $this->assign("\154\151\x73\x74", $list); goto tZ05P; Va0U4: $condition["\x63\162\x65\141\x74\145\x5f\164\x69\x6d\x65"] = ["\142\145\x74\x77\x65\x65\x6e", [$star, $end]]; goto dseBo; h9qn8: $child_menu_list = array(); goto T859V; LwyOA: $star = strtotime($star_time); goto Ikp3K; p89FH: $condition["\x61\143\x74\151\166\x69\x74\171\x5f\x6f\162\144\x65\162\137\164\171\160\145"] = array("\145\x71", 0); goto Q6qTM; hpfhD: if ($status != '') { goto M0090; } goto U4qqc; U4qqc: $condition["\157\x72\x64\x65\x72\137\x73\164\141\x74\165\x73"] = array("\151\x6e", "\x30\x2c\61\54\x32\54\63\54\64\x2c\x35\x2c\x2d\61"); goto ADunJ; w38rv: oD2O_: goto ci_XI; lsZc4: $ttime = time(); goto gbtTO; XkIat: $this->assign("\x73\x74\141\162\137\164\x69\x6d\x65", $star_time); goto CSNMt; iKM1y: $end_time = input("\x70\x61\x72\x61\x6d\x2e\145\x6e\144\x5f\x74\x69\x6d\145"); goto Kl7Y2; ZFPxj: $all_status = OrderService::getOrderStatus(); goto h9qn8; YZ2tN: $this->assign("\157\x72\144\x65\162\137\x6e\157", $search_text); goto XkIat; DzE0h: global $_W; goto cDy9B; Q9Yk7: $star = strtotime($star_time); goto Dyz3N; G8Aag: if (!(!empty($star_time) && !empty($end_time))) { goto xgWON; } goto LwyOA; M5LpY: $condition["\157\162\144\x65\162\x5f\x6e\x6f"] = array("\154\151\x6b\x65", "\45" . $search_text . "\x25"); goto TDmyq; FLuYY: TZjxE: goto iS0jl; CbdTe: M0090: goto ay2MP; mHlJd: return view("\x6f\x72\144\x65\x72\x2f\x6f\x72\x64\145\162\x5f\154\x69\x73\164"); goto KB_Mu; emKTB: $condition["\x6d\x61\151\x6c\x69\x6e\x67\x5f\x74\x79\160\x65"] = array("\74\x3e", 2); goto xmcq5; iS0jl: $this->assign("\143\x68\x69\154\x64\x5f\x6d\145\156\x75\x5f\154\x69\163\x74", $child_menu_list); goto TWQv5; ay2MP: $condition["\157\x72\x64\145\x72\137\x73\x74\x61\164\165\163"] = array("\75", $status); goto zRa2y; dseBo: xgWON: goto hpfhD; Y2JQ5: $refund_setting = $setting["\160\141\x79\155\x65\x6e\164"]["\x77\145\143\x68\141\164\137\x72\145\146\x75\156\144"]; goto j4I9b; l4qiw: bI_zq: goto xaqO5; J2eTj: $search_text = Request::instance()->post("\157\x72\144\x65\x72\x5f\156\157"); goto lsZc4; Dyz3N: $condition["\x63\x72\145\141\x74\x65\x5f\164\x69\x6d\145"] = ["\142\x65\x74\x77\x65\x65\156", [$star, $star + 86400]]; goto Ds48x; DYeVh: goto TZjxE; goto l4qiw; ADunJ: goto oi4zC; goto CbdTe; cDy9B: $setting = uni_setting_load("\160\x61\171\x6d\145\156\x74", $_W["\x75\x6e\x69\141\x63\151\144"]); goto Y2JQ5; ci_XI: $status = request()->param("\x73\x74\141\x74\165\163", ''); goto M5LpY; sfsQg: $condition["\151\x73\x5f\x64\145\154\x65\164\145\x64"] = array("\74\76", "\61"); goto emKTB; gbtTO: $outtimes = Db::name("\171\x62\x73\x63\x5f\157\x72\144\x65\x72")->where("\162\145\146\165\x6e\x64\137\x74\x69\155\145", 0)->where("\x6f\162\144\x65\x72\x5f\163\164\141\x74\x75\x73", 2)->where("\x66\151\x6e\x69\x73\x68\x5f\x74\x69\x6d\145", 0)->where("\143\157\156\x73\151\147\156\x5f\164\x69\x6d\145\x20\76\40\60\x20\101\x4e\104\40\x63\157\x6e\x73\151\x67\156\x5f\x74\151\x6d\145\x20\74\40" . ($ttime - 7 * 24 * 60 * 60))->select(); goto yCCWM; T859V: $child_menu_list[] = array("\165\x72\x6c" => "\x61\x64\155\x69\x6e\57\x4f\x72\x64\145\x72\57\157\162\x64\x65\x72\x4c\151\163\164", "\x6d\x65\156\165\137\156\x61\x6d\x65" => "\345\x85\xa8\351\203\250", "\141\143\164\151\x76\x65" => $status == '' ? 1 : 0); goto WeY3n; Ikp3K: $end = strtotime($end_time); goto Va0U4; L_Kih: $this->assign("\x72\x65\x66\165\156\144\137\x74\x79\x70\145", 1); goto DYeVh; qnTGP: caD4e: goto DzE0h; TDmyq: $condition["\x6d\143\150\x5f\151\144"] = array("\145\x71", $mch_id); goto p89FH; tZ05P: $this->assign("\160\x61\147\x65", $page); goto YZ2tN; yCCWM: foreach ($outtimes as $out) { goto DYIE2; nL6xZ: if (!$op) { goto qGZOV; } goto lF06D; d2OmA: $share_data["\165\x73\x65\162\137\x69\x64"] = $us["\160\x61\x72\145\156\x74\x5f\151\144\x5f\x33"]; goto rlZ2e; yw_Oh: if (!($us["\x70\x61\162\145\156\x74\137\x69\144\x5f\63"] && $us["\x70\x61\x72\x65\156\x74\137\x69\144\137\63"] != 0)) { goto kVdWj; } goto d2OmA; U1M3X: if (!$us) { goto v22ky; } goto d6tQd; myznz: Db::name("\x79\x62\x73\143\137\165\x73\x65\x72")->where("\x75\151\144", $us["\x70\x61\162\145\156\x74\x5f\151\144\137\61"])->setInc("\x70\x72\x69\x63\x65", $us["\146\x69\x72\163\x74\137\160\162\151\143\145"]); goto lREEl; ndLfh: v22ky: goto WI3Na; egPne: Db::name("\171\x62\163\x63\x5f\x75\163\145\x72\137\x73\x68\141\162\x65\137\155\157\156\145\171")->insert($share_data); goto alGsj; W6Q8h: if (!($us["\160\141\162\145\156\x74\137\151\x64\x5f\61"] && $us["\160\x61\x72\145\x6e\164\x5f\151\x64\137\61"] != 0)) { goto ixDNl; } goto u0Ih4; q0aEy: $us = Db::name("\171\142\163\x63\137\157\x72\x64\145\x72\x5f\163\150\141\x72\x65")->where(["\x75\x73\145\x72\137\151\x64" => $order_info["\142\165\171\145\x72\137\151\x64"], "\157\x72\144\145\x72\137\151\x64" => $order_id])->find(); goto U1M3X; u0Ih4: $share_data["\165\163\145\162\x5f\x69\x64"] = $us["\160\141\162\145\156\x74\137\151\x64\137\x31"]; goto jlblb; d6tQd: $share_data = ["\155\x63\150\x5f\x69\144" => $this->bus_id, "\x6f\x72\144\145\162\x5f\x69\x64" => $order_id, "\143\x72\145\x61\164\x65\x5f\164\151\x6d\145" => time(), "\x69\x73\137\144\x65\x6c" => 1]; goto W6Q8h; rlZ2e: $share_data["\x6d\157\x6e\145\x79"] = $us["\x74\x68\151\162\144\137\x70\x72\151\x63\145"]; goto ZTn8h; Icxqo: $op = Db::name("\x79\x62\163\143\x5f\x6f\162\144\x65\x72")->where(["\x6f\x72\x64\x65\x72\x5f\151\144" => $order_id, "\157\162\x64\x65\x72\x5f\x73\164\141\x74\165\x73" => 2])->update(["\146\x69\156\151\x73\150\137\x74\151\x6d\145" => $ttime, "\x6f\x72\144\x65\x72\137\x73\x74\x61\164\x75\163" => 3]); goto nL6xZ; h72uU: $share_data["\163\x6f\x75\162\143\145"] = 1; goto hAQFx; lF06D: $order_info = Db::name("\171\x62\x73\143\x5f\x6f\162\x64\x65\x72")->where(["\x6f\162\144\145\162\137\x69\x64" => $order_id])->find(); goto q0aEy; qvqmI: Svfha: goto n5Y6v; DYIE2: $order_id = $out["\x6f\162\144\145\162\x5f\151\x64"]; goto Icxqo; FAGUs: Db::name("\x79\142\x73\x63\x5f\165\163\x65\x72")->where("\x75\x69\x64", $us["\x70\141\x72\x65\156\x74\x5f\x69\144\137\63"])->setInc("\164\x6f\x74\141\x6c\x5f\160\x72\151\143\x65", $us["\x74\x68\x69\x72\144\x5f\160\162\x69\x63\145"]); goto XvLQI; c8y4q: $share_data["\x6d\157\x6e\x65\x79"] = $us["\x73\145\143\157\x6e\144\x5f\x70\x72\151\143\145"]; goto OfXht; uMq1F: v4ZGQ: goto yw_Oh; alGsj: Db::name("\x79\x62\163\x63\x5f\x75\163\145\162")->where("\x75\x69\x64", $us["\x70\x61\162\x65\x6e\x74\x5f\x69\144\137\62"])->setInc("\x74\157\x74\141\154\137\x70\x72\151\x63\x65", $us["\x73\145\x63\x6f\156\x64\x5f\x70\x72\x69\143\x65"]); goto M7WX2; WI3Na: qGZOV: goto qvqmI; OfXht: $share_data["\x73\157\165\162\143\145"] = 2; goto egPne; jlblb: $share_data["\x6d\x6f\156\145\x79"] = $us["\146\151\162\163\x74\x5f\x70\162\151\143\x65"]; goto h72uU; ZTn8h: $share_data["\163\x6f\x75\x72\x63\x65"] = 3; goto Mf1Pm; Mf1Pm: Db::name("\x79\142\163\143\x5f\x75\163\x65\x72\x5f\x73\x68\x61\x72\x65\x5f\x6d\x6f\x6e\145\x79")->insert($share_data); goto FAGUs; Sg6Fm: $share_data["\x75\x73\145\162\x5f\x69\x64"] = $us["\x70\141\x72\x65\x6e\x74\137\151\x64\137\x32"]; goto c8y4q; XvLQI: Db::name("\x79\142\163\x63\137\x75\163\x65\162")->where("\x75\x69\x64", $us["\x70\x61\x72\x65\156\x74\137\x69\x64\137\63"])->setInc("\x70\162\151\143\145", $us["\x74\x68\151\x72\144\137\160\162\151\143\x65"]); goto AvbZx; AvbZx: kVdWj: goto ndLfh; M7WX2: Db::name("\171\142\163\x63\x5f\x75\163\x65\162")->where("\x75\x69\144", $us["\160\141\162\145\156\x74\137\151\144\x5f\62"])->setInc("\160\x72\151\143\x65", $us["\x73\145\x63\x6f\156\144\137\x70\x72\151\x63\x65"]); goto uMq1F; A1VQn: Db::name("\x79\x62\163\x63\x5f\165\x73\x65\x72")->where("\x75\x69\144", $us["\160\x61\162\145\x6e\x74\137\x69\144\137\x31"])->setInc("\164\157\164\x61\x6c\137\160\x72\151\x63\145", $us["\146\x69\162\163\164\x5f\x70\x72\x69\143\x65"]); goto myznz; lREEl: ixDNl: goto NPzvB; hAQFx: Db::name("\x79\142\163\143\x5f\x75\163\x65\x72\x5f\163\x68\141\x72\x65\x5f\x6d\x6f\156\x65\171")->insert($share_data); goto A1VQn; NPzvB: if (!($us["\160\141\162\145\x6e\164\x5f\x69\x64\137\x32"] && $us["\x70\141\x72\x65\156\x74\137\151\x64\x5f\x32"] != 0)) { goto v4ZGQ; } goto Sg6Fm; n5Y6v: } goto w38rv; CSNMt: $this->assign("\145\x6e\144\x5f\164\151\155\145", $end_time); goto mHlJd; TOPrl: $mch_id = isset($this->bus_id) ? $this->bus_id : "\x30"; goto HFepS; WeY3n: foreach ($all_status as $k => $v) { $child_menu_list[] = array("\x75\x72\x6c" => "\x61\x64\155\151\x6e\57\x6f\x72\x64\x65\162\57\x6f\x72\x64\145\162\114\x69\x73\164\46\163\164\x61\x74\165\163\x3d" . $v["\163\x74\141\x74\165\x73\137\x69\144"], "\155\x65\x6e\x75\x5f\x6e\141\155\x65" => $v["\x73\x74\x61\x74\x75\163\x5f\156\141\x6d\x65"], "\x61\143\164\x69\x76\145" => $status == $v["\163\164\141\x74\165\x73\x5f\x69\x64"] ? 1 : 0); N3e9r: } goto qnTGP; bAUVi: $this->assign("\157\x72\144\145\162\137\163\164\141\x74\165\x73", $status); goto ZFPxj; zRa2y: oi4zC: goto sfsQg; KB_Mu: } public function OrderList2() { goto URkgQ; dkdTw: $this->assign("\145\156\x64\137\164\x69\x6d\145", $end_time); goto Lsf88; RyfDg: $child_menu_list = array(); goto l7j9e; h6j94: if ($status != '') { goto BH5Uc; } goto sA6Bn; sA6Bn: $condition["\157\162\x64\145\x72\137\x73\x74\x61\x74\165\163"] = array("\151\156", "\x30\54\61\x2c\62\x2c\63\54\x34\54\x35\54\x2d\61"); goto Hk8Xt; Lsf88: return view("\157\162\x64\145\162\x2f\157\162\x64\x65\x72\137\154\x69\163\164\x32"); goto ZvKv1; vJCSq: $search_text = str_replace("\40", '', $search_text); goto vUXFe; cW4Kn: $this->assign("\157\x72\x64\x65\162\x5f\163\x74\x61\x74\165\x73", $status); goto aL2sQ; c70kv: $condition["\151\x73\137\x64\x65\154\145\164\x65\144"] = array("\74\x3e", "\61"); goto CdML7; Zcpyy: global $_W; goto VY2o6; vquML: $page = $list->render(); goto b1OHB; waydw: $condition["\157\x72\x64\x65\162\x5f\x6e\x6f"] = array("\154\x69\x6b\145", "\x25" . $search_text . "\45"); goto gYgl9; paFDQ: YBfvG: goto TMX1K; ddNGX: qarGc: goto NNrR1; vUXFe: $status = request()->param("\x73\164\141\x74\x75\x73", ''); goto waydw; EmorW: CxFBq: goto xfWCh; l7j9e: $child_menu_list[] = array("\165\162\x6c" => "\x61\144\155\x69\156\57\x4f\x72\144\x65\x72\x2f\157\162\x64\145\x72\114\151\163\164\x32", "\x6d\145\x6e\165\x5f\x6e\141\155\x65" => "\xe5\205\250\351\203\250", "\141\143\x74\151\x76\x65" => $status == '' ? 1 : 0); goto Nhhqw; YY3PI: $this->assign("\x6f\x72\x64\145\162\x5f\156\x6f", $search_text); goto jY2yE; kdkNG: $end = strtotime($end_time); goto Uqsfq; gYgl9: $condition["\155\x63\x68\137\151\x64"] = array("\x65\161", $mch_id); goto gqVVK; URkgQ: $mch_id = isset($this->bus_id) ? $this->bus_id : "\60"; goto RCkUT; bgD_U: RUjjc: goto h6j94; hP2AO: if ($refund_setting["\163\x77\151\164\143\x68"] != 1 || empty($refund_setting["\153\145\x79"]) || empty($refund_setting["\143\145\x72\164"])) { goto qarGc; } goto BTo1t; TMX1K: $this->assign("\163\164\141\x74\x75\163\137\x61\x72\162", $status_arr); goto okNTq; PKB7J: $end_time = input("\160\141\x72\141\x6d\x2e\145\156\x64\x5f\x74\151\155\x65"); goto vGWb2; u864e: BH5Uc: goto DE4qi; LP2iN: OgfZP: goto Zcpyy; WmKwa: $star_time = input("\x70\141\x72\x61\155\x2e\x73\164\x61\162\137\164\151\x6d\145"); goto PKB7J; vGWb2: if (empty($star_time)) { goto CxFBq; } goto DAhyF; BTo1t: $this->assign("\162\145\146\165\156\144\x5f\164\x79\160\145", 1); goto FWKNl; RCkUT: $order = new OrderService(); goto LcXiJ; Nhhqw: $status_arr = array(); goto rU74M; NNrR1: $this->assign("\x72\145\146\165\156\144\x5f\164\171\160\145", 0); goto paFDQ; eRPMa: bS_A3: goto c70kv; Hk8Xt: goto bS_A3; goto u864e; DAhyF: $star = strtotime($star_time); goto GzaXH; GzaXH: $condition["\143\x72\145\141\x74\145\x5f\164\151\155\145"] = ["\142\x65\164\x77\145\x65\x6e", [$star, $star + 86400]]; goto EmorW; aL2sQ: $all_status = OrderService::getOrderStatus2(); goto RyfDg; CdML7: $condition["\155\x61\x69\154\x69\x6e\x67\x5f\x74\171\160\x65"] = 2; goto zS8xb; jY2yE: $this->assign("\x73\164\141\x72\x5f\x74\151\x6d\145", $star_time); goto dkdTw; okNTq: $this->assign("\143\150\151\154\144\x5f\x6d\x65\x6e\165\x5f\x6c\151\x73\x74", $child_menu_list); goto vquML; VY2o6: $setting = uni_setting_load("\160\141\171\x6d\x65\156\164", $_W["\x75\x6e\x69\x61\143\x69\144"]); goto K8_gf; f5X3l: $star = strtotime($star_time); goto kdkNG; DE4qi: $condition["\x6f\162\x64\145\x72\x5f\x73\164\x61\164\165\x73"] = array("\x3d", $status); goto eRPMa; K8_gf: $refund_setting = $setting["\160\141\171\x6d\145\156\x74"]["\167\145\143\150\x61\x74\137\x72\145\x66\x75\x6e\x64"]; goto hP2AO; rU74M: foreach ($all_status as $k => $v) { goto VapED; uEwuQ: $child_menu_list[] = array("\x75\162\x6c" => "\141\x64\155\151\156\57\157\162\144\145\x72\57\157\x72\144\x65\162\114\x69\x73\x74\x32\x26\163\x74\141\x74\x75\163\75" . $v["\x73\164\x61\x74\x75\163\137\151\x64"], "\155\x65\156\x75\137\x6e\141\x6d\x65" => $v["\163\x74\x61\x74\x75\x73\137\x6e\x61\x6d\x65"], "\x61\143\164\x69\166\x65" => $status == $v["\x73\164\141\164\x75\163\x5f\151\144"] ? 1 : 0); goto slvvO; VapED: $status_arr[$v["\163\x74\141\164\x75\163\137\x69\144"]] = $v["\x73\x74\141\164\x75\163\137\156\x61\155\x65"]; goto uEwuQ; slvvO: uRxdB: goto dwReC; dwReC: } goto LP2iN; gqVVK: $condition["\141\143\x74\151\166\151\x74\x79\x5f\157\x72\144\x65\x72\137\x74\x79\x70\145"] = array("\x65\161", 0); goto WmKwa; b1OHB: $this->assign("\x6c\x69\x73\164", $list); goto GvtBi; FWKNl: goto YBfvG; goto ddNGX; Uqsfq: $condition["\x63\162\145\141\164\145\137\x74\151\155\x65"] = ["\142\x65\164\x77\145\x65\x6e", [$star, $end]]; goto bgD_U; xfWCh: if (!(!empty($star_time) && !empty($end_time))) { goto RUjjc; } goto f5X3l; zS8xb: $list = $order->getOrderList($condition, $search_text, "\x63\x72\145\x61\x74\145\x5f\x74\x69\x6d\x65\x20\x64\145\163\143"); goto cW4Kn; GvtBi: $this->assign("\160\x61\147\145", $page); goto YY3PI; LcXiJ: $search_text = Request::instance()->post("\157\162\x64\x65\x72\x5f\x6e\157"); goto vJCSq; ZvKv1: } public function bargain_order() { goto SJgAA; sSUqy: $page = $list->render(); goto CY535; wbAVn: $status = input("\x70\x61\x72\141\155\56\x73\164\141\x74\165\163", "\55\x32"); goto SHvus; SJgAA: $mch_id = isset($this->bus_id) ? $this->bus_id : "\60"; goto wbAVn; LU14s: goto DJ2RP; goto FVNqx; CY535: $this->assign("\x6c\x69\163\164", $list); goto S8v8H; FVNqx: eNzMW: goto cggBJ; S8v8H: $this->assign("\x70\141\x67\x65", $page); goto U0R7E; lyonV: $this->assign("\x73\164\x61\x74\165\163", $status); goto yHykz; PM9gY: DJ2RP: goto RYtE2; RYtE2: $condition["\x62\x6f\56\142\x61\x72\x67\x61\151\156\137\156\141\x6d\145"] = array("\154\151\153\145", "\x25" . $search_text . "\x25"); goto vzxrY; hdlRr: if ($status == '' || $status == "\55\x32") { goto eNzMW; } goto o7PZ_; yHykz: return view("\157\x72\144\x65\162\x2f\x62\141\x72\147\141\x69\x6e\137\157\162\x64\145\162"); goto mzIk9; SHvus: $search_text = input("\160\x61\x72\141\x6d\56\x73\145\x61\x72\x63\x68\137\164\x65\170\164"); goto hdlRr; o7PZ_: $condition["\142\157\x2e\157\x72\144\145\x72\137\x73\164\141\x74\x75\163"] = array("\x65\x71", $status); goto LU14s; vzxrY: $list = Db::name("\x79\x62\x73\x63\137\142\x61\x72\147\x61\151\156\x5f\x6f\x72\x64\145\x72")->alias("\x62\157")->join("\x79\x62\x73\x63\x5f\151\x6d\x61\147\145\163\40\151", "\151\x2e\x69\x6d\147\137\x69\144\75\142\157\56\142\x61\162\147\141\x69\156\x5f\x70\151\143")->where($condition)->where("\x62\x6f\56\x6d\143\150\x5f\x69\144", $mch_id)->field("\x62\x6f\56\52\x2c\151\56\151\x6d\147\137\143\157\x76\x65\x72\x5f\163\155\141\154\154")->paginate(20, false, $config = ["\161\165\145\x72\x79" => ["\163\x74\x61\x74\165\x73" => $status, "\163\145\x61\162\x63\x68\137\164\x65\x78\x74" => $search_text]]); goto sSUqy; cggBJ: $condition["\x62\x6f\56\x6f\x72\x64\145\162\x5f\163\164\x61\x74\165\163"] = array("\151\156", "\60\x2c\x31\x2c\x32\54\63\54\55\61"); goto PM9gY; U0R7E: $this->assign("\x73\145\141\162\143\x68\x5f\164\x65\x78\164", $search_text); goto lyonV; mzIk9: } public function OrderRefund() { goto xK_vq; OS4jE: P8xrl: goto Mi6RC; qEq7E: global $_W; goto DSW4u; tGwEq: $this->assign("\x70\x61\x67\x65", $page); goto W616s; JPBHQ: $this->assign("\x72\145\x66\165\156\x64\x5f\164\x79\160\145", 0); goto OS4jE; rCfcA: $child_menu_list[] = array("\165\162\x6c" => "\57\x61\x64\x6d\151\x6e\x2f\117\x72\144\145\162\57\x4f\x72\144\x65\x72\122\x65\x66\165\156\x64", "\x6d\145\156\165\x5f\x6e\x61\x6d\x65" => "\xe5\x85\250\351\x83\xa8", "\141\143\164\151\166\x65" => $status == '' ? 1 : 0); goto gncI6; e3mxl: $this->assign("\145\x6e\144\x5f\164\151\155\145", $end_time); goto V18_6; BL0bb: $star_time = input("\160\x61\x72\x61\x6d\x2e\163\164\141\x72\137\164\x69\x6d\145"); goto odIts; SRRmB: $order = new OrderService(); goto YTEdr; SAGHM: if ($status != '') { goto UKRT8; } goto vubSw; EyzSm: $refund_setting = $setting["\160\141\171\155\145\156\164"]["\167\145\x63\150\x61\164\x5f\x72\145\x66\165\x6e\x64"]; goto vE_Ot; PM9SJ: UKRT8: goto ccgGO; bex_X: $child_menu_list = array(); goto rCfcA; gIx73: $this->assign("\163\164\141\x72\x5f\x74\x69\155\x65", $star_time); goto e3mxl; Y_Zso: jozgd: goto QbQFs; ugSnA: VlW4m: goto SAGHM; FeCL0: $condition["\143\x72\145\141\x74\x65\x5f\164\x69\x6d\x65"] = ["\x62\145\x74\167\x65\x65\x6e", [$star, $star + 86400]]; goto Y_Zso; V18_6: return view("\x6f\x72\x64\x65\162\57\157\162\x64\x65\162\137\x72\145\x66\165\x6e\144\137\x6c\x69\163\164"); goto nlMkB; J0dc4: $condition["\x6f\x72\144\145\162\137\156\157"] = array("\x6c\151\153\145", "\45" . $search_text . "\x25"); goto LUwFb; LUwFb: $condition["\x6d\143\150\x5f\151\144"] = array("\145\161", $mch_id); goto BL0bb; HJFTm: $star = strtotime($star_time); goto FeCL0; s22x6: $condition["\x69\x73\137\x64\145\x6c\145\164\x65\144"] = array("\74\x3e", "\61"); goto cGZvV; odIts: $end_time = input("\x70\x61\162\x61\155\56\x65\156\144\137\164\x69\x6d\x65"); goto LlyZK; QbQFs: if (!(!empty($star_time) && !empty($end_time))) { goto VlW4m; } goto b8qmy; U0me3: goto zf2Ou; goto PM9SJ; e0VHx: goto P8xrl; goto aw_4W; HOmG6: $this->assign("\154\x69\x73\x74", $list); goto tGwEq; cGZvV: zf2Ou: goto sE2ua; X8BKq: $condition["\143\162\x65\x61\x74\x65\137\164\x69\155\145"] = ["\142\145\x74\x77\145\145\156", [$star, $end]]; goto ugSnA; sE2ua: $list = $order->getOrderListRefund($condition, $search_text, "\x63\162\x65\x61\x74\x65\137\x74\151\x6d\145\40\144\145\163\x63"); goto GWq2V; YTEdr: $search_text = Request::instance()->post("\157\x72\144\145\162\x5f\156\157"); goto srEeB; r71d3: $all_status = OrderService::getOrderRefund(); goto bex_X; GWq2V: $this->assign("\157\162\x64\145\x72\137\163\x74\x61\x74\165\x73", $status); goto r71d3; vubSw: $condition["\x6f\x72\144\145\162\x5f\x73\x74\x61\x74\x75\x73"] = array("\x69\x6e", "\64\x2c\x35"); goto U0me3; b8qmy: $star = strtotime($star_time); goto Btugw; Btugw: $end = strtotime($end_time); goto X8BKq; mmSJ3: $this->assign("\162\145\146\x75\x6e\144\137\164\x79\x70\x65", 1); goto e0VHx; DSW4u: $setting = uni_setting_load("\x70\x61\x79\155\x65\x6e\x74", $_W["\165\156\x69\x61\143\x69\144"]); goto EyzSm; W616s: $this->assign("\x6f\162\144\145\x72\x5f\x6e\x6f", $search_text); goto gIx73; aoi3h: $page = $list->render(); goto HOmG6; gncI6: foreach ($all_status as $k => $v) { $child_menu_list[] = array("\x75\x72\154" => "\x2f\141\x64\x6d\x69\156\x2f\157\162\144\145\x72\x2f\x4f\x72\x64\145\x72\x52\x65\x66\x75\156\x64\x26\163\164\x61\x74\165\x73\x3d" . $v["\x73\x74\141\164\165\163\137\x69\144"], "\x6d\145\156\165\x5f\156\x61\x6d\x65" => $v["\x73\x74\141\164\x75\163\x5f\156\x61\x6d\145"], "\x61\x63\x74\x69\x76\145" => $status == $v["\163\164\141\164\165\163\137\151\144"] ? 1 : 0); QSTNa: } goto D8vxz; srEeB: $status = request()->param("\163\x74\x61\x74\165\163", ''); goto J0dc4; Mi6RC: $this->assign("\x63\x68\x69\154\x64\137\155\145\156\x75\x5f\154\151\x73\164", $child_menu_list); goto aoi3h; D8vxz: Zml0W: goto qEq7E; aw_4W: CzDJL: goto JPBHQ; ccgGO: $condition["\x6f\162\x64\x65\x72\x5f\x73\164\141\x74\165\x73"] = array("\75", $status); goto s22x6; xK_vq: $mch_id = isset($this->bus_id) ? $this->bus_id : "\60"; goto SRRmB; vE_Ot: if ($refund_setting["\x73\167\151\164\143\150"] != 1 || empty($refund_setting["\153\x65\171"]) || empty($refund_setting["\143\145\x72\164"])) { goto CzDJL; } goto mmSJ3; LlyZK: if (empty($star_time)) { goto jozgd; } goto HJFTm; nlMkB: } public function OrderDetail() { goto QgqVJ; frxm2: $info["\160\x6f\x69\x6e\x74"] = 0; goto xflUv; AjzOP: $list = Db::name("\171\x62\163\x63\137\157\x72\x64\145\162")->where("\157\162\144\x65\162\137\x69\144", $order_id)->find(); goto BggAO; veZrF: $this->assign("\157\x72\x64\x65\162", $info); goto AjzOP; DRYRo: b14yk: goto veZrF; scTbp: $info = $advert->getOrderDetail($order_id); goto m9txO; KfWY6: $info["\164\141\x78\x5f\x6d\x6f\156\145\x79"] = 0; goto frxm2; fZhug: $info["\165\163\x65\x72\x5f\160\x6c\x61\164\146\157\x72\155\x5f\155\157\x6e\x65\171"] = 0; goto KfWY6; m9txO: $all_status = OrderService::getOrderRefund(); goto fZhug; xflUv: foreach ($all_status as $k_status => $v_status) { goto sabex; nQT37: Yyq0x: goto aUfp9; sabex: if (!($v_status["\163\x74\x61\164\165\x73\137\151\x64"] == $info["\x6f\162\x64\x65\162\137\x73\x74\141\164\165\163"])) { goto gZ1Ly; } goto zvseC; zvseC: $info["\x73\x74\141\164\x75\x73\137\156\141\x6d\145"] = $v_status["\163\x74\141\164\165\163\137\156\x61\155\x65"]; goto EDvkp; EDvkp: gZ1Ly: goto nQT37; aUfp9: } goto DRYRo; EBDGB: $order_id = request()->get("\157\x72\144\145\162\x5f\151\x64", 0); goto scTbp; QgqVJ: $advert = new OrderService(); goto EBDGB; BggAO: $this->assign("\154\151\163\x74", $list); goto O6KdK; O6KdK: return view("\x6f\x72\x64\145\162\57\157\x72\144\145\162\x5f\x64\145\164\x61\x69\154"); goto Qoexm; Qoexm: } public function orderTakeDelivery() { goto YaPZz; YaPZz: $order_service = new OrderService(); goto hcOj6; hcOj6: $order_id = request()->post("\157\162\x64\x65\162\x5f\151\x64", ''); goto uwgwy; VqkJ9: return AjaxReturn($res); goto YjjBn; uwgwy: $res = $order_service->OrderTakeDelivery($order_id); goto VqkJ9; YjjBn: } public function orderTakeRefund() { goto Fom_M; bv8B6: gThoo: goto wfL14; Fom_M: $order_id = request()->post("\x6f\x72\144\145\x72\x5f\x69\144", ''); goto X8Q_R; X8Q_R: global $_W; goto adfvW; OcMxw: $res = $temp["\101\120\x50\x5f\115\103\110\x49\104"] . date("\131\155\x64\110\x69\x73") . rand(10000, 9999999); goto qg1QA; kfUWP: $temp = json_decode($bus_config["\166\x61\154\165\x65"], true); goto OcMxw; vHnHi: $input->SetOut_trade_no($order_info["\x6f\165\x74\137\x74\x72\x61\144\x65\137\x6e\x6f"]); goto KRt_8; mW_JM: goto Ild37; goto c7M2g; IOjyo: $res = $order_service->orderTakeRefund($order_id); goto YVEpW; tzCK5: Ild37: goto FZtse; c7M2g: QpxXp: goto lknLT; znmeK: $input->SetOp_user_id($temp["\101\x50\120\x5f\115\x43\x48\111\x44"]); goto Q1MEc; Cb08c: $refund_setting = $setting["\x70\x61\x79\155\x65\x6e\x74"]["\167\145\x63\x68\x61\164\x5f\x72\145\146\x75\x6e\x64"]; goto Mjxo5; eoEaL: $key_path = ATTACHMENT_ROOT . "\160\165\142\154\151\x63\x2f" . $this->bus_id . "\137\x77\145\143\x68\141\x74\137\x72\145\146\165\156\144\x5f\x6b\x65\171\56\x70\145\155"; goto VRUPC; YVEpW: return AjaxReturn($res); goto HV1uO; h2Zki: return AjaxReturnMsg(0, $errmsg); goto mW_JM; Q1MEc: $input->SetAppid($temp["\x41\120\x50\137\x49\x44"]); goto RQbZB; HV1uO: uHClG: goto OoSEz; FZtse: goto uHClG; goto bv8B6; qg1QA: $input = new \WxPayRefund(); goto vHnHi; Cj7Jb: $input->SetOut_refund_no($res); goto znmeK; lknLT: $order_info = Db::name("\x79\x62\x73\143\x5f\x6f\x72\x64\x65\162")->where("\157\x72\x64\x65\162\137\151\x64", $order_id)->update(["\x6f\x72\x64\145\x72\x5f\163\164\141\164\x75\163" => 5, "\162\145\146\x75\156\144\x5f\155\x6f\x6e\145\x79" => $order_info["\x70\x61\x79\x5f\x6d\x6f\156\x65\x79"], "\x66\151\156\x69\x73\150\137\164\151\155\145" => time()]); goto Ab0NO; h86ZP: $cert_path = ATTACHMENT_ROOT . "\160\x75\142\x6c\x69\x63\57" . $this->bus_id . "\x5f\167\x65\143\x68\141\164\x5f\x72\145\146\165\156\x64\x5f\x63\145\x72\x74\56\x70\x65\155"; goto eoEaL; Ab0NO: return AjaxReturn($order_info); goto tzCK5; LS1d3: $key = authcode($refund_setting["\153\x65\x79"], "\104\105\x43\117\x44\x45"); goto OrSdJ; VRUPC: file_put_contents($cert_path, $cert); goto lx1DJ; adfvW: $setting = uni_setting_load("\x70\141\171\155\x65\x6e\164", $_W["\165\156\151\x61\x63\x69\144"]); goto Cb08c; KRt_8: $input->SetTotal_fee($order_info["\160\x61\171\137\155\x6f\x6e\145\171"] * 100); goto vvFHe; Mjxo5: if ($refund_setting["\x73\167\151\164\x63\150"] != 1 || empty($refund_setting["\x6b\145\171"]) || empty($refund_setting["\143\x65\x72\164"])) { goto gThoo; } goto cn2O0; msvNU: $errmsg = empty($param["\x65\162\162\x5f\x63\157\x64\x65\x5f\x64\x65\x73"]) ? "\351\x80\200\xe6\xac\276\345\xa4\xb1\350\xb4\245" : $param["\x65\162\162\x5f\x63\x6f\144\145\x5f\144\x65\163"]; goto h2Zki; JlKRF: $param = \WxPayApi::refund($input); goto lZpOc; wfL14: $order_service = new OrderService(); goto IOjyo; lx1DJ: file_put_contents($key_path, $key); goto JlKRF; vvFHe: $input->SetRefund_fee($order_info["\x70\141\x79\137\x6d\x6f\156\145\171"] * 100); goto Cj7Jb; SdwWu: $key = $key; goto h86ZP; sfZ_s: $bus_config = Db::name("\171\x62\163\143\x5f\143\x6f\156\x66\151\x67")->where("\155\x63\150\x5f\151\x64", $this->bus_id)->where("\x6b\145\171", "\127\x58\120\101\131")->find(); goto kfUWP; cn2O0: $cert = authcode($refund_setting["\x63\x65\162\164"], "\x44\x45\x43\117\104\105"); goto LS1d3; lZpOc: if ($param["\x72\x65\x73\x75\154\164\x5f\143\x6f\144\x65"] == "\123\125\103\x43\x45\x53\x53") { goto QpxXp; } goto msvNU; OrSdJ: $order_info = Db::name("\171\x62\163\x63\x5f\157\162\x64\x65\162")->where("\157\x72\144\145\x72\x5f\x69\144", $order_id)->find(); goto sfZ_s; RQbZB: $cert = $cert; goto SdwWu; OoSEz: } public function deleteOrder() { goto WR72K; Q5TXm: $res = $order_service->deleteOrder($order_id, 1); goto D_AMQ; chNp3: $order_id = request()->post("\157\162\144\x65\x72\x5f\x69\144", ''); goto Q5TXm; D_AMQ: return AjaxReturn($res); goto cV86s; cV86s: L5oUC: goto qn2xG; itDUG: $order_service = new OrderService(); goto chNp3; WR72K: if (!request()->isAjax()) { goto L5oUC; } goto itDUG; qn2xG: } public function orderDelivery() { goto XRWNh; A3WEk: $address_service = new Area(); goto cb1Ph; FHfju: $order_goods_list = $order_service->getOrderGoods($order_id); goto QqXj5; uO1mD: $this->assign("\144\141\x74\x61", $data); goto lcYGE; glDLx: Y1Jyv: goto tBbbf; axBE3: $express_company_list = $express_service->expressCompanyQuery(); goto FHfju; JR3qJ: $order_info["\x61\x64\x64\x72\145\163\x73"] = $address_service->getAddress($order_info["\162\145\x63\x65\x69\166\x65\162\x5f\x61\162\x65\x61"]); goto axBE3; tBbbf: $data["\x6f\162\x64\x65\162\137\x69\156\x66\157"] = $order_info; goto mSJPU; QqXj5: foreach ($order_goods_list as $k => $v) { $order_goods_list[$k]["\x73\150\151\160\x70\151\x6e\147\x5f\163\x74\x61\x74\165\x73\x5f\x6e\141\x6d\145"] = $order_service->getShippingInfo($v["\163\x68\151\160\160\x69\156\x67\x5f\163\x74\x61\x74\165\x73"])["\x73\164\x61\164\165\x73\x5f\156\x61\x6d\x65"]; fBYwo: } goto glDLx; mSJPU: $data["\x65\x78\160\x72\x65\163\x73\x5f\143\x6f\x6d\160\x61\x6e\x79\x5f\154\151\x73\164"] = $express_company_list; goto DUv3p; lcYGE: return view("\x6f\x72\144\145\162\x2f\x6f\x72\144\145\162\137\x64\145\x6c\x69\166\145\x72\171"); goto I4D_F; DoCKY: $express_service = new \app\admin\service\Express(); goto A3WEk; Vdf9G: $order_info = $order_service->getOrderDetail($order_id); goto JR3qJ; XRWNh: $order_service = new OrderService(); goto DoCKY; cb1Ph: $order_id = request()->get("\x6f\162\144\145\162\x5f\151\144", ''); goto Vdf9G; DUv3p: $data["\157\x72\x64\x65\162\x5f\147\157\x6f\144\x73\137\x6c\151\163\164"] = $order_goods_list; goto uO1mD; I4D_F: } public function doOrderDelivery() { goto Hn5cY; jxWl0: if ($shipping_type == 1) { goto S1ibe; } goto CUThK; CUThK: $res = $order_service->orderGoodsDelivery($order_id); goto ZVAVw; Hn5cY: $order_service = new OrderService(); goto tlkhS; O8Clv: $express_no = request()->post("\x65\x78\160\x72\x65\x73\x73\137\x6e\x6f", ''); goto jxWl0; UdMx4: B8vfm: goto sF5GZ; YUWY0: $express_company_id = request()->post("\x65\170\x70\x72\145\163\x73\137\143\157\155\x70\141\x6e\171\137\151\144", ''); goto O8Clv; sF5GZ: return AjaxReturn($res); goto tGrQ_; FzkS5: $express_name = request()->post("\145\170\160\162\145\163\163\x5f\156\x61\155\145", ''); goto bqLBw; ZVAVw: goto B8vfm; goto pl7vD; mRBPV: $res = $order_service->orderDelivery($order_id, $express_name, $shipping_type, $express_company_id, $express_no); goto UdMx4; pl7vD: S1ibe: goto mRBPV; bqLBw: $shipping_type = request()->post("\163\x68\x69\x70\160\151\156\147\x5f\164\x79\x70\145", ''); goto YUWY0; tlkhS: $order_id = request()->post("\x6f\162\144\145\x72\137\x69\x64", ''); goto FzkS5; tGrQ_: } public function getOrderSellerMemo() { goto jxwGi; HML2P: $this->assign("\x6f\x72\144\145\162\137\x69\144", $order_id); goto PlaBq; wv54g: $this->assign("\162\x65\x73", $res); goto HML2P; qPBVn: $order_id = request()->get("\157\x72\144\145\x72\137\151\x64"); goto REdPZ; PlaBq: return view("\x6f\x72\144\x65\162\57\157\x72\x64\x65\x72\137\155\163\147"); goto z_JPP; REdPZ: $res = $order_service->getOrderSellerMemo($order_id); goto wv54g; jxwGi: $order_service = new OrderService(); goto qPBVn; z_JPP: } public function addMemo() { goto lD6eX; FZVBf: $memo = request()->post("\x6d\145\155\157"); goto u4ZBn; M8KVz: $order_id = request()->post("\x6f\x72\x64\145\x72\137\151\144"); goto FZVBf; lD6eX: $order_service = new OrderService(); goto M8KVz; u4ZBn: $result = $order_service->addOrderSellerMemo($order_id, $memo); goto SW_zx; SW_zx: return AjaxReturn($result); goto fNjov; fNjov: } public function getOrderUpdateAddress() { goto SIojj; LEtW6: $order_id = request()->get("\x6f\162\x64\145\x72\x5f\x69\x64"); goto FPK83; FPK83: $res = $order_service->getOrderReceiveDetail($order_id); goto rA7cq; vtNW2: $this->assign("\x61\x64\144\x72\145\x73\x73\137\151\x64", $address_id); goto F6WKx; F6WKx: return view("\x6f\162\x64\x65\x72\x2f\157\162\x64\x65\162\137\141\144\144\x72\145\163\x73"); goto E90G7; rA7cq: $address_id = $order_service->getCity($res["\x72\145\143\x65\x69\x76\145\x72\x5f\141\162\145\141"]); goto NtFVr; NtFVr: $this->assign("\157\x72\x64\145\x72\x5f\151\144", $order_id); goto AcqXu; SIojj: $order_service = new OrderService(); goto LEtW6; AcqXu: $this->assign("\162\x65\163", $res); goto vtNW2; E90G7: } public function updateOrderAddress() { goto qJbKT; lNyyN: $receiver_zip = request()->post("\162\x65\143\145\151\x76\145\162\137\x7a\151\x70", ''); goto tS5Kb; tS5Kb: $receiver_province = request()->post("\163\x65\154\145\101\162\145\x61\x4e\145\x78\164", ''); goto C_ruV; Mu227: $res = $order_service->updateOrderReceiveDetail($order_id, $receiver_mobile, $receiver_province, $receiver_city, $receiver_district, $receiver_address, $receiver_zip, $receiver_name); goto kLeEC; H7Raw: $receiver_address = request()->post("\141\144\144\x72\x65\163\x73\x5f\x64\145\x74\x61\x69\x6c", ''); goto Mu227; qJbKT: $order_service = new OrderService(); goto WItXd; C_ruV: $receiver_city = request()->post("\x73\x65\x6c\x65\x41\162\x65\141\124\150\x69\162\x64", ''); goto DVCgc; ktVUS: $receiver_name = request()->post("\x72\x65\x63\x65\151\x76\145\162\137\x6e\141\155\x65", ''); goto iQMFU; iQMFU: $receiver_mobile = request()->post("\x72\x65\143\145\x69\166\145\162\137\155\x6f\x62\x69\x6c\145", ''); goto lNyyN; kLeEC: return $res; goto awxeW; DVCgc: $receiver_district = request()->post("\x73\145\154\x65\101\162\x65\x61\106\x6f\165\x74\x68", ''); goto H7Raw; WItXd: $order_id = request()->post("\x6f\x72\144\x65\162\137\x69\144", ''); goto ktVUS; awxeW: } public function getProvince() { goto u0dN8; u0dN8: $address = new Area(); goto qa7iN; qa7iN: $province_list = $address->getAreaList(); goto vLNgH; vLNgH: return $province_list; goto ikAe5; ikAe5: } public function getCity() { goto gX73E; vp4ob: $province_id = request()->post("\160\162\x6f\166\x69\156\143\x65\137\151\x64", 0); goto CEmva; gX73E: $address = new Area(); goto vp4ob; rI2pl: return $city_list; goto QrZod; CEmva: $city_list = $address->getCityList($province_id); goto rI2pl; QrZod: } public function getDistrict() { goto UEoAv; SZ53Q: return $district_list; goto LNiUF; LDaL0: $district_list = $address->getDistrictList($city_id); goto SZ53Q; UEoAv: $address = new Area(); goto mCPa0; mCPa0: $city_id = request()->post("\x63\151\164\171\137\x69\x64", 0); goto LDaL0; LNiUF: } public function add_mention() { goto rz0nr; r7_s4: try { goto vsSr2; a4_wt: Db::name("\x79\x62\163\x63\137\165\163\145\x72")->where("\165\x69\144", $us["\160\141\162\145\156\164\137\x69\144\x5f\61"])->setInc("\x74\x6f\164\x61\154\x5f\x70\x72\x69\x63\145", $us["\146\151\x72\x73\x74\x5f\x70\162\151\143\x65"]); goto Xlw2q; hpdR8: IBq4B: goto seuGR; jrQKV: $share_data["\x6d\x6f\x6e\x65\x79"] = $us["\x66\x69\162\163\164\137\160\162\151\x63\x65"]; goto r8KPw; kRgU4: Ohyc9: goto Sl8a5; Trz6m: $share_data["\163\x6f\165\x72\x63\145"] = 2; goto ogRxO; D5XfO: Db::name("\171\142\163\x63\137\x75\x73\x65\162")->where("\x75\151\144", $us["\160\x61\162\x65\156\164\x5f\x69\x64\x5f\x33"])->setInc("\160\162\151\x63\x65", $us["\x74\x68\151\162\x64\x5f\160\x72\151\143\x65"]); goto FNunZ; qF2Sz: $share_data["\165\163\x65\x72\137\151\x64"] = $us["\x70\141\x72\145\156\164\x5f\151\144\137\63"]; goto xPVsS; nUqHn: $res = Db::name("\171\142\x73\143\x5f\157\162\144\145\162")->where("\157\162\144\145\x72\137\151\x64", $order_id)->update(["\x6f\162\144\x65\162\x5f\x73\x74\141\x74\x75\x73" => 3, "\146\151\x6e\151\x73\x68\x5f\164\151\155\x65" => time(), "\x73\151\x67\156\137\x74\x69\x6d\x65" => time()]); goto YJCn2; TTC4M: if (!$us) { goto Uzk_o; } goto BB1UD; dqJ9w: $share_data["\x6d\x6f\156\145\x79"] = $us["\x73\145\143\x6f\x6e\144\x5f\160\162\x69\143\145"]; goto Trz6m; dVeU8: Db::name("\x79\142\163\x63\x5f\165\163\x65\162\137\x73\150\141\x72\145\137\155\x6f\x6e\145\171")->insert($share_data); goto R2gcb; ogRxO: Db::name("\x79\142\x73\143\137\x75\x73\145\x72\x5f\x73\150\141\162\145\137\155\157\156\x65\x79")->insert($share_data); goto Ebvzw; vSC9y: $share_data["\165\x73\x65\x72\137\151\144"] = $us["\x70\x61\x72\x65\x6e\x74\x5f\x69\144\137\x31"]; goto jrQKV; r8KPw: $share_data["\163\x6f\165\x72\143\145"] = 1; goto whush; Xlw2q: Db::name("\171\x62\163\143\x5f\165\163\x65\x72")->where("\x75\x69\144", $us["\x70\x61\x72\145\x6e\x74\137\x69\144\137\61"])->setInc("\x70\x72\151\x63\x65", $us["\x66\x69\x72\163\x74\137\160\162\151\143\145"]); goto PnXtY; xPVsS: $share_data["\x6d\x6f\156\145\x79"] = $us["\164\x68\151\x72\144\137\x70\x72\151\x63\x65"]; goto Td2ar; kR2OC: Uzk_o: goto juTju; whush: Db::name("\171\142\163\143\137\x75\163\145\x72\137\x73\150\141\x72\x65\x5f\x6d\157\156\145\171")->insert($share_data); goto a4_wt; PnXtY: o4msi: goto Il24A; Td2ar: $share_data["\163\157\165\x72\143\145"] = 3; goto dVeU8; seuGR: $order_info = Db::name("\171\142\x73\x63\137\157\x72\144\x65\x72")->where(["\x6f\162\x64\x65\162\137\151\144" => $order_id])->find(); goto wuZfp; Ebvzw: Db::name("\171\142\163\143\137\x75\163\145\x72")->where("\165\x69\x64", $us["\160\x61\162\x65\x6e\164\x5f\x69\144\x5f\x32"])->setInc("\164\x6f\x74\141\154\137\160\x72\151\143\145", $us["\x73\x65\143\x6f\x6e\x64\137\x70\162\151\x63\x65"]); goto MMMkz; juTju: Db::commit(); goto H5iR6; BB1UD: $share_data = ["\x6d\143\x68\137\x69\x64" => $this->bus_id, "\x6f\x72\144\x65\162\137\151\x64" => $order_id, "\x63\162\145\141\164\x65\137\164\x69\x6d\x65" => time(), "\151\x73\x5f\144\145\154" => 1]; goto N24_t; vsSr2: $order_id = input("\x70\141\162\x61\155\56\x6f\x72\144\145\x72\137\x69\144"); goto nUqHn; Sl8a5: if (!($us["\160\x61\x72\145\156\x74\x5f\x69\144\x5f\63"] && $us["\160\141\x72\145\156\164\137\151\x64\137\63"] != 0)) { goto Xl8WU; } goto qF2Sz; S8icv: return AjaxReturn(0); goto hpdR8; Il24A: if (!($us["\160\141\162\145\156\164\x5f\151\144\x5f\x32"] && $us["\160\141\162\145\x6e\x74\137\151\x64\137\x32"] != 0)) { goto Ohyc9; } goto RAAq5; YJCn2: if (!empty($res)) { goto IBq4B; } goto S8icv; FNunZ: Xl8WU: goto kR2OC; R2gcb: Db::name("\171\142\x73\143\137\165\163\x65\x72")->where("\165\151\x64", $us["\160\141\162\x65\x6e\x74\x5f\x69\144\x5f\x33"])->setInc("\x74\x6f\164\141\x6c\x5f\x70\162\151\143\145", $us["\164\x68\151\162\x64\137\160\162\x69\x63\145"]); goto D5XfO; N24_t: if (!($us["\160\141\x72\x65\156\164\x5f\x69\144\x5f\61"] && $us["\160\141\162\x65\156\x74\x5f\151\144\137\x31"] != 0)) { goto o4msi; } goto vSC9y; RAAq5: $share_data["\x75\x73\145\x72\x5f\x69\144"] = $us["\160\141\x72\145\156\164\137\x69\144\137\62"]; goto dqJ9w; MMMkz: Db::name("\x79\142\163\143\137\165\163\x65\162")->where("\x75\151\x64", $us["\160\141\x72\x65\x6e\x74\137\x69\x64\x5f\62"])->setInc("\x70\x72\x69\x63\x65", $us["\163\x65\x63\x6f\x6e\144\137\x70\162\x69\x63\x65"]); goto kRgU4; wuZfp: $us = Db::name("\171\142\163\143\x5f\157\x72\x64\x65\x72\x5f\x73\150\x61\162\x65")->where(["\165\x73\x65\x72\137\x69\x64" => $order_info["\142\x75\x79\145\x72\x5f\x69\x64"], "\x6f\x72\144\145\162\x5f\x69\x64" => $order_id])->find(); goto TTC4M; H5iR6: } catch (\Exception $e) { Db::rollback(); return AjaxReturn(0); } goto GjaP2; rz0nr: Db::startTrans(); goto r7_s4; GjaP2: return AjaxReturn($res); goto gYD_p; gYD_p: } public function change_money() { goto R3w7M; FsQ9p: $con["\x6f\x72\144\x65\x72\137\163\164\x61\x74\165\x73"] = "\x30"; goto NhgoI; LJL3m: $con["\157\162\144\145\x72\x5f\x69\144"] = request()->post("\x69\x64"); goto vbPcA; Vx1BF: $data["\160\x61\171\x5f\x6d\157\156\145\171"] = request()->post("\166\141\154"); goto tf0No; z2RCh: goto iO5y0; goto Q_crO; kz5QT: if ($res) { goto EZc3R; } goto Z5eYx; iXvla: return "\62"; goto ZSRoF; Z5eYx: return 0; goto z2RCh; Q_crO: EZc3R: goto MaM6a; ZSRoF: iO5y0: goto QpUUX; vbPcA: $cons["\157\165\x74\x5f\164\162\x61\x64\x65\137\x6e\x6f"] = request()->post("\157\x75\164\x5f\164\162\141\144\145\x5f\x6e\x6f"); goto FsQ9p; NhgoI: $data["\x6f\x75\164\137\x74\162\141\x64\145\x5f\x6e\157"] = $this->createOutTradeNo(); goto Vx1BF; MaM6a: Log::write("\350\xae\xa2\xe5\215\225\xe6\x94\xb9\344\xbb\267\x20\345\x95\206\357\274\x9a" . $this->bus_id . "\55\55\xe8\256\242\xe5\x8d\225\345\217\xb7\xe7\224\261" . $cons["\x6f\x75\x74\137\x74\x72\141\x64\145\x5f\156\157"] . "\346\224\xb9\xe4\270\xba\54" . $data["\x6f\x75\164\x5f\164\x72\141\x64\145\x5f\x6e\157"] . "\xe4\273\xb7\xe6\240\xbc\347\224\261" . $old_pay . "\346\224\271\344\270\272" . $data["\x70\x61\x79\x5f\x6d\x6f\x6e\145\171"], "\157\162\144\x65\x72\137\143\150\141\156\147\x65"); goto iXvla; R3w7M: $old_pay = request()->post("\157\154\144\137\160\141\171"); goto LJL3m; xCkJ0: $res = db::name("\171\x62\163\x63\137\157\162\x64\145\x72\x5f\160\141\171\x6d\145\x6e\x74")->where($cons)->update($data); goto kz5QT; tf0No: db::name("\171\x62\163\x63\137\x6f\x72\x64\x65\162")->where($con)->update($data); goto xCkJ0; QpUUX: } }
