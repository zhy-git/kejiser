<?php
 namespace app\web\controller; require_once APP_PATH . "\167\145\x62\57\x73\x65\x72\x76\151\143\145\57\x55\x73\145\x72\x57\x65\x62\56\160\x68\x70"; use think\Controller; use think\Session; use app\web\service\Wechat; use app\web\service\UserWeb; class User extends Controller { public function Login($code) { goto f0uPU; GK5To: if (!empty($page)) { goto PlqY2; } goto W4K09; lQD73: yPM4Z: goto FABPW; CezTm: $uid = $userWeb->addUser($data); goto g9P8H; z2JAy: $uid = $result; goto wl4zc; lG5RX: goto spUVf; goto omcek; uOjJK: $page = Session::get("\x70\x61\147\x65"); goto GK5To; G83j4: hNpXA: goto bPWJ2; KzE4L: goto hNpXA; goto LarbY; OLshR: if (isset($_SERVER["\x48\124\124\x50\137\130\x5f\x52\x45\101\114\137\110\x4f\x53\x54"])) { goto OHe4f; } goto KZH1y; omcek: OHe4f: goto bQHwA; xnGG2: $url = "\x68\164\x74\x70\163\x3a\57\x2f" . $host . "\x2f\x61\x64\x64\x6f\156\x73\57\x79\x62\x5f\163\x68\157\160\57\143\157\x72\x65\57\x77\x65\x62\57\x69\156\x64\x65\170\56\x68\x74\155\x6c\77\43\x21{$page}\x26\x6d\x63\x68\x5f\x69\x64\x3d{$mch_id}\x26\165\x69\144\75{$uid}"; goto XZOaE; GNf66: PlqY2: goto xnGG2; g9P8H: goto d_nD7; goto O3Eoz; wl4zc: d_nD7: goto OLshR; KZH1y: $host = $_SERVER["\x48\124\x54\120\137\x48\117\123\x54"]; goto lG5RX; chmZV: if (!empty($pid)) { goto JORGW; } goto f83bY; q3JtY: $we_chat_user_info = $we_chat->getWeChatUserInfo($access_token["\x61\143\x63\x65\x73\163\137\x74\x6f\x6b\145\156"], $access_token["\x6f\160\145\x6e\x69\x64"]); goto QbQM1; pw5FH: $result = $userWeb->checkUserByOpenid($we_chat_user_info["\x6f\160\145\x6e\x69\144"]); goto KzE4L; XZOaE: header("\114\157\x63\x61\164\151\157\156\x3a{$url}"); goto vhlGI; Fa7oR: $pid = Session::get("\160\151\144"); goto chmZV; O3Eoz: Ch_Ov: goto z2JAy; FABPW: if (!empty($unionid)) { goto ZNrcL; } goto pw5FH; f83bY: $pid = 0; goto EI87h; IaR2M: $unionid = $we_chat_user_info["\x75\156\151\157\156\151\144"]; goto lQD73; W4K09: $page = "\171\142\x5f\163\x68\x6f\x70\x2f\160\141\147\x65\x73\x2f\151\x6e\144\145\x78\57\151\156\x64\x65\170"; goto GNf66; eyvW2: if (!in_array("\165\156\151\x6f\x6e\151\x64", $we_chat_user_info_key)) { goto yPM4Z; } goto IaR2M; XVoUe: spUVf: goto uOjJK; O4a_K: $data = ["\165\163\145\162\x5f\150\145\141\144\x69\x6d\x67" => $we_chat_user_info["\150\x65\x61\x64\151\x6d\x67\165\162\x6c"], "\156\151\143\153\137\x6e\x61\x6d\x65" => $we_chat_user_info["\x6e\x69\x63\x6b\x6e\141\x6d\145"], "\x77\x78\x5f\157\x70\145\156\151\144" => $we_chat_user_info["\x6f\160\x65\156\151\x64"], "\155\x63\150\137\151\x64" => $mch_id, "\x72\145\x67\x5f\164\151\x6d\145" => time(), "\x69\163\x5f\144\x69\163\x74\162\151\x62\165\164\157\x72" => 0, "\x70\x69\x64" => $pid, "\167\170\137\165\x6e\x69\157\156\151\x64" => $unionid]; goto CezTm; bQHwA: $host = $_SERVER["\x48\x54\x54\120\137\x58\x5f\x52\105\101\114\x5f\110\117\x53\x54"]; goto XVoUe; LarbY: ZNrcL: goto Iljk8; Cc0tq: $unionid = ''; goto eyvW2; EI87h: JORGW: goto O4a_K; Iljk8: $result = $userWeb->checkUser($unionid); goto G83j4; bPWJ2: $mch_id = Session::get("\x6d\143\x68\x5f\151\x64"); goto H9Pln; J1mm6: $access_token = $we_chat->getAccessToken($code); goto q3JtY; x7E70: $we_chat_user_info_key = array_keys($we_chat_user_info); goto Cc0tq; f0uPU: $we_chat = new Wechat(); goto J1mm6; QbQM1: $userWeb = new UserWeb(); goto x7E70; H9Pln: if (!empty($result)) { goto Ch_Ov; } goto Fa7oR; vhlGI: } }
