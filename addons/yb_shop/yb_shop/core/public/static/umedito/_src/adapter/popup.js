UM.registerUI("emotion formula",function(a){var b=this,c=b.options.UMEDITOR_HOME_URL+"dialogs/"+a+"/"+a+".js",d=$.eduibutton({icon:a,title:this.getLang("labelMap")[a]||""});return utils.loadFile(document,{src:c,tag:"script",type:"text/javascript",defer:"defer"},function(){var e={url:c},f=UM.getWidgetData(a);f.width&&(e.width=f.width),f.height&&(e.height=f.height),$.eduipopup(e).css("zIndex",b.options.zIndex+1).addClass("edui-popup-"+a).edui().on("beforeshow",function(){var c=this.root();c.parent().length||b.$container.find(".edui-dialog-container").append(c),UM.setWidgetBody(a,c,b),UM.setTopEditor(b)}).attachTo(d,{offsetTop:-5,offsetLeft:10,caretLeft:11,caretTop:-8}),b.addListener("selectionchange",function(){var b=this.queryCommandState(a);d.edui().disabled(-1==b).active(1==b)})}),d});