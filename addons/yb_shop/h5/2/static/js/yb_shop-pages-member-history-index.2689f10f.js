(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["yb_shop-pages-member-history-index"],{7865:function(t,i,e){var a=e("d536");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("2ace3eaa",a,!0,{sourceMap:!1,shadowMode:!1})},"8e2c":function(t,i,e){"use strict";var a=e("7865"),s=e.n(a);s.a},ca7b:function(t,i,e){"use strict";var a,s,n=e("e143"),c={computed:{Vue:function(){return n["default"]}},methods:{setData:function(t){if(t)try{for(var i in t)this[i]=t[i]}catch(e){console.log(e)}},menu_url:function(t){getApp().core.menu_url(t,2)},formSubmit:function(t){var i={currentTarget:{dataset:{}}},e=t.detail.value;i.currentTarget.dataset=e,getApp().core.menu_url(i,1)},isLogin:function(){return!!getApp().getCache("userinfo").uid||(getApp().core.alert("请先登录",function(){wx.redirectTo({url:"/yb_shop/pages/wap/login"})}),!1)}}},l=c,o=e("2877"),u=Object(o["a"])(l,a,s,!1,null,null,null);u.options.__file="Base.vue";i["a"]=u.exports},cd07:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[t.show?e("v-uni-view",{staticClass:"page footer"},[t.total>0?e("v-uni-view",t._l(t.list,function(i,a){return e("v-uni-view",{key:a},[e("v-uni-view",{staticClass:"fui-list-group",staticStyle:{"margin-top":"0"}},[e("v-uni-navigator",{staticClass:"fui-list-group-title noclick",attrs:{"hover-class":"none","open-type":"redirect",url:"/yb_shop/pages/index/index?merchid="+i.merchid}},[e("v-uni-image",{attrs:{src:"/static/images/icon/shop.png"}}),e("v-uni-view",{staticClass:"text"},[t._v("洛阳易购")]),e("v-uni-view",{staticClass:"fui-list-angle"},[e("v-uni-view",{staticClass:"angle"},[t._v(t._s(i.createtime))])],1)],1),e("v-uni-label",{staticClass:"fui-list",attrs:{"data-goodsid":i.goodsid,"data-id":i.id},on:{click:function(i){i=t.$handleEvent(i),t.itemClick(i)}}},[t.isedit?e("v-uni-view",{staticClass:"fui-list-media"},[e("v-uni-radio",{staticClass:"zoom-80",attrs:{color:"#ef4f4f",checked:!!t.checkObj[i.id]||""}})],1):t._e(),e("v-uni-view",{staticClass:"fui-list-media"},[e("v-uni-image",{staticClass:"round",attrs:{src:i.thumb}})],1),e("v-uni-view",{staticClass:"fui-list-inner"},[e("v-uni-view",{staticClass:"row"},[e("v-uni-view",{staticClass:"subtitle"},[t._v(t._s(i.title))])],1),e("v-uni-view",{staticClass:"subtitle"},[e("v-uni-text",{staticClass:"text-danger"},[t._v("￥"+t._s(i.marketprice))]),e("v-uni-text",{staticClass:"text-delete",staticStyle:{"padding-left":"10rpx"}},[t._v("￥"+t._s(i.productprice))])],1)],1)],1)],1)],1)})):t._e(),t.loading?e("v-uni-view",{staticClass:"fui-loading"},[e("v-uni-view",{staticClass:"icon"}),e("v-uni-view",{staticClass:"text"},[t._v("正在加载")])],1):t._e(),t.loaded&&t.list.length>0?e("v-uni-view",{staticClass:"fui-loading empty"},[e("v-uni-view",{staticClass:"text"},[t._v("没有更多了")])],1):t._e(),t.total<=0&&!t.loading?e("v-uni-view",{staticClass:"fui-loading empty"},[e("v-uni-view",{staticClass:"text"},[t._v("没有数据")])],1):t._e(),t.list.length>0?e("v-uni-view",{staticClass:"fui-footer"},[e("v-uni-view",{staticClass:"tool"},[e("v-uni-view",{staticClass:"check"},[t.isedit?e("v-uni-label",{on:{click:function(i){i=t.$handleEvent(i),t.checkAllClick(i)}}},[e("v-uni-radio",{staticClass:"zoom-80",attrs:{color:"#ef4f4f",checked:!!t.isCheckAll||""}}),e("v-uni-text",[t._v("全选")])],1):t._e()],1),e("v-uni-view",{staticClass:"text"}),e("v-uni-view",{staticClass:"btns"},[t.isedit?t._e():e("v-uni-view",{staticClass:"btn btn-default btn-sm",attrs:{"data-action":"edit"},on:{click:function(i){i=t.$handleEvent(i),t.btnClick(i)}}},[t._v("编辑")]),t.isedit?e("v-uni-view",{class:"btn btn-danger-o btn-sm "+(t.checkNum>0?"":"disabled"),attrs:{"data-action":"delete"},on:{click:function(i){i=t.$handleEvent(i),t.btnClick(i)}}},[t._v("删除")]):t._e(),t.isedit?e("v-uni-view",{staticClass:"btn btn-danger btn-sm",staticStyle:{"margin-left":"20rpx"},attrs:{"data-action":"finish"},on:{click:function(i){i=t.$handleEvent(i),t.btnClick(i)}}},[t._v("完成")]):t._e()],1)],1)],1):t._e()],1):t._e()],1)},s=[],n=e("ca7b"),c=(e("4842"),getApp()),l=c.core,o={extends:n["a"],data:function(){return{icons:getApp().icons,page:1,loading:!1,loaded:!1,isedit:!1,isCheckAll:!1,checkObj:{},checkNum:0,list:[],show:!0,total:l.total}},methods:{getList:function(){var t=this;t.setData({loading:!0}),l.get("member/history/get_list",{page:t.page,openid:getApp().globalData.openid},function(i){var e={loading:!1,loaded:!0,total:i.total,pagesize:i.pagesize,show:!0};i.list.length>0&&(e.page=t.page+1,e.list=t.data.list.concat(i.list),i.list.length<i.pagesize&&(e.loaded=!0)),t.setData(e)})},itemClick:function(t){var i=this,e=l.pdata(t).id,a=l.pdata(t).goodsid;if(i.data.isedit){var s=i.data.checkObj,n=i.data.checkNum;s[e]?(s[e]=!1,n--):(s[e]=!0,n++);var c=!0;for(var o in s)if(!s[o]){c=!1;break}i.setData({checkObj:s,isCheckAll:c,checkNum:n})}else wx.navigateTo({url:"/yb_shop/pages/goods/detail/index?id="+a})},btnClick:function(t){var i=this,e=t.currentTarget.dataset.action;if("edit"==e){var a={};for(var s in this.data.list)a[this.data.list[s].id]=!1;i.setData({isedit:!0,checkObj:a,isCheckAll:!1})}else if("delete"==e){a=i.data.checkObj;var n=[];for(var s in a)a[s]&&n.push(s);if(n.length<1)return;l.confirm("删除后不可恢复，确定要删除吗？",function(){l.post("member/history/remove",{ids:n},function(t){l.toast("删除成功"),i.setData({isedit:!1,checkNum:0}),i.getList()})})}else"finish"==e&&i.setData({isedit:!1,checkNum:0})},checkAllClick:function(){var t=!this.data.isCheckAll,i=this.data.checkObj,e={isCheckAll:t,checkObj:i};for(var a in i)e.checkObj[a]=t;e.checkNum=t?this.data.list.length:0,this.setData(e)}},onLoad:function(){this.getList()},onReachBottom:function(){this.data.loaded||this.data.list.length==this.data.total||this.getList()},onPullDownRefresh:function(){wx.stopPullDownRefresh()}},u=o,r=(e("8e2c"),e("2877")),d=Object(r["a"])(u,a,s,!1,null,"7cef6d16",null);d.options.__file="index.vue";i["default"]=d.exports},d536:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,"\n.fui-list-inner .subtitle[data-v-7cef6d16]{font-size:%?26?%\n}",""])}}]);