(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["yb_shop-pages-member-favorite-index"],{"21e2":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.show?i("v-uni-view",{staticClass:"page footer"},[i("v-uni-view",t._l(t.list,function(e,a){return i("v-uni-view",{key:a},[i("v-uni-view",{staticClass:"del_item"},[i("v-uni-view",{staticClass:"inner txt",style:e.txtStyle,attrs:{"data-index":a},on:{touchstart:function(e){e=t.$handleEvent(e),t.touchS(e)},touchmove:function(e){e=t.$handleEvent(e),t.touchM(e)},touchend:function(e){e=t.$handleEvent(e),t.touchE(e)}}},[i("v-uni-view",{staticClass:"fui-list-group"},[i("v-uni-label",{staticClass:"fui-list",attrs:{"data-goodsid":e.goods.goods_id,"data-id":e.log_id},on:{click:function(e){e=t.$handleEvent(e),t.itemClick(e)}}},[t.isedit?i("v-uni-view",{staticClass:"fui-list-media"},[i("v-uni-radio",{staticClass:"zoom-80",attrs:{color:"#ef4f4f",checked:!!t.checkObj[e.log_id]||""}})],1):t._e(),i("v-uni-view",{staticClass:"fui-list-media02"},[i("v-uni-image",{staticClass:"round",attrs:{src:e.pic.img_cover}})],1),i("v-uni-view",{staticClass:"fui-list-inner"},[i("v-uni-view",{staticClass:"row"},[i("v-uni-view",{staticClass:"subtitle"},[t._v(t._s(e.goods.goods_name))])],1),i("v-uni-view",{staticClass:"subtitle"},[i("v-uni-text",{staticClass:"text-danger",staticStyle:{"font-size":"30rpx"}},[t._v("￥"+t._s(e.goods.price))]),i("v-uni-text",{staticClass:"text-delete",staticStyle:{"padding-left":"10rpx"}})],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"inner del",attrs:{"data-index":a,"data-id":e.log_id},on:{click:function(e){e=t.$handleEvent(e),t.delItem(e)}}})],1)],1)})),t.loading?i("v-uni-view",{staticClass:"fui-loading"},[i("v-uni-view",{staticClass:"icon"})],1):t._e(),t.loaded&&t.list.length>0?i("v-uni-view",{staticClass:"fui-loading empty"},[i("v-uni-view",{staticClass:"text",staticStyle:{background:"#f2f2f2"}},[t._v("没有更多了")])],1):t._e(),""==t.list?i("v-uni-view",{staticClass:"fui-loading empty"},[i("v-uni-view",{staticClass:"text",staticStyle:{background:"#f2f2f2"}},[t._v("没有数据")])],1):t._e(),t.showtabbar?i("v-uni-view",[i("v-uni-view",{staticStyle:{height:"100rpx"}}),i("menu_list",{attrs:{menu:t.menu,tabbar_index:t.tabbar_index}})],1):t._e()],1):t._e()],1)},n=[],s=i("b447"),o=(i("4842"),i("ca7b")),l=getApp(),c=l.core,u={extends:o["a"],data:function(){return{route:"member_favorite",menu:l.tabBar,menu_show:!1,icons:getApp().icons,page:1,loading:!1,isedit:!1,isCheckAll:!1,checkNum:0,loaded:!1,list:[],delBtnWidth:80,show:!0,showtabbar:!1,tabbar_index:0}},components:{menu_list:s["a"]},methods:{menu_url:function(t){c.menu_url(t,2)},getList:function(){var t=this;t.setData({loading:!0}),c.get("user/GetFavorites",{page:t.page,uid:getApp().getCache("userinfo").uid},function(e){var i={loading:!1,show:!0};e.info.length>0&&(i.page=t.page+1,i.list=t.list.concat(e.info),e.info.length<10&&(i.loaded=!0)),t.setData(i)})},btnClick:function(t){var e=this,i=c.pdata(t).action;if("edit"==i){var a={};for(var n in this.list)a[this.list[n].log_id]=!1;e.setData({isedit:!0,checkObj:a,isCheckAll:!1})}else if("delete"==i){a=e.checkObj;var s=[];for(var n in a)a[n]&&s.push(n);if(s.length<1)return;s=s.toString(),c.confirm("删除后不可恢复，确定要删除吗？",function(){c.get("goods/DelFavorites",{log_id:s},function(t){0==t.code?(c.success("删除成功"),e.setData({isedit:!1,checkNum:0,page:1,list:[]}),e.getList()):(c.alert(t.msg),setTimeout(function(){wx.navigateBack()},1e3))})})}else"finish"==i&&e.setData({isedit:!1,checkNum:0})},checkAllClick:function(t){t=!this.isCheckAll;var e=this.checkObj,i={isCheckAll:t,checkObj:e};for(var a in e)i.checkObj[a]=t;i.checkNum=t?this.list.length:0,this.setData(i)},itemClick:function(t){var e=this,i=c.pdata(t).id,a=c.pdata(t).goodsid;if(e.isedit){var n=e.checkObj,s=e.checkNum;n[i]?(n[i]=!1,s--):(n[i]=!0,s++);var o=!0;for(var r in n)if(!n[r]){o=!1;break}console.log(n),e.setData({checkObj:n,isCheckAll:o,checkNum:s})}else wx.navigateTo({url:"/yb_shop/pages/goods/detail/index?id="+a})},touchS:function(t){1==t.touches.length&&this.setData({startX:t.touches[0].clientX})},touchM:function(t){if(1==t.touches.length){var e=t.touches[0].clientX,i=this.startX-e,a=this.delBtnWidth,n="";0==i||i<0?n="left:0px":i>0&&(n="left:-"+i+"px",i>=a&&(n="left:-"+a+"px"));var s=t.currentTarget.dataset.index,o=this.list;o[s].txtStyle=n,this.setData({list:o})}},touchE:function(t){if(console.log(t),1==t.changedTouches.length){var e=t.changedTouches[0].clientX,i=this.startX-e,a=this.delBtnWidth,n=i>a/2?"left:-"+a+"px":"left:0px",s=t.currentTarget.dataset.index,o=this.list;o[s].txtStyle=n,this.setData({list:o})}},getEleWidth:function(t){var e=0;try{var i=wx.getSystemInfoSync().windowWidth,a=375/(t/2);return e=Math.floor(i/a),e}catch(c){return!1}},initEleWidth:function(){var t=this.getEleWidth(this.data.delBtnWidth);this.setData({delBtnWidth:t})},delItem:function(t){var e=this,i=c.data(t).id;c.confirm("是否确认删除该商品?",function(){c.get("goods/DelFavorites",{log_id:i},function(t){0==t.code?(c.success("删除成功"),setTimeout(function(){e.setData({isedit:!1,checkNum:0,page:1,list:[]}),e.getList()},1e3)):c.alert(t.msg)})})}},onLoad:function(t){""==l.getCache("userinfo")&&(r.toast("您还没登录呢"),setTimeout(function(){wx.redirectTo({url:"/yb_shop/pages/index/index"})},2e3)),null!=t&&void 0!=t&&this.setData({tabbar_index:t.tabbar_index?t.tabbar_index:-1}),c.setting();var e=this;getApp().get_menu(function(t){e.menu=getApp().tabBar}),this.tabbar_index>=0&&this.setData({showtabbar:!0}),this.getList()},onReachBottom:function(){this.loaded||this.getList()},onPullDownRefresh:function(){this.getList(),wx.stopPullDownRefresh()}},d=u,f=(i("baf2"),i("2877")),h=Object(f["a"])(d,a,n,!1,null,"efa07c2a",null);h.options.__file="index.vue";e["default"]=h.exports},"2daa":function(t,e,i){var a=i("aa49");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("10b75a9e",a,!0,{sourceMap:!1,shadowMode:!1})},"6c38":function(t,e,i){var a=i("eb95");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("677ab670",a,!0,{sourceMap:!1,shadowMode:!1})},aa49:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'\nuni-page-body[data-v-efa07c2a]{background:#f2f2f2\n}\n.fui-list-inner .subtitle[data-v-efa07c2a]{font-size:%?30?%;color:#444;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;line-height:%?32?%\n}\n.fui-list-media02 uni-image[data-v-efa07c2a]{width:%?150?%;height:%?150?%;margin-right:%?20?%;margin-left:%?0?%\n}\n.del_item[data-v-efa07c2a]{position:relative;height:%?220?%;overflow:hidden\n}\n.inner.del[data-v-efa07c2a]{width:%?160?%;text-align:center;z-index:4;right:0;color:#fff;height:%?206?%;top:%?5?%;line-height:%?206?%;background:url(http://ddfwz.sssvip.net/asmce/yigou/cart_del_icon.png) #e64340 no-repeat 50%;background-size:%?50?% %?50?%;border-top:%?16?% solid #f2f2f2\n}\n.inner[data-v-efa07c2a]{position:absolute;top:0\n}\n.inner.txt[data-v-efa07c2a]{width:100%;z-index:5;-webkit-transition:left .2s ease-in-out;-o-transition:left .2s ease-in-out;transition:left .2s ease-in-out;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis\n}\n.fui-list[data-v-efa07c2a]:before{content:" ";position:absolute;top:0;right:%?20?%;height:0;border-top:%?0?% solid #d9d9d9;-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);left:%?20?%\n}\n.fui-list-group[data-v-efa07c2a]:not(.fui-list-group-o):after{bottom:0;-webkit-transform-origin:0 100%;-ms-transform-origin:0 100%;transform-origin:0 100%;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5)\n}\n.fui-list-group[data-v-efa07c2a]:not(.fui-list-group-o):after,.fui-list-group[data-v-efa07c2a]:not(.fui-list-group-o):before{content:" ";position:absolute;left:0;width:100%;height:0;border-top:%?0?% solid #d9d9d9;color:#d9d9d9\n}\n.fui-list-group[data-v-efa07c2a]:not(.fui-list-group-o):before{top:0;-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5)\n}\nbody.?%PAGE?%[data-v-efa07c2a]{background:#f2f2f2\n}',""])},b447:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"fui-navbar",style:"z-index:99999;background:"+t.menu.bg_color+";"},t._l(t.menu.list,function(e,a){return i("v-uni-view",{class:"nav-item "+(t.route!=e.name||"active"),attrs:{"hover-class":"none","data-key":e.key?e.key:1,"data-appid":e.appid,"data-title":e.title,"data-url":e.url,"data-phone":e.phone,"data-lat":e.lat,"data-lng":e.lng},on:{click:function(e){e=t.$handleEvent(e),t.menu_url(e)}}},[i("v-uni-image",{staticClass:"icon",attrs:{src:a==t.tabbar_index?e.tabbar_select_icon:e.tabbar_icon}}),i("v-uni-view",{staticClass:"label",style:"color:"+(a==t.tabbar_index?t.menu.select_color:t.menu.text_color)},[t._v(t._s(e.name))])],1)}))},n=[],s=i("ca7b"),o={extends:s["a"],props:{menu:{},route:"",tabbar_index:{default:0}}},r=o,l=(i("e9f8"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,"074ab1ac",null);c.options.__file="menu.vue";e["a"]=c.exports},baf2:function(t,e,i){"use strict";var a=i("2daa"),n=i.n(a);n.a},ca7b:function(t,e,i){"use strict";var a,n,s=i("e143"),o={computed:{Vue:function(){return s["default"]}},methods:{setData:function(t){if(t)try{for(var e in t)this[e]=t[e]}catch(i){console.log(i)}},menu_url:function(t){getApp().core.menu_url(t,2)},formSubmit:function(t){var e={currentTarget:{dataset:{}}},i=t.detail.value;e.currentTarget.dataset=i,getApp().core.menu_url(e,1)},isLogin:function(){return!!getApp().getCache("userinfo").uid||(getApp().core.alert("请先登录",function(){wx.redirectTo({url:"/yb_shop/pages/wap/login"})}),!1)}}},r=o,l=i("2877"),c=Object(l["a"])(r,a,n,!1,null,null,null);c.options.__file="Base.vue";e["a"]=c.exports},e9f8:function(t,e,i){"use strict";var a=i("6c38"),n=i.n(a);n.a},eb95:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"",""])}}]);