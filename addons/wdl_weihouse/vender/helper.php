<?php
 class wdlHelper { public function getAccessToken($key, $secret) { goto FiiTW; FiiTW: $ret = pdo_fetch("\163\x65\154\x65\143\164\x20\141\x63\x69\144\40\x66\162\157\155\40" . tablename("\141\x63\x63\157\x75\x6e\x74\x5f\x77\x65\143\150\141\164\x73") . "\40\x77\x68\x65\x72\x65\x20\140\x6b\x65\171\x60\x3d\x27{$key}\x27\x20\x61\x6e\x64\40\163\x65\x63\162\145\x74\x3d\47{$secret}\47\x20\157\x72\x64\x65\x72\40\x62\171\x20\141\143\151\x64\x20\144\x65\163\x63"); goto ncDsB; OVfMr: sDPO3: goto acZTw; osoAr: if (!is_error($content)) { goto X75N_; } goto BDBda; DjIxx: dUYNz: goto SaYPy; zfW13: $cache = cache_load($cachekey); goto mEiYj; hWQpA: MCmLn: goto MIS_j; xn99P: cache_write($cachekey, $record); goto NPMZ9; VErF9: $access_token = $cache; goto XdTju; mEiYj: if (!(!empty($cache) && !empty($cache["\164\157\x6b\x65\x6e"]) && $cache["\145\170\x70\x69\162\145"] > TIMESTAMP)) { goto MCmLn; } goto VErF9; GLvIV: $record["\164\157\153\145\156"] = $token["\141\143\x63\x65\x73\x73\137\x74\157\x6b\x65\156"]; goto ZBzPp; oRu5q: BvwOP: goto jC3vz; NPMZ9: return $record["\164\157\153\145\156"]; goto ZyL6n; ZBzPp: $record["\x65\170\x70\151\162\x65"] = TIMESTAMP + $token["\145\x78\160\x69\x72\145\163\x5f\151\x6e"] - 200; goto xn99P; XdTju: return $access_token["\164\157\x6b\145\x6e"]; goto hWQpA; ncDsB: if ($ret["\141\x63\151\144"]) { goto dUYNz; } goto OHQ1V; UjQCz: $errorinfo = substr($content["\155\145\x74\141"], strpos($content["\155\145\x74\x61"], "\x7b")); goto wjNDa; N8Tqb: B5bFx: goto Eukbu; OHQ1V: $cachekey = "\x77\x65\67\72\141\x63\143\145\x73\163\164\x6f\153\145\x6e\x5f\x77\x64\154\x3a{$key}"; goto lPVbV; lPVbV: goto Fgd17; goto DjIxx; iO5AV: return false; goto N8Tqb; Jqpi1: X75N_: goto txlPd; txlPd: if (!empty($content["\x63\x6f\x6e\x74\x65\156\164"])) { goto BvwOP; } goto Vw5bT; Eukbu: $record = array(); goto GLvIV; jC3vz: $token = @json_decode($content["\x63\157\156\x74\145\x6e\164"], true); goto cW7UR; SaYPy: $cachekey = "\x77\145\x37\72\x61\143\x63\145\163\163\x74\157\x6b\145\156\72{$ret["\x61\143\151\144"]}"; goto Girvb; wjNDa: $errorinfo = @json_decode($errorinfo, true); goto iO5AV; i9QZN: $content = ihttp_get($url); goto osoAr; acZTw: $url = "\150\164\x74\160\x73\72\57\57\141\x70\151\x2e\167\x65\x69\x78\x69\x6e\56\161\x71\56\x63\x6f\x6d\x2f\143\x67\x69\55\142\x69\156\57\164\157\x6b\x65\x6e\77\147\x72\141\156\x74\x5f\164\171\160\x65\x3d\143\154\151\145\x6e\164\137\143\x72\x65\144\x65\156\x74\151\x61\154\x26\141\x70\x70\151\144\75{$key}\46\163\x65\x63\162\145\x74\x3d{$secret}"; goto i9QZN; BDBda: return false; goto Jqpi1; Girvb: Fgd17: goto zfW13; MIS_j: if (!(empty($key) || empty($secret))) { goto sDPO3; } goto WcosS; cW7UR: if (!(empty($token) || !is_array($token) || empty($token["\141\143\x63\145\163\163\137\164\x6f\x6b\x65\x6e"]) || empty($token["\145\170\x70\x69\162\x65\x73\x5f\151\156"]))) { goto B5bFx; } goto UjQCz; WcosS: return false; goto OVfMr; Vw5bT: return false; goto oRu5q; ZyL6n: } }