<?php
 class mnshelper { public $uniacid = 0; public $openid = 0; public function __construct() { goto FHkk8; FHkk8: global $_W, $_GPC; goto H2BlL; H2BlL: $this->uniacid = $_W["\165\x6e\151\x61\x63\x69\144"]; goto dsMgr; dsMgr: $this->openid = $_W["\157\160\145\156\151\144"]; goto YUU6A; YUU6A: } public function saveFormIds($openId, $formIds) { goto xHU25; Y5l1H: $data = json_decode(htmlspecialchars_decode($formIds), TRUE); goto aF_O_; xHU25: if (!$formIds) { goto OHdbZ; } goto Y5l1H; aF_O_: $this->_saveFormIdsArray($openId, $data); goto NvCyW; NvCyW: OHdbZ: goto ksOk7; ksOk7: } private function _get($openId) { goto tcxy7; btvJD: nOWny: goto vx8Ny; vx8Ny: return json_decode($data, TRUE); goto d3q0z; IEwX3: if ($data) { goto nOWny; } goto Dedfy; tcxy7: $data = pdo_fetchcolumn("\x73\x65\x6c\145\x63\x74\40\146\157\162\x6d\151\144\163\x20\x66\x72\x6f\x6d\x20" . tablename("\x6b\142\137\x66\x6f\x72\155\x69\x64\x73") . "\x20\x77\150\x65\x72\145\x20\165\156\x69\x61\143\151\x64\x3d\x27{$this->uniacid}\47\x20\x61\156\x64\40\x6f\x70\x65\x6e\151\144\x3d\47{$openId}\47"); goto IEwX3; d3q0z: UTraz: goto Evmnk; GecnS: goto UTraz; goto btvJD; Dedfy: return FALSE; goto GecnS; Evmnk: } private function _save($openId, $data) { goto qN8s7; YWo9R: db6aZ: goto Cqwbt; BBxm8: BZ9Y8: goto n6BqB; qN8s7: $has = pdo_fetchcolumn("\163\x65\x6c\x65\x63\x74\40\151\144\40\x66\x72\157\155\x20" . tablename("\153\x62\137\146\157\x72\x6d\x69\144\x73") . "\x20\x77\150\145\x72\145\x20\165\x6e\x69\x61\x63\x69\x64\x3d\x27{$this->uniacid}\47\x20\141\156\x64\40\157\x70\x65\156\151\144\75\x27{$openId}\x27"); goto IaeqO; pyYWr: goto db6aZ; goto BBxm8; n6BqB: return pdo_insert("\x6b\x62\137\146\x6f\x72\155\151\144\163", array("\x6f\160\x65\x6e\151\144" => $openId, "\165\x6e\151\x61\x63\x69\144" => $this->uniacid, "\146\x6f\162\x6d\x69\144\x73" => json_encode($data))); goto YWo9R; IaeqO: if (!$has) { goto BZ9Y8; } goto APnDI; APnDI: return pdo_update("\x6b\142\x5f\x66\x6f\162\155\151\144\x73", array("\x66\x6f\162\x6d\151\x64\x73" => json_encode($data)), array("\157\x70\145\156\x69\x64" => $openId, "\165\x6e\x69\141\x63\151\144" => $this->uniacid)); goto pyYWr; Cqwbt: } private function _saveFormIdsArray($openId, $arr) { goto N6X02; cIUmq: $new = array_merge($res, $arr); goto tbhBr; yF6Zd: goto d6TRx; goto xvQYH; pkMu3: if ($res) { goto N3qUL; } goto jD0cZ; xvQYH: N3qUL: goto cIUmq; zKdYz: return $this->_save($openId, $result); goto yF6Zd; tbhBr: return $this->_save($openId, $new); goto P0ZIq; jD0cZ: $result = $arr; goto zKdYz; N6X02: $res = $this->_get($openId); goto pkMu3; P0ZIq: d6TRx: goto ELM18; ELM18: } public function getFormId($openId) { goto d5_BC; fKge4: bSCXV: goto pqeEx; dHY5Q: $result = $res[$i]["\x66\157\x72\x6d\x49\144"]; goto D2JZG; gCY16: return FALSE; goto Oobsf; a_lpK: bbv2g: goto B7dwn; qZQy9: if (count($res)) { goto bSCXV; } goto z6OZA; LUMT6: $this->_save($openId, $newData); goto ldsIz; wOAku: dR7Zk: goto ed7oO; FmBGG: $i = 0; goto u8xzP; u8xzP: KzJE5: goto nw8gH; I_2Ed: JN52p: goto LUMT6; d6Ntr: AIg01: goto qZQy9; z6OZA: return FALSE; goto fKge4; ldsIz: return $result; goto wOAku; pqeEx: $newData = array(); goto ifkNL; j99B1: goto JN52p; goto JnpE5; dinI0: if (!($res[$i]["\145\170\x70\x69\x72\x65"] > time())) { goto fezfU; } goto dHY5Q; lUmvR: $i++; goto a6f8t; Y9Swc: pmQcx: goto lUmvR; nw8gH: if (!($i < count($res))) { goto JN52p; } goto dinI0; Oobsf: goto dR7Zk; goto d6Ntr; pNX3s: $j++; goto Qu5uQ; E2Zje: if ($res) { goto AIg01; } goto gCY16; D2JZG: $j = $i + 1; goto a_lpK; ifkNL: $result = FALSE; goto FmBGG; QQ0XR: array_push($newData, $res[$j]); goto QJbHJ; B7dwn: if (!($j < count($res))) { goto o7Ybg; } goto QQ0XR; QJbHJ: Goz4U: goto pNX3s; a6f8t: goto KzJE5; goto I_2Ed; JnpE5: fezfU: goto Y9Swc; d5_BC: $res = $this->_get($openId); goto E2Zje; Qu5uQ: goto bbv2g; goto yJTpY; yJTpY: o7Ybg: goto j99B1; ed7oO: } }