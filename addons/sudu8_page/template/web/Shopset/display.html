{template 'web/common/header'}
<style>
.form-control{
    display: inline-block;
}
</style>
<div class="page">
    <div class="page_content">
        <form class="form-horizontal" action="" method="post">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">小程序设置</h3>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">appId</label>
                        <div class="form-controls col-sm-5">
                            <input type="text" name="key" id="key" value="{$wxapp['key']}" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="" autocomplete="off">
                        </div>
                        <div class="col-sm-1"></div>
                        <div class="form-controls col-sm-3 help-block"></div>
                    </div>
                    <div class="form-group">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">appSecret</label>
                        <div class="form-controls col-sm-5">
                            <input type="text" name="secret" id="secret" value="{$wxapp['secret']}" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="" autocomplete="off">
                        </div>
                        <div class="col-sm-1"></div>
                        <div class="form-controls col-sm-3 help-block"></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">支付设置</h3>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">商户号</label>
                        <div class="form-controls col-sm-4">
                            <input type="text" name="mchid" id="mchid" value="{$datas['mchid']}" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="" autocomplete="off">
                        </div>
                        <div class="col-sm-1"></div>
                        <div class="form-controls col-sm-3 help-block">商户号</div>
                    </div>
                    <div class="form-group">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">微信支付秘钥</label>
                        <div class="form-controls col-sm-4">
                            <input type="text" name="signkey" id="signkey" value="{$datas['signkey']}" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="" autocomplete="off">
                        </div>
                        <div class="col-sm-1"></div>
                        <div class="form-controls col-sm-3 help-block">支付秘钥</div>
                    </div>
                    <div class="form-group" id="sub_mchids" style="{if $datas['identity']==2}display: block;{else}display: none{/if}">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">子商户号</label>
                        <div class="form-controls col-sm-4">
                            <input type="text" name="sub_mchid" id="sub_mchid" value="{$datas['sub_mchid']}" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="" autocomplete="off">
                        </div>
                        <div class="col-sm-1"></div>
                        <div class="form-controls col-sm-3 help-block">商户号</div>
                    </div>

                    <div class="form-group">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">企业付款设置(apiclient_cert.pem)</label>
                        <div class="form-controls col-sm-5"  style="position: relative;">
                            <textarea name="certtext" class="form-control" rows="10">{$certkey['certtext']}</textarea>
                            <div class="hidetext" style="width: 100%;height: 100%;position: absolute;left: 0;top:0;border:1px solid #eee;padding: 10px;box-sizing: border-box;background: #fff;color:#aaa">已隐藏内容，点击查看或编辑</div>
                        </div>
                        <div class="form-controls col-sm-3 help-block" style="margin-left: 45px">可暂不填，使用文本编辑器打开apiclient_cert.pem文件，将文件的全部内容复制进来</div>
                    </div>

                    <div class="form-group">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">企业付款设置(apiclient_key.pem)</label>
                        <div class="form-controls col-sm-5">
                            <textarea name="keytext" class="form-control" rows="10">{$certkey['keytext']}</textarea>
                            <div class="hidetext" style="width: 100%;height: 100%;position: absolute;left: 0;top:0;border:1px solid #eee;padding: 10px;box-sizing: border-box;background: #fff;color:#aaa">已隐藏内容，点击查看或编辑</div>
                        </div>
                        <div class="form-controls col-sm-3 help-block" style="margin-left: 45px">可暂不填，使用文本编辑器打开apiclient_key.pem文件，将文件的全部内容复制进来</div>
                    </div>

                    <!-- <div class="form-group">
                        <label for="" class="control-label col-sm-2" style="margin-right:45px">企业付款设置(rootca.pem)</label>
                        <div class="form-controls col-sm-8">
                            <textarea name="catext" class="form-control" rows="10">{$item['catext']}</textarea>
                        </div>
                    </div> -->
                </div>
            </div>
            <script>
                function identitys(i){
                    if(i==1){
                        $("#sub_mchids").hide();
                    }else if(i==2){
                        $("#sub_mchids").show();
                    }
                }
            </script>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">全局参数配置</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">文章评论</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="commA" value="1" {if $item['commA'] == '1'} checked{/if} />开启
                    </label>
                    <label class="select_one">
                        <input type="radio" name="commA" value="0" {if $item['commA'] == '0'} checked{/if} />不开启
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block" style="padding-top: 1px">可在每篇文章中单独控制</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">文章评论审核</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="commAs" value="1" {if $item['commAs'] == '1'} checked{/if} />审核后显示
                    </label>
                    <label class="select_one">
                        <input type="radio" name="commAs" value="0" {if $item['commAs'] == '0'} checked{/if} />直接显示
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block" style="padding-top: 1px">可在每篇文章中单独控制</div>
            </div>
            <div class="line"></div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">商品评论</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="commP" value="1" {if $item['commP'] == '1'} checked{/if} />开启
                    </label>
                    <label class="select_one">
                        <input type="radio" name="commP" value="0" {if $item['commP'] == '0'} checked{/if} />不开启
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block" style="padding-top: 1px">可在单个商品中单独控制</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">商品评论审核</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="commPs" value="1" {if $item['commPs'] == '1'} checked{/if} />审核后显示
                    </label>
                    <label class="select_one">
                        <input type="radio" name="commPs" value="0" {if $item['commPs'] == '0'} checked{/if} />直接显示
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block" style="padding-top: 1px">可在单个商品中单独控制</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">分享按钮是否显示</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="share_open" value="1" {if $item['share_open'] == '1'} checked{/if} />显示
                    </label>
                    <label class="select_one">
                        <input type="radio" name="share_open" value="0" {if $item['share_open'] == '0'} checked{/if} />不显示
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">ios虚拟支付</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="ios" value="1" {if $item['ios'] == '1'} checked{/if} />开启
                    </label>
                    <label class="select_one">
                        <input type="radio" name="ios" value="0" {if $item['ios'] == '0'} checked{/if} />关闭
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block" style="padding-top: 1px">付费文章、音频、视频虚拟支付，默认关闭</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">微信好物圈</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="hwq" value="1" {if $item['hwq'] == '1'} checked{/if} />开启
                    </label>
                    <label class="select_one">
                        <input type="radio" name="hwq" value="0" {if $item['hwq'] == '0'} checked{/if} />关闭
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block" style="padding-top: 1px">微信小程序好物圈，启用后订单、收藏商品将显示到购买用户好物圈中</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">充值按钮</label>
                <div class="form-controls col-sm-5" style="margin-top: 6px;">
                    <label class="select_one">
                        <input type="radio" name="recharge" value="1" {if $item['recharge'] == '1'} checked{/if} />开启
                    </label>
                    <label class="select_one">
                        <input type="radio" name="recharge" value="2" {if $item['recharge'] == '2'} checked{/if} />关闭
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block" style="padding-top: 1px">个人中心充值按钮，默认关闭</div>
            </div>

            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">多规格商品折扣价显示</label>
                <div class="form-controls col-sm-5">
                    <label style="margin-right: 20px;margin-top: 7px;">
                        <input type="radio" name="vip_discount" value="1" {if $item['vip_discount'] == '1'}checked{/if}/>
                        开启
                    </label>
                    <label style="margin-right: 20px;margin-top: 7px;">
                        <input type="radio" name="vip_discount" value="0" {if $item['vip_discount']}{if $item['vip_discount'] == '0'}checked{/if}{else}checked{/if}/>
                        关闭
                    </label>
                </div>
            </div>
            <div class="form-group vipPrice" style="display: {if $item['vip_discount'] == 1 && $item['discount_name'] >= 0}block{else}none{/if};">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">折扣价名称显示</label>
                <select name="discount_name" id="price_vip" class="form-control" style="width: 200px;display: inline-block;font-size: 14px" onchange="chgv(this)">
                    <option value="0" {if $item['discount_name']==0}selected="true"{/if}>会员价</option>
                    <option value="1" {if $item['discount_name']==1}selected="true"{/if}>实付</option>
                    <option value="2" {if $item['discount_name']==2}selected="true"{/if}>自定义</option>
                </select>
                <input type="text" class="form-control ng-pristine ng-untouched ng-valid ng-empty" name="discount_name_custom" id="discount_name_custom" value="{$item['discount_name_custom']}" style="display: {if $item['discount_name'] == 2}inline-block{else}none{/if};width: 200px;font-size: 14px;margin-left: 40px;padding: 4px;">
            </div>
            <div class="form-group vipPrice" style="display: {if $item['vip_discount'] == 1 && $item['market_name'] >= 0}block{else}none{/if};">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">市场价名称显示</label>
                <select name="market_name" id="market_name" class="form-control" style="width: 200px;display: inline-block;font-size: 14px" onchange="chgm(this)">
                    <option value="0" {if $item['market_name']==0}selected="true"{/if}>市场价</option>
                    <option value="1" {if $item['market_name']==1}selected="true"{/if}>官网价</option>
                    <option value="2" {if $item['market_name']==2}selected="true"{/if}>自定义</option>
                </select>
                <input type="text" class="form-control ng-pristine ng-untouched ng-valid ng-empty" name="market_name_custom" id="market_name_custom" value="{$item['market_name_custom']}" style="display: {if $item['market_name'] == 2}inline-block{else}none{/if};width: 200px;font-size: 14px;margin-left: 40px;padding: 4px;">
            </div>
        </div>
    </div>
            <div class="form-group">
                <div class="col-sm-12">
                    <input name="token" type="hidden" value="{$_W['token']}" />
                    <input type="submit" class="btn btn-primary col-lg-1" name="submit" value="提交" />
                </div>
            </div>
        </form>

    </div>

</div>
<script type="text/javascript">
    $('.hidetext').click(function(){
        $(this).hide();
    })
    $('input[name="vip_discount"]').each(function(){
        $(this).click(function(){
            if($(this).val()==1){
                $('.vipPrice').show()
            }else{
                $('.vipPrice').hide()
            }
        })
    })
    function chgv(obj)
    {
        if(obj.options[obj.selectedIndex].value =="2")
        document.getElementById("discount_name_custom").style.display="";
        else
        document.getElementById("discount_name_custom").style.display="none";
    }
    function chgm(obj)
    {
        if(obj.options[obj.selectedIndex].value =="2")
        document.getElementById("market_name_custom").style.display="";
        else
        document.getElementById("market_name_custom").style.display="none";
    }
</script>
