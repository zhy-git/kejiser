<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{php if(isset($title)) $_W['page']['title'] = $title}{if !empty($_W['page']['title'])}{$_W['page']['title']}{/if}{if empty($_W['page']['copyright']['sitename'])}{if IMS_FAMILY != 'x'}{if !empty($_W['page']['title'])} - {/if}微擎 - 公众平台自助引擎 -  Powered by WE7.CC{/if}{else}{if !empty($_W['page']['title'])} - {/if}{$_W['page']['copyright']['sitename']}{/if}</title>
<meta name="keywords" content="{if empty($_W['page']['copyright']['keywords'])}{if IMS_FAMILY != 'x'}微擎,微信,微信公众平台,we7.cc{/if}{else}{$_W['page']['copyright']['keywords']}{/if}"/>
<meta name="description" content="{if empty($_W['page']['copyright']['description'])}{if IMS_FAMILY != 'x'}公众平台自助引擎（www.we7.cc），简称微擎，微擎是一款免费开源的微信公众平台管理系统，是国内最完善移动网站及移动互联网技术解决方案。{/if}{else}{$_W['page']['copyright']['description']}{/if}"/>
<link rel="shortcut icon" href="{if !empty($_W['setting']['copyright']['icon'])}{$_W['attachurl']}{$_W['setting']['copyright']['icon']}{else}./resource/images/favicon.ico{/if}"/>
<link href="{$_W['siteroot']}web/resource/css/bootstrap.min.css?v=20170426" rel="stylesheet">
<link href="{$_W['siteroot']}web/resource/css/common.css?v=20170426" rel="stylesheet">
<link rel="stylesheet" href="{MODULE_URL}static/css/web-icons/web-icons.css">
<script type="text/javascript">
        if(navigator.appName == 'Microsoft Internet Explorer'){
            if(navigator.userAgent.indexOf("MSIE 5.0")>0 || navigator.userAgent.indexOf("MSIE 6.0")>0 || navigator.userAgent.indexOf("MSIE 7.0")>0) {
                alert('您使用的 IE 浏览器版本过低, 推荐使用 Chrome 浏览器或 IE8 及以上版本浏览器.');
            }
        }
        window.sysinfo = {
        {if !empty($_W['uniacid'])}'uniacid': '{$_W['uniacid']}',{/if}
        {if !empty($_W['acid'])}'acid': '{$_W['acid']}',{/if}
        {if !empty($_W['openid'])}'openid': '{$_W['openid']}',{/if}
        {if !empty($_W['uid'])}'uid': '{$_W['uid']}',{/if}
        'isfounder': {if !empty($_W['isfounder'])}1{else}0{/if},
            'family': '{IMS_FAMILY}',
                'siteroot': '{$_W['siteroot']}',
                'siteurl': '{$_W['siteurl']}',
                'attachurl': '{$_W['attachurl']}',
                'attachurl_local': '{$_W['attachurl_local']}',
                'attachurl_remote': '{$_W['attachurl_remote']}',
                'module' : {'url' : '{if defined('MODULE_URL')}{MODULE_URL}{/if}', 'name' : '{if defined('IN_MODULE')}{IN_MODULE}{/if}'},
            'cookie' : {'pre': '{$_W['config']['cookie']['pre']}'},
            'account' : {php echo json_encode($_W['account'])},
            'server' : {'php' : '{php echo phpversion()}'},
        };
    </script>
<script>var require = { urlArgs: 'v=20170426' };</script>
<script type="text/javascript" src="{$_W['siteroot']}web/resource/js/lib/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="{$_W['siteroot']}web/resource/js/lib/bootstrap.min.js"></script>
<script type="text/javascript" src="{$_W['siteroot']}web/resource/js/app/util.js?v=20170426"></script>
<script type="text/javascript" src="{$_W['siteroot']}web/resource/js/app/common.min.js?v=20170426"></script>
<script type="text/javascript" src="{$_W['siteroot']}web/resource/js/require.js?v=20170426"></script>
</head>
<style>
*{box-sizing: content-box;}
.input-icon.left i{    color: #ccc;
    display: block!important;
    position: absolute!important;
    z-index: 1;
    margin: 8px 2px 4px 12px;
    text-align: center;}
html,body{height: 100%;font-size: 14px;
    line-height: 1.42857143;position: relative;}
.login {
    height: 100%;
}
.login .logo {
  width: 247px;
  margin: 0 auto;   
  margin-top:60px;
  padding: 15px;
  text-align: center;
}  
.login .content {
  background-color: rgba(0,0,0,0.28);
  width: 290px;
  margin: 0 auto;
  padding: 30px;
  box-shadow: 0px 0px 6px -1px #3a3a3a;
  border-radius:10px !important;
}
.login .content h3 {
  color: #dcdcdc;    line-height: 40px;
}
.login .content h4  {
  color: #555;
}
.login .content p {
  color: #222;
}
.login .content .login-form,
.login .content .forget-form {
    padding: 0px;
    margin: 0px;
}
.visible-ie8 {
    display: none;
}
.login .content .input-icon {
}
.login .content .control-group {
  margin-bottom: 20px !important;
}
.login .content .input-icon .m-wrap {  
  margin: 0px !important;
    -webkit-appearance: none!important;
    width: 249px;
    padding-left: 33px!important;
    color: #eee;
    outline: 0;
    height: 20px;
    padding: 6px!important;
    padding-left: 33px!important;
    line-height: 20px;
    font-size: 14px;
    font-weight: 400;
    vertical-align: top;
    background:transparent;;
    filter: none!important;
    box-shadow: none!important;
    border-radius:3px;
  border: 1px solid #2d303e;transition: border linear .2s,box-shadow linear .2s;
}
.login .content .forget-form {
  display: none;
}
.login .content .register-form {
  display: none;
}
.login .content .form-title {
  font-weight: 300;
  text-align: center;
  margin: 0;
}
.login .content .form-actions {
  clear: both;
  border: 0px;
  padding: 0px 30px 25px 30px;
  margin-left: -30px;
  margin-right: -30px;
  margin-top: 20px;
    margin-bottom: 20px;display: block;    overflow: hidden;
}
.login .content .forget-form .form-actions {
  border: 0;
  margin-bottom: 0;
  padding-bottom: 20px;
}  
.login .content .register-form .form-actions {
  border: 0;
  margin-bottom: 0;
  padding-bottom: 0px;
}
.login .content .form-actions .checkbox {
  margin-top: 8px;
  display: inline-block;
}
.login .content .form-actions .btn {
  margin-top: 1px;
}
.login .content .forget-password {
  margin-top: 25px;
}
.login .content .create-account {
  border-top: 1px dotted #eee;
  padding-top: 10px;
  margin-top: 15px;
}
.login .content .create-account a {
  display: inline-block;
  margin-top: 5px;
}
.login .copyright {
  text-align: center;
  width: 250px;
  margin: 0 auto; 
  padding: 10px 10px 0 10px;
  color: #999;
  font-size: 11px;
}
@media (max-width: 480px) {
  /***
  Login page
  ***/
  .login .logo {
    margin-top:10px;
  }
  .login .content {
    padding: 30px; 
    width: 222px;
  }
  .login .content h3 {
    font-size: 22px;
  }
  .login .content .m-wrap {
      width: 180px;
  }
  .login .checkbox {
    font-size: 13px;
  }
}
</style>
<body class="login" onkeydown="jianting()" style="overflow: hidden;">
<div style="padding-top:10%;overflow:hidden;position:absolute;left: 0;top: 0;width: 100%;z-index: 1">
<div class="content">
    <form class="form-vertical login-form" id="form1" name="Form1" action="" method="post">
        <h3 class="form-title">商家管理系统</h3>
        <h4 style="font-size: 12px;margin-bottom: 23px;color: #3e3e3e;text-align: center; margin-top: 0;">Business Management System</h4>
        <div class="alert alert-error hide">
            <button class="close" data-dismiss="alert"></button>
            <span>请检查您的用户名或者密码.</span>
        </div>
        <div class="control-group">
            <label class="control-label visible-ie8 visible-ie9">用户名</label>
            <div class="controls">
                <div class="input-icon left">
                    <i class="wb-user"></i>
                    <input class="m-wrap placeholder-no-fix" type="text" placeholder="用户名" name="username2" id="username2" style="width:1px;height: 0;border: 0;padding: 0 !important;margin: 0 !important;line-height: 0"/>
                    <input class="m-wrap placeholder-no-fix" type="text" placeholder="用户名" name="username" id="username"/>
                    <input class="m-wrap placeholder-no-fix" type="text" placeholder="用户名" name="username3" id="username3" style="width:1px;height: 0;border: 0;padding: 0 !important;margin: 0 !important;line-height: 0"/>
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label visible-ie8 visible-ie9">密码</label>
            <div class="controls">
                <div class="input-icon left">
                    <i class="wb-lock"></i>
                    <input class="m-wrap placeholder-no-fix" type="password" placeholder="密码" name="password2" id="password2" style="width: 1px;height: 0;border: 0;padding: 0 !important;margin: 0 !important;line-height: 0"/>
                    <input class="m-wrap placeholder-no-fix" type="password" placeholder="密码" name="password" id="password"/>
                </div>
            </div>
        </div>
        <input name="token" value="{$_W['token']}" type="hidden"/>
        <div class="form-actions">
            <button type="submit" name="login" id="login" class="btn green pull-right" style="border: 1px solid #605AB0;background: transparent;color: #fff;">
                登录 
            <i class="m-icon-swapright m-icon-white"></i>
            </button>
        </div>
    </form>
    <div style="text-align:center; color:#888888">
            小程序管理系统欢迎您!
    </div>
</div>
</div>
<div style="background: url(../addons/sudu8_page/static/img/bg2.jpg);position:absolute;left: 0;top: 0;width: 100%;height: 100%;opacity: 0.4;"></div>
<canvas style="position:absolute;left: 0;top: 0;z-index: -1" id="canvas"></canvas>
<script>
        function jianting(e){
            var keyid = event.keyCode;
            if(keyid==13){
                event.returnValue=false;
                event.cancel = true;
                Form1.btnsubmit.click();
            }
        }
        function checkinfo(){
            var username = $("#username").val();
            var password = $("#password").val();
            if(!username){
                alert("用户名不能为空！");
                $("#username").focus();
                return false;
            }
            if(!password){
                alert("密码不能为空！");
                $("#password").focus();
                return false;
            }
        }
    $(document).ready(function(){
    $("#form1").submit(function (e) {
        e.preventDefault();
        var username = $('#username').val();
        var password = $('#password').val();
        $.ajax({
            url : "/web/bizlogin.php?op=login",
            type:"POST",
            dataType:'json',
            data:{
                username: username,
                password: password
            },
            success:function (res) {
                // alert(res.code);
                if(res.code == 1){
                    alert(res.message);
                    window.location.href="bizlogin.php";
                }else{
                    alert('登录失败');
                }
            },
            fail: function(err){
                alert(err.message);
            }
        });
    });
    })
//宇宙特效
var suiji = parseInt(Math.random()*(380-150+1)+150,10);
"use strict";
var canvas = document.getElementById('canvas'),
  ctx = canvas.getContext('2d'),
  w = canvas.width = window.innerWidth,
  h = canvas.height = window.innerHeight,

  hue = suiji,
  stars = [],
  count = 0,
  maxStars =226;//星星数量

var canvas2 = document.createElement('canvas'),
  ctx2 = canvas2.getContext('2d');
canvas2.width = 50;
canvas2.height = 50;
var half = canvas2.width / 2,
  gradient2 = ctx2.createRadialGradient(half, half, 0, half, half, half);
gradient2.addColorStop(0.025, '#CCC');
gradient2.addColorStop(0.1, 'hsl(' + hue + ', 61%, 33%)');
gradient2.addColorStop(0.25, 'hsl(' + hue + ', 64%, 6%)');
gradient2.addColorStop(1, 'transparent');

ctx2.fillStyle = gradient2;
ctx2.beginPath();
ctx2.arc(half, half, half, 0, Math.PI * 2);
ctx2.fill();

// End cache

function random(min, max) {
  if (arguments.length < 2) {
    max = min;
    min = 0;
  }

  if (min > max) {
    var hold = max;
    max = min;
    min = hold;
  }

  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function maxOrbit(x, y) {
  var max = Math.max(x, y),
    diameter = Math.round(Math.sqrt(max * max + max * max));
  return diameter / 2;
  //星星移动范围，值越大范围越小，
}

var Star = function() {

  this.orbitRadius = random(maxOrbit(w, h));
  this.radius = random(60, this.orbitRadius) / 8; 
  //星星大小
  this.orbitX = w / 2;
  this.orbitY = h / 2;
  this.timePassed = random(0, maxStars);
  this.speed = random(this.orbitRadius) / 200000; 
  //星星移动速度
  this.alpha = random(2, 10) / 10;

  count++;
  stars[count] = this;
}

Star.prototype.draw = function() {
  var x = Math.sin(this.timePassed) * this.orbitRadius + this.orbitX,
    y = Math.cos(this.timePassed) * this.orbitRadius + this.orbitY,
    twinkle = random(10);

  if (twinkle === 1 && this.alpha > 0) {
    this.alpha -= 0.05;
  } else if (twinkle === 2 && this.alpha < 1) {
    this.alpha += 0.05;
  }

  ctx.globalAlpha = this.alpha;
  ctx.drawImage(canvas2, x - this.radius / 2, y - this.radius / 2, this.radius, this.radius);
  this.timePassed += this.speed;
}

for (var i = 0; i < maxStars; i++) {
  new Star();
}

function animation() {
  ctx.globalCompositeOperation = 'source-over';
  ctx.globalAlpha = 0.5; //尾巴
  ctx.fillStyle = 'hsla(' + hue + ', 64%, 6%, 2)';
  ctx.fillRect(0, 0, w, h)

  ctx.globalCompositeOperation = 'lighter';
  for (var i = 1, l = stars.length; i < l; i++) {
    stars[i].draw();
  };

  window.requestAnimationFrame(animation);
}

animation();
    </script>
</body>
</html>